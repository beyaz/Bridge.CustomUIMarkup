/**
 * @version 1.0.0.0
 * @copyright Copyright Â©  2017
 * @compiler Bridge.NET 16.6.0
 */
Bridge.assembly("Bridge.CustomUIMarkup", function ($asm, globals) {
    "use strict";

    Bridge.define("Bridge.CustomUIMarkup.Common.AsyncAjax", {
        inherits: [Bridge.IPromise],
        statics: {
            methods: {
                Post: function (url, data, onError) {
                    var $step = 0,
                        $task1, 
                        $taskResult1, 
                        $jumpFromFinally, 
                        $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                        $returnValue, 
                        promise, 
                        $t, 
                        resultHandler, 
                        errorHandler, 
                        task, 
                        $async_e, 
                        $asyncBody = Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    $step = System.Array.min([0,1], $step);
                                    switch ($step) {
                                        case 0: {
                                            if (onError === void 0) { onError = null; }
                                            promise = ($t = new Bridge.CustomUIMarkup.Common.AsyncAjax(), $t.Url = url, $t.Data = data, $t);
                                            resultHandler = function (request) {
                                                return request.ResponseText;
                                            };

                                            errorHandler = function (me) {
                                                !Bridge.staticEquals(onError, null) ? onError(me._error) : null;
                                            };

                                            task = System.Threading.Tasks.Task.fromPromise(promise, resultHandler, errorHandler);

                                            $task1 = task;
                                            $step = 1;
                                            $task1.continueWith($asyncBody);
                                            return;
                                        }
                                        case 1: {
                                            $taskResult1 = $task1.getAwaitedResult();
                                            $tcs.setResult(task.getResult());
                                            return;
                                        }
                                        default: {
                                            $tcs.setResult(null);
                                            return;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                $tcs.setException($async_e);
                            }
                        }, arguments);

                    $asyncBody();
                    return $tcs.task;
                }
            }
        },
        fields: {
            _error: null,
            ResponseText: null,
            Data: null,
            Url: null
        },
        alias: ["then", "Bridge$IPromise$then"],
        methods: {
            then: function (fulfilledHandler, errorHandler, progressHandler) {
                if (progressHandler === void 0) { progressHandler = null; }
                $.ajax({ type: "POST", url: this.Url, data: this.Data, async: true, success: Bridge.fn.bind(this, function (o, s, arg3) {
                    this.ResponseText = arg3.responseText;
                    fulfilledHandler.call(null, this);
                }), error: Bridge.fn.bind(this, function (jqXhr, status, errror) {
                    Bridge.CustomUIMarkup.Common.Trace.OperationWasCanceled("@POST:" + (this.Url || ""), "Ajax Error Occured.");

                    Bridge.CustomUIMarkup.Common.Trace.Log(jqXhr);

                    this._error = "@status:" + (status || "") + " @errror:" + (errror || "");

                    Bridge.CustomUIMarkup.Common.Trace.Log(this._error);

                    errorHandler.call(null, this);
                }) });
            }
        }
    });

    /** @namespace Bridge.CustomUIMarkup.Common */

    /**
     * Utility methods for casting operations
     *
     * @static
     * @abstract
     * @public
     * @class Bridge.CustomUIMarkup.Common.ConvertHelper
     */
    Bridge.define("Bridge.CustomUIMarkup.Common.ConvertHelper", {
        statics: {
            props: {
                FormatProvider: {
                    get: function () {
                        return System.Globalization.CultureInfo.getCurrentCulture();
                    }
                }
            },
            methods: {
                ChangeType: function (value, targetType) {
                    return Bridge.CustomUIMarkup.Common.ConvertHelper.ChangeType$1(value, targetType, Bridge.CustomUIMarkup.Common.ConvertHelper.FormatProvider);
                },
                ChangeType$1: function (value, targetType, provider) {
                    if (targetType == null) {
                        throw new System.ArgumentNullException("targetType");
                    }

                    if (value == null) {
                        if (Bridge.Reflection.isClass(targetType) || System.Nullable.getUnderlyingType(targetType) != null) {
                            return null;
                        }

                        throw new System.InvalidOperationException(System.String.concat("@value:null can not converted to @targetType:", Bridge.getTypeName(targetType)));
                    }

                    if (Bridge.referenceEquals(Bridge.getType(value), targetType) || Bridge.Reflection.isInstanceOfType(value, targetType)) {
                        return value;
                    }

                    var underlyingType = System.Nullable.getUnderlyingType(targetType);
                    if (underlyingType != null) {
                        targetType = underlyingType;
                    }

                    if (Bridge.referenceEquals(targetType, System.Boolean)) {
                        return Bridge.box(System.Convert.toBoolean(value, provider), System.Boolean, System.Boolean.toString);
                    }
                    if (Bridge.referenceEquals(targetType, System.Char)) {
                        return Bridge.box(System.Convert.toChar(value, provider, 1), System.Char, String.fromCharCode, System.Char.getHashCode);
                    }
                    if (Bridge.referenceEquals(targetType, System.SByte)) {
                        return Bridge.box(System.Convert.toSByte(value, provider), System.SByte);
                    }
                    if (Bridge.referenceEquals(targetType, System.Byte)) {
                        return Bridge.box(System.Convert.toByte(value, provider), System.Byte);
                    }
                    if (Bridge.referenceEquals(targetType, System.Int16)) {
                        return Bridge.box(System.Convert.toInt16(value, provider), System.Int16);
                    }
                    if (Bridge.referenceEquals(targetType, System.UInt16)) {
                        return Bridge.box(System.Convert.toUInt16(value, provider), System.UInt16);
                    }
                    if (Bridge.referenceEquals(targetType, System.Int32)) {
                        return Bridge.box(System.Convert.toInt32(value, provider), System.Int32);
                    }
                    if (Bridge.referenceEquals(targetType, System.UInt32)) {
                        return Bridge.box(System.Convert.toUInt32(value, provider), System.UInt32);
                    }
                    if (Bridge.referenceEquals(targetType, System.Int64)) {
                        return System.Convert.toInt64(value, provider);
                    }
                    if (Bridge.referenceEquals(targetType, System.UInt64)) {
                        return System.Convert.toUInt64(value, provider);
                    }
                    if (Bridge.referenceEquals(targetType, System.Single)) {
                        return Bridge.box(System.Convert.toSingle(value, provider), System.Single, System.Single.format, System.Single.getHashCode);
                    }
                    if (Bridge.referenceEquals(targetType, System.Double)) {
                        return Bridge.box(System.Convert.toDouble(value, provider), System.Double, System.Double.format, System.Double.getHashCode);
                    }
                    if (Bridge.referenceEquals(targetType, System.Decimal)) {
                        return System.Convert.toDecimal(value, provider);
                    }
                    if (Bridge.referenceEquals(targetType, System.DateTime)) {
                        return Bridge.box(System.Convert.toDateTime(value, provider), System.DateTime, System.DateTime.format);
                    }
                    if (Bridge.referenceEquals(targetType, System.String)) {
                        return System.Convert.toString(value, provider);
                    }
                    if (Bridge.referenceEquals(targetType, System.Object)) {
                        return value;
                    }

                    throw new System.InvalidOperationException(System.String.concat(System.String.concat("@value:", value) + " can not converted to @targetType:", Bridge.getTypeName(targetType)));
                },
                To: function (TTargetType, value) {
                    return Bridge.cast(Bridge.unbox(Bridge.CustomUIMarkup.Common.ConvertHelper.ChangeType(value, TTargetType)), TTargetType);
                }
            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup.Common.Extensions", {
        statics: {
            methods: {
                GetOriginalLineNumber: function (element, xmlRootNode, sContent) {
                    // https://jsfiddle.net/g113c350/3/

                    

    var sTagName = element.tagName;
    var aNodeListByTag = xmlRootNode.getElementsByTagName(sTagName);
    var iMaxIndex = 0;
    for (var j = 0; j < aNodeListByTag.length; j++) {
        if (aNodeListByTag.item(j) === element) {
            iMaxIndex = j;
            break;
        }
    }
    var regex = new RegExp('<' + sTagName, 'g');
    var offset = 0;
    for (var i = 0; i <= iMaxIndex; i++) {
        offset = regex.exec(sContent).index;
    }
    var line = 0;
    for (var i = 0; i < sContent.substring(0, offset).length; i++) {
        if (sContent[i] === '\n') {
            line++;
        }
    }
    return line + 1;



                    return 0;
                },
                GetElementsByTagNameIsNotSupporting: function (element) {
                    return element.getElementsByTagName === undefined;
                },
                IsNullOrWhiteSpace: function (value) {
                    return System.String.isNullOrWhiteSpace(value);
                },
                RemoveFromParent: function (query) {
                    query != null ? query.remove() : null;

                    return query;
                },
                highlight: function (el) {
                    var oldColor = el.css("background-color");
                    var opacity = el.css("opacity");


                    el.css("background-color", "#ffff99");
                    el.css("opacity", 0.9);

                    window.setTimeout(function () {
                        el.css("background-color", oldColor);
                        el.css("opacity", opacity);
                    }, 600);





                    return el;
                },
                SetFirstChild: function (query, childElement) {
                    var children = query != null ? query.children() : null;
                    if (children == null || children.length === 0) {
                        childElement.appendTo(query);
                        return query;
                    }

                    childElement.insertBefore(children.first());

                    return query;
                },
                SetLastChild: function (query, childElement) {
                    var children = query != null ? query.children() : null;
                    if (children == null || children.length === 0) {
                        childElement.appendTo(query);
                        return query;
                    }

                    childElement.insertAfter(children.last());

                    return query;
                },
                Foreach: function (query, action) {
                    query != null ? query.children().each(function (e, i) {
                        action($(Bridge.box(e, System.Int32)));
                    }) : null;

                    return query;
                },
                SetClass: function (query, newClassName) {
                    query.attr("class", newClassName);

                    return query;
                }
            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup.Common.FileUtil", {
        statics: {
            methods: {
                ReadAsync: function (url, success) {
                    $.ajax({ async: false, url: url, success: function (o, s, arg3) {
                        success(arg3.responseText);
                    } });
                }
            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup.Common.ScriptLoader", {
        statics: {
            methods: {
                LoadCssFile: function (url) {
                    $("head").append("<link rel='stylesheet' href='" + (url || "") + "' type='text/css' />");
                },
                LoadCssFiles: function (css) {
                    var $t;
                    $t = Bridge.getEnumerator(css, System.String);
                    try {
                        while ($t.moveNext()) {
                            var url = $t.Current;
                            Bridge.CustomUIMarkup.Common.ScriptLoader.LoadCssFile(url);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }}
            }
        },
        fields: {
            index: 0,
            OnLoacCompleted: null,
            Scripts: null
        },
        methods: {
            Load: function () {
                if (this.Scripts == null) {
                    return;
                }

                if (this.index >= System.Array.getCount(this.Scripts, System.String)) {
                    this.OnLoacCompleted();
                    return;
                }

                $.getScript(System.Array.getItem(this.Scripts, this.index, System.String), Bridge.fn.bind(this, function (a, b, c) {
                    this.index = (this.index + 1) | 0;
                    this.Load();
                }));
            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup.Common.Trace", {
        statics: {
            fields: {
                DisabledTypesForTrace: null
            },
            ctors: {
                init: function () {
                    this.DisabledTypesForTrace = new (System.Collections.Generic.Dictionary$2(Function,System.Boolean))();
                }
            },
            methods: {
                Log$1: function (caller, Value) {
                    if (caller != null) {
                        var isDisabled = System.Collections.Generic.Extensions.TryGetValue(Bridge.global.Function, System.Boolean, Bridge.CustomUIMarkup.Common.Trace.DisabledTypesForTrace, Bridge.getType(caller), false);
                        if (isDisabled) {
                            return;
                        }
                    }

                    console.log(Bridge.unbox(Value));
                },
                Log: function (Value) {
                    console.log(Bridge.unbox(Value));
                },
                Log$2: function (message, element) {
                    console.log(message);
                    console.log(element != null && element._root != null ? element._root.get(0) : null);
                },
                OperationWasCanceled: function (operationName, reason) {
                    console.log((reason || "") + " For this reason operation was canceled.@operationName:" + (operationName || ""));
                }
            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup.Common.XmlIntellisenseInfo", {
        fields: {
            ChildrenTags: null,
            TagName: null,
            Type: null
        },
        ctors: {
            ctor: function (tagName, type) {
                this.$initialize();
                System.Diagnostics.Debug.assert(tagName != null);
                System.Diagnostics.Debug.assert(type != null);


                this.TagName = tagName;
                this.Type = type;
            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup.Libraries.CodeMirror.AttributeInfo", {
        fields: {
            Name: null,
            Values: null
        }
    });

    Bridge.define("Bridge.CustomUIMarkup.Libraries.CodeMirror.Elements", {
        statics: {
            methods: {
                RegisterToBuilder: function () {
                    Bridge.CustomUIMarkup.UI.Builder.Register("UIEditor", function () { return Bridge.CustomUIMarkup.UI.Builder.Create(Bridge.CustomUIMarkup.Libraries.CodeMirror.UIEditor); });

                    Bridge.CustomUIMarkup.UI.Builder.Register("XmlEditor", function () { return Bridge.CustomUIMarkup.UI.Builder.Create(Bridge.CustomUIMarkup.Libraries.CodeMirror.XmlEditor); });
                }
            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup.Libraries.CodeMirror.SchemaInfo", {
        statics: {
            methods: {
                ForceToLoadDependencyProperties: function (type) {
                    Bridge.createInstance(type);
                },
                CreateFrom: function (intellisenseInfos) {
                    var $t, $t1, $t2;
                    var schemaInfo = ($t = new Bridge.CustomUIMarkup.Libraries.CodeMirror.SchemaInfo(), $t.Tags = new (System.Collections.Generic.List$1(Bridge.CustomUIMarkup.Libraries.CodeMirror.TagInfo)).ctor(), $t);

                    $t = Bridge.getEnumerator(intellisenseInfos, Bridge.CustomUIMarkup.Common.XmlIntellisenseInfo);
                    try {
                        while ($t.moveNext()) {
                            var pair = $t.Current;
                            var name = pair.TagName;
                            var type = pair.Type;

                            Bridge.CustomUIMarkup.Libraries.CodeMirror.SchemaInfo.ForceToLoadDependencyProperties(type);

                            var tag = ($t1 = new Bridge.CustomUIMarkup.Libraries.CodeMirror.TagInfo(), $t1.Name = name, $t1.Attributes = new (System.Collections.Generic.List$1(Bridge.CustomUIMarkup.Libraries.CodeMirror.AttributeInfo)).ctor(), $t1);
                            var dependencyProperties = System.Windows.DependencyProperty.GetAllProperties(type);
                            $t1 = Bridge.getEnumerator(dependencyProperties, System.Windows.DependencyProperty);
                            try {
                                while ($t1.moveNext()) {
                                    var dp = $t1.Current;
                                    var attributeInfo = ($t2 = new Bridge.CustomUIMarkup.Libraries.CodeMirror.AttributeInfo(), $t2.Name = dp.Name, $t2);
                                    if (Bridge.referenceEquals(dp.PropertyType, System.Boolean)) {
                                        attributeInfo.Values = System.Array.init(["true", "false"], System.String);
                                    }

                                    if (Bridge.Reflection.isEnum(dp.PropertyType)) {
                                        attributeInfo.Values = System.Enum.getNames(dp.PropertyType);
                                    }

                                    System.Array.add(tag.Attributes, attributeInfo, Bridge.CustomUIMarkup.Libraries.CodeMirror.AttributeInfo);
                                }
                            } finally {
                                if (Bridge.is($t1, System.IDisposable)) {
                                    $t1.System$IDisposable$dispose();
                                }
                            }if (pair.ChildrenTags != null) {
                                tag.ChildrenTags = pair.ChildrenTags;
                            }
                            System.Array.add(schemaInfo.Tags, tag, Bridge.CustomUIMarkup.Libraries.CodeMirror.TagInfo);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return schemaInfo;
                }
            }
        },
        fields: {
            Tags: null
        },
        methods: {
            ToJson: function () {
                var $t, $t1;
                var instance = { };

                $t = Bridge.getEnumerator(this.Tags, Bridge.CustomUIMarkup.Libraries.CodeMirror.TagInfo);
                try {
                    while ($t.moveNext()) {
                        var tag = $t.Current;
                        var attributes = { };

                        $t1 = Bridge.getEnumerator(tag.Attributes, Bridge.CustomUIMarkup.Libraries.CodeMirror.AttributeInfo);
                        try {
                            while ($t1.moveNext()) {
                                var attributeInfo = $t1.Current;
                                attributes[attributeInfo.Name] = attributeInfo.Values;
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                        var tagObj = { };
                        tagObj.attrs = attributes;
                        tagObj.children = tag.ChildrenTags;

                        instance[tag.Name] = tagObj;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return instance;
            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup.Libraries.CodeMirror.TagInfo", {
        fields: {
            Attributes: null,
            ChildrenTags: null,
            Name: null
        }
    });

    /**
     * @memberof System.ComponentModel
     * @callback System.ComponentModel.PropertyChangedEventHandler
     * @param   {System.Object}                                     sender    
     * @param   {System.ComponentModel.PropertyChangedEventArgs}    e
     * @return  {void}
     */

    /** @namespace System.ComponentModel */

    /**
     * The bag
     *
     * @public
     * @class System.ComponentModel.Bag
     * @implements  System.ComponentModel.INotifyPropertyChanged
     * @see {@link System.ComponentModel.INotifyPropertyChanged}
     */
    Bridge.define("System.ComponentModel.Bag", {
        inherits: [System.ComponentModel.INotifyPropertyChanged],
        fields: {
            /**
             * The entries
             *
             * @instance
             * @private
             * @readonly
             * @memberof System.ComponentModel.Bag
             * @type System.Collections.Generic.Dictionary$2
             */
            _entries: null
        },
        events: {
            /**
             * Notifies clients that a property value has changed.
             *
             * @instance
             * @public
             * @this System.ComponentModel.Bag
             * @memberof System.ComponentModel.Bag
             * @function addPropertyChanged
             * @param   {System.ComponentModel.PropertyChangedEventHandler}    value
             * @return  {void}
             */
            /**
             * Notifies clients that a property value has changed.
             *
             * @instance
             * @public
             * @this System.ComponentModel.Bag
             * @memberof System.ComponentModel.Bag
             * @function removePropertyChanged
             * @param   {System.ComponentModel.PropertyChangedEventHandler}    value
             * @return  {void}
             */
            PropertyChanged: null
        },
        alias: ["addPropertyChanged", "System$ComponentModel$INotifyPropertyChanged$addPropertyChanged",
        "removePropertyChanged", "System$ComponentModel$INotifyPropertyChanged$removePropertyChanged"],
        ctors: {
            init: function () {
                this._entries = new (System.Collections.Generic.Dictionary$2(System.String,System.Object))();
            }
        },
        methods: {
            /**
             * Gets or sets the {@link } with the specified property name.
             *
             * @instance
             * @public
             * @this System.ComponentModel.Bag
             * @memberof System.ComponentModel.Bag
             * @param   {string}           propertyName    Name of the property.
             * @return  {System.Object}
             */
            getItem: function (propertyName) {
                return this.GetValue(propertyName);
            },
            /**
             * Gets or sets the {@link } with the specified property name.
             *
             * @instance
             * @public
             * @this System.ComponentModel.Bag
             * @memberof System.ComponentModel.Bag
             * @param   {string}           propertyName    Name of the property.
             * @param   {System.Object}    value           The {@link }.
             * @return  {void}
             */
            setItem: function (propertyName, value) {
                this.SetValue(propertyName, value);
            },
            /**
             * Determines whether the specified property name contains key.
             *
             * @instance
             * @public
             * @this System.ComponentModel.Bag
             * @memberof System.ComponentModel.Bag
             * @param   {string}     propertyName    Name of the property.
             * @return  {boolean}                    <pre><code>true</code></pre> if the specified property name contains key; otherwise, <pre><code>false</code></pre>.
             */
            ContainsKey$1: function (propertyName) {
                return this._entries.containsKey(propertyName);
            },
            /**
             * Determines whether the specified property name contains key.
             *
             * @instance
             * @public
             * @this System.ComponentModel.Bag
             * @memberof System.ComponentModel.Bag
             * @param   {System.Enum}    propertyName    Name of the property.
             * @return  {boolean}                        <pre><code>true</code></pre> if the specified property name contains key; otherwise, <pre><code>false</code></pre>.
             */
            ContainsKey: function (propertyName) {
                return this.ContainsKey$1(System.Enum.toString(Bridge.getType(propertyName), propertyName));
            },
            /**
             * Gets the value.
             *
             * @instance
             * @public
             * @this System.ComponentModel.Bag
             * @memberof System.ComponentModel.Bag
             * @param   {string}           propertyName    Name of the property.
             * @return  {System.Object}
             */
            GetValue: function (propertyName) {
                var value = { v : null };
                this._entries.tryGetValue(propertyName, value);
                return value.v;
            },
            /**
             * Sets the value.
             *
             * @instance
             * @public
             * @this System.ComponentModel.Bag
             * @memberof System.ComponentModel.Bag
             * @param   {string}           propertyName    Name of the property.
             * @param   {System.Object}    value           The value.
             * @return  {void}
             */
            SetValue: function (propertyName, value) {
                var oldValue = this.GetValue(propertyName);

                if (!Bridge.referenceEquals(oldValue, null)) {
                    if (Bridge.equals(oldValue, value)) {
                        return;
                    }
                }

                if (Bridge.referenceEquals(oldValue, null) && Bridge.referenceEquals(value, null)) {
                    return;
                }

                this._entries.set(propertyName, value);

                this.OnPropertyChanged$1(propertyName, value, oldValue);
            },
            /**
             * Called when [property changed].
             *
             * @instance
             * @private
             * @this System.ComponentModel.Bag
             * @memberof System.ComponentModel.Bag
             * @param   {string}           prop        The property.
             * @param   {System.Object}    newValue    The new value.
             * @param   {System.Object}    oldValue    The old value.
             * @return  {void}
             */
            OnPropertyChanged$1: function (prop, newValue, oldValue) {
                !Bridge.staticEquals(this.PropertyChanged, null) ? this.PropertyChanged(this, new System.ComponentModel.BagChangedEventArgs.$ctor2(prop, newValue, oldValue)) : null;
            },
            /**
             * Called when [property changed].
             *
             * @instance
             * @public
             * @this System.ComponentModel.Bag
             * @memberof System.ComponentModel.Bag
             * @param   {string}    prop    The property.
             * @return  {void}
             */
            OnPropertyChanged: function (prop) {
                !Bridge.staticEquals(this.PropertyChanged, null) ? this.PropertyChanged(this, new System.ComponentModel.BagChangedEventArgs.ctor(prop)) : null;
            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup.Libraries.SemanticUI.Align", {
        $kind: "enum",
        statics: {
            fields: {
                Top: 0,
                Bottom: 1,
                Right: 2,
                Left: 3,
                Center: 4
            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup.Libraries.SemanticUI.DataGridCellEditorType", {
        $kind: "enum",
        statics: {
            fields: {
                Text: 0
            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup.Libraries.SemanticUI.Elements", {
        statics: {
            fields: {
                "IconTypes": null
            },
            ctors: {
                init: function () {
                    this["IconTypes"] = System.Array.init(["content", "edit", "bug", "alternate github", "music", "world", "search", "green check", "large red delete link", "disabled warning sign", "add to calendar", "address book", "address book outline", "address card", "address card outline", "alarm", "alarm mute", "alarm mute outline", "alarm outline", "at", "browser", "calendar", "calendar outline", "checked calendar", "cloud", "code", "comment", "comment outline", "comments", "comments outline", "copyright", "creative commons", "dashboard", "delete calendar", "external", "external square", "eyedropper", "feed", "find", "hand pointer", "handshake", "hashtag", "heartbeat", "history", "home", "hourglass empty", "hourglass end", "hourglass full", "hourglass half", "hourglass start", "id badge", "id card", "id card outline", "idea", "image", "inbox", "industry", "lab", "mail", "mail outline", "mail square", "mouse pointer", "open envelope", "open envelope outline", "options", "paint brush", "payment", "percent", "podcast", "privacy", "protect", "registered", "remove from calendar", "setting", "settings", "shop", "shopping bag", "shopping basket", "sidebar", "signal", "sitemap", "tag", "tags", "tasks", "terminal", "text telephone", "ticket", "trademark", "trophy", "window close", "window close outline", "window maximize", "window minimize", "window restore", "add to cart", "add user", "adjust", "archive", "ban", "bookmark", "call", "call square", "clone", "cloud download", "cloud upload", "talk", "talk outline", "compress", "configure", "download", "erase", "exchange", "expand", "external share", "filter", "hide", "in cart", "Lock", "mail forward", "group object", "ungroup object", "pin", "print", "random", "recycle", "refresh", "remove bookmark", "remove user", "repeat", "reply all", "reply", "retweet", "send", "send outline", "share alternate", "share alternate square", "share", "share square", "sign in", "sign out", "theme", "translate", "undo", "unhide", "unlock alternate", "unlock", "upload", "wait", "wizard", "write", "write square", "object group", "object ungroup", "announcement", "birthday", "help circle", "help circle outline", "help", "info circle", "info", "warning circle", "warning", "warning sign", "child", "doctor", "handicap", "spy", "student", "user", "user circle", "user circle outline", "user outline", "users", "female", "gay", "genderless", "heterosexual", "intergender", "lesbian", "male", "man", "neuter", "non binary transgender", "other gender horizontal", "other gender", "other gender vertical", "transgender", "woman", "block layout", "crop", "grid layout", "list layout", "maximize", "resize horizontal", "resize vertical", "zoom", "zoom out", "anchor", "bar", "bathtub", "bomb", "book", "bullseye", "calculator", "cocktail", "diamond", "fax", "fire extinguisher", "fire", "flag checkered", "flag", "flag outline", "gift", "hand lizard", "hand peace", "hand paper", "hand rock", "hand scissors", "hand spock", "law", "leaf", "legal", "lemon", "life ring", "lightning", "magnet", "money", "moon", "plane", "puzzle", "road", "rocket", "shipping", "shower", "snowflake", "soccer", "sticky note", "sticky note outline", "suitcase", "sun", "thermometer empty", "thermometer quarter", "thermometer half", "thermometer three quarters", "thermometer full", "travel", "treatment", "tv", "umbrella", "asterisk", "certificate", "circle", "circle notched", "circle thin", "crosshairs", "cube", "cubes", "ellipsis horizontal", "ellipsis vertical", "quote left", "quote right", "spinner", "square", "square outline", "add circle", "add square", "check circle", "check circle outline", "check square", "checkmark box", "checkmark", "minus circle", "minus", "minus square", "minus square outline", "move", "plus", "plus square outline", "radio", "remove circle", "remove circle outline", "remove", "selected radio", "toggle off", "toggle on", "area chart", "bar chart", "camera retro", "newspaper", "film", "line chart", "photo", "pie chart", "sound", "angle double down", "angle double left", "angle double right", "angle double up", "angle down", "angle left", "angle right", "angle up", "arrow circle down", "arrow circle left", "arrow circle outline down", "arrow circle outline left", "arrow circle outline right", "arrow circle outline up", "arrow circle right", "arrow circle up", "arrow down", "arrow left", "arrow right", "arrow up", "caret down", "caret left", "caret right", "caret up", "chevron circle down", "chevron circle left", "chevron circle right", "chevron circle up", "chevron down", "chevron left", "chevron right", "chevron up", "long arrow down", "long arrow left", "long arrow right", "long arrow up", "pointing down", "pointing left", "pointing right", "pointing up", "toggle down", "toggle left", "toggle right", "toggle up", "mobile", "tablet", "battery empty", "battery low", "battery medium", "battery high", "battery full", "desktop", "disk outline", "game", "keyboard", "laptop", "plug", "power", "file archive outline", "file audio outline", "file code outline", "file excel outline", "file", "file image outline", "file outline", "file pdf outline", "file powerpoint outline", "file text", "file text outline", "file video outline", "file word outline", "folder", "folder open", "folder open outline", "folder outline", "level down", "level up", "trash", "trash outline", "barcode", "bluetooth alternative", "bluetooth", "css3", "database", "fork", "html5", "microchip", "openid", "qrcode", "rss", "rss square", "server", "usb", "empty heart", "empty star", "frown", "heart", "meh", "smile", "star half empty", "star half", "star", "thumbs down", "thumbs outline down", "thumbs outline up", "thumbs up", "backward", "closed captioning", "eject", "fast backward", "fast forward", "forward", "mute", "pause circle", "pause circle outline", "pause", "play", "record", "step backward", "step forward", "stop circle", "stop circle outline", "stop", "unmute", "video play", "video play outline", "volume down", "volume off", "volume up", "bicycle", "building", "building outline", "bus", "car", "coffee", "compass", "emergency", "first aid", "food", "h", "hospital", "hotel", "location arrow", "map", "map outline", "map pin", "map signs", "marker", "military", "motorcycle", "paw", "ship", "space shuttle", "spoon", "street view", "subway", "taxi", "train", "tree", "university", "television", "columns", "sort alphabet ascending", "sort alphabet descending", "sort ascending", "sort content ascending", "sort content descending", "sort descending", "sort", "sort numeric ascending", "sort numeric descending", "table", "align center", "align justify", "align left", "align right", "attach", "bold", "copy", "cut", "font", "header", "indent", "italic", "linkify", "list", "ordered list", "outdent", "paragraph", "paste", "save", "strikethrough", "subscript", "superscript", "text cursor", "text height", "text width", "underline", "unlinkify", "unordered list", "bitcoin", "dollar", "euro", "lira", "pound", "ruble", "rupee", "shekel", "won", "yen", "american express", "credit card alternative", "diners club", "discover", "google wallet", "japan credit bureau", "mastercard", "paypal card", "paypal", "stripe", "visa", "wheelchair", "asl interpreting", "assistive listening systems", "audio description", "blind", "braille", "deafness", "low vision", "sign language", "universal access", "volume control phone", "adn", "amazon", "android", "angellist", "apple", "bandcamp", "behance", "behance square", "bitbucket", "bitbucket square", "black tie", "buysellads", "chrome", "codepen", "codiepie", "connectdevelop", "contao", "dashcube", "delicious", "deviantart", "digg", "dribble", "dropbox", "drupal", "eercast", "empire", "envira gallery", "etsy", "expeditedssl", "facebook f", "facebook", "facebook square", "firefox", "first order", "flickr", "font awesome", "fonticons", "fort awesome", "forumbee", "foursquare", "free code camp", "gg circle", "gg", "git", "git square", "github alternate", "github", "github square", "gitlab", "gittip", "glide g", "glide", "google", "google plus circle", "google plus", "google plus square", "grav", "hacker news", "houzz", "imdb", "instagram", "internet explorer", "ioxhost", "joomla", "jsfiddle", "lastfm", "lastfm square", "leanpub", "linkedin", "linkedin square", "linode", "linux", "maxcdn", "meanpath", "medium", "meetup", "microsoft edge", "mixcloud", "modx", "odnoklassniki", "odnoklassniki square", "opencart", "opera", "optinmonster", "pagelines", "pied piper alternate", "pied piper hat", "pied piper", "pinterest", "pinterest square", "pocket", "product hunt", "qq", "quora", "ravelry", "rebel", "reddit alien", "reddit", "reddit square", "renren", "safari", "scribd", "sellsy", "shirtsinbulk", "simplybuilt", "skyatlas", "skype", "slack", "slideshare", "snapchat ghost", "snapchat", "snapchat square", "soundcloud", "spotify", "stack exchange", "stack overflow", "steam", "steam square", "stumbleupon circle", "stumbleupon", "superpowers", "telegram", "tencent weibo", "themeisle", "trello", "tripadvisor", "tumblr", "tumblr square", "twitch", "twitter", "twitter square", "viacoin", "viadeo", "viadeo square", "vimeo", "vimeo square", "vine", "vk", "wechat", "weibo", "whatsapp", "wikipedia", "windows", "wordpress", "wpbeginner", "wpexplorer", "wpforms", "xing", "xing square", "y combinator", "yahoo", "yelp", "yoast", "youtube", "youtube play", "youtube square", "dribbble", "disabled users", "spinner loading", "notched circle loading", "asterisk loading", "fitted help", "mini home", "tiny home", "small home", "large home", "big home", "huge home", "massive home", "close link", "help link", "horizontally flipped cloud", "vertically flipped cloud", "clockwise rotated cloud", "counterclockwise rotated cloud", "circular users", "circular teal users", "circular inverted users", "circular inverted teal users", "bordered users", "bordered teal users", "bordered inverted black users", "bordered inverted teal users", "red users", "orange users", "yellow users", "olive users", "green users", "teal users", "blue users", "violet users", "purple users", "pink users", "brown users", "grey users", "black users", "inverted users", "inverted red users", "inverted orange users", "inverted yellow users", "inverted olive users", "inverted green users", "inverted teal users", "inverted blue users", "inverted violet users", "inverted purple users", "inverted pink users", "inverted brown users", "inverted grey users", "big thin circle", "big red dont", "black user", "big loading sun", "corner add", "top left corner add", "top right corner add", "bottom left corner add", "bottom right corner add", "inverted corner add", "close", "question"], System.String);
                }
            },
            methods: {
                CreateElement: function (tag, className) {
                    if (tag === void 0) { tag = null; }
                    if (className === void 0) { className = null; }
                    return new System.Windows.HtmlElement(tag, className);
                },
                RegisterToBuilder: function () {
                    var $t, $t1;
                    // row
                    Bridge.CustomUIMarkup.UI.Builder.Register("row", function () {
                        return Bridge.CustomUIMarkup.Libraries.SemanticUI.Elements.CreateElement("div", "row");
                    });

                    for (var i = 2; i <= 16; i = (i + 1) | 0) {
                        var className = { v : (Bridge.CustomUIMarkup.Libraries.SemanticUI.NumberToWord.ToWord(i) || "") + " column row" };

                        Bridge.CustomUIMarkup.UI.Builder.Register(System.String.replaceAll(className.v, " ", "_"), (function ($me, className) {
                            return function () {
                                return Bridge.CustomUIMarkup.Libraries.SemanticUI.Elements.CreateElement("div", className.v);
                            };
                        })(this, className));
                    }


                    // column
                    Bridge.CustomUIMarkup.UI.Builder.Register("column", function () {
                        return Bridge.CustomUIMarkup.Libraries.SemanticUI.Elements.CreateElement("div", "column");
                    });

                    for (var i1 = 2; i1 <= 16; i1 = (i1 + 1) | 0) {
                        var className1 = { v : (Bridge.CustomUIMarkup.Libraries.SemanticUI.NumberToWord.ToWord(i1) || "") + " wide column" };

                        Bridge.CustomUIMarkup.UI.Builder.Register(System.String.replaceAll(className1.v, " ", "_"), (function ($me, className1) {
                            return function () {
                                return Bridge.CustomUIMarkup.Libraries.SemanticUI.Elements.CreateElement("div", className1.v);
                            };
                        })(this, className1));
                    }



                    // TextBlock
                    Bridge.CustomUIMarkup.UI.Builder.Register("TextBlock", function () { return Bridge.CustomUIMarkup.UI.Builder.Create(Bridge.CustomUIMarkup.Libraries.SemanticUI.TextBlock); });

                    Bridge.CustomUIMarkup.UI.Builder.Register("Field", function () { return Bridge.CustomUIMarkup.UI.Builder.Create(Bridge.CustomUIMarkup.Libraries.SemanticUI.Field); });

                    Bridge.CustomUIMarkup.UI.Builder.Register("textInput", function () { return Bridge.CustomUIMarkup.UI.Builder.Create(Bridge.CustomUIMarkup.Libraries.SemanticUI.InputText); });
                    Bridge.CustomUIMarkup.UI.Builder.Register("textBox", function () { return Bridge.CustomUIMarkup.UI.Builder.Create(Bridge.CustomUIMarkup.Libraries.SemanticUI.InputText); });
                    Bridge.CustomUIMarkup.UI.Builder.Register("textArea", function () { return Bridge.CustomUIMarkup.UI.Builder.Create(Bridge.CustomUIMarkup.Libraries.SemanticUI.TextArea); });
                    Bridge.CustomUIMarkup.UI.Builder.Register("FieldString", function () { return Bridge.CustomUIMarkup.UI.Builder.Create(Bridge.CustomUIMarkup.Libraries.SemanticUI.FieldString); });
                    Bridge.CustomUIMarkup.UI.Builder.Register("FieldInt32", function () { return Bridge.CustomUIMarkup.UI.Builder.Create(Bridge.CustomUIMarkup.Libraries.SemanticUI.FieldInt32); });
                    Bridge.CustomUIMarkup.UI.Builder.Register("FieldDecimal", function () { return Bridge.CustomUIMarkup.UI.Builder.Create(Bridge.CustomUIMarkup.Libraries.SemanticUI.FieldDecimal); });
                    Bridge.CustomUIMarkup.UI.Builder.Register("ContentPresenter", function () {
                        return new System.Windows.ContentPresenter();
                    });
                    Bridge.CustomUIMarkup.UI.Builder.Register("ui_rating", function () { return Bridge.CustomUIMarkup.UI.Builder.Create(Bridge.CustomUIMarkup.Libraries.SemanticUI.ui_rating); });
                    Bridge.CustomUIMarkup.UI.Builder.Register("ui-rating", function () { return Bridge.CustomUIMarkup.UI.Builder.Create(Bridge.CustomUIMarkup.Libraries.SemanticUI.ui_rating); });

                    Bridge.CustomUIMarkup.UI.Builder.Register("comment", function () { return Bridge.CustomUIMarkup.UI.Builder.Create(Bridge.CustomUIMarkup.Libraries.SemanticUI.comment); });
                    Bridge.CustomUIMarkup.UI.Builder.Register("ui_comments", function () {
                        return new System.Windows.HtmlElement("div", "ui comments");
                    });
                    Bridge.CustomUIMarkup.UI.Builder.Register("ui-comments", function () {
                        return new System.Windows.HtmlElement("div", "ui comments");
                    });


                    Bridge.CustomUIMarkup.UI.Builder.Register("comment", function () { return Bridge.CustomUIMarkup.UI.Builder.Create(Bridge.CustomUIMarkup.Libraries.SemanticUI.comment); });

                    Bridge.CustomUIMarkup.UI.Builder.Register("ui_top_attached_tabular_menu", function () { return Bridge.CustomUIMarkup.UI.Builder.Create(Bridge.CustomUIMarkup.Libraries.SemanticUI.ui_top_attached_tabular_menu); });
                    Bridge.CustomUIMarkup.UI.Builder.Register("Tab", function () { return Bridge.CustomUIMarkup.UI.Builder.Create(Bridge.CustomUIMarkup.Libraries.SemanticUI.TabItem); });
                    Bridge.CustomUIMarkup.UI.Builder.Register("TabItem", function () { return Bridge.CustomUIMarkup.UI.Builder.Create(Bridge.CustomUIMarkup.Libraries.SemanticUI.TabItem); });


                    Bridge.CustomUIMarkup.UI.Builder.Register("combo", function () { return Bridge.CustomUIMarkup.UI.Builder.Create(Bridge.CustomUIMarkup.Libraries.SemanticUI.Combo); });
                    Bridge.CustomUIMarkup.UI.Builder.Register("comboBox", function () { return Bridge.CustomUIMarkup.UI.Builder.Create(Bridge.CustomUIMarkup.Libraries.SemanticUI.Combo); });
                    Bridge.CustomUIMarkup.UI.Builder.Register("ui.selection.dropdown", function () { return Bridge.CustomUIMarkup.UI.Builder.Create(Bridge.CustomUIMarkup.Libraries.SemanticUI.Combo); });

                    Bridge.CustomUIMarkup.UI.Builder.Register("DatePicker", function () { return Bridge.CustomUIMarkup.UI.Builder.Create(Bridge.CustomUIMarkup.Libraries.SemanticUI.DatePicker); });



                    var classNames = System.Array.init(["ui segment", "ui form", "ui grid", "ui page grid", "ui text menu navbar", "left menu", "ui stacked", "computer tablet only row", "ui navbar menu", "mobile only row", "right menu", "ui hidden clearing divider", "card", "ui card", "ui cards", "extra content", "content", "ui divider", "item", "ui menu", "ui vertical menu", "ui equal width grid", "ui container", "ui button", "ui active button", "ui basic button", "ui basic active button", "ui pagination menu", "active item"], System.String);

                    $t = Bridge.getEnumerator(classNames);
                    try {
                        while ($t.moveNext()) {
                            var className2 = { v : $t.Current };
                            Bridge.CustomUIMarkup.UI.Builder.Register(System.String.replaceAll(className2.v, " ", "_"), (function ($me, className2) {
                                return function () {
                                    return Bridge.CustomUIMarkup.Libraries.SemanticUI.Elements.CreateElement("div", className2.v);
                                };
                            })(this, className2));
                            Bridge.CustomUIMarkup.UI.Builder.Register(System.String.replaceAll(className2.v, " ", "."), (function ($me, className2) {
                                return function () {
                                    return Bridge.CustomUIMarkup.Libraries.SemanticUI.Elements.CreateElement("div", className2.v);
                                };
                            })(this, className2));
                            Bridge.CustomUIMarkup.UI.Builder.Register(System.String.replaceAll(className2.v, " ", "-"), (function ($me, className2) {
                                return function () {
                                    return Bridge.CustomUIMarkup.Libraries.SemanticUI.Elements.CreateElement("div", className2.v);
                                };
                            })(this, className2));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    Bridge.CustomUIMarkup.UI.Builder.Register("ui-image", function () {
                        return Bridge.CustomUIMarkup.Libraries.SemanticUI.Elements.CreateElement("img", "ui image");
                    });
                    Bridge.CustomUIMarkup.UI.Builder.Register("ui.image", function () {
                        return Bridge.CustomUIMarkup.Libraries.SemanticUI.Elements.CreateElement("img", "ui image");
                    });


                    Bridge.CustomUIMarkup.UI.Builder.Register("header", function () {
                        return Bridge.CustomUIMarkup.Libraries.SemanticUI.Elements.CreateElement("div", "header");
                    });
                    Bridge.CustomUIMarkup.UI.Builder.Register("ui.header.1", function () {
                        return Bridge.CustomUIMarkup.Libraries.SemanticUI.Elements.CreateElement("h1", "ui header");
                    });
                    Bridge.CustomUIMarkup.UI.Builder.Register("ui.header.2", function () {
                        return Bridge.CustomUIMarkup.Libraries.SemanticUI.Elements.CreateElement("h2", "ui header");
                    });
                    Bridge.CustomUIMarkup.UI.Builder.Register("ui.header.3", function () {
                        return Bridge.CustomUIMarkup.Libraries.SemanticUI.Elements.CreateElement("h3", "ui header");
                    });


                    Bridge.CustomUIMarkup.UI.Builder.Register("ui.header.3", function () {
                        return Bridge.CustomUIMarkup.Libraries.SemanticUI.Elements.CreateElement("i", "ui header");
                    });

                    $t1 = Bridge.getEnumerator(Bridge.CustomUIMarkup.Libraries.SemanticUI.Elements["IconTypes"]);
                    try {
                        while ($t1.moveNext()) {
                            var iconType = { v : $t1.Current };
                            Bridge.CustomUIMarkup.UI.Builder.Register("icon-" + (iconType.v || ""), (function ($me, iconType) {
                                return function () {
                                    return Bridge.CustomUIMarkup.Libraries.SemanticUI.Elements.CreateElement("i", (iconType.v || "") + " icon");
                                };
                            })(this, iconType));
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }
                    Bridge.CustomUIMarkup.UI.Builder.Register("ui-celled-table", function () {
                        return Bridge.CustomUIMarkup.Libraries.SemanticUI.Elements.CreateElement("table", "ui celled table");
                    });
                    Bridge.CustomUIMarkup.UI.Builder.Register("thead", function () {
                        return Bridge.CustomUIMarkup.Libraries.SemanticUI.Elements.CreateElement("thead");
                    });
                    Bridge.CustomUIMarkup.UI.Builder.Register("tr", function () {
                        return Bridge.CustomUIMarkup.Libraries.SemanticUI.Elements.CreateElement("tr");
                    });
                    Bridge.CustomUIMarkup.UI.Builder.Register("th", function () {
                        return Bridge.CustomUIMarkup.Libraries.SemanticUI.Elements.CreateElement("th");
                    });
                    Bridge.CustomUIMarkup.UI.Builder.Register("tbody", function () {
                        return Bridge.CustomUIMarkup.Libraries.SemanticUI.Elements.CreateElement("tbody");
                    });
                    Bridge.CustomUIMarkup.UI.Builder.Register("td", function () {
                        return Bridge.CustomUIMarkup.Libraries.SemanticUI.Elements.CreateElement("td");
                    });


                    Bridge.CustomUIMarkup.UI.Builder.Register("ItemsControl", function () { return Bridge.CustomUIMarkup.UI.Builder.Create(System.Windows.Controls.ItemsControl); });
                    Bridge.CustomUIMarkup.UI.Builder.Register("DataGrid", function () { return Bridge.CustomUIMarkup.UI.Builder.Create(Bridge.CustomUIMarkup.Libraries.SemanticUI.DataGrid); });
                    Bridge.CustomUIMarkup.UI.Builder.Register("DataGridColumn", function () { return Bridge.CustomUIMarkup.UI.Builder.Create(Bridge.CustomUIMarkup.Libraries.SemanticUI.DataGridColumn); });
                    Bridge.CustomUIMarkup.UI.Builder.Register("ListBox", function () { return Bridge.CustomUIMarkup.UI.Builder.Create(System.Windows.Controls.ListBox); });




                }
            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup.Libraries.SemanticUI.IconType", {
        $kind: "enum",
        statics: {
            fields: {
                content: 0,
                edit: 1,
                bug: 2,
                alternate_github: 3,
                music: 4,
                world: 5,
                search: 6,
                green_check: 7,
                large_red_delete_link: 8,
                disabled_warning_sign: 9,
                add_to_calendar: 10,
                address_book: 11,
                address_book_outline: 12,
                address_card: 13,
                address_card_outline: 14,
                alarm: 15,
                alarm_mute: 16,
                alarm_mute_outline: 17,
                alarm_outline: 18,
                at: 19,
                browser: 20,
                calendar: 21,
                calendar_outline: 22,
                checked_calendar: 23,
                cloud: 24,
                code: 25,
                comment: 26,
                comment_outline: 27,
                comments: 28,
                comments_outline: 29,
                copyright: 30,
                creative_commons: 31,
                dashboard: 32,
                delete_calendar: 33,
                external: 34,
                external_square: 35,
                eyedropper: 36,
                feed: 37,
                find: 38,
                hand_pointer: 39,
                handshake: 40,
                hashtag: 41,
                heartbeat: 42,
                history: 43,
                home: 44,
                hourglass_empty: 45,
                hourglass_end: 46,
                hourglass_full: 47,
                hourglass_half: 48,
                hourglass_start: 49,
                id_badge: 50,
                id_card: 51,
                id_card_outline: 52,
                idea: 53,
                image: 54,
                inbox: 55,
                industry: 56,
                lab: 57,
                mail: 58,
                mail_outline: 59,
                mail_square: 60,
                mouse_pointer: 61,
                open_envelope: 62,
                open_envelope_outline: 63,
                options: 64,
                paint_brush: 65,
                payment: 66,
                percent: 67,
                podcast: 68,
                privacy: 69,
                protect: 70,
                registered: 71,
                remove_from_calendar: 72,
                setting: 73,
                settings: 74,
                shop: 75,
                shopping_bag: 76,
                shopping_basket: 77,
                sidebar: 78,
                signal: 79,
                sitemap: 80,
                tag: 81,
                tags: 82,
                tasks: 83,
                terminal: 84,
                text_telephone: 85,
                ticket: 86,
                trademark: 87,
                trophy: 88,
                window_close: 89,
                window_close_outline: 90,
                window_maximize: 91,
                window_minimize: 92,
                window_restore: 93,
                add_to_cart: 94,
                add_user: 95,
                adjust: 96,
                archive: 97,
                ban: 98,
                bookmark: 99,
                call: 100,
                call_square: 101,
                clone: 102,
                cloud_download: 103,
                cloud_upload: 104,
                talk: 105,
                talk_outline: 106,
                compress: 107,
                configure: 108,
                download: 109,
                erase: 110,
                exchange: 111,
                expand: 112,
                external_share: 113,
                filter: 114,
                hide: 115,
                in_cart: 116,
                Lock: 117,
                mail_forward: 118,
                group_object: 119,
                ungroup_object: 120,
                pin: 121,
                print: 122,
                random: 123,
                recycle: 124,
                refresh: 125,
                remove_bookmark: 126,
                remove_user: 127,
                repeat: 128,
                reply_all: 129,
                reply: 130,
                retweet: 131,
                send: 132,
                send_outline: 133,
                share_alternate: 134,
                share_alternate_square: 135,
                share: 136,
                share_square: 137,
                sign_in: 138,
                sign_out: 139,
                theme: 140,
                translate: 141,
                undo: 142,
                unhide: 143,
                unlock_alternate: 144,
                unlock: 145,
                upload: 146,
                wait: 147,
                wizard: 148,
                write: 149,
                write_square: 150,
                object_group: 151,
                object_ungroup: 152,
                announcement: 153,
                birthday: 154,
                help_circle: 155,
                help_circle_outline: 156,
                help: 157,
                info_circle: 158,
                info: 159,
                warning_circle: 160,
                warning: 161,
                warning_sign: 162,
                child: 163,
                doctor: 164,
                handicap: 165,
                spy: 166,
                student: 167,
                user: 168,
                user_circle: 169,
                user_circle_outline: 170,
                user_outline: 171,
                users: 172,
                female: 173,
                gay: 174,
                genderless: 175,
                heterosexual: 176,
                intergender: 177,
                lesbian: 178,
                male: 179,
                man: 180,
                neuter: 181,
                non_binary_transgender: 182,
                other_gender_horizontal: 183,
                other_gender: 184,
                other_gender_vertical: 185,
                transgender: 186,
                woman: 187,
                block_layout: 188,
                crop: 189,
                grid_layout: 190,
                list_layout: 191,
                maximize: 192,
                resize_horizontal: 193,
                resize_vertical: 194,
                zoom: 195,
                zoom_out: 196,
                anchor: 197,
                bar: 198,
                bathtub: 199,
                bomb: 200,
                book: 201,
                bullseye: 202,
                calculator: 203,
                cocktail: 204,
                diamond: 205,
                fax: 206,
                fire_extinguisher: 207,
                fire: 208,
                flag_checkered: 209,
                flag: 210,
                flag_outline: 211,
                gift: 212,
                hand_lizard: 213,
                hand_peace: 214,
                hand_paper: 215,
                hand_rock: 216,
                hand_scissors: 217,
                hand_spock: 218,
                law: 219,
                leaf: 220,
                legal: 221,
                lemon: 222,
                life_ring: 223,
                lightning: 224,
                magnet: 225,
                money: 226,
                moon: 227,
                plane: 228,
                puzzle: 229,
                road: 230,
                rocket: 231,
                shipping: 232,
                shower: 233,
                snowflake: 234,
                soccer: 235,
                sticky_note: 236,
                sticky_note_outline: 237,
                suitcase: 238,
                sun: 239,
                thermometer_empty: 240,
                thermometer_quarter: 241,
                thermometer_half: 242,
                thermometer_three_quarters: 243,
                thermometer_full: 244,
                travel: 245,
                treatment: 246,
                tv: 247,
                umbrella: 248,
                asterisk: 249,
                certificate: 250,
                circle: 251,
                circle_notched: 252,
                circle_thin: 253,
                crosshairs: 254,
                cube: 255,
                cubes: 256,
                ellipsis_horizontal: 257,
                ellipsis_vertical: 258,
                quote_left: 259,
                quote_right: 260,
                spinner: 261,
                square: 262,
                square_outline: 263,
                add_circle: 264,
                add_square: 265,
                check_circle: 266,
                check_circle_outline: 267,
                check_square: 268,
                checkmark_box: 269,
                checkmark: 270,
                minus_circle: 271,
                minus: 272,
                minus_square: 273,
                minus_square_outline: 274,
                move: 275,
                plus: 276,
                plus_square_outline: 277,
                radio: 278,
                remove_circle: 279,
                remove_circle_outline: 280,
                remove: 281,
                selected_radio: 282,
                toggle_off: 283,
                toggle_on: 284,
                area_chart: 285,
                bar_chart: 286,
                camera_retro: 287,
                newspaper: 288,
                film: 289,
                line_chart: 290,
                photo: 291,
                pie_chart: 292,
                sound: 293,
                angle_double_down: 294,
                angle_double_left: 295,
                angle_double_right: 296,
                angle_double_up: 297,
                angle_down: 298,
                angle_left: 299,
                angle_right: 300,
                angle_up: 301,
                arrow_circle_down: 302,
                arrow_circle_left: 303,
                arrow_circle_outline_down: 304,
                arrow_circle_outline_left: 305,
                arrow_circle_outline_right: 306,
                arrow_circle_outline_up: 307,
                arrow_circle_right: 308,
                arrow_circle_up: 309,
                arrow_down: 310,
                arrow_left: 311,
                arrow_right: 312,
                arrow_up: 313,
                caret_down: 314,
                caret_left: 315,
                caret_right: 316,
                caret_up: 317,
                chevron_circle_down: 318,
                chevron_circle_left: 319,
                chevron_circle_right: 320,
                chevron_circle_up: 321,
                chevron_down: 322,
                chevron_left: 323,
                chevron_right: 324,
                chevron_up: 325,
                long_arrow_down: 326,
                long_arrow_left: 327,
                long_arrow_right: 328,
                long_arrow_up: 329,
                pointing_down: 330,
                pointing_left: 331,
                pointing_right: 332,
                pointing_up: 333,
                toggle_down: 334,
                toggle_left: 335,
                toggle_right: 336,
                toggle_up: 337,
                mobile: 338,
                tablet: 339,
                battery_empty: 340,
                battery_low: 341,
                battery_medium: 342,
                battery_high: 343,
                battery_full: 344,
                desktop: 345,
                disk_outline: 346,
                game: 347,
                keyboard: 348,
                laptop: 349,
                plug: 350,
                power: 351,
                file_archive_outline: 352,
                file_audio_outline: 353,
                file_code_outline: 354,
                file_excel_outline: 355,
                file: 356,
                file_image_outline: 357,
                file_outline: 358,
                file_pdf_outline: 359,
                file_powerpoint_outline: 360,
                file_text: 361,
                file_text_outline: 362,
                file_video_outline: 363,
                file_word_outline: 364,
                folder: 365,
                folder_open: 366,
                folder_open_outline: 367,
                folder_outline: 368,
                level_down: 369,
                level_up: 370,
                trash: 371,
                trash_outline: 372,
                barcode: 373,
                bluetooth_alternative: 374,
                bluetooth: 375,
                css3: 376,
                database: 377,
                fork: 378,
                html5: 379,
                microchip: 380,
                openid: 381,
                qrcode: 382,
                rss: 383,
                rss_square: 384,
                server: 385,
                usb: 386,
                empty_heart: 387,
                empty_star: 388,
                frown: 389,
                heart: 390,
                meh: 391,
                smile: 392,
                star_half_empty: 393,
                star_half: 394,
                star: 395,
                thumbs_down: 396,
                thumbs_outline_down: 397,
                thumbs_outline_up: 398,
                thumbs_up: 399,
                backward: 400,
                closed_captioning: 401,
                eject: 402,
                fast_backward: 403,
                fast_forward: 404,
                forward: 405,
                mute: 406,
                pause_circle: 407,
                pause_circle_outline: 408,
                pause: 409,
                play: 410,
                record: 411,
                step_backward: 412,
                step_forward: 413,
                stop_circle: 414,
                stop_circle_outline: 415,
                stop: 416,
                unmute: 417,
                video_play: 418,
                video_play_outline: 419,
                volume_down: 420,
                volume_off: 421,
                volume_up: 422,
                bicycle: 423,
                building: 424,
                building_outline: 425,
                bus: 426,
                car: 427,
                coffee: 428,
                compass: 429,
                emergency: 430,
                first_aid: 431,
                food: 432,
                h: 433,
                hospital: 434,
                hotel: 435,
                location_arrow: 436,
                map: 437,
                map_outline: 438,
                map_pin: 439,
                map_signs: 440,
                marker: 441,
                military: 442,
                motorcycle: 443,
                paw: 444,
                ship: 445,
                space_shuttle: 446,
                spoon: 447,
                street_view: 448,
                subway: 449,
                taxi: 450,
                train: 451,
                tree: 452,
                university: 453,
                television: 454,
                columns: 455,
                sort_alphabet_ascending: 456,
                sort_alphabet_descending: 457,
                sort_ascending: 458,
                sort_content_ascending: 459,
                sort_content_descending: 460,
                sort_descending: 461,
                sort: 462,
                sort_numeric_ascending: 463,
                sort_numeric_descending: 464,
                table: 465,
                align_center: 466,
                align_justify: 467,
                align_left: 468,
                align_right: 469,
                attach: 470,
                bold: 471,
                copy: 472,
                cut: 473,
                font: 474,
                header: 475,
                indent: 476,
                italic: 477,
                linkify: 478,
                list: 479,
                ordered_list: 480,
                outdent: 481,
                paragraph: 482,
                paste: 483,
                save: 484,
                strikethrough: 485,
                subscript: 486,
                superscript: 487,
                text_cursor: 488,
                text_height: 489,
                text_width: 490,
                underline: 491,
                unlinkify: 492,
                unordered_list: 493,
                bitcoin: 494,
                dollar: 495,
                euro: 496,
                lira: 497,
                pound: 498,
                ruble: 499,
                rupee: 500,
                shekel: 501,
                won: 502,
                yen: 503,
                american_express: 504,
                credit_card_alternative: 505,
                diners_club: 506,
                discover: 507,
                google_wallet: 508,
                japan_credit_bureau: 509,
                mastercard: 510,
                paypal_card: 511,
                paypal: 512,
                stripe: 513,
                visa: 514,
                wheelchair: 515,
                asl_interpreting: 516,
                assistive_listening_systems: 517,
                audio_description: 518,
                blind: 519,
                braille: 520,
                deafness: 521,
                low_vision: 522,
                sign_language: 523,
                universal_access: 524,
                volume_control_phone: 525,
                adn: 526,
                amazon: 527,
                android: 528,
                angellist: 529,
                apple: 530,
                bandcamp: 531,
                behance: 532,
                behance_square: 533,
                bitbucket: 534,
                bitbucket_square: 535,
                black_tie: 536,
                buysellads: 537,
                chrome: 538,
                codepen: 539,
                codiepie: 540,
                connectdevelop: 541,
                contao: 542,
                dashcube: 543,
                delicious: 544,
                deviantart: 545,
                digg: 546,
                dribble: 547,
                dropbox: 548,
                drupal: 549,
                eercast: 550,
                empire: 551,
                envira_gallery: 552,
                etsy: 553,
                expeditedssl: 554,
                facebook_f: 555,
                facebook: 556,
                facebook_square: 557,
                firefox: 558,
                first_order: 559,
                flickr: 560,
                font_awesome: 561,
                fonticons: 562,
                fort_awesome: 563,
                forumbee: 564,
                foursquare: 565,
                free_code_camp: 566,
                gg_circle: 567,
                gg: 568,
                git: 569,
                git_square: 570,
                github_alternate: 571,
                github: 572,
                github_square: 573,
                gitlab: 574,
                gittip: 575,
                glide_g: 576,
                glide: 577,
                google: 578,
                google_plus_circle: 579,
                google_plus: 580,
                google_plus_square: 581,
                grav: 582,
                hacker_news: 583,
                houzz: 584,
                imdb: 585,
                instagram: 586,
                internet_explorer: 587,
                ioxhost: 588,
                joomla: 589,
                jsfiddle: 590,
                lastfm: 591,
                lastfm_square: 592,
                leanpub: 593,
                linkedin: 594,
                linkedin_square: 595,
                linode: 596,
                linux: 597,
                maxcdn: 598,
                meanpath: 599,
                medium: 600,
                meetup: 601,
                microsoft_edge: 602,
                mixcloud: 603,
                modx: 604,
                odnoklassniki: 605,
                odnoklassniki_square: 606,
                opencart: 607,
                opera: 608,
                optinmonster: 609,
                pagelines: 610,
                pied_piper_alternate: 611,
                pied_piper_hat: 612,
                pied_piper: 613,
                pinterest: 614,
                pinterest_square: 615,
                pocket: 616,
                product_hunt: 617,
                qq: 618,
                quora: 619,
                ravelry: 620,
                rebel: 621,
                reddit_alien: 622,
                reddit: 623,
                reddit_square: 624,
                renren: 625,
                safari: 626,
                scribd: 627,
                sellsy: 628,
                shirtsinbulk: 629,
                simplybuilt: 630,
                skyatlas: 631,
                skype: 632,
                slack: 633,
                slideshare: 634,
                snapchat_ghost: 635,
                snapchat: 636,
                snapchat_square: 637,
                soundcloud: 638,
                spotify: 639,
                stack_exchange: 640,
                stack_overflow: 641,
                steam: 642,
                steam_square: 643,
                stumbleupon_circle: 644,
                stumbleupon: 645,
                superpowers: 646,
                telegram: 647,
                tencent_weibo: 648,
                themeisle: 649,
                trello: 650,
                tripadvisor: 651,
                tumblr: 652,
                tumblr_square: 653,
                twitch: 654,
                twitter: 655,
                twitter_square: 656,
                viacoin: 657,
                viadeo: 658,
                viadeo_square: 659,
                vimeo: 660,
                vimeo_square: 661,
                vine: 662,
                vk: 663,
                wechat: 664,
                weibo: 665,
                whatsapp: 666,
                wikipedia: 667,
                windows: 668,
                wordpress: 669,
                wpbeginner: 670,
                wpexplorer: 671,
                wpforms: 672,
                xing: 673,
                xing_square: 674,
                y_combinator: 675,
                yahoo: 676,
                yelp: 677,
                yoast: 678,
                youtube: 679,
                youtube_play: 680,
                youtube_square: 681,
                dribbble: 682,
                disabled_users: 683,
                spinner_loading: 684,
                notched_circle_loading: 685,
                asterisk_loading: 686,
                fitted_help: 687,
                mini_home: 688,
                tiny_home: 689,
                small_home: 690,
                large_home: 691,
                big_home: 692,
                huge_home: 693,
                massive_home: 694,
                close_link: 695,
                help_link: 696,
                horizontally_flipped_cloud: 697,
                vertically_flipped_cloud: 698,
                clockwise_rotated_cloud: 699,
                counterclockwise_rotated_cloud: 700,
                circular_users: 701,
                circular_teal_users: 702,
                circular_inverted_users: 703,
                circular_inverted_teal_users: 704,
                bordered_users: 705,
                bordered_teal_users: 706,
                bordered_inverted_black_users: 707,
                bordered_inverted_teal_users: 708,
                red_users: 709,
                orange_users: 710,
                yellow_users: 711,
                olive_users: 712,
                green_users: 713,
                teal_users: 714,
                blue_users: 715,
                violet_users: 716,
                purple_users: 717,
                pink_users: 718,
                brown_users: 719,
                grey_users: 720,
                black_users: 721,
                inverted_users: 722,
                inverted_red_users: 723,
                inverted_orange_users: 724,
                inverted_yellow_users: 725,
                inverted_olive_users: 726,
                inverted_green_users: 727,
                inverted_teal_users: 728,
                inverted_blue_users: 729,
                inverted_violet_users: 730,
                inverted_purple_users: 731,
                inverted_pink_users: 732,
                inverted_brown_users: 733,
                inverted_grey_users: 734,
                big_thin_circle: 735,
                big_red_dont: 736,
                black_user: 737,
                big_loading_sun: 738,
                corner_add: 739,
                top_left_corner_add: 740,
                top_right_corner_add: 741,
                bottom_left_corner_add: 742,
                bottom_right_corner_add: 743,
                inverted_corner_add: 744,
                close: 745,
                question: 746
            }
        }
    });

    Bridge.define("System.Windows.Markup.IAddChild", {
        $kind: "interface"
    });

    Bridge.define("Bridge.CustomUIMarkup.Libraries.SemanticUI.NumberToWord", {
        statics: {
            fields: {
                unitsMap: null
            },
            ctors: {
                init: function () {
                    this.unitsMap = System.Array.init([
                        "zero", 
                        "one", 
                        "two", 
                        "three", 
                        "four", 
                        "five", 
                        "six", 
                        "seven", 
                        "eight", 
                        "nine", 
                        "ten", 
                        "eleven", 
                        "twelve", 
                        "thirteen", 
                        "fourteen", 
                        "fifteen", 
                        "sixteen", 
                        "seventeen", 
                        "eighteen", 
                        "nineteen"
                    ], System.String);
                }
            },
            methods: {
                ToWord: function (value) {
                    return Bridge.CustomUIMarkup.Libraries.SemanticUI.NumberToWord.unitsMap[System.Array.index(value, Bridge.CustomUIMarkup.Libraries.SemanticUI.NumberToWord.unitsMap)];
                }
            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup.Libraries.SemanticUI.Size", {
        $kind: "enum",
        statics: {
            fields: {
                Mini: 0,
                Tiny: 1,
                Small: 2,
                Medium: 3,
                Large: 4,
                Big: 5,
                Huge: 6,
                Massive: 7
            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup.Libraries.split_js.Elements", {
        statics: {
            methods: {
                RegisterToBuilder: function () {
                    Bridge.CustomUIMarkup.UI.Builder.Register("SplitPanel", function () { return Bridge.CustomUIMarkup.UI.Builder.Create(Bridge.CustomUIMarkup.Libraries.split_js.SplitPanel); });
                }
            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup.Libraries.Swiper.Elements", {
        statics: {
            methods: {
                RegisterToBuilder: function () {
                    Bridge.CustomUIMarkup.UI.Builder.Register("swiper.slider", function () { return Bridge.CustomUIMarkup.UI.Builder.Create(Bridge.CustomUIMarkup.Libraries.Swiper.Slider); });
                }
            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup.Libraries.viewerjs.Elements", {
        statics: {
            methods: {
                RegisterToBuilder: function () {
                    Bridge.CustomUIMarkup.UI.Builder.Register("ImageGalery", function () { return Bridge.CustomUIMarkup.UI.Builder.Create(Bridge.CustomUIMarkup.Libraries.viewerjs.Viewer); });
                }
            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup.Resources", {
        statics: {
            methods: {
                GetXmlFileContent: function (key) {
                    return Bridge.CustomUIMarkup.Resources.$XmlFileContents[key];
                }
            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup.Tokenizers.BindingExpressionTokenDefinitions", {
        statics: {
            props: {
                Value: {
                    get: function () {
                        return function (_o1) {
                                _o1.add(new Bridge.CustomUIMarkup.Tokenizers.TokenDefinition(Bridge.CustomUIMarkup.Tokenizers.TokenType.LeftBracket, "\\{", 1));
                                _o1.add(new Bridge.CustomUIMarkup.Tokenizers.TokenDefinition(Bridge.CustomUIMarkup.Tokenizers.TokenType.RightBracket, "\\}", 1));
                                _o1.add(new Bridge.CustomUIMarkup.Tokenizers.TokenDefinition(Bridge.CustomUIMarkup.Tokenizers.TokenType.OpenParenthesis, "\\(", 1));
                                _o1.add(new Bridge.CustomUIMarkup.Tokenizers.TokenDefinition(Bridge.CustomUIMarkup.Tokenizers.TokenType.CloseParenthesis, "\\)", 1));
                                _o1.add(new Bridge.CustomUIMarkup.Tokenizers.TokenDefinition(Bridge.CustomUIMarkup.Tokenizers.TokenType.Equals, "=", 1));
                                _o1.add(new Bridge.CustomUIMarkup.Tokenizers.TokenDefinition(Bridge.CustomUIMarkup.Tokenizers.TokenType.This, "this", 1));
                                _o1.add(new Bridge.CustomUIMarkup.Tokenizers.TokenDefinition(Bridge.CustomUIMarkup.Tokenizers.TokenType.NotEquals, "!=", 1));
                                _o1.add(new Bridge.CustomUIMarkup.Tokenizers.TokenDefinition(Bridge.CustomUIMarkup.Tokenizers.TokenType["Identifier"], "[a-zA-Z_$][a-zA-Z0-9_$]*", 1));
                                _o1.add(new Bridge.CustomUIMarkup.Tokenizers.TokenDefinition(Bridge.CustomUIMarkup.Tokenizers.TokenType.NumberValue, "\\d+", 1));
                                _o1.add(new Bridge.CustomUIMarkup.Tokenizers.TokenDefinition(Bridge.CustomUIMarkup.Tokenizers.TokenType.Comma, ",", 1));
                                _o1.add(new Bridge.CustomUIMarkup.Tokenizers.TokenDefinition(Bridge.CustomUIMarkup.Tokenizers.TokenType.Dot, ".", 1));
                                return _o1;
                            }(new (System.Collections.Generic.List$1(Bridge.CustomUIMarkup.Tokenizers.TokenDefinition)).ctor());
                    }
                }
            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup.Tokenizers.InvocationExpressionTokenDefinitions", {
        statics: {
            props: {
                Value: {
                    get: function () {
                        return function (_o1) {
                                _o1.add(new Bridge.CustomUIMarkup.Tokenizers.TokenDefinition(Bridge.CustomUIMarkup.Tokenizers.TokenType.Binding, "this", 1));
                                _o1.add(new Bridge.CustomUIMarkup.Tokenizers.TokenDefinition(Bridge.CustomUIMarkup.Tokenizers.TokenType.OpenParenthesis, "\\(", 1));
                                _o1.add(new Bridge.CustomUIMarkup.Tokenizers.TokenDefinition(Bridge.CustomUIMarkup.Tokenizers.TokenType.CloseParenthesis, "\\)", 1));
                                _o1.add(new Bridge.CustomUIMarkup.Tokenizers.TokenDefinition(Bridge.CustomUIMarkup.Tokenizers.TokenType["Identifier"], "[a-zA-Z_$][a-zA-Z0-9_$]*", 1));
                                _o1.add(new Bridge.CustomUIMarkup.Tokenizers.TokenDefinition(Bridge.CustomUIMarkup.Tokenizers.TokenType.Comma, ",", 1));
                                _o1.add(new Bridge.CustomUIMarkup.Tokenizers.TokenDefinition(Bridge.CustomUIMarkup.Tokenizers.TokenType.Dot, ".", 1));
                                return _o1;
                            }(new (System.Collections.Generic.List$1(Bridge.CustomUIMarkup.Tokenizers.TokenDefinition)).ctor());
                    }
                }
            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup.Tokenizers.Token", {
        fields: {
            TokenType: 0,
            Value: null
        },
        ctors: {
            ctor: function (tokenType) {
                this.$initialize();
                this.TokenType = tokenType;
                this.Value = "";
            },
            $ctor1: function (tokenType, value) {
                this.$initialize();
                this.TokenType = tokenType;
                this.Value = value;
            }
        },
        methods: {
            Clone: function () {
                return new Bridge.CustomUIMarkup.Tokenizers.Token.$ctor1(this.TokenType, this.Value);
            },
            toString: function () {
                return "{" + System.Enum.toString(Bridge.CustomUIMarkup.Tokenizers.TokenType, this.TokenType) + ":" + (this.Value || "") + "}";
            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup.Tokenizers.TokenDefinition", {
        fields: {
            _precedence: 0,
            _regex: null,
            _tokenType: 0
        },
        ctors: {
            ctor: function (tokenType, regexPattern, precedence) {
                this.$initialize();
                this._regex = new System.Text.RegularExpressions.Regex.ctor(regexPattern, 1);
                this._tokenType = tokenType;
                this._precedence = precedence;
            }
        },
        methods: {
            FindMatches: function (inputString) {
                return new (Bridge.GeneratorEnumerable$1(Bridge.CustomUIMarkup.Tokenizers.TokenMatch))(Bridge.fn.bind(this, function (inputString) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        matches,
                        len,
                        i,
                        match,
                        $t,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(Bridge.CustomUIMarkup.Tokenizers.TokenMatch))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        matches = this._regex.matches(inputString);
                                            len = matches.getCount();
                                            i = 0;
                                            $step = 1;
                                            continue;
                                    }
                                    case 1: {
                                        if ( i < len ) {
                                                $step = 2;
                                                continue;
                                            }
                                        $step = 5;
                                        continue;
                                    }
                                    case 2: {
                                        match = matches.get(i);

                                            $enumerator.current = ($t = new Bridge.CustomUIMarkup.Tokenizers.TokenMatch(), $t["StartIndex"] = match.getIndex(), $t["EndIndex"] = ((match.getIndex() + match.getLength()) | 0), $t.TokenType = this._tokenType, $t.Value = match.getValue(), $t.Precedence = this._precedence, $t);
                                            $step = 3;
                                            return true;
                                    }
                                    case 3: {
                                        $step = 4;
                                        continue;
                                    }
                                    case 4: {
                                        i = (i + 1) | 0;
                                        $step = 1;
                                        continue;
                                    }
                                    case 5: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup.Tokenizers.Tokenizer", {
        fields: {
            TokenDefinitions: null
        },
        methods: {
            Tokenize: function (data) {
                var $t;
                var tokenDefinitions = this.TokenDefinitions;

                if (tokenDefinitions == null) {
                    throw new System.ArgumentException("TokenDefinitions");
                }

                var tokenMatches = new (System.Collections.Generic.List$1(Bridge.CustomUIMarkup.Tokenizers.TokenMatch)).ctor();

                $t = Bridge.getEnumerator(tokenDefinitions, Bridge.CustomUIMarkup.Tokenizers.TokenDefinition);
                try {
                    while ($t.moveNext()) {
                        var tokenDefinition = $t.Current;
                        tokenMatches.addRange(System.Linq.Enumerable.from(tokenDefinition.FindMatches(data)).toList(Bridge.CustomUIMarkup.Tokenizers.TokenMatch));
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                var items = new (System.Collections.Generic.List$1(Bridge.CustomUIMarkup.Tokenizers.Token)).ctor();

                var groupedByIndex = System.Linq.Enumerable.from(tokenMatches).groupBy(function (x) {
                        return x["StartIndex"];
                    }).orderBy(function (x) {
                    return x.key();
                }).toList(System.Linq.Grouping$2);

                var lastMatch = null;

                var len = groupedByIndex.Count;
                for (var i = 0; i < len; i = (i + 1) | 0) {
                    var bestMatch = groupedByIndex.getItem(i).orderBy(function (x) {
                        return x.Precedence;
                    }).first();
                    if (lastMatch != null && bestMatch["StartIndex"] < lastMatch["EndIndex"]) {
                        continue;
                    }

                    items.add(new Bridge.CustomUIMarkup.Tokenizers.Token.$ctor1(bestMatch.TokenType, bestMatch.Value));

                    lastMatch = bestMatch;
                }

                return items;
            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup.Tokenizers.TokenMatch", {
        fields: {
            "EndIndex": 0,
            Precedence: 0,
            "StartIndex": 0,
            TokenType: 0,
            Value: null
        }
    });

    Bridge.define("Bridge.CustomUIMarkup.Tokenizers.TokenType", {
        $kind: "enum",
        statics: {
            fields: {
                Binding: 0,
                Mode: 1,
                Converter: 2,
                TwoWay: 3,
                LeftBracket: 4,
                RightBracket: 5,
                OpenParenthesis: 6,
                CloseParenthesis: 7,
                "Identifier": 8,
                Comma: 9,
                Dot: 10,
                Equals: 11,
                This: 12,
                NotEquals: 13,
                StringValue: 14,
                SequenceTerminator: 15,
                NumberValue: 16
            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup.UI.Builder", {
        statics: {
            fields: {
                _elementCreators: null,
                "InvocationExpressionTokenizer": null
            },
            ctors: {
                init: function () {
                    var $t;
                    this._elementCreators = function (_o1) {
                            _o1.add("DIV", function () {
                                return new System.Windows.HtmlElement("div");
                            });
                            return _o1;
                        }(new (System.Collections.Generic.Dictionary$2(System.String,Function))());
                    this["InvocationExpressionTokenizer"] = ($t = new Bridge.CustomUIMarkup.Tokenizers.Tokenizer(), $t.TokenDefinitions = Bridge.CustomUIMarkup.Tokenizers.InvocationExpressionTokenDefinitions.Value, $t);
                }
            },
            methods: {
                Create: function (T) {
                    var control = Bridge.createInstance(T);

                    return Bridge.CustomUIMarkup.UI.Builder.ApplyTemplate(T, control);
                },
                Register: function (tag, func) {
                    Bridge.CustomUIMarkup.UI.Builder._elementCreators.set(tag.toUpperCase(), func);
                },
                ApplyTemplate: function (T, control) {
                    control != null ? control.ApplyTemplate() : null;

                    return control;
                },
                BuildControlTemplate: function (xmlTemplate, control) {
                    var $t;
                    var builder = ($t = new Bridge.CustomUIMarkup.UI.Builder(), $t._rootNode = xmlTemplate.Root, $t.DataContext = control, $t.Caller = control, $t._isBuildingTemplate = true, $t);

                    var subControl = builder.BuildNode(builder._rootNode, control);

                    var subControlAsFrameworkElement = Bridge.as(subControl, System.Windows.FrameworkElement);
                    if (subControlAsFrameworkElement == null) {
                        throw new System.InvalidOperationException("TemplateControlFirstItemMustBeHTMLElement");
                    }

                    control._root = subControlAsFrameworkElement._root;
                    control.AddVisualChild(subControlAsFrameworkElement);
                },
                LoadComponent: function (control, xml) {
                    Bridge.CustomUIMarkup.UI.Builder.LoadComponent$1(control, System.Xml.XmlHelper.GetRootNode(xml));
                },
                LoadComponent$1: function (control, node, IsDesignMode, ElementCreatedAtLine, xml) {
                    var $t;
                    if (IsDesignMode === void 0) { IsDesignMode = false; }
                    if (ElementCreatedAtLine === void 0) { ElementCreatedAtLine = null; }
                    if (xml === void 0) { xml = null; }
                    var builder = ($t = new Bridge.CustomUIMarkup.UI.Builder(), $t._rootNode = node, $t.DataContext = control, $t.Caller = control, $t["IsDesignMode"] = IsDesignMode, $t.XmlString = xml, $t);

                    if (!Bridge.staticEquals(ElementCreatedAtLine, null)) {
                        builder.addElementCreatedAtLine(ElementCreatedAtLine);
                    }

                    var subControl = builder.BuildNode(builder._rootNode, control);

                    var subControlAsFrameworkElement = Bridge.as(subControl, System.Windows.FrameworkElement);
                    if (subControlAsFrameworkElement == null) {
                        throw new System.InvalidOperationException("ControlFirstItemMustBeHTMLElement");
                    }

                    Bridge.CustomUIMarkup.UI.Builder.InitDOM(control);
                    control.AddLogicalChild(subControlAsFrameworkElement);
                },
                GetFirstNodeSkipCommentAndText: function (xmlNodeList) {
                    var len = xmlNodeList.length;

                    for (var i = 0; i < len; i = (i + 1) | 0) {
                        var node = xmlNodeList[i];
                        var nodeType = node.nodeType;

                        if (nodeType === 8 || nodeType === 3) {
                            continue;
                        }

                        return node;
                    }

                    throw new System.InvalidOperationException("NodeCannotBeEmpty.");
                },
                InitDOM: function (instance) {
                    if (instance._root == null) {
                        instance.InitDOM();
                    }
                },
                IsUserDefinedTag: function (tag) {
                    return System.Linq.Enumerable.from(tag).contains(46) || System.Linq.Enumerable.from(tag).contains(45) || System.Linq.Enumerable.from(tag).contains(58);
                }
            }
        },
        fields: {
            XmlString: null,
            _rootNode: null,
            "_currentInstance": null,
            _isBuildingTemplate: false,
            Caller: null,
            DataContext: null,
            "IsDesignMode": false,
            TypeFinder: null
        },
        events: {
            ElementCreatedAtLine: null
        },
        ctors: {
            init: function () {
                this.TypeFinder = new Bridge.CustomUIMarkup.UI.TypeFinder();
            }
        },
        methods: {
            BuildNode: function (xmlNode, parentInstance) {
                if (xmlNode.nodeType === 8) {
                    return null;
                }

                if (xmlNode.nodeType === 3) {
                    return this.BuildTextNode(xmlNode, parentInstance);
                }

                //
                if (this.TryToInitParentProperty(xmlNode)) {
                    return null;
                }

                var instance = this.CreateInstance(xmlNode);



                this["_currentInstance"] = instance;

                if (this["IsDesignMode"]) {
                    var lineNumber = Bridge.CustomUIMarkup.Common.Extensions.GetOriginalLineNumber(xmlNode, this._rootNode, this.XmlString);

                    !Bridge.staticEquals(this.ElementCreatedAtLine, null) ? this.ElementCreatedAtLine(lineNumber, instance) : null;
                }

                this.InitializeDataContext(xmlNode, instance, parentInstance);



                this.ProcessAttributes(xmlNode, instance);

                var childNodes = xmlNode.childNodes;

                var len = childNodes.length;

                for (var i = 0; i < len; i = (i + 1) | 0) {
                    var childNode = childNodes[i];

                    var subItem = this.BuildNode(childNode, instance);

                    this.Connect(instance, subItem);
                }

                return instance;
            },
            ProcessAttributes: function (xmlNode, instance) {
                var attributes = xmlNode.attributes;

                var len = attributes.length;
                for (var i = 0; i < len; i = (i + 1) | 0) {
                    var nodeAttribute = attributes[i];

                    this.ProcessAttribute(instance, nodeAttribute.nodeName, nodeAttribute.nodeValue);
                }
            },
            BuildTextNode: function (xmlNode, parentInstance) {
                // skip empty spaces
                var html = Bridge.CustomUIMarkup.UI.Extensions.GetInnerText(xmlNode);
                if (System.String.isNullOrWhiteSpace(html)) {
                    return null;
                }

                // maybe <div> {LastName} </div>
                var bindingInfo = System.Windows.Data.BindingInfo.TryParseExpression(html);
                if (bindingInfo != null) {
                    bindingInfo.BindingMode = System.Windows.Data.BindingMode.OneWay;

                    bindingInfo.Source = parentInstance;
                    bindingInfo.SourcePath = System.Windows.PropertyPath.op_Implicit("DataContext." + (bindingInfo.SourcePath.Path || ""));

                    bindingInfo.Target = parentInstance;
                    bindingInfo.TargetPath = System.Windows.PropertyPath.op_Implicit("InnerHTML");

                    bindingInfo.Connect();
                    return null;
                }

                var instanceAsContentControl = Bridge.as(parentInstance, System.Windows.ContentControl);
                if (instanceAsContentControl != null) {
                    instanceAsContentControl.Content = html;
                    return null;
                }

                parentInstance._root.append(html);

                return null;
            },
            Connect: function (parent, subItem) {
                if (subItem == null) {
                    return;
                }

                var subItemAsFrameworkElement = Bridge.as(subItem, System.Windows.FrameworkElement);
                if (subItemAsFrameworkElement == null) {
                    return;
                }

                Bridge.unbox(parent).AddLogicalChild(subItemAsFrameworkElement);
            },
            CreateInstanceInternal: function (xmlNode) {
                var $t;

                var tag = xmlNode.nodeName.toUpperCase();

                var creatorFunc = { v : null };
                Bridge.CustomUIMarkup.UI.Builder._elementCreators.tryGetValue(tag.toUpperCase(), creatorFunc);
                if (!Bridge.staticEquals(creatorFunc.v, null)) {
                    return creatorFunc.v();
                }

                var controlType = ($t = this.TypeFinder) != null ? $t.FindType(tag) : null;

                if (controlType == null) {
                    if (Bridge.CustomUIMarkup.UI.Builder.IsUserDefinedTag(xmlNode.nodeName) === false) {
                        return new System.Windows.HtmlElement(xmlNode.nodeName);
                    }

                    throw new System.ArgumentException("NotRecognizedTag:" + (tag || ""));
                }

                return Bridge.cast(Bridge.createInstance(controlType), System.Windows.FrameworkElement);
            },
            CreateInstance: function (xmlNode) {
                var instance = this.CreateInstanceInternal(xmlNode);
                Bridge.CustomUIMarkup.UI.Builder.InitDOM(instance);

                return instance;
            },
            InitializeDataContext: function (xmlNode, instance, parentInstance) {
                var $t;
                if (this._isBuildingTemplate) {
                    instance.DataContext = this.DataContext;
                } else {
                    var subControlDataContextAttribute = xmlNode.attributes.DataContext;
                    if (subControlDataContextAttribute == null) {
                        var bindingInfo = ($t = new System.Windows.Data.BindingInfo(), $t.BindingMode = System.Windows.Data.BindingMode.OneWay, $t.Source = parentInstance, $t.SourcePath = System.Windows.PropertyPath.op_Implicit("DataContext"), $t.Target = instance, $t.TargetPath = System.Windows.PropertyPath.op_Implicit("DataContext"), $t);
                        bindingInfo.Connect();
                    } else {
                        var bi = System.Windows.Data.BindingInfo.TryParseExpression(subControlDataContextAttribute.nodeValue);
                        if (bi == null) {
                            throw new System.InvalidOperationException("InvalidBindingExpression:" + (subControlDataContextAttribute.nodeValue || ""));
                        }

                        bi.BindingMode = System.Windows.Data.BindingMode.OneWay;
                        bi.Source = parentInstance;
                        bi.SourcePath = System.Windows.PropertyPath.op_Implicit("DataContext." + (bi.SourcePath.Path || ""));
                        bi.Target = instance;
                        bi.TargetPath = System.Windows.PropertyPath.op_Implicit("DataContext");
                        bi.Connect();
                    }
                }
            },
            ProcessAttribute: function (instance, name, value) {
                var $t;
                if (Bridge.referenceEquals(name, "DataContext")) {
                    return;
                }

                var nameUpperCase = name.toUpperCase();

                if (Bridge.referenceEquals(name, "class")) {
                    name = "Class";
                }

                var targetProperty = System.ComponentModel.ReflectionHelper.FindProperty(instance, name);

                var bi = System.Windows.Data.BindingInfo.TryParseExpression(value);
                if (bi != null) {
                    var eventInfo = System.ComponentModel.ReflectionHelper.FindEvent(instance, name);
                    if (eventInfo != null) {
                        var methodInfo = System.ComponentModel.ReflectionHelper.GetMethodInfo(this.DataContext, bi.SourcePath.Path);

                        var handler = Bridge.Reflection.createDelegate(methodInfo, this.DataContext);

                        Bridge.Reflection.midel(eventInfo.ad, instance)(handler);

                        return;
                    }

                    if (System.String.contains(name,".") === false) {
                        if (targetProperty == null) {
                            var htmlBindingInfo = ($t = new System.Windows.Data.HTMLBindingInfo(), $t.Source = instance, $t.SourcePath = new System.Windows.PropertyPath("DataContext." + (bi.SourcePath.Path || "")), $t.Target$1 = Bridge.unbox(instance)._root, $t.TargetPath = System.Windows.PropertyPath.op_Implicit(name), $t.BindingMode = System.Windows.Data.BindingMode.OneWay, $t);

                            if (System.Windows.Data.HTMLBindingInfo.TargetCanUpdateSource(htmlBindingInfo.Target$1)) {
                                htmlBindingInfo.BindingMode = System.Windows.Data.BindingMode.TwoWay;
                            }


                            htmlBindingInfo.Connect();

                            return;
                        }
                    }

                    bi.SourcePath = new System.Windows.PropertyPath("DataContext." + (bi.SourcePath.Path || ""));
                    bi.Source = instance;

                    // bi.Source = DataContext;
                    bi.Target = instance;
                    bi.TargetPath = System.Windows.PropertyPath.op_Implicit(name);

                    bi.Connect();

                    return;
                }

                if (targetProperty != null) {
                    if (Bridge.Reflection.isEnum(targetProperty.rt)) {
                        System.ComponentModel.ReflectionHelper.SetPropertyValue(instance, name, System.Enum.parse(targetProperty.rt, value, true));
                        return;
                    }

                    var converterAttributes = System.Attribute.getCustomAttributes(targetProperty, System.ComponentModel.TypeConverterAttribute);
                    var firstConverterAtribute = converterAttributes != null ? System.Linq.Enumerable.from(converterAttributes).firstOrDefault(null, null) : null;
                    if (firstConverterAtribute != null) {
                        var converter = Bridge.cast(firstConverterAtribute, System.ComponentModel.TypeConverterAttribute);
                        var valueConverter = Bridge.cast(Bridge.createInstance(converter._type), System.Windows.Data.IValueConverter);
                        var convertedValue = valueConverter.System$Windows$Data$IValueConverter$Convert(value, Bridge.Reflection.getMembers(Bridge.getType(instance), 16, 284, name).rt, null, System.Globalization.CultureInfo.getCurrentCulture());

                        System.ComponentModel.ReflectionHelper.SetPropertyValue(instance, name, convertedValue);
                        return;
                    }

                    System.ComponentModel.ReflectionHelper.SetPropertyValue(instance, name, Bridge.CustomUIMarkup.Common.ConvertHelper.ChangeType(value, targetProperty.rt));
                    return;
                }

                if (System.String.startsWith(name, "on.")) {
                    var eventName = System.Extensions.RemoveFromStart(name, "on.");

                    // support this format: this.Notify(OnContactClicked)
                    if (System.String.startsWith(value, "this.")) {
                        var tokens = Bridge.CustomUIMarkup.UI.Builder["InvocationExpressionTokenizer"].Tokenize(value);

                        var i = 0;
                        i = (i + 1) | 0; // skip this
                        i = (i + 1) | 0; // skip .
                        var methodName = System.Array.getItem(tokens, i, Bridge.CustomUIMarkup.Tokenizers.Token).Value;
                        i = (i + 1) | 0; // skip methodName
                        i = (i + 1) | 0; // skip (
                        var firstParameter = System.Array.getItem(tokens, i, Bridge.CustomUIMarkup.Tokenizers.Token).Value;

                        var mi = Bridge.Reflection.getMembers(Bridge.getType(this.Caller), 8, 284, methodName);

                        Bridge.unbox(instance).On(eventName, Bridge.fn.bind(this, function () {
                            Bridge.Reflection.midel(mi, Bridge.unbox(this.Caller))(firstParameter);
                        }));
                        return;
                    }

                    var methodInfo1 = Bridge.Reflection.getMembers(Bridge.getType(this.Caller), 8, System.ComponentModel.ReflectionHelper.AllBindings | 256, value);

                    Bridge.unbox(instance).On(eventName, Bridge.fn.bind(this, function () {
                        Bridge.Reflection.midel(methodInfo1, Bridge.unbox(this.Caller))(null);
                    }));
                    return;
                }

                if (System.String.startsWith(nameUpperCase, "CSS.")) {
                    var styleAttributeName = name.substr(4);
                    Bridge.unbox(instance)._root.css(styleAttributeName, value);
                    return;
                }

                // css.Pseudo.backgroundImage
                if (System.String.startsWith(nameUpperCase, "CSS.PSEUDO.")) {
                    throw new System.ArgumentException();
                    // var pseudoAttributeName = name.Substring(11);
                    // DOM.head.Append("<style>#" + instance.Id + "::" + pseudoAttributeName + "{ content:'bar' }</style>");
                    // return;
                }

                if (Bridge.referenceEquals(name, "x.Name")) {
                    System.ComponentModel.ReflectionHelper.SetNonStaticField(this.Caller, value, instance);

                    return;
                }

                Bridge.unbox(instance)._root.attr(name, value);
            },
            TryToInitParentProperty: function (xmlNode) {
                var parentNodeName = xmlNode.parentNode.nodeName;
                var nodeName = xmlNode.nodeName;


                // <ItemsControl.ItemTemplate>

                if (!System.String.startsWith(nodeName, (parentNodeName || "") + ".")) {
                    return false;
                }

                var propertyName = System.Extensions.RemoveFromStart(nodeName, (parentNodeName || "") + ".");
                if (propertyName == null) {
                    return false;
                }

                var propertyInfo = Bridge.Reflection.getMembers(Bridge.getType(this["_currentInstance"]), 16, 284, propertyName);
                if (propertyInfo == null) {
                    return false;
                }


                var propertyType = propertyInfo.rt;
                if (Bridge.referenceEquals(propertyType, System.Windows.Template)) {
                    var propertyValue = System.Windows.Template.CreateFrom(Bridge.CustomUIMarkup.UI.Builder.GetFirstNodeSkipCommentAndText(xmlNode.childNodes));
                    System.ComponentModel.ReflectionHelper.SetPropertyValue(this["_currentInstance"], propertyName, propertyValue);
                    return true;
                }

                if (System.Extensions.IsNumeric$1(propertyType) || Bridge.referenceEquals(propertyType, System.String)) {
                    var innerHTML = ((Bridge.CustomUIMarkup.UI.Extensions.GetInnerText(xmlNode) || "") + "").trim();

                    this.ProcessAttribute(this["_currentInstance"], propertyName, innerHTML);
                    return true;
                }

                /* 
                                   <DataGrid.Columns>
                                       <DataGridColumn Name='FullName' Label='AdÄ± SoyAdÄ±' />
                                   </DataGrid.Columns>
                */
                if (propertyInfo.s == null) {
                    var collection = Bridge.Reflection.midel(propertyInfo.g, Bridge.unbox(this["_currentInstance"]))();

                    var addMethod = Bridge.Reflection.getMembers(Bridge.getType(collection), 8, 284, "Add");


                    var childNodes = xmlNode.childNodes;

                    var len = childNodes.length;

                    for (var i = 0; i < len; i = (i + 1) | 0) {
                        var childNode = childNodes[i];

                        if (childNode.nodeType !== 1) {
                            continue;
                        }

                        var subItem = this.CreateInstance(childNode);


                        this.InitializeDataContext(childNode, subItem, Bridge.unbox(this["_currentInstance"]));

                        this.ProcessAttributes(childNode, subItem);

                        Bridge.Reflection.midel(addMethod, Bridge.unbox(collection))(subItem);
                    }

                    return true;

                }

                throw new System.NotImplementedException(nodeName);

            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup.UI.Extensions", {
        statics: {
            methods: {
                GetInnerText: function (xmlNode) {
                    if (xmlNode.nodeType === 3) {
                        return Bridge.unbox(xmlNode.textContent);
                    }

                    return Bridge.unbox(xmlNode.innerHTML);
                },
                LoadComponent: function (T, element, xml) {
                    Bridge.CustomUIMarkup.UI.Builder.LoadComponent(element, xml);

                    return element;
                }
            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup.UI.TypeFinder", {
        statics: {
            fields: {
                _tags: null,
                _tagTypeMap: null
            },
            props: {
                Tags: {
                    get: function () {
                        return Bridge.CustomUIMarkup.UI.TypeFinder._tags;
                    }
                },
                TagTypeMap: {
                    get: function () {
                        var $t;
                        if (Bridge.CustomUIMarkup.UI.TypeFinder._tagTypeMap == null) {
                            Bridge.CustomUIMarkup.UI.TypeFinder._tagTypeMap = new (System.Collections.Generic.Dictionary$2(System.String,Function))();
                            $t = Bridge.getEnumerator(Bridge.CustomUIMarkup.UI.TypeFinder._tags);
                            try {
                                while ($t.moveNext()) {
                                    var intellisenseInfo = $t.Current;
                                    Bridge.CustomUIMarkup.UI.TypeFinder._tagTypeMap.set(intellisenseInfo.TagName.toUpperCase(), intellisenseInfo.Type);
                                }
                            } finally {
                                if (Bridge.is($t, System.IDisposable)) {
                                    $t.System$IDisposable$dispose();
                                }
                            }}

                        return Bridge.CustomUIMarkup.UI.TypeFinder._tagTypeMap;
                    }
                }
            },
            ctors: {
                init: function () {
                    this._tags = new (System.Collections.Generic.List$1(Bridge.CustomUIMarkup.Common.XmlIntellisenseInfo)).ctor();
                }
            },
            methods: {
                RegisterTag: function (tagName, type) {
                    Bridge.CustomUIMarkup.UI.TypeFinder._tags.add(new Bridge.CustomUIMarkup.Common.XmlIntellisenseInfo(tagName, type));
                }
            }
        },
        methods: {
            FindType: function (tag) {
                if (Bridge.CustomUIMarkup.UI.TypeFinder.TagTypeMap.containsKey(tag)) {
                    return Bridge.CustomUIMarkup.UI.TypeFinder.TagTypeMap.get(tag);
                }

                return null;
            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup_DesignerSamples.App", {
        statics: {
            methods: {
                Init: function () {
                    Bridge.CustomUIMarkup.Libraries.SemanticUI.Elements.RegisterToBuilder();
                    Bridge.CustomUIMarkup.Libraries.split_js.Elements.RegisterToBuilder();
                    Bridge.CustomUIMarkup.Libraries.CodeMirror.Elements.RegisterToBuilder();
                    Bridge.CustomUIMarkup.Libraries.viewerjs.Elements.RegisterToBuilder();
                    Bridge.CustomUIMarkup.Libraries.Swiper.Elements.RegisterToBuilder();

                    $(Bridge.CustomUIMarkup_DesignerSamples.App.RenderUIEditor);
                },
                RenderUIEditor: function () {
                    var $t, $t1, $t2;
                    var appContainer = ($t = new Bridge.CustomUIMarkup_DesignerSamples.AppContainer(), $t.DataContext = ($t1 = new Bridge.CustomUIMarkup_DesignerSamples.ExampleDataContext(), $t1.CurrentTemplate = "Write xml code here.", $t1["Inner"] = ($t2 = new Bridge.CustomUIMarkup_DesignerSamples.ExampleDataContext(), $t2.CurrentTemplate = "Write xml code here", $t2), $t1), $t);

                    appContainer.DataContext = ($t = new Bridge.CustomUIMarkup_DesignerSamples.ExampleDataContext(), $t.CurrentTemplate = "Write xml code here.", $t["Inner"] = ($t1 = new Bridge.CustomUIMarkup_DesignerSamples.ExampleDataContext(), $t1.CurrentTemplate = "Write xml code here", $t1), $t);

                    appContainer.RenderInBody();
                }
            }
        }
    });

    /** @namespace Bridge.Html5 */

    /**
     * The extensions
     *
     * @static
     * @abstract
     * @public
     * @class Bridge.Html5.Extensions
     */
    Bridge.define("Bridge.Html5.Extensions", {
        statics: {
            methods: {
                /**
                 * Ases the HTML string.
                 *
                 * @static
                 * @public
                 * @this Bridge.Html5.Extensions
                 * @memberof Bridge.Html5.Extensions
                 * @param   {Element}    element
                 * @return  {string}
                 */
                AsHtmlString: function (element) {
                    var div = document.createElement("div");

                    div.appendChild(element.cloneNode(true));

                    return System.String.replaceAll(div.innerHTML, "\"", "'");
                }
            }
        }
    });

    Bridge.define("Bridge.jQuery2.Extensions", {
        statics: {
            methods: {
                AppendTo: function (query, list) {
                    System.Array.add(list, query, $);

                    return query;
                },
                Css_display_Inline_Block: function (query) {
                    query.css("display", "inline-block");

                    return query;
                },
                Css_float_Left: function (query) {
                    query.css("float", "left");

                    return query;
                },
                Css_height_max: function (query) {
                    query.css("height", "100%");

                    return query;
                },
                Css_width: function (query, value) {
                    query.css("width", value);

                    return query;
                },
                Css_width_max: function (query) {
                    query.css("width", "100%");

                    return query;
                }
            }
        }
    });

    Bridge.define("System.ArrayTypeMismatchException", {
        inherits: [System.SystemException],
        ctors: {
            ctor: function (message, innerException) {
                if (message === void 0) { message = null; }
                if (innerException === void 0) { innerException = null; }

                this.$initialize();
                System.SystemException.ctor.call(this, message, innerException);
            }
        }
    });

    /** @namespace System */

    /**
     * Utility methods for casting operations
     *
     * @static
     * @abstract
     * @public
     * @class System.Cast
     */
    Bridge.define("System.Cast", {
        statics: {
            methods: {
                /**
                 * To the specified value.
                 *
                 * @static
                 * @public
                 * @this System.Cast
                 * @memberof System.Cast
                 * @param   {System.Object}             value         
                 * @param   {Function}                  targetType    
                 * @param   {System.IFormatProvider}    provider
                 * @return  {System.Object}
                 */
                To$2: function (value, targetType, provider) {
                    var $t;
                    if (targetType == null) {
                        throw new System.ArgumentNullException("targetType");
                    }

                    if (value == null) {
                        return System.Extensions.GetDefaultValue(targetType);
                    }


                    if (Bridge.Reflection.isGenericType(targetType) && Bridge.referenceEquals(Bridge.Reflection.getGenericTypeDefinition(targetType), System.Nullable$1)) {
                        return System.Cast.To$2(value, ($t = Bridge.Reflection.getGenericArguments(targetType))[System.Array.index(0, $t)], provider);
                    }


                    var valueType = Bridge.getType(value);

                    if (Bridge.referenceEquals(valueType, targetType)) {
                        return value;
                    }

                    if (Bridge.referenceEquals(targetType, System.Object)) {
                        return value;
                    }


                    // ReSharper disable once UnusedVariable
                    var targetTypeName = Bridge.Reflection.getTypeName(targetType);

                    // try to convert from predefined convert functions
                    var fn = System.Convert['to'+targetTypeName]; 
if(fn)
{
    return fn(value,provider);    
}
;




                    if (Bridge.Reflection.isAssignableFrom(valueType, targetType)) {
                        return value;
                    }

                    throw new System.InvalidCastException(System.String.concat("@value:", value) + "not convertible to " + (Bridge.Reflection.getTypeFullName(targetType) || ""));
                },
                /**
                 * Casts value to 'TTargetType'
                 *
                 * @static
                 * @public
                 * @this System.Cast
                 * @memberof System.Cast
                 * @param   {Function}                  TTargetType    
                 * @param   {System.Object}             value          
                 * @param   {System.IFormatProvider}    provider
                 * @return  {TTargetType}
                 */
                To$1: function (TTargetType, value, provider) {
                    return Bridge.cast(Bridge.unbox(System.Cast.To$2(value, TTargetType, provider)), TTargetType);
                },
                /**
                 * Casts value to 'TTargetType'
                 *
                 * @static
                 * @public
                 * @this System.Cast
                 * @memberof System.Cast
                 * @param   {Function}         TTargetType    
                 * @param   {System.Object}    value
                 * @return  {TTargetType}
                 */
                To: function (TTargetType, value) {
                    return System.Cast.To$1(TTargetType, value, System.Globalization.CultureInfo.invariantCulture);
                }
            }
        }
    });

    Bridge.define("System.Collections.Generic.Extensions", {
        statics: {
            methods: {
                TryGetValue: function (TKey, TValue, dictionary, key, defaultValue) {
                    var value = { v : Bridge.getDefaultValue(TValue) };
                    if (dictionary.tryGetValue(key, value)) {
                        return value.v;
                    }

                    return defaultValue;
                }
            }
        }
    });

    Bridge.define("System.Collections.ObjectModel.Collection$1", function (T) { return {
        inherits: [System.Collections.Generic.IList$1(T),System.Collections.IList,System.Collections.Generic.IReadOnlyList$1(T)],
        statics: {
            methods: {
                IsCompatibleObject: function (value) {
                    // Non-null values are fine.  Only accept nulls if T is a class or Nullable<U>.
                    // Note that default(T) is not equal to null for value types except when T is Nullable<U>. 
                    return ((Bridge.is(value, T)) || (value == null && Bridge.getDefaultValue(T) == null));
                }
            }
        },
        fields: {
            items: null,
            _syncRoot: null
        },
        props: {
            Count: {
                get: function () {
                    return System.Array.getCount(this.items, T);
                }
            },
            "Items": {
                get: function () {
                    return this.items;
                }
            },
            "System$Collections$Generic$ICollection$1$IsReadOnly": {
                get: function () {
                    return System.Array.getIsReadOnly(this.items, T);
                }
            },
            "System$Collections$IList$IsReadOnly": {
                get: function () {
                    return System.Array.getIsReadOnly(this.items, T);
                }
            }
        },
        alias: [
            "Count", "System$Collections$Generic$IReadOnlyCollection$1$" + Bridge.getTypeAlias(T) + "$Count",
            "Count", "System$Collections$ICollection$Count",
            "Count", "System$Collections$Generic$ICollection$1$" + Bridge.getTypeAlias(T) + "$Count",
            "getItem", "System$Collections$Generic$IReadOnlyList$1$" + Bridge.getTypeAlias(T) + "$getItem",
            "setItem", "System$Collections$Generic$IReadOnlyList$1$" + Bridge.getTypeAlias(T) + "$setItem",
            "getItem", "System$Collections$Generic$IList$1$" + Bridge.getTypeAlias(T) + "$getItem",
            "setItem", "System$Collections$Generic$IList$1$" + Bridge.getTypeAlias(T) + "$setItem",
            "add", "System$Collections$Generic$ICollection$1$" + Bridge.getTypeAlias(T) + "$add",
            "clear", "System$Collections$IList$clear",
            "clear", "System$Collections$Generic$ICollection$1$" + Bridge.getTypeAlias(T) + "$clear",
            "copyTo", "System$Collections$Generic$ICollection$1$" + Bridge.getTypeAlias(T) + "$copyTo",
            "contains", "System$Collections$Generic$ICollection$1$" + Bridge.getTypeAlias(T) + "$contains",
            "getEnumerator", ["System$Collections$Generic$IEnumerable$1$" + Bridge.getTypeAlias(T) + "$getEnumerator", "System$Collections$Generic$IEnumerable$1$getEnumerator"],
            "indexOf", "System$Collections$Generic$IList$1$" + Bridge.getTypeAlias(T) + "$indexOf",
            "insert", "System$Collections$Generic$IList$1$" + Bridge.getTypeAlias(T) + "$insert",
            "remove", "System$Collections$Generic$ICollection$1$" + Bridge.getTypeAlias(T) + "$remove",
            "removeAt", "System$Collections$IList$removeAt",
            "removeAt", "System$Collections$Generic$IList$1$" + Bridge.getTypeAlias(T) + "$removeAt",
            "System$Collections$Generic$ICollection$1$IsReadOnly", "System$Collections$Generic$ICollection$1$" + Bridge.getTypeAlias(T) + "$IsReadOnly"
        ],
        ctors: {
            ctor: function () {
                this.$initialize();
                this.items = new (System.Collections.Generic.List$1(T)).ctor();
            },
            $ctor1: function (list) {
                this.$initialize();
                if (list == null) {
                    System.ThrowHelper.ThrowArgumentNullException(System.ExceptionArgument.list);
                }
                this.items = list;
            }
        },
        methods: {
            getItem: function (index) {
                return System.Array.getItem(this.items, index, T);
            },
            setItem: function (index, value) {
                if (System.Array.getIsReadOnly(this.items, T)) {
                    System.ThrowHelper.ThrowNotSupportedException(System.ExceptionResource.NotSupported_ReadOnlyCollection);
                }

                if (index < 0 || index >= System.Array.getCount(this.items, T)) {
                    System.ThrowHelper.ThrowArgumentOutOfRangeException();
                }

                this.SetItem(index, value);
            },
            System$Collections$IList$getItem: function (index) {
                return System.Array.getItem(this.items, index, T);
            },
            System$Collections$IList$setItem: function (index, value) {
                System.ThrowHelper.IfNullAndNullsAreIllegalThenThrow(T, value, System.ExceptionArgument.value);

                try {
                    this.setItem(index, Bridge.cast(Bridge.unbox(value), T));
                }
                catch ($e1) {
                    $e1 = System.Exception.create($e1);
                    if (Bridge.is($e1, System.InvalidCastException)) {
                        System.ThrowHelper.ThrowWrongValueTypeArgumentException(value, T);
                    } else {
                        throw $e1;
                    }
                }

            },
            add: function (item) {
                if (System.Array.getIsReadOnly(this.items, T)) {
                    System.ThrowHelper.ThrowNotSupportedException(System.ExceptionResource.NotSupported_ReadOnlyCollection);
                }

                var index = System.Array.getCount(this.items, T);
                this.InsertItem(index, item);
            },
            System$Collections$IList$add: function (value) {
                if (System.Array.getIsReadOnly(this.items, T)) {
                    System.ThrowHelper.ThrowNotSupportedException(System.ExceptionResource.NotSupported_ReadOnlyCollection);
                }
                System.ThrowHelper.IfNullAndNullsAreIllegalThenThrow(T, value, System.ExceptionArgument.value);

                try {
                    this.add(Bridge.cast(Bridge.unbox(value), T));
                }
                catch ($e1) {
                    $e1 = System.Exception.create($e1);
                    if (Bridge.is($e1, System.InvalidCastException)) {
                        System.ThrowHelper.ThrowWrongValueTypeArgumentException(value, T);
                    } else {
                        throw $e1;
                    }
                }

                return ((this.Count - 1) | 0);
            },
            clear: function () {
                if (System.Array.getIsReadOnly(this.items, T)) {
                    System.ThrowHelper.ThrowNotSupportedException(System.ExceptionResource.NotSupported_ReadOnlyCollection);
                }

                this.ClearItems();
            },
            copyTo: function (array, index) {
                System.Array.copyTo(this.items, array, index, T);
            },
            System$Collections$ICollection$copyTo: function (array, index) {
                if (array == null) {
                    System.ThrowHelper.ThrowArgumentNullException(System.ExceptionArgument.array);
                }

                if (System.Array.getRank(array) !== 1) {
                    System.ThrowHelper.ThrowArgumentException(System.ExceptionResource.Arg_RankMultiDimNotSupported);
                }

                if (System.Array.getLower(array, 0) !== 0) {
                    System.ThrowHelper.ThrowArgumentException(System.ExceptionResource.Arg_NonZeroLowerBound);
                }

                if (index < 0) {
                    System.ThrowHelper.ThrowArgumentOutOfRangeException$2(System.ExceptionArgument.index, System.ExceptionResource.ArgumentOutOfRange_NeedNonNegNum);
                }

                if (((array.length - index) | 0) < this.Count) {
                    System.ThrowHelper.ThrowArgumentException(System.ExceptionResource.Arg_ArrayPlusOffTooSmall);
                }

                var tArray = Bridge.as(array, System.Array.type(T));
                if (tArray != null) {
                    System.Array.copyTo(this.items, tArray, index, T);
                } else {
                    //
                    // Catch the obvious case assignment will fail.
                    // We can found all possible problems by doing the check though.
                    // For example, if the element type of the Array is derived from T,
                    // we can't figure out if we can successfully copy the element beforehand.
                    //
                    var targetType = (Bridge.getType(array).$elementType || null);
                    var sourceType = T;
                    if (!(Bridge.Reflection.isAssignableFrom(targetType, sourceType) || Bridge.Reflection.isAssignableFrom(sourceType, targetType))) {
                        System.ThrowHelper.ThrowArgumentException(System.ExceptionResource["Argument_InvalidArrayType"]);
                    }

                    //
                    // We can't cast array of value type to object[], so we don't support 
                    // widening of primitive types here.
                    //
                    var objects = Bridge.as(array, System.Array.type(System.Object));
                    if (objects == null) {
                        System.ThrowHelper.ThrowArgumentException(System.ExceptionResource["Argument_InvalidArrayType"]);
                    }

                    var count = System.Array.getCount(this.items, T);
                    try {
                        for (var i = 0; i < count; i = (i + 1) | 0) {
                            objects[System.Array.index(Bridge.identity(index, (index = (index + 1) | 0)), objects)] = System.Array.getItem(this.items, i, T);
                        }
                    }
                    catch ($e1) {
                        $e1 = System.Exception.create($e1);
                        if (Bridge.is($e1, System.ArrayTypeMismatchException)) {
                            System.ThrowHelper.ThrowArgumentException(System.ExceptionResource["Argument_InvalidArrayType"]);
                        } else {
                            throw $e1;
                        }
                    }
                }
            },
            contains: function (item) {
                return System.Array.contains(this.items, item, T);
            },
            System$Collections$IList$contains: function (value) {
                if (System.Collections.ObjectModel.Collection$1(T).IsCompatibleObject(value)) {
                    return this.contains(Bridge.cast(Bridge.unbox(value), T));
                }
                return false;
            },
            getEnumerator: function () {
                return Bridge.getEnumerator(this.items, T);
            },
            System$Collections$IEnumerable$getEnumerator: function () {
                return Bridge.getEnumerator(Bridge.cast(this.items, System.Collections.IEnumerable));
            },
            indexOf: function (item) {
                return System.Array.indexOf(this.items, item, 0, null, T);
            },
            System$Collections$IList$indexOf: function (value) {
                if (System.Collections.ObjectModel.Collection$1(T).IsCompatibleObject(value)) {
                    return this.indexOf(Bridge.cast(Bridge.unbox(value), T));
                }
                return -1;
            },
            insert: function (index, item) {
                if (System.Array.getIsReadOnly(this.items, T)) {
                    System.ThrowHelper.ThrowNotSupportedException(System.ExceptionResource.NotSupported_ReadOnlyCollection);
                }

                if (index < 0 || index > System.Array.getCount(this.items, T)) {
                    System.ThrowHelper.ThrowArgumentOutOfRangeException$2(System.ExceptionArgument.index, System.ExceptionResource["ArgumentOutOfRange_ListInsert"]);
                }

                this.InsertItem(index, item);
            },
            System$Collections$IList$insert: function (index, value) {
                if (System.Array.getIsReadOnly(this.items, T)) {
                    System.ThrowHelper.ThrowNotSupportedException(System.ExceptionResource.NotSupported_ReadOnlyCollection);
                }
                System.ThrowHelper.IfNullAndNullsAreIllegalThenThrow(T, value, System.ExceptionArgument.value);

                try {
                    this.insert(index, Bridge.cast(Bridge.unbox(value), T));
                }
                catch ($e1) {
                    $e1 = System.Exception.create($e1);
                    if (Bridge.is($e1, System.InvalidCastException)) {
                        System.ThrowHelper.ThrowWrongValueTypeArgumentException(value, T);
                    } else {
                        throw $e1;
                    }
                }

            },
            remove: function (item) {
                if (System.Array.getIsReadOnly(this.items, T)) {
                    System.ThrowHelper.ThrowNotSupportedException(System.ExceptionResource.NotSupported_ReadOnlyCollection);
                }

                var index = System.Array.indexOf(this.items, item, 0, null, T);
                if (index < 0) {
                    return false;
                }
                this.RemoveItem(index);
                return true;
            },
            System$Collections$IList$remove: function (value) {
                if (System.Array.getIsReadOnly(this.items, T)) {
                    System.ThrowHelper.ThrowNotSupportedException(System.ExceptionResource.NotSupported_ReadOnlyCollection);
                }

                if (System.Collections.ObjectModel.Collection$1(T).IsCompatibleObject(value)) {
                    this.remove(Bridge.cast(Bridge.unbox(value), T));
                }
            },
            removeAt: function (index) {
                if (System.Array.getIsReadOnly(this.items, T)) {
                    System.ThrowHelper.ThrowNotSupportedException(System.ExceptionResource.NotSupported_ReadOnlyCollection);
                }

                if (index < 0 || index >= System.Array.getCount(this.items, T)) {
                    System.ThrowHelper.ThrowArgumentOutOfRangeException();
                }

                this.RemoveItem(index);
            },
            ClearItems: function () {
                System.Array.clear(this.items, T);
            },
            InsertItem: function (index, item) {
                System.Array.insert(this.items, index, item, T);
            },
            RemoveItem: function (index) {
                System.Array.removeAt(this.items, index, T);
            },
            SetItem: function (index, item) {
                System.Array.setItem(this.items, index, item, T);
            }
        }
    }; });

    Bridge.define("System.Collections.Specialized.INotifyCollectionChanged", {
        $kind: "interface"
    });

    Bridge.define("System.Collections.ObjectModel.ObservableCollection$1.SimpleMonitor", function (T) { return {
        inherits: [System.IDisposable],
        fields: {
            _busyCount: 0
        },
        props: {
            Busy: {
                get: function () {
                    return this._busyCount > 0;
                }
            }
        },
        alias: ["dispose", "System$IDisposable$dispose"],
        methods: {
            Enter: function () {
                this._busyCount = (this._busyCount + 1) | 0;
            },
            dispose: function () {
                this._busyCount = (this._busyCount - 1) | 0;
            }
        }
    }; });

    Bridge.define("System.Collections.Specialized.NotifyCollectionChangedAction", {
        $kind: "enum",
        statics: {
            fields: {
                /**
                 * One or more items were added to the collection.
                 *
                 * @static
                 * @public
                 * @memberof System.Collections.Specialized.NotifyCollectionChangedAction
                 * @constant
                 * @default 0
                 * @type System.Collections.Specialized.NotifyCollectionChangedAction
                 */
                Add: 0,
                /**
                 * One or more items were removed from the collection.
                 *
                 * @static
                 * @public
                 * @memberof System.Collections.Specialized.NotifyCollectionChangedAction
                 * @constant
                 * @default 1
                 * @type System.Collections.Specialized.NotifyCollectionChangedAction
                 */
                Remove: 1,
                /**
                 * One or more items were replaced in the collection.
                 *
                 * @static
                 * @public
                 * @memberof System.Collections.Specialized.NotifyCollectionChangedAction
                 * @constant
                 * @default 2
                 * @type System.Collections.Specialized.NotifyCollectionChangedAction
                 */
                Replace: 2,
                /**
                 * One or more items were moved within the collection.
                 *
                 * @static
                 * @public
                 * @memberof System.Collections.Specialized.NotifyCollectionChangedAction
                 * @constant
                 * @default 3
                 * @type System.Collections.Specialized.NotifyCollectionChangedAction
                 */
                Move: 3,
                /**
                 * The content of the collection changed dramatically.
                 *
                 * @static
                 * @public
                 * @memberof System.Collections.Specialized.NotifyCollectionChangedAction
                 * @constant
                 * @default 4
                 * @type System.Collections.Specialized.NotifyCollectionChangedAction
                 */
                Reset: 4
            }
        }
    });

    /** @namespace System.Collections.Specialized */

    /**
     * Provides data for the {@link } event.
     *
     * @public
     * @class System.Collections.Specialized.NotifyCollectionChangedEventArgs
     * @augments System.Object
     */
    Bridge.define("System.Collections.Specialized.NotifyCollectionChangedEventArgs", {
        statics: {
            methods: {
                ArrayList_ReadOnly: function (list) {
                    // fixme:.net override ? 
                    return list;
                }
            }
        },
        fields: {
            _action: 0,
            "_newItems": null,
            "_oldItems": null,
            "_newStartingIndex": 0,
            "_oldStartingIndex": 0
        },
        props: {
            /**
             * Gets the action that caused the event.
             *
             * @instance
             * @public
             * @readonly
             * @memberof System.Collections.Specialized.NotifyCollectionChangedEventArgs
             * @function Action
             * @type System.Collections.Specialized.NotifyCollectionChangedAction
             * @return  {[type]}        A {@link } value that describes the action that caused the event.
             */
            Action: {
                get: function () {
                    return this._action;
                }
            },
            /**
             * Gets the list of new items involved in the change.
             *
             * @instance
             * @public
             * @readonly
             * @memberof System.Collections.Specialized.NotifyCollectionChangedEventArgs
             * @function NewItems
             * @type System.Collections.IList
             * @return  {[type]}        The list of new items involved in the change.
             */
            "NewItems": {
                get: function () {
                    return this["_newItems"];
                }
            },
            /**
             * Gets the index at which the change occurred.
             *
             * @instance
             * @public
             * @readonly
             * @memberof System.Collections.Specialized.NotifyCollectionChangedEventArgs
             * @function NewStartingIndex
             * @type number
             * @return  {[type]}        The zero-based index at which the change occurred.
             */
            "NewStartingIndex": {
                get: function () {
                    return this["_newStartingIndex"];
                }
            },
            /**
             * Gets the list of items affected by a {@link }, Remove, or Move action.
             *
             * @instance
             * @public
             * @readonly
             * @memberof System.Collections.Specialized.NotifyCollectionChangedEventArgs
             * @function OldItems
             * @type System.Collections.IList
             * @return  {[type]}        The list of items affected by a {@link }, Remove, or Move action.
             */
            "OldItems": {
                get: function () {
                    return this["_oldItems"];
                }
            },
            /**
             * Gets the index at which a {@link }, Remove, or Replace action occurred.
             *
             * @instance
             * @public
             * @readonly
             * @memberof System.Collections.Specialized.NotifyCollectionChangedEventArgs
             * @function OldStartingIndex
             * @type number
             * @return  {[type]}        The zero-based index at which a {@link }, Remove, or Replace action occurred.
             */
            "OldStartingIndex": {
                get: function () {
                    return this["_oldStartingIndex"];
                }
            }
        },
        ctors: {
            init: function () {
                this["_newStartingIndex"] = -1;
                this["_oldStartingIndex"] = -1;
            },
            /**
             * Initializes a new instance of the {@link } class that describes a {@link } change.
             *
             * @instance
             * @public
             * @this System.Collections.Specialized.NotifyCollectionChangedEventArgs
             * @memberof System.Collections.Specialized.NotifyCollectionChangedEventArgs
             * @param   {System.Collections.Specialized.NotifyCollectionChangedAction}    action    The action that caused the event. This must be set to {@link }.
             * @return  {void}
             */
            ctor: function (action) {
                this.$initialize();
                if (action !== System.Collections.Specialized.NotifyCollectionChangedAction.Reset) {
                    throw new System.ArgumentException("WrongActionForCtor");
                }
                this.InitializeAdd(action, null, -1);
            },
            /**
             * Initializes a new instance of the {@link } class that describes a one-item change.
             *
             * @instance
             * @public
             * @this System.Collections.Specialized.NotifyCollectionChangedEventArgs
             * @memberof System.Collections.Specialized.NotifyCollectionChangedEventArgs
             * @throws If <b /> is not Reset, Add, or Remove, or if <b /> is Reset and <b /> is not null.
             * @param   {System.Collections.Specialized.NotifyCollectionChangedAction}    action         The action that caused the event. This can be set to {@link }, {@link }, or {@link }.
             * @param   {System.Object}                                                   changedItem    The item that is affected by the change.
             * @return  {void}
             */
            $ctor7: function (action, changedItem) {
                this.$initialize();
                if (action !== System.Collections.Specialized.NotifyCollectionChangedAction.Add && action !== System.Collections.Specialized.NotifyCollectionChangedAction.Remove && action !== System.Collections.Specialized.NotifyCollectionChangedAction.Reset) {
                    throw new System.ArgumentException("MustBeResetAddOrRemoveActionForCtor");
                }
                if (action !== System.Collections.Specialized.NotifyCollectionChangedAction.Reset) {
                    this.InitializeAddOrRemove(action, Bridge.cast((System.Array.init([changedItem], System.Object)), System.Collections.IList), -1);
                    return;
                }
                if (changedItem != null) {
                    throw new System.ArgumentException("ResetActionRequiresNullItem");
                }
                this.InitializeAdd(action, null, -1);
            },
            /**
             * Initializes a new instance of the {@link } class that describes a one-item change.
             *
             * @instance
             * @public
             * @this System.Collections.Specialized.NotifyCollectionChangedEventArgs
             * @memberof System.Collections.Specialized.NotifyCollectionChangedEventArgs
             * @throws If <b /> is not Reset, Add, or Remove, or if <b /> is Reset and either <b /> is not null or <b /> is not -1.
             * @param   {System.Collections.Specialized.NotifyCollectionChangedAction}    action         The action that caused the event. This can be set to {@link }, {@link }, or {@link }.
             * @param   {System.Object}                                                   changedItem    The item that is affected by the change.
             * @param   {number}                                                          index          The index where the change occurred.
             * @return  {void}
             */
            $ctor8: function (action, changedItem, index) {
                this.$initialize();
                if (action !== System.Collections.Specialized.NotifyCollectionChangedAction.Add && action !== System.Collections.Specialized.NotifyCollectionChangedAction.Remove && action !== System.Collections.Specialized.NotifyCollectionChangedAction.Reset) {
                    throw new System.ArgumentException("MustBeResetAddOrRemoveActionForCtor");
                }
                if (action !== System.Collections.Specialized.NotifyCollectionChangedAction.Reset) {
                    this.InitializeAddOrRemove(action, Bridge.cast((System.Array.init([changedItem], System.Object)), System.Collections.IList), index);
                    return;
                }
                if (changedItem != null) {
                    throw new System.ArgumentException("ResetActionRequiresNullItem");
                }
                if (index !== -1) {
                    throw new System.ArgumentException("ResetActionRequiresIndexMinus1");
                }
                this.InitializeAdd(action, null, -1);
            },
            /**
             * Initializes a new instance of the {@link } class that describes a multi-item change.
             *
             * @instance
             * @public
             * @this System.Collections.Specialized.NotifyCollectionChangedEventArgs
             * @memberof System.Collections.Specialized.NotifyCollectionChangedEventArgs
             * @param   {System.Collections.Specialized.NotifyCollectionChangedAction}    action          The action that caused the event. This can be set to {@link }, {@link }, or {@link }.
             * @param   {System.Collections.IList}                                        changedItems    The items that are affected by the change.
             * @return  {void}
             */
            $ctor1: function (action, changedItems) {
                this.$initialize();
                if (action !== System.Collections.Specialized.NotifyCollectionChangedAction.Add && action !== System.Collections.Specialized.NotifyCollectionChangedAction.Remove && action !== System.Collections.Specialized.NotifyCollectionChangedAction.Reset) {
                    throw new System.ArgumentException("MustBeResetAddOrRemoveActionForCtor");
                }
                if (action !== System.Collections.Specialized.NotifyCollectionChangedAction.Reset) {
                    if (changedItems == null) {
                        throw new System.ArgumentNullException("changedItems");
                    }
                    this.InitializeAddOrRemove(action, changedItems, -1);
                    return;
                }
                if (changedItems != null) {
                    throw new System.ArgumentException("ResetActionRequiresNullItem");
                }
                this.InitializeAdd(action, null, -1);
            },
            /**
             * Initializes a new instance of the {@link } class that describes a multi-item change or a {@link } change.
             *
             * @instance
             * @public
             * @this System.Collections.Specialized.NotifyCollectionChangedEventArgs
             * @memberof System.Collections.Specialized.NotifyCollectionChangedEventArgs
             * @throws If <b /> is not Reset, Add, or Remove, if <b /> is Reset and either <b /> is not null or <b /> is not -1, or if action is Add or Remove and <b /> is less than -1.
             * @throws If <b /> is Add or Remove and <b /> is null.
             * @param   {System.Collections.Specialized.NotifyCollectionChangedAction}    action           The action that caused the event. This can be set to {@link }, {@link }, or {@link }.
             * @param   {System.Collections.IList}                                        changedItems     The items affected by the change.
             * @param   {number}                                                          startingIndex    The index where the change occurred.
             * @return  {void}
             */
            $ctor5: function (action, changedItems, startingIndex) {
                this.$initialize();
                if (action !== System.Collections.Specialized.NotifyCollectionChangedAction.Add && action !== System.Collections.Specialized.NotifyCollectionChangedAction.Remove && action !== System.Collections.Specialized.NotifyCollectionChangedAction.Reset) {
                    throw new System.ArgumentException("MustBeResetAddOrRemoveActionForCtor");
                }
                if (action !== System.Collections.Specialized.NotifyCollectionChangedAction.Reset) {
                    if (changedItems == null) {
                        throw new System.ArgumentNullException("changedItems");
                    }
                    if (startingIndex < -1) {
                        throw new System.ArgumentException("IndexCannotBeNegative:startingIndex");
                    }
                    this.InitializeAddOrRemove(action, changedItems, startingIndex);
                    return;
                }
                if (changedItems != null) {
                    throw new System.ArgumentException("ResetActionRequiresNullItem");
                }
                if (startingIndex !== -1) {
                    throw new System.ArgumentException("ResetActionRequiresIndexMinus1");
                }
                this.InitializeAdd(action, null, -1);
            },
            /**
             * Initializes a new instance of the {@link } class that describes a one-item {@link } change.
             *
             * @instance
             * @public
             * @this System.Collections.Specialized.NotifyCollectionChangedEventArgs
             * @memberof System.Collections.Specialized.NotifyCollectionChangedEventArgs
             * @throws If <b /> is not Replace.
             * @param   {System.Collections.Specialized.NotifyCollectionChangedAction}    action     The action that caused the event. This can only be set to {@link }.
             * @param   {System.Object}                                                   newItem    The new item that is replacing the original item.
             * @param   {System.Object}                                                   oldItem    The original item that is replaced.
             * @return  {void}
             */
            $ctor10: function (action, newItem, oldItem) {
                this.$initialize();
                if (action !== System.Collections.Specialized.NotifyCollectionChangedAction.Replace) {
                    throw new System.ArgumentException("WrongActionForCtor");
                }
                var objArray = System.Array.init([newItem], System.Object);
                var objArray1 = System.Array.init([oldItem], System.Object);
                this.InitializeMoveOrReplace(action, Bridge.cast(objArray, System.Collections.IList), Bridge.cast(objArray1, System.Collections.IList), -1, -1);
            },
            /**
             * Initializes a new instance of the {@link } class that describes a one-item {@link } change.
             *
             * @instance
             * @public
             * @this System.Collections.Specialized.NotifyCollectionChangedEventArgs
             * @memberof System.Collections.Specialized.NotifyCollectionChangedEventArgs
             * @throws If <b /> is not Replace.
             * @param   {System.Collections.Specialized.NotifyCollectionChangedAction}    action     The action that caused the event. This can be set to {@link }.
             * @param   {System.Object}                                                   newItem    The new item that is replacing the original item.
             * @param   {System.Object}                                                   oldItem    The original item that is replaced.
             * @param   {number}                                                          index      The index of the item being replaced.
             * @return  {void}
             */
            $ctor11: function (action, newItem, oldItem, index) {
                this.$initialize();
                if (action !== System.Collections.Specialized.NotifyCollectionChangedAction.Replace) {
                    throw new System.ArgumentException("WrongActionForCtor");
                }
                var Ä±nt32 = index;
                var objArray = System.Array.init([newItem], System.Object);
                var objArray1 = System.Array.init([oldItem], System.Object);
                this.InitializeMoveOrReplace(action, Bridge.cast(objArray, System.Collections.IList), Bridge.cast(objArray1, System.Collections.IList), index, Ä±nt32);
            },
            /**
             * Initializes a new instance of the {@link } class that describes a multi-item {@link } change.
             *
             * @instance
             * @public
             * @this System.Collections.Specialized.NotifyCollectionChangedEventArgs
             * @memberof System.Collections.Specialized.NotifyCollectionChangedEventArgs
             * @throws If <b /> is not Replace.
             * @throws If <b /> or <b /> is null.
             * @param   {System.Collections.Specialized.NotifyCollectionChangedAction}    action      The action that caused the event. This can only be set to {@link }.
             * @param   {System.Collections.IList}                                        newItems    The new items that are replacing the original items.
             * @param   {System.Collections.IList}                                        oldItems    The original items that are replaced.
             * @return  {void}
             */
            $ctor2: function (action, newItems, oldItems) {
                this.$initialize();
                if (action !== System.Collections.Specialized.NotifyCollectionChangedAction.Replace) {
                    throw new System.ArgumentException("WrongActionForCtor");
                }
                if (newItems == null) {
                    throw new System.ArgumentNullException("newItems");
                }
                if (oldItems == null) {
                    throw new System.ArgumentNullException("oldItems");
                }
                this.InitializeMoveOrReplace(action, newItems, oldItems, -1, -1);
            },
            /**
             * Initializes a new instance of the {@link } class that describes a multi-item {@link } change.
             *
             * @instance
             * @public
             * @this System.Collections.Specialized.NotifyCollectionChangedEventArgs
             * @memberof System.Collections.Specialized.NotifyCollectionChangedEventArgs
             * @throws If <b /> is not Replace.
             * @throws If <b /> or <b /> is null.
             * @param   {System.Collections.Specialized.NotifyCollectionChangedAction}    action           The action that caused the event. This can only be set to {@link }.
             * @param   {System.Collections.IList}                                        newItems         The new items that are replacing the original items.
             * @param   {System.Collections.IList}                                        oldItems         The original items that are replaced.
             * @param   {number}                                                          startingIndex    The index of the first item of the items that are being replaced.
             * @return  {void}
             */
            $ctor3: function (action, newItems, oldItems, startingIndex) {
                this.$initialize();
                if (action !== System.Collections.Specialized.NotifyCollectionChangedAction.Replace) {
                    throw new System.ArgumentException("WrongActionForCtor");
                }
                if (newItems == null) {
                    throw new System.ArgumentNullException("newItems");
                }
                if (oldItems == null) {
                    throw new System.ArgumentNullException("oldItems");
                }
                this.InitializeMoveOrReplace(action, newItems, oldItems, startingIndex, startingIndex);
            },
            /**
             * Initializes a new instance of the {@link } class that describes a one-item {@link } change.
             *
             * @instance
             * @public
             * @this System.Collections.Specialized.NotifyCollectionChangedEventArgs
             * @memberof System.Collections.Specialized.NotifyCollectionChangedEventArgs
             * @throws If <b /> is not Move or <b /> is less than 0.
             * @param   {System.Collections.Specialized.NotifyCollectionChangedAction}    action         The action that caused the event. This can only be set to {@link }.
             * @param   {System.Object}                                                   changedItem    The item affected by the change.
             * @param   {number}                                                          index          The new index for the changed item.
             * @param   {number}                                                          oldIndex       The old index for the changed item.
             * @return  {void}
             */
            $ctor9: function (action, changedItem, index, oldIndex) {
                this.$initialize();
                if (action !== System.Collections.Specialized.NotifyCollectionChangedAction.Move) {
                    throw new System.ArgumentException(System.SR.GetString("WrongActionForCtor", System.Array.init([Bridge.box(System.Collections.Specialized.NotifyCollectionChangedAction.Move, System.Collections.Specialized.NotifyCollectionChangedAction, System.Enum.toStringFn(System.Collections.Specialized.NotifyCollectionChangedAction))], System.Object)), "action");
                }
                if (index < 0) {
                    throw new System.ArgumentException(System.SR.GetString("IndexCannotBeNegative"), "index");
                }
                var objArray = System.Array.init([changedItem], System.Object);
                this.InitializeMoveOrReplace(action, objArray, objArray, index, oldIndex);
            },
            /**
             * Initializes a new instance of the {@link } class that describes a multi-item {@link } change.
             *
             * @instance
             * @public
             * @this System.Collections.Specialized.NotifyCollectionChangedEventArgs
             * @memberof System.Collections.Specialized.NotifyCollectionChangedEventArgs
             * @throws If <b /> is not Move or <b /> is less than 0.
             * @param   {System.Collections.Specialized.NotifyCollectionChangedAction}    action          The action that caused the event. This can only be set to {@link }.
             * @param   {System.Collections.IList}                                        changedItems    The items affected by the change.
             * @param   {number}                                                          index           The new index for the changed items.
             * @param   {number}                                                          oldIndex        The old index for the changed items.
             * @return  {void}
             */
            $ctor6: function (action, changedItems, index, oldIndex) {
                this.$initialize();
                if (action !== System.Collections.Specialized.NotifyCollectionChangedAction.Move) {
                    throw new System.ArgumentException(System.SR.GetString("WrongActionForCtor", System.Array.init([Bridge.box(System.Collections.Specialized.NotifyCollectionChangedAction.Move, System.Collections.Specialized.NotifyCollectionChangedAction, System.Enum.toStringFn(System.Collections.Specialized.NotifyCollectionChangedAction))], System.Object)), "action");
                }
                if (index < 0) {
                    throw new System.ArgumentException(System.SR.GetString("IndexCannotBeNegative"), "index");
                }
                this.InitializeMoveOrReplace(action, changedItems, changedItems, index, oldIndex);
            },
            $ctor4: function (action, newItems, oldItems, newIndex, oldIndex) {
                this.$initialize();
                var lists;
                var lists1;
                this._action = action;
                if (newItems == null) {
                    lists = null;
                } else {
                    lists = System.Collections.Specialized.NotifyCollectionChangedEventArgs.ArrayList_ReadOnly(newItems);

                }
                this["_newItems"] = lists;
                if (oldItems == null) {
                    lists1 = null;
                } else {
                    lists1 = System.Collections.Specialized.NotifyCollectionChangedEventArgs.ArrayList_ReadOnly(oldItems);

                }
                this["_oldItems"] = lists1;
                this["_newStartingIndex"] = newIndex;
                this["_oldStartingIndex"] = oldIndex;
            }
        },
        methods: {
            InitializeAdd: function (action, newItems, newStartingIndex) {
                var lists;
                this._action = action;
                if (newItems == null) {
                    lists = null;
                } else {
                    lists = System.Collections.Specialized.NotifyCollectionChangedEventArgs.ArrayList_ReadOnly(newItems);

                }
                this["_newItems"] = lists;
                this["_newStartingIndex"] = newStartingIndex;
            },
            InitializeAddOrRemove: function (action, changedItems, startingIndex) {
                if (action === System.Collections.Specialized.NotifyCollectionChangedAction.Add) {
                    this.InitializeAdd(action, changedItems, startingIndex);
                    return;
                }
                if (action === System.Collections.Specialized.NotifyCollectionChangedAction.Remove) {
                    this.InitializeRemove(action, changedItems, startingIndex);
                }
            },
            InitializeMoveOrReplace: function (action, newItems, oldItems, startingIndex, oldStartingIndex) {
                this.InitializeAdd(action, newItems, startingIndex);
                this.InitializeRemove(action, oldItems, oldStartingIndex);
            },
            InitializeRemove: function (action, oldItems, oldStartingIndex) {
                var lists;
                this._action = action;
                if (oldItems == null) {
                    lists = null;
                } else {
                    lists = System.Collections.Specialized.NotifyCollectionChangedEventArgs.ArrayList_ReadOnly(oldItems);

                }
                this["_oldItems"] = lists;
                this["_oldStartingIndex"] = oldStartingIndex;
            }
        }
    });

    /**
     * The bag changed event arguments
     *
     * @public
     * @class System.ComponentModel.BagChangedEventArgs
     * @augments System.ComponentModel.PropertyChangedEventArgs
     * @see {@link System.ComponentModel.PropertyChangedEventArgs}
     */
    Bridge.define("System.ComponentModel.BagChangedEventArgs", {
        inherits: [System.ComponentModel.PropertyChangedEventArgs],
        fields: {
            /**
             * Gets the new value.
             *
             * @instance
             * @public
             * @memberof System.ComponentModel.BagChangedEventArgs
             * @function NewValue
             * @type System.Object
             */
            NewValue: null,
            /**
             * Gets the old value.
             *
             * @instance
             * @public
             * @memberof System.ComponentModel.BagChangedEventArgs
             * @function OldValue
             * @type System.Object
             */
            OldValue: null
        },
        ctors: {
            /**
             * Initializes a new instance of the {@link } class.
             *
             * @instance
             * @public
             * @this System.ComponentModel.BagChangedEventArgs
             * @memberof System.ComponentModel.BagChangedEventArgs
             * @param   {string}    propertyName    Name of the property.
             * @return  {void}
             */
            ctor: function (propertyName) {
                this.$initialize();
                System.ComponentModel.PropertyChangedEventArgs.ctor.call(this, propertyName);
            },
            /**
             * Initializes a new instance of the {@link } class.
             *
             * @instance
             * @public
             * @this System.ComponentModel.BagChangedEventArgs
             * @memberof System.ComponentModel.BagChangedEventArgs
             * @param   {string}           propertyName    Name of the property.
             * @param   {System.Object}    newValue        The new value.
             * @return  {void}
             */
            $ctor1: function (propertyName, newValue) {
                this.$initialize();
                System.ComponentModel.PropertyChangedEventArgs.ctor.call(this, propertyName);
                this.NewValue = newValue;
            },
            /**
             * Initializes a new instance of the {@link } class.
             *
             * @instance
             * @public
             * @this System.ComponentModel.BagChangedEventArgs
             * @memberof System.ComponentModel.BagChangedEventArgs
             * @param   {string}           propertyName    Name of the property.
             * @param   {System.Object}    newValue        The new value.
             * @param   {System.Object}    oldValue        The old value.
             * @return  {void}
             */
            $ctor2: function (propertyName, newValue, oldValue) {
                this.$initialize();
                System.ComponentModel.PropertyChangedEventArgs.ctor.call(this, propertyName);
                this.NewValue = newValue;
                this.OldValue = oldValue;
            }
        }
    });

    /**
     * @memberof System
     * @callback System.Action
     * @return  {void}
     */

    Bridge.define("System.ComponentModel.Extensions", {
        statics: {
            methods: {
                /**
                 * invoke action when propertyName raised
                 *
                 * @static
                 * @public
                 * @this System.ComponentModel.Extensions
                 * @memberof System.ComponentModel.Extensions
                 * @param   {System.ComponentModel.INotifyPropertyChanged}    notifyPropertyChanged    
                 * @param   {string}                                          propertyName             
                 * @param   {System.Action}                                   action
                 * @return  {void}
                 */
                OnPropertyChanged: function (notifyPropertyChanged, propertyName, action) {
                    if (notifyPropertyChanged == null) {
                        throw new System.ArgumentNullException("notifyPropertyChanged");
                    }
                    notifyPropertyChanged.System$ComponentModel$INotifyPropertyChanged$addPropertyChanged(function (s, e) {
                        if (Bridge.referenceEquals(e.propertyName, propertyName)) {
                            action();
                        }
                    });
                }
            }
        }
    });

    Bridge.define("System.ComponentModel.ReflectionHelper", {
        statics: {
            props: {
                AllBindings: {
                    get: function () {
                        return 61;
                    }
                }
            },
            methods: {
                FindEvent: function (instance, eventName) {
                    if (instance == null) {
                        throw new System.ArgumentNullException("instance");
                    }

                    if (eventName == null) {
                        throw new System.ArgumentNullException("eventName");
                    }

                    var type = Bridge.getType(instance);
                    if (type == null) {
                        throw new System.ArgumentNullException("type");
                    }

                    return Bridge.Reflection.getMembers(type, 2, 284, eventName);
                },
                FindMethodInfo: function (instance, methodName) {
                    if (instance == null) {
                        throw new System.ArgumentNullException("instance");
                    }

                    if (methodName == null) {
                        throw new System.ArgumentNullException("methodName");
                    }

                    var type = Bridge.getType(instance);
                    if (type == null) {
                        throw new System.ArgumentNullException("type");
                    }

                    return Bridge.Reflection.getMembers(type, 8, 284, methodName);
                },
                FindMethodInfo$1: function (instance, methodName, parameterTypes) {
                    if (parameterTypes === void 0) { parameterTypes = []; }
                    if (instance == null) {
                        throw new System.ArgumentNullException("instance");
                    }

                    if (methodName == null) {
                        throw new System.ArgumentNullException("methodName");
                    }

                    var type = Bridge.getType(instance);
                    if (type == null) {
                        throw new System.ArgumentNullException("type");
                    }

                    return Bridge.Reflection.getMembers(type, 8, System.ComponentModel.ReflectionHelper.AllBindings | 256, methodName, parameterTypes);
                },
                FindProperty: function (instance, propertyName) {
                    if (instance == null) {
                        throw new System.ArgumentNullException("instance");
                    }

                    if (propertyName == null) {
                        throw new System.ArgumentNullException("propertyName");
                    }

                    var type = Bridge.getType(instance);
                    if (type == null) {
                        throw new System.ArgumentNullException("type");
                    }

                    return Bridge.Reflection.getMembers(type, 16, 284, propertyName);
                },
                GetMethodInfo: function (instance, methodName) {
                    var methodInfo = System.ComponentModel.ReflectionHelper.FindMethodInfo(instance, methodName);
                    if (methodInfo == null) {
                        throw new System.MissingMemberException("MethodNotFound: " + (Bridge.Reflection.getTypeFullName(Bridge.getType(instance)) || "") + " -> " + (methodName || ""));
                    }

                    return methodInfo;
                },
                GetPropertyValue: function (instance, propertyName) {
                    var propertyInfo = System.ComponentModel.ReflectionHelper.FindProperty(instance, propertyName);

                    if (propertyInfo == null) {
                        var bag = Bridge.as(instance, System.ComponentModel.Bag);
                        if (bag != null) {
                            return bag.GetValue(propertyName);
                        }

                        throw new System.MissingMemberException((Bridge.Reflection.getTypeFullName(Bridge.getType(instance)) || "") + "->" + (propertyName || ""));
                    }

                    return Bridge.Reflection.midel(propertyInfo.g, Bridge.unbox(instance))();
                },
                Invoke: function (instance, methodName) {
                    var methodInfo = System.ComponentModel.ReflectionHelper.FindMethodInfo(instance, methodName);
                    if (methodInfo == null) {
                        throw new System.MissingMemberException((Bridge.Reflection.getTypeFullName(Bridge.getType(instance)) || "") + "->" + (methodName || ""));
                    }

                    return Bridge.Reflection.midel(methodInfo, Bridge.unbox(instance))(null);
                },
                Invoke$1: function (instance, methodName, parameters) {
                    if (parameters === void 0) { parameters = []; }
                    var methodInfo = System.ComponentModel.ReflectionHelper.FindMethodInfo(instance, methodName);
                    if (methodInfo == null) {
                        throw new System.MissingMemberException((Bridge.Reflection.getTypeFullName(Bridge.getType(instance)) || "") + "->" + (methodName || ""));
                    }

                    return Bridge.Reflection.midel(methodInfo, Bridge.unbox(instance)).apply(null, Bridge.unbox(parameters));
                },
                /**
                 * Invokes the public non static method.
                 *
                 * @static
                 * @public
                 * @this System.ComponentModel.ReflectionHelper
                 * @memberof System.ComponentModel.ReflectionHelper
                 * @param   {System.Object}    instance      
                 * @param   {string}           methodName
                 * @return  {System.Object}
                 */
                InvokePublicNonStaticMethod: function (instance, methodName) {
                    if (instance == null) {
                        throw new System.ArgumentNullException("instance");
                    }

                    if (methodName == null) {
                        throw new System.ArgumentNullException("methodName");
                    }

                    var methodInfo = Bridge.Reflection.getMembers(Bridge.getType(instance), 8, 284, methodName);
                    if (methodInfo == null) {
                        throw new System.MissingMemberException((Bridge.Reflection.getTypeFullName(Bridge.getType(instance)) || "") + ":" + (methodName || ""));
                    }

                    return Bridge.Reflection.midel(methodInfo, Bridge.unbox(instance), null)(null);
                },
                SetNonStaticField: function (instance, fieldName, value) {
                    System.ComponentModel.ReflectionHelper.AssertParameters(instance, fieldName);

                    var type = Bridge.getType(instance);
                    if (type == null) {
                        throw new System.ArgumentNullException("type");
                    }

                    var fieldInfo = Bridge.Reflection.getMembers(type, 4, System.ComponentModel.ReflectionHelper.AllBindings | 256, fieldName);
                    if (fieldInfo == null) {
                        throw new System.MissingMemberException("FieldNotFound: " + (Bridge.Reflection.getTypeFullName(Bridge.getType(instance)) || "") + " -> " + (fieldName || ""));
                    }

                    Bridge.Reflection.fieldAccess(fieldInfo, Bridge.unbox(instance), Bridge.unbox(value));
                },
                SetPropertyValue: function (instance, propertyName, value) {
                    System.ComponentModel.ReflectionHelper.AssertParameters(instance, propertyName);

                    var type = Bridge.getType(instance);
                    if (type == null) {
                        throw new System.ArgumentNullException("type");
                    }

                    var propertyInfo = System.ComponentModel.ReflectionHelper.FindProperty(instance, propertyName);

                    if (propertyInfo == null) {
                        var bag = Bridge.as(instance, System.ComponentModel.Bag);
                        if (bag != null) {
                            bag.SetValue(propertyName, value);
                            return;
                        }

                        throw new System.MissingMemberException((Bridge.Reflection.getTypeFullName(type) || "") + "->" + (propertyName || ""));
                    }

                    Bridge.Reflection.midel(propertyInfo.s, Bridge.unbox(instance))(Bridge.unbox(value));
                },
                /**
                 * Tries the get value.
                 *
                 * @static
                 * @public
                 * @this System.ComponentModel.ReflectionHelper
                 * @memberof System.ComponentModel.ReflectionHelper
                 * @param   {System.Object}    instance        
                 * @param   {string}           propertyName
                 * @return  {System.Object}
                 */
                TryGetPropertyValue: function (instance, propertyName) {
                    var property = System.ComponentModel.ReflectionHelper.GetFirstNamedProperty(instance, propertyName);
                    if (property == null) {
                        return null;
                    }

                    return Bridge.Reflection.midel(property.g, Bridge.unbox(instance))();
                },
                AssertParameters: function (instance, memberName) {
                    if (instance == null) {
                        throw new System.ArgumentNullException("instance");
                    }

                    if (memberName == null) {
                        throw new System.ArgumentNullException("memberName");
                    }
                },
                /**
                 * Gets the first named property.
                 *
                 * @static
                 * @private
                 * @this System.ComponentModel.ReflectionHelper
                 * @memberof System.ComponentModel.ReflectionHelper
                 * @param   {System.Object}                     instance        
                 * @param   {string}                            propertyName
                 * @return  {System.Reflection.PropertyInfo}
                 */
                GetFirstNamedProperty: function (instance, propertyName) {
                    if (instance == null) {
                        return null;
                    }

                    return System.Linq.Enumerable.from(Bridge.Reflection.getMembers(Bridge.getType(instance), 16, 28)).firstOrDefault(function (p) {
                            return Bridge.referenceEquals(p.n, propertyName);
                        }, null);
                }
            }
        }
    });

    Bridge.define("System.ComponentModel.TypeConverterAttribute", {
        inherits: [System.Attribute],
        statics: {
            fields: {
                Default: null
            },
            ctors: {
                ctor: function () {
                    System.ComponentModel.TypeConverterAttribute.Default = new System.ComponentModel.TypeConverterAttribute.ctor();
                }
            }
        },
        fields: {
            _type: null,
            typeName: null
        },
        props: {
            ConverterTypeName: {
                get: function () {
                    return this.typeName;
                }
            }
        },
        ctors: {
            ctor: function () {
                this.$initialize();
                System.Attribute.ctor.call(this);
                this.typeName = "";
            },
            $ctor2: function (type) {
                this.$initialize();
                System.Attribute.ctor.call(this);
                this._type = type;
                this.typeName = Bridge.Reflection.getTypeQName(type);
            },
            $ctor1: function (typeName) {
                this.$initialize();
                System.Attribute.ctor.call(this);
                System.Extensions2.ToUpper(typeName, System.Globalization.CultureInfo.invariantCulture);
                this.typeName = typeName;
            }
        },
        methods: {
            equals: function (obj) {
                var typeConverterAttribute = Bridge.as(obj, System.ComponentModel.TypeConverterAttribute);
                if (typeConverterAttribute == null) {
                    return false;
                }
                return Bridge.referenceEquals(typeConverterAttribute.ConverterTypeName, this.typeName);
            },
            getHashCode: function () {
                return Bridge.getHashCode(this.typeName);
            }
        }
    });

    Bridge.define("System.Convert2", {
        statics: {
            fields: {
                ConvertTypes: null
            },
            props: {
                Thread_CurrentThread_CurrentCulture: {
                    get: function () {
                        return System.Globalization.CultureInfo.getCurrentCulture();
                    }
                }
            },
            ctors: {
                init: function () {
                    this.ConvertTypes = System.Array.init([
                        System.Empty, 
                        System.Object, 
                        System.DBNull, 
                        System.Boolean, 
                        System.Char, 
                        System.SByte, 
                        System.Byte, 
                        System.Int16, 
                        System.UInt16, 
                        System.Int32, 
                        System.UInt32, 
                        System.Int64, 
                        System.UInt64, 
                        System.Single, 
                        System.Double, 
                        System.Decimal, 
                        System.DateTime, 
                        System.Object, 
                        System.String
                    ], Function);
                }
            },
            methods: {
                ChangeType$2: function (value, typeCode) {
                    return System.Convert2.ChangeType$3(value, typeCode, System.Convert2.Thread_CurrentThread_CurrentCulture);
                },
                ChangeType$3: function (value, typeCode, provider) {
                    if (value == null && (typeCode === System.TypeCode.Empty || typeCode === System.TypeCode.String || typeCode === System.TypeCode.Object)) {
                        return null;
                    }

                    switch (typeCode) {
                        case System.TypeCode.Boolean: 
                            return Bridge.box(System.Convert.toBoolean(value, provider), System.Boolean, System.Boolean.toString);
                        case System.TypeCode.Char: 
                            return Bridge.box(System.Convert.toChar(value, provider, 1), System.Char, String.fromCharCode, System.Char.getHashCode);
                        case System.TypeCode.SByte: 
                            return Bridge.box(System.Convert.toSByte(value, provider), System.SByte);
                        case System.TypeCode.Byte: 
                            return Bridge.box(System.Convert.toByte(value, provider), System.Byte);
                        case System.TypeCode["Int16"]: 
                            return Bridge.box(System.Convert.toInt16(value, provider), System.Int16);
                        case System.TypeCode["UInt16"]: 
                            return Bridge.box(System.Convert.toUInt16(value, provider), System.UInt16);
                        case System.TypeCode["Int32"]: 
                            return Bridge.box(System.Convert.toInt32(value, provider), System.Int32);
                        case System.TypeCode["UInt32"]: 
                            return Bridge.box(System.Convert.toUInt32(value, provider), System.UInt32);
                        case System.TypeCode["Int64"]: 
                            return System.Convert.toInt64(value, provider);
                        case System.TypeCode["UInt64"]: 
                            return System.Convert.toUInt64(value, provider);
                        case System.TypeCode.Single: 
                            return Bridge.box(System.Convert.toSingle(value, provider), System.Single, System.Single.format, System.Single.getHashCode);
                        case System.TypeCode.Double: 
                            return Bridge.box(System.Convert.toDouble(value, provider), System.Double, System.Double.format, System.Double.getHashCode);
                        case System.TypeCode.Decimal: 
                            return System.Convert.toDecimal(value, provider);
                        case System.TypeCode.DateTime: 
                            return Bridge.box(System.Convert.toDateTime(value, provider), System.DateTime, System.DateTime.format);
                        case System.TypeCode.String: 
                            return System.Convert.toString(value, provider);
                        case System.TypeCode.Object: 
                            return value;
                        case System.TypeCode.DBNull: 
                            throw new System.InvalidCastException(System.Convert2.Environment_GetResourceString("InvalidCast_DBNull"));
                        case System.TypeCode.Empty: 
                            throw new System.InvalidCastException(System.Convert2.Environment_GetResourceString("InvalidCast_Empty"));
                        default: 
                            throw new System.ArgumentException(System.Convert2.Environment_GetResourceString("Arg_UnknownTypeCode"));
                    }
                },
                ChangeType: function (value, conversionType) {
                    return System.Convert2.ChangeType$1(value, conversionType, System.Convert2.Thread_CurrentThread_CurrentCulture);
                },
                ChangeType$1: function (value, conversionType, provider) {
                    if (conversionType == null) {
                        throw new System.ArgumentNullException("conversionType");
                    }

                    if (value == null) {
                        //if (conversionType.IsValueType)
                        //{
                        //    throw new InvalidCastException(Environment_GetResourceString("InvalidCast_CannotCastNullToValueType"));
                        //}
                        return null;
                    }

                    if (Bridge.referenceEquals(Bridge.getType(value), conversionType)) {
                        return value;
                    }

                    var rtConversionType = conversionType;

                    if (Bridge.referenceEquals(rtConversionType, System.Boolean)) {
                        return Bridge.box(System.Convert.toBoolean(value, provider), System.Boolean, System.Boolean.toString);
                    }
                    if (Bridge.referenceEquals(rtConversionType, System.Convert2.ConvertTypes[System.Array.index(System.TypeCode.Char, System.Convert2.ConvertTypes)])) {
                        return Bridge.box(System.Convert.toChar(value, provider, 1), System.Char, String.fromCharCode, System.Char.getHashCode);
                    }
                    if (Bridge.referenceEquals(rtConversionType, System.Convert2.ConvertTypes[System.Array.index(System.TypeCode.SByte, System.Convert2.ConvertTypes)])) {
                        return Bridge.box(System.Convert.toSByte(value, provider), System.SByte);
                    }
                    if (Bridge.referenceEquals(rtConversionType, System.Convert2.ConvertTypes[System.Array.index(System.TypeCode.Byte, System.Convert2.ConvertTypes)])) {
                        return Bridge.box(System.Convert.toByte(value, provider), System.Byte);
                    }
                    if (Bridge.referenceEquals(rtConversionType, System.Convert2.ConvertTypes[System.Array.index(System.TypeCode["Int16"], System.Convert2.ConvertTypes)])) {
                        return Bridge.box(System.Convert.toInt16(value, provider), System.Int16);
                    }
                    if (Bridge.referenceEquals(rtConversionType, System.Convert2.ConvertTypes[System.Array.index(System.TypeCode["UInt16"], System.Convert2.ConvertTypes)])) {
                        return Bridge.box(System.Convert.toUInt16(value, provider), System.UInt16);
                    }
                    if (Bridge.referenceEquals(rtConversionType, System.Convert2.ConvertTypes[System.Array.index(System.TypeCode["Int32"], System.Convert2.ConvertTypes)])) {
                        return Bridge.box(System.Convert.toInt32(value, provider), System.Int32);
                    }
                    if (Bridge.referenceEquals(rtConversionType, System.Convert2.ConvertTypes[System.Array.index(System.TypeCode["UInt32"], System.Convert2.ConvertTypes)])) {
                        return Bridge.box(System.Convert.toUInt32(value, provider), System.UInt32);
                    }
                    if (Bridge.referenceEquals(rtConversionType, System.Convert2.ConvertTypes[System.Array.index(System.TypeCode["Int64"], System.Convert2.ConvertTypes)])) {
                        return System.Convert.toInt64(value, provider);
                    }
                    if (Bridge.referenceEquals(rtConversionType, System.Convert2.ConvertTypes[System.Array.index(System.TypeCode["UInt64"], System.Convert2.ConvertTypes)])) {
                        return System.Convert.toUInt64(value, provider);
                    }
                    if (Bridge.referenceEquals(rtConversionType, System.Convert2.ConvertTypes[System.Array.index(System.TypeCode.Single, System.Convert2.ConvertTypes)])) {
                        return Bridge.box(System.Convert.toSingle(value, provider), System.Single, System.Single.format, System.Single.getHashCode);
                    }
                    if (Bridge.referenceEquals(rtConversionType, System.Convert2.ConvertTypes[System.Array.index(System.TypeCode.Double, System.Convert2.ConvertTypes)])) {
                        return Bridge.box(System.Convert.toDouble(value, provider), System.Double, System.Double.format, System.Double.getHashCode);
                    }
                    if (Bridge.referenceEquals(rtConversionType, System.Convert2.ConvertTypes[System.Array.index(System.TypeCode.Decimal, System.Convert2.ConvertTypes)])) {
                        return System.Convert.toDecimal(value, provider);
                    }
                    if (Bridge.referenceEquals(rtConversionType, System.Convert2.ConvertTypes[System.Array.index(System.TypeCode.DateTime, System.Convert2.ConvertTypes)])) {
                        return Bridge.box(System.Convert.toDateTime(value, provider), System.DateTime, System.DateTime.format);
                    }
                    if (Bridge.referenceEquals(rtConversionType, System.Convert2.ConvertTypes[System.Array.index(System.TypeCode.String, System.Convert2.ConvertTypes)])) {
                        return System.Convert.toString(value, provider);
                    }
                    if (Bridge.referenceEquals(rtConversionType, System.Convert2.ConvertTypes[System.Array.index(System.TypeCode.Object, System.Convert2.ConvertTypes)])) {
                        return value;
                    }

                    throw new System.NotImplementedException();
                },
                Environment_GetResourceString: function (key) {
                    return key;
                }
            }
        }
    });

    Bridge.define("System.DBNull", {
        statics: {
            fields: {
                Value: null
            },
            ctors: {
                init: function () {
                    this.Value = new System.DBNull();
                }
            }
        },
        ctors: {
            ctor: function () {
                this.$initialize();
            }
        },
        methods: {
            GetTypeCode: function () {
                return System.TypeCode.DBNull;
            },
            toString: function () {
                return "";
            },
            ToString: function (provider) {
                return "";
            }
        }
    });

    Bridge.define("System.Empty", {
        statics: {
            fields: {
                Value: null
            },
            ctors: {
                init: function () {
                    this.Value = new System.Empty();
                }
            }
        },
        ctors: {
            ctor: function () {
                this.$initialize();
            }
        },
        methods: {
            toString: function () {
                return "";
            }
        }
    });

    Bridge.define("System.ExceptionArgument", {
        $kind: "enum",
        statics: {
            fields: {
                obj: 0,
                dictionary: 1,
                dictionaryCreationThreshold: 2,
                array: 3,
                info: 4,
                key: 5,
                collection: 6,
                list: 7,
                match: 8,
                converter: 9,
                queue: 10,
                stack: 11,
                capacity: 12,
                index: 13,
                "startIndex": 14,
                value: 15,
                count: 16,
                "arrayIndex": 17,
                $name: 18,
                mode: 19,
                item: 20,
                options: 21,
                view: 22,
                sourceBytesToCopy: 23
            }
        }
    });

    Bridge.define("System.ExceptionResource", {
        $kind: "enum",
        statics: {
            fields: {
                "Argument_ImplementIComparable": 0,
                "Argument_InvalidType": 1,
                "Argument_InvalidArgumentForComparison": 2,
                "Argument_InvalidRegistryKeyPermissionCheck": 3,
                ArgumentOutOfRange_NeedNonNegNum: 4,
                Arg_ArrayPlusOffTooSmall: 5,
                Arg_NonZeroLowerBound: 6,
                Arg_RankMultiDimNotSupported: 7,
                Arg_RegKeyDelHive: 8,
                Arg_RegKeyStrLenBug: 9,
                Arg_RegSetStrArrNull: 10,
                Arg_RegSetMismatchedKind: 11,
                Arg_RegSubKeyAbsent: 12,
                Arg_RegSubKeyValueAbsent: 13,
                Argument_AddingDuplicate: 14,
                "Serialization_InvalidOnDeser": 15,
                Serialization_MissingKeys: 16,
                Serialization_NullKey: 17,
                "Argument_InvalidArrayType": 18,
                NotSupported_KeyCollectionSet: 19,
                NotSupported_ValueCollectionSet: 20,
                ArgumentOutOfRange_SmallCapacity: 21,
                "ArgumentOutOfRange_Index": 22,
                "Argument_InvalidOffLen": 23,
                "Argument_ItemNotExist": 24,
                ArgumentOutOfRange_Count: 25,
                "ArgumentOutOfRange_InvalidThreshold": 26,
                "ArgumentOutOfRange_ListInsert": 27,
                NotSupported_ReadOnlyCollection: 28,
                "InvalidOperation_CannotRemoveFromStackOrQueue": 29,
                "InvalidOperation_EmptyQueue": 30,
                "InvalidOperation_EnumOpCantHappen": 31,
                "InvalidOperation_EnumFailedVersion": 32,
                "InvalidOperation_EmptyStack": 33,
                ArgumentOutOfRange_BiggerThanCollection: 34,
                "InvalidOperation_EnumNotStarted": 35,
                "InvalidOperation_EnumEnded": 36,
                NotSupported_SortedListNestedWrite: 37,
                "InvalidOperation_NoValue": 38,
                "InvalidOperation_RegRemoveSubKey": 39,
                Security_RegistryPermission: 40,
                UnauthorizedAccess_RegistryNoWrite: 41,
                ObjectDisposed_RegKeyClosed: 42,
                "NotSupported_InComparableType": 43,
                "Argument_InvalidRegistryOptionsCheck": 44,
                "Argument_InvalidRegistryViewCheck": 45
            }
        }
    });

    /**
     * The extensions
     *
     * @static
     * @abstract
     * @public
     * @class System.Extensions
     */
    Bridge.define("System.Extensions", {
        statics: {
            props: {
                /**
                 * Gets the default format provider.
                 *
                 * @static
                 * @private
                 * @readonly
                 * @memberof System.Extensions
                 * @function DefaultFormatProvider
                 * @type System.IFormatProvider
                 */
                DefaultFormatProvider: {
                    get: function () {
                        return System.Globalization.CultureInfo.getCurrentCulture();
                    }
                }
            },
            methods: {
                /**
                 * Compares the specified right.
                 *
                 * @static
                 * @public
                 * @this System.Extensions
                 * @memberof System.Extensions
                 * @param   {System.Object}             left              
                 * @param   {System.Object}             right             
                 * @param   {System.IFormatProvider}    formatProvider
                 * @return  {number}
                 */
                Compare: function (left, right, formatProvider) {
                    if (formatProvider === void 0) { formatProvider = null; }
                    if (Bridge.referenceEquals(left, null) && Bridge.referenceEquals(right, null)) {
                        return 0;
                    }

                    if (!System.Extensions.IsNumeric(left)) {
                        throw System.Extensions.ValueMustbeNumeric(left);
                    }

                    if (!System.Extensions.IsNumeric(right)) {
                        throw System.Extensions.ValueMustbeNumeric(right);
                    }

                    return System.Convert.toDecimal(left, formatProvider).compareTo(System.Convert.toDecimal(right, formatProvider));
                },
                /**
                 * Gets default value of <b />
                 *
                 * @static
                 * @public
                 * @this System.Extensions
                 * @memberof System.Extensions
                 * @param   {Function}         type
                 * @return  {System.Object}
                 */
                GetDefaultValue: function (type) {
                    if (Bridge.Reflection.isClass(type)) {
                        return null;
                    }

                    return Bridge.createInstance(type);
                },
                /**
                 * Determines whether [is bigger than] [the specified right].
                 *
                 * @static
                 * @public
                 * @this System.Extensions
                 * @memberof System.Extensions
                 * @throws {System.ArgumentException} 
                 * @param   {System.Object}             left              The left.
                 * @param   {System.Object}             right             The right.
                 * @param   {System.IFormatProvider}    formatProvider    The format provider.
                 * @return  {boolean}                                     <pre><code>true</code></pre> if [is bigger than] [the specified right]; otherwise, <pre><code>false</code></pre>.
                 */
                IsBiggerThan: function (left, right, formatProvider) {
                    if (formatProvider === void 0) { formatProvider = null; }
                    if (Bridge.referenceEquals(left, null) || Bridge.referenceEquals(right, null)) {
                        return false;
                    }

                    if (System.Extensions.IsNumeric(left) && System.Extensions.IsNumeric(right)) {
                        return System.Convert.toDecimal(left, formatProvider).gt(System.Convert.toDecimal(right, formatProvider));
                    }
                    throw new System.ArgumentException(left.toString());
                },
                /**
                 * Determines whether [is not null].
                 *
                 * @static
                 * @public
                 * @this System.Extensions
                 * @memberof System.Extensions
                 * @param   {System.Object}    value    The value.
                 * @return  {boolean}                   <pre><code>true</code></pre> if [is not null] [the specified value]; otherwise, <pre><code>false</code></pre>.
                 */
                IsNotNull: function (value) {
                    return !Bridge.referenceEquals(value, null);
                },
                /**
                 * Determines whether this instance is null.
                 *
                 * @static
                 * @public
                 * @this System.Extensions
                 * @memberof System.Extensions
                 * @param   {System.Object}    value    The value.
                 * @return  {boolean}                   <pre><code>true</code></pre> if the specified value is null; otherwise, <pre><code>false</code></pre>.
                 */
                IsNull: function (value) {
                    return Bridge.referenceEquals(value, null);
                },
                /**
                 * Determines whether this instance is numeric.
                 *
                 * @static
                 * @public
                 * @this System.Extensions
                 * @memberof System.Extensions
                 * @param   {System.Object}    value
                 * @return  {boolean}
                 */
                IsNumeric: function (value) {
                    if (Bridge.referenceEquals(value, null)) {
                        return false;
                    }

                    if (Bridge.is(value, System.Byte) || Bridge.is(value, System.SByte) || Bridge.is(value, System.UInt16) || Bridge.is(value, System.UInt32) || Bridge.is(value, System.UInt64) || Bridge.is(value, System.Int16) || Bridge.is(value, System.Int32) || Bridge.is(value, System.Int64) || Bridge.is(value, System.Decimal) || Bridge.is(value, System.Double) || Bridge.is(value, System.Single)) {
                        return true;
                    }

                    return false;
                },
                /**
                 * Determines whether this instance is numeric.
                 *
                 * @static
                 * @public
                 * @this System.Extensions
                 * @memberof System.Extensions
                 * @param   {Function}    type
                 * @return  {boolean}
                 */
                IsNumeric$1: function (type) {
                    if (type == null) {
                        throw new System.ArgumentNullException("type");
                    }

                    if (Bridge.referenceEquals(type, System.Byte) || Bridge.referenceEquals(type, System.SByte) || Bridge.referenceEquals(type, System.UInt16) || Bridge.referenceEquals(type, System.UInt32) || Bridge.referenceEquals(type, System.UInt64) || Bridge.referenceEquals(type, System.Int16) || Bridge.referenceEquals(type, System.Int32) || Bridge.referenceEquals(type, System.Int64) || Bridge.referenceEquals(type, System.Decimal) || Bridge.referenceEquals(type, System.Double) || Bridge.referenceEquals(type, System.Single)) {
                        return true;
                    }

                    return false;
                },
                /**
                 * Determines whether the specified right is same.
                 *
                 * @static
                 * @public
                 * @this System.Extensions
                 * @memberof System.Extensions
                 * @param   {System.Object}             left              The left.
                 * @param   {System.Object}             right             The right.
                 * @param   {System.IFormatProvider}    formatProvider    The format provider.
                 * @return  {boolean}                                     <pre><code>true</code></pre> if the specified right is same; otherwise, <pre><code>false</code></pre>.
                 */
                IsSame: function (left, right, formatProvider) {
                    if (formatProvider === void 0) { formatProvider = null; }
                    if (Bridge.referenceEquals(left, null)) {
                        return Bridge.referenceEquals(right, null);
                    }

                    var leftAsString = Bridge.as(left, System.String);
                    if (leftAsString != null) {
                        return Bridge.equals(leftAsString, right);
                    }
                    if (Bridge.is(right, System.String)) {
                        return false;
                    }

                    if (System.Extensions.IsNumeric(left) && System.Extensions.IsNumeric(right)) {
                        return System.Convert.toDecimal(left, formatProvider).equalsT(System.Convert.toDecimal(right, formatProvider));
                    }

                    return Bridge.equals(left, right);
                },
                /**
                 * Determines whether this instance is string.
                 *
                 * @static
                 * @public
                 * @this System.Extensions
                 * @memberof System.Extensions
                 * @param   {System.Object}    value    The value.
                 * @return  {?boolean}
                 */
                IsString: function (value) {
                    return Bridge.is(value, System.String);
                },
                /**
                 * Removes value from end of str
                 *
                 * @static
                 * @public
                 * @this System.Extensions
                 * @memberof System.Extensions
                 * @param   {string}    data     
                 * @param   {string}    value
                 * @return  {string}
                 */
                RemoveFromEnd: function (data, value) {
                    if (System.String.endsWith(data, value)) {
                        return data.substr(0, ((data.length - value.length) | 0));
                    }

                    return data;
                },
                /**
                 * Removes value from start of str
                 *
                 * @static
                 * @public
                 * @this System.Extensions
                 * @memberof System.Extensions
                 * @param   {string}    data     
                 * @param   {string}    value
                 * @return  {string}
                 */
                RemoveFromStart: function (data, value) {
                    if (data == null) {
                        return null;
                    }

                    if (System.String.startsWith(data, value)) {
                        return data.substr(value.length, ((data.length - value.length) | 0));
                    }

                    return data;
                },
                /**
                 * To the boolean.
                 *
                 * @static
                 * @public
                 * @this System.Extensions
                 * @memberof System.Extensions
                 * @param   {System.Object}    value    The value.
                 * @return  {boolean}
                 */
                ToBoolean: function (value) {
                    return System.Extensions.ToBoolean$1(value, System.Extensions.DefaultFormatProvider);
                },
                /**
                 * To the boolean.
                 *
                 * @static
                 * @public
                 * @this System.Extensions
                 * @memberof System.Extensions
                 * @throws {System.ArgumentNullException} value
                 * @param   {System.Object}             value             The value.
                 * @param   {System.IFormatProvider}    formatProvider    The format provider.
                 * @return  {boolean}
                 */
                ToBoolean$1: function (value, formatProvider) {
                    if (System.Extensions.IsNull(value)) {
                        throw new System.ArgumentNullException("value");
                    }
                    return System.Convert.toBoolean(value, formatProvider);
                },
                /**
                 * To the boolean nullable.
                 *
                 * @static
                 * @public
                 * @this System.Extensions
                 * @memberof System.Extensions
                 * @param   {System.Object}    value    The value.
                 * @return  {?boolean}
                 */
                ToBooleanNullable: function (value) {
                    return System.Extensions.ToBooleanNullable$1(value, System.Extensions.DefaultFormatProvider);
                },
                /**
                 * To the boolean nullable.
                 *
                 * @static
                 * @public
                 * @this System.Extensions
                 * @memberof System.Extensions
                 * @param   {System.Object}             value             The value.
                 * @param   {System.IFormatProvider}    formatProvider    The format provider.
                 * @return  {?boolean}
                 */
                ToBooleanNullable$1: function (value, formatProvider) {
                    if (System.Extensions.IsNull(value)) {
                        return null;
                    }
                    return System.Convert.toBoolean(value, formatProvider);
                },
                /**
                 * To the decimal.
                 *
                 * @static
                 * @public
                 * @this System.Extensions
                 * @memberof System.Extensions
                 * @throws {System.ArgumentNullException} value
                 * @param   {System.Object}             value             The value.
                 * @param   {System.IFormatProvider}    formatProvider    The format provider.
                 * @return  {System.Decimal}
                 */
                ToDecimal$1: function (value, formatProvider) {
                    if (System.Extensions.IsNull(value)) {
                        throw new System.ArgumentNullException("value");
                    }
                    return System.Convert.toDecimal(value, formatProvider);
                },
                /**
                 * To the decimal.
                 *
                 * @static
                 * @public
                 * @this System.Extensions
                 * @memberof System.Extensions
                 * @throws {System.ArgumentNullException} value
                 * @param   {System.Object}     value    The value.
                 * @return  {System.Decimal}
                 */
                ToDecimal: function (value) {
                    if (System.Extensions.IsNull(value)) {
                        throw new System.ArgumentNullException("value");
                    }
                    return System.Extensions.ToDecimal$1(value, System.Extensions.DefaultFormatProvider);
                },
                /**
                 * To the decimal nullable.
                 *
                 * @static
                 * @public
                 * @this System.Extensions
                 * @memberof System.Extensions
                 * @param   {System.Object}             value             The value.
                 * @param   {System.IFormatProvider}    formatProvider    The format provider.
                 * @return  {?System.Decimal}
                 */
                ToDecimalNullable$1: function (value, formatProvider) {
                    if (System.Extensions.IsNull(value)) {
                        return System.Decimal.lift(null);
                    }
                    return System.Convert.toDecimal(value, formatProvider);
                },
                /**
                 * To the decimal nullable.
                 *
                 * @static
                 * @public
                 * @this System.Extensions
                 * @memberof System.Extensions
                 * @param   {System.Object}      value    The value.
                 * @return  {?System.Decimal}
                 */
                ToDecimalNullable: function (value) {
                    return System.Extensions.ToDecimalNullable$1(value, System.Extensions.DefaultFormatProvider);
                },
                /**
                 * To the int32.
                 *
                 * @static
                 * @public
                 * @this System.Extensions
                 * @memberof System.Extensions
                 * @throws {System.ArgumentNullException} value
                 * @param   {System.Object}    value    The value.
                 * @return  {number}
                 */
                ToInt32: function (value) {
                    if (System.Extensions.IsNull(value)) {
                        throw new System.ArgumentNullException("value");
                    }
                    return System.Convert.toInt32(value, System.Extensions.DefaultFormatProvider);
                },
                /**
                 * To the int32 nullable.
                 *
                 * @static
                 * @public
                 * @this System.Extensions
                 * @memberof System.Extensions
                 * @param   {System.Object}             value             The value.
                 * @param   {System.IFormatProvider}    formatProvider    The format provider.
                 * @return  {?number}
                 */
                ToInt32Nullable$1: function (value, formatProvider) {
                    if (System.Extensions.IsNull(value)) {
                        return null;
                    }
                    return System.Convert.toInt32(value, formatProvider);
                },
                /**
                 * To the int32 nullable.
                 *
                 * @static
                 * @public
                 * @this System.Extensions
                 * @memberof System.Extensions
                 * @param   {System.Object}    value
                 * @return  {?number}
                 */
                ToInt32Nullable: function (value) {
                    return System.Extensions.ToInt32Nullable$1(value, System.Globalization.CultureInfo.getCurrentCulture());
                },
                /**
                 * Values the mustbe numeric.
                 *
                 * @static
                 * @private
                 * @this System.Extensions
                 * @memberof System.Extensions
                 * @param   {System.Object}               value    The value.
                 * @return  {System.ArgumentException}
                 */
                ValueMustbeNumeric: function (value) {
                    return new System.ArgumentException(value.toString());
                }
            }
        }
    });

    Bridge.define("System.Extensions2", {
        statics: {
            methods: {
                ToUpper: function (value, culture) {
                    // TODO: eng and turkish
                    return value.toUpperCase();
                }
            }
        }
    });

    Bridge.define("System.MissingMemberException", {
        inherits: [System.SystemException],
        ctors: {
            ctor: function (message, innerException) {
                if (message === void 0) { message = null; }
                if (innerException === void 0) { innerException = null; }

                this.$initialize();
                System.SystemException.ctor.call(this, message, innerException);
            }
        }
    });

    Bridge.define("System.ObjectDisposedException", {
        inherits: [System.SystemException],
        fields: {
            objectName: null
        },
        props: {
            ObjectName: {
                get: function () {
                    return this.objectName;
                }
            }
        },
        ctors: {
            ctor: function (message, innerException) {
                if (message === void 0) { message = null; }
                if (innerException === void 0) { innerException = null; }

                this.$initialize();
                System.SystemException.ctor.call(this, message, innerException);
            },
            $ctor1: function (objectName, message) {
                this.$initialize();
                System.SystemException.ctor.call(this, message);
                this.objectName = objectName;
            }
        }
    });

    Bridge.define("System.Reflection.Extensions", {
        statics: {
            methods: {
                GetResource: function (assembly, name, throwOnError) {
                    var resource = assembly.getManifestResourceDataAsBase64(name);

                    if (resource == null) {
                        if (throwOnError) {
                            throw new System.InvalidOperationException("ResourceNotFound:" + (name || ""));
                        }

                        return null;
                    }

                    return System.Text.EncodingHelper.Base64Decode(resource);
                }
            }
        }
    });

    Bridge.define("System.Runtime.Serialization.SerializationException", {
        inherits: [System.SystemException],
        ctors: {
            ctor: function (message, innerException) {
                if (message === void 0) { message = null; }
                if (innerException === void 0) { innerException = null; }

                this.$initialize();
                System.SystemException.ctor.call(this, message, innerException);
            }
        }
    });

    Bridge.define("System.Security.SecurityException", {
        inherits: [System.SystemException],
        ctors: {
            ctor: function (message, innerException) {
                if (message === void 0) { message = null; }
                if (innerException === void 0) { innerException = null; }

                this.$initialize();
                System.SystemException.ctor.call(this, message, innerException);
            }
        }
    });

    Bridge.define("System.SR", {
        statics: {
            fields: {
                ObservableCollectionReentrancyNotAllowed: null
            },
            ctors: {
                init: function () {
                    this.ObservableCollectionReentrancyNotAllowed = "ObservableCollectionReentrancyNotAllowed";
                }
            },
            methods: {
                GetString: function (name, args) {
                    if (args === void 0) { args = []; }
                    return name;
                }
            }
        }
    });

    Bridge.define("System.Text.EncodingHelper", {
        statics: {
            methods: {
                Base64Decode: function (base64EncodedData) {
                    var base64EncodedBytes = System.Convert.fromBase64String(base64EncodedData);
                    return System.Text.Encoding.UTF8.GetString(base64EncodedBytes);
                }
            }
        }
    });

    Bridge.define("System.ThrowHelper", {
        statics: {
            methods: {
                GetArgumentName: function (argument) {
                    var str = null;
                    switch (argument) {
                        case System.ExceptionArgument.obj: 
                            {
                                str = "obj";
                                break;
                            }
                        case System.ExceptionArgument.dictionary: 
                            {
                                str = "dictionary";
                                break;
                            }
                        case System.ExceptionArgument.dictionaryCreationThreshold: 
                            {
                                str = "dictionaryCreationThreshold";
                                break;
                            }
                        case System.ExceptionArgument.array: 
                            {
                                str = "array";
                                break;
                            }
                        case System.ExceptionArgument.info: 
                            {
                                str = "info";
                                break;
                            }
                        case System.ExceptionArgument.key: 
                            {
                                str = "key";
                                break;
                            }
                        case System.ExceptionArgument.collection: 
                            {
                                str = "collection";
                                break;
                            }
                        case System.ExceptionArgument.list: 
                            {
                                str = "list";
                                break;
                            }
                        case System.ExceptionArgument.match: 
                            {
                                str = "match";
                                break;
                            }
                        case System.ExceptionArgument.converter: 
                            {
                                str = "converter";
                                break;
                            }
                        case System.ExceptionArgument.queue: 
                            {
                                str = "queue";
                                break;
                            }
                        case System.ExceptionArgument.stack: 
                            {
                                str = "stack";
                                break;
                            }
                        case System.ExceptionArgument.capacity: 
                            {
                                str = "capacity";
                                break;
                            }
                        case System.ExceptionArgument.index: 
                            {
                                str = "index";
                                break;
                            }
                        case System.ExceptionArgument["startIndex"]: 
                            {
                                str = "startIndex";
                                break;
                            }
                        case System.ExceptionArgument.value: 
                            {
                                str = "value";
                                break;
                            }
                        case System.ExceptionArgument.count: 
                            {
                                str = "count";
                                break;
                            }
                        case System.ExceptionArgument["arrayIndex"]: 
                            {
                                str = "arrayIndex";
                                break;
                            }
                        case System.ExceptionArgument.$name: 
                            {
                                str = "name";
                                break;
                            }
                        case System.ExceptionArgument.mode: 
                            {
                                str = "mode";
                                break;
                            }
                        case System.ExceptionArgument.item: 
                            {
                                str = "item";
                                break;
                            }
                        case System.ExceptionArgument.options: 
                            {
                                str = "options";
                                break;
                            }
                        case System.ExceptionArgument.view: 
                            {
                                str = "view";
                                break;
                            }
                        case System.ExceptionArgument.sourceBytesToCopy: 
                            {
                                str = "sourceBytesToCopy";
                                break;
                            }
                        default: 
                            {
                                return "";
                            }
                    }
                    return str;
                },
                GetResourceName: function (resource) {
                    var str = null;
                    switch (resource) {
                        case System.ExceptionResource["Argument_ImplementIComparable"]: 
                            {
                                str = "Argument_ImplementIComparable";
                                break;
                            }
                        case System.ExceptionResource["Argument_InvalidType"]: 
                            {
                                str = "Argument_InvalidType";
                                break;
                            }
                        case System.ExceptionResource["Argument_InvalidArgumentForComparison"]: 
                            {
                                str = "Argument_InvalidArgumentForComparison";
                                break;
                            }
                        case System.ExceptionResource["Argument_InvalidRegistryKeyPermissionCheck"]: 
                            {
                                str = "Argument_InvalidRegistryKeyPermissionCheck";
                                break;
                            }
                        case System.ExceptionResource.ArgumentOutOfRange_NeedNonNegNum: 
                            {
                                str = "ArgumentOutOfRange_NeedNonNegNum";
                                break;
                            }
                        case System.ExceptionResource.Arg_ArrayPlusOffTooSmall: 
                            {
                                str = "Arg_ArrayPlusOffTooSmall";
                                break;
                            }
                        case System.ExceptionResource.Arg_NonZeroLowerBound: 
                            {
                                str = "Arg_NonZeroLowerBound";
                                break;
                            }
                        case System.ExceptionResource.Arg_RankMultiDimNotSupported: 
                            {
                                str = "Arg_RankMultiDimNotSupported";
                                break;
                            }
                        case System.ExceptionResource.Arg_RegKeyDelHive: 
                            {
                                str = "Arg_RegKeyDelHive";
                                break;
                            }
                        case System.ExceptionResource.Arg_RegKeyStrLenBug: 
                            {
                                str = "Arg_RegKeyStrLenBug";
                                break;
                            }
                        case System.ExceptionResource.Arg_RegSetStrArrNull: 
                            {
                                str = "Arg_RegSetStrArrNull";
                                break;
                            }
                        case System.ExceptionResource.Arg_RegSetMismatchedKind: 
                            {
                                str = "Arg_RegSetMismatchedKind";
                                break;
                            }
                        case System.ExceptionResource.Arg_RegSubKeyAbsent: 
                            {
                                str = "Arg_RegSubKeyAbsent";
                                break;
                            }
                        case System.ExceptionResource.Arg_RegSubKeyValueAbsent: 
                            {
                                str = "Arg_RegSubKeyValueAbsent";
                                break;
                            }
                        case System.ExceptionResource.Argument_AddingDuplicate: 
                            {
                                str = "Argument_AddingDuplicate";
                                break;
                            }
                        case System.ExceptionResource["Serialization_InvalidOnDeser"]: 
                            {
                                str = "Serialization_InvalidOnDeser";
                                break;
                            }
                        case System.ExceptionResource.Serialization_MissingKeys: 
                            {
                                str = "Serialization_MissingKeys";
                                break;
                            }
                        case System.ExceptionResource.Serialization_NullKey: 
                            {
                                str = "Serialization_NullKey";
                                break;
                            }
                        case System.ExceptionResource["Argument_InvalidArrayType"]: 
                            {
                                str = "Argument_InvalidArrayType";
                                break;
                            }
                        case System.ExceptionResource.NotSupported_KeyCollectionSet: 
                            {
                                str = "NotSupported_KeyCollectionSet";
                                break;
                            }
                        case System.ExceptionResource.NotSupported_ValueCollectionSet: 
                            {
                                str = "NotSupported_ValueCollectionSet";
                                break;
                            }
                        case System.ExceptionResource.ArgumentOutOfRange_SmallCapacity: 
                            {
                                str = "ArgumentOutOfRange_SmallCapacity";
                                break;
                            }
                        case System.ExceptionResource["ArgumentOutOfRange_Index"]: 
                            {
                                str = "ArgumentOutOfRange_Index";
                                break;
                            }
                        case System.ExceptionResource["Argument_InvalidOffLen"]: 
                            {
                                str = "Argument_InvalidOffLen";
                                break;
                            }
                        case System.ExceptionResource["Argument_ItemNotExist"]: 
                            {
                                str = "Argument_ItemNotExist";
                                break;
                            }
                        case System.ExceptionResource.ArgumentOutOfRange_Count: 
                            {
                                str = "ArgumentOutOfRange_Count";
                                break;
                            }
                        case System.ExceptionResource["ArgumentOutOfRange_InvalidThreshold"]: 
                            {
                                str = "ArgumentOutOfRange_InvalidThreshold";
                                break;
                            }
                        case System.ExceptionResource["ArgumentOutOfRange_ListInsert"]: 
                            {
                                str = "ArgumentOutOfRange_ListInsert";
                                break;
                            }
                        case System.ExceptionResource.NotSupported_ReadOnlyCollection: 
                            {
                                str = "NotSupported_ReadOnlyCollection";
                                break;
                            }
                        case System.ExceptionResource["InvalidOperation_CannotRemoveFromStackOrQueue"]: 
                            {
                                str = "InvalidOperation_CannotRemoveFromStackOrQueue";
                                break;
                            }
                        case System.ExceptionResource["InvalidOperation_EmptyQueue"]: 
                            {
                                str = "InvalidOperation_EmptyQueue";
                                break;
                            }
                        case System.ExceptionResource["InvalidOperation_EnumOpCantHappen"]: 
                            {
                                str = "InvalidOperation_EnumOpCantHappen";
                                break;
                            }
                        case System.ExceptionResource["InvalidOperation_EnumFailedVersion"]: 
                            {
                                str = "InvalidOperation_EnumFailedVersion";
                                break;
                            }
                        case System.ExceptionResource["InvalidOperation_EmptyStack"]: 
                            {
                                str = "InvalidOperation_EmptyStack";
                                break;
                            }
                        case System.ExceptionResource.ArgumentOutOfRange_BiggerThanCollection: 
                            {
                                str = "ArgumentOutOfRange_BiggerThanCollection";
                                break;
                            }
                        case System.ExceptionResource["InvalidOperation_EnumNotStarted"]: 
                            {
                                str = "InvalidOperation_EnumNotStarted";
                                break;
                            }
                        case System.ExceptionResource["InvalidOperation_EnumEnded"]: 
                            {
                                str = "InvalidOperation_EnumEnded";
                                break;
                            }
                        case System.ExceptionResource.NotSupported_SortedListNestedWrite: 
                            {
                                str = "NotSupported_SortedListNestedWrite";
                                break;
                            }
                        case System.ExceptionResource["InvalidOperation_NoValue"]: 
                            {
                                str = "InvalidOperation_NoValue";
                                break;
                            }
                        case System.ExceptionResource["InvalidOperation_RegRemoveSubKey"]: 
                            {
                                str = "InvalidOperation_RegRemoveSubKey";
                                break;
                            }
                        case System.ExceptionResource.Security_RegistryPermission: 
                            {
                                str = "Security_RegistryPermission";
                                break;
                            }
                        case System.ExceptionResource.UnauthorizedAccess_RegistryNoWrite: 
                            {
                                str = "UnauthorizedAccess_RegistryNoWrite";
                                break;
                            }
                        case System.ExceptionResource.ObjectDisposed_RegKeyClosed: 
                            {
                                str = "ObjectDisposed_RegKeyClosed";
                                break;
                            }
                        case System.ExceptionResource["NotSupported_InComparableType"]: 
                            {
                                str = "NotSupported_InComparableType";
                                break;
                            }
                        case System.ExceptionResource["Argument_InvalidRegistryOptionsCheck"]: 
                            {
                                str = "Argument_InvalidRegistryOptionsCheck";
                                break;
                            }
                        case System.ExceptionResource["Argument_InvalidRegistryViewCheck"]: 
                            {
                                str = "Argument_InvalidRegistryViewCheck";
                                break;
                            }
                        default: 
                            {
                                return "";
                            }
                    }
                    return str;
                },
                IfNullAndNullsAreIllegalThenThrow: function (T, value, argName) {
                    if (value == null) {
                        if (Bridge.getDefaultValue(T) != null) {
                            System.ThrowHelper.ThrowArgumentNullException(argName);
                        }
                    }
                },
                ThrowArgumentException: function (resource) {
                    throw new System.ArgumentException(System.ThrowHelper.Environment.GetResourceString(System.ThrowHelper.GetResourceName(resource)));
                },
                ThrowArgumentException$1: function (resource, argument) {
                    throw new System.ArgumentException(System.ThrowHelper.Environment.GetResourceString(System.ThrowHelper.GetResourceName(resource)), System.ThrowHelper.GetArgumentName(argument));
                },
                ThrowArgumentNullException: function (argument) {
                    throw new System.ArgumentNullException(System.ThrowHelper.GetArgumentName(argument));
                },
                ThrowArgumentOutOfRangeException: function () {
                    System.ThrowHelper.ThrowArgumentOutOfRangeException$2(System.ExceptionArgument.index, System.ExceptionResource["ArgumentOutOfRange_Index"]);
                },
                ThrowArgumentOutOfRangeException$1: function (argument) {
                    throw new System.ArgumentOutOfRangeException(System.ThrowHelper.GetArgumentName(argument));
                },
                ThrowArgumentOutOfRangeException$2: function (argument, resource) {
                    //if (!CompatibilitySwitches.IsAppEarlierThanWindowsPhone8)
                    //{
                    //    throw new ArgumentOutOfRangeException(ThrowHelper.GetArgumentName(argument), Environment.GetResourceString(ThrowHelper.GetResourceName(resource)));
                    //}
                    throw new System.ArgumentOutOfRangeException(System.ThrowHelper.GetArgumentName(argument), "");
                },
                ThrowInvalidOperationException: function (resource) {
                    throw new System.InvalidOperationException(System.ThrowHelper.Environment.GetResourceString(System.ThrowHelper.GetResourceName(resource)));
                },
                ThrowKeyNotFoundException: function () {
                    throw new System.Collections.Generic.KeyNotFoundException();
                },
                ThrowNotSupportedException: function (resource) {
                    throw new System.InvalidOperationException(System.ThrowHelper.Environment.GetResourceString(System.ThrowHelper.GetResourceName(resource)));
                },
                ThrowObjectDisposedException: function (objectName, resource) {
                    throw new System.ObjectDisposedException.$ctor1(objectName, System.ThrowHelper.Environment.GetResourceString(System.ThrowHelper.GetResourceName(resource)));
                },
                ThrowSecurityException: function (resource) {
                    throw new System.Security.SecurityException(System.ThrowHelper.Environment.GetResourceString(System.ThrowHelper.GetResourceName(resource)));
                },
                ThrowSerializationException: function (resource) {
                    throw new System.Runtime.Serialization.SerializationException(System.ThrowHelper.Environment.GetResourceString(System.ThrowHelper.GetResourceName(resource)));
                },
                ThrowUnauthorizedAccessException: function (resource) {
                    throw new System.UnauthorizedAccessException(System.ThrowHelper.Environment.GetResourceString(System.ThrowHelper.GetResourceName(resource)));
                },
                ThrowWrongKeyTypeArgumentException: function (key, targetType) {
                    throw new System.ArgumentException(System.String.concat(System.String.concat("WrongKeyTypeArgumentException. @key:", key) + " @targetType:", Bridge.getTypeName(targetType)));
                },
                ThrowWrongValueTypeArgumentException: function (value, targetType) {
                    throw new System.ArgumentException(System.String.concat(System.String.concat("WrongValueTypeArgumentException. @value:", value) + " @targetType:", Bridge.getTypeName(targetType)));
                }
            }
        }
    });

    Bridge.define("System.ThrowHelper.Environment", {
        statics: {
            methods: {
                GetResourceString: function (key) {
                    return key;
                }
            }
        }
    });

    Bridge.define("System.UnauthorizedAccessException", {
        inherits: [System.SystemException],
        ctors: {
            ctor: function (message, innerException) {
                if (message === void 0) { message = null; }
                if (innerException === void 0) { innerException = null; }

                this.$initialize();
                System.SystemException.ctor.call(this, message, innerException);
            }
        }
    });

    Bridge.define("System.Windows.Controls.Orientation", {
        $kind: "enum",
        statics: {
            fields: {
                Horizontal: 0,
                Vertical: 1
            }
        }
    });

    Bridge.define("System.Windows.Data.BindingInfo", {
        statics: {
            fields: {
                BindingExpressionTokenizer: null
            },
            ctors: {
                init: function () {
                    var $t;
                    this.BindingExpressionTokenizer = ($t = new Bridge.CustomUIMarkup.Tokenizers.Tokenizer(), $t.TokenDefinitions = Bridge.CustomUIMarkup.Tokenizers.BindingExpressionTokenDefinitions.Value, $t);
                }
            },
            methods: {
                TryParseExpression: function (value) {
                    var $t;
                    if (value == null) {
                        return null;
                    }

                    value = value.trim();

                    if (System.String.startsWith(value, "{") === false) {
                        return null;
                    }

                    if (System.String.endsWith(value, "}") === false) {
                        return null;
                    }

                    var sourcePath = null;
                    var bindingMode = { v : System.Windows.Data.BindingMode.TwoWay };
                    var valueConverter = null;

                    var tokens = System.Linq.Enumerable.from(System.Windows.Data.BindingInfo.BindingExpressionTokenizer.Tokenize(value)).where(function (t) {
                            return !Bridge.referenceEquals(t.Value, " ");
                        }).toList(Bridge.CustomUIMarkup.Tokenizers.Token);
                    var len = tokens.Count;
                    for (var i = { v : 0 }; i.v < len; i.v = (i.v + 1) | 0) {
                        var token = tokens.getItem(i.v);

                        if (Bridge.referenceEquals(token.Value.toUpperCase(), "BINDING") || Bridge.referenceEquals(token.Value, " ")) {
                            continue;
                        }

                        if (sourcePath == null && token.TokenType === Bridge.CustomUIMarkup.Tokenizers.TokenType["Identifier"]) {
                            sourcePath = System.Windows.Data.BindingInfo.ReadPath(tokens, i);

                            continue;
                        }

                        if (Bridge.referenceEquals(token.Value.toUpperCase(), "MODE")) {
                            i.v = (i.v + 1) | 0; // skip mode
                            i.v = (i.v + 1) | 0; // skip assingment

                            System.Enum.tryParse(Bridge.global.System.Windows.Data.BindingMode, tokens.getItem(i.v).Value, bindingMode);
                            continue;
                        }

                        if (Bridge.referenceEquals(token.Value.toUpperCase(), "CONVERTER")) {
                            i.v = (i.v + 1) | 0; // skip converter
                            i.v = (i.v + 1) | 0; // skip assingment

                            var converterTypeFullName = System.Windows.Data.BindingInfo.ReadPath(tokens, i);

                            var converterType = Bridge.Reflection.getType(converterTypeFullName);
                            if (converterType == null) {
                                throw new System.MissingMemberException(converterTypeFullName);
                            }

                            valueConverter = Bridge.cast(Bridge.createInstance(converterType), System.Windows.Data.IValueConverter);
                        }
                    }

                    return ($t = new System.Windows.Data.BindingInfo(), $t.SourcePath = System.Windows.PropertyPath.op_Implicit(sourcePath), $t.BindingMode = bindingMode.v, $t.Converter = valueConverter, $t);
                },
                ReadPath: function (tokens, i) {
                    var path = "";
                    while (true) {
                        var token = System.Array.getItem(tokens, i.v, Bridge.CustomUIMarkup.Tokenizers.Token);

                        if (token.TokenType === Bridge.CustomUIMarkup.Tokenizers.TokenType["Identifier"] || token.TokenType === Bridge.CustomUIMarkup.Tokenizers.TokenType.Dot) {
                            path = (path || "") + (token.Value || "");
                            i.v = (i.v + 1) | 0;
                        } else {
                            i.v = (i.v - 1) | 0;
                            break;
                        }
                    }

                    return path;
                }
            }
        },
        fields: {
            BindingMode: 0,
            Converter: null,
            Source: null,
            SourcePath: null,
            Target: null,
            TargetPath: null
        },
        methods: {
            Connect: function () {
                this.ConnectSourceToTarget();

                if (this.BindingMode === System.Windows.Data.BindingMode.TwoWay) {
                    this.ConnectTargetToSource();
                } else {
                    this.TargetPath.Walk(this.Target);
                }

                this.UpdateTarget();
            },
            UpdateSource: function () {
                if (this.SourcePath["IsNotReadyToUpdate"]) {
                    return;
                }

                this.SourcePath.SetPropertyValue(this.GetTargetValue());
            },
            UpdateTarget: function () {
                if (this.TargetPath["IsNotReadyToUpdate"]) {
                    return;
                }

                var value = this.SourcePath.GetPropertyValue();

                if (this.Converter != null) {
                    value = this.Converter.System$Windows$Data$IValueConverter$Convert(value, null, null, null);
                }

                this.TargetPath.SetPropertyValue(value);
            },
            ConnectSourceToTarget: function () {
                this.SourcePath.Listen(this.Source, Bridge.fn.cacheBind(this, this.UpdateTarget));
            },
            ConnectTargetToSource: function () {
                this.TargetPath.Listen(this.Target, Bridge.fn.cacheBind(this, this.UpdateSource));
            },
            GetTargetValue: function () {
                return this.TargetPath.GetPropertyValue();
            }
        }
    });

    Bridge.define("System.Windows.Data.BindingMode", {
        $kind: "enum",
        statics: {
            fields: {
                TwoWay: 0,
                OneWay: 1
            }
        }
    });

    Bridge.define("System.Windows.Data.IValueConverter", {
        $kind: "interface"
    });

    Bridge.define("System.Windows.DependencyProperty", {
        statics: {
            fields: {
                Cache: null
            },
            ctors: {
                init: function () {
                    this.Cache = new (System.Collections.Generic.Dictionary$2(System.String,System.Windows.DependencyProperty))();
                }
            },
            methods: {
                GetAllProperties: function (ownerType, addBase) {
                    var $t;
                    if (addBase === void 0) { addBase = true; }

                    if (ownerType == null || Bridge.referenceEquals(ownerType, System.Object)) {
                        return null;
                    }

                    var items = new (System.Collections.Generic.List$1(System.Windows.DependencyProperty)).ctor();

                    var key = System.Windows.DependencyProperty.CreateKey$1(ownerType, null);
                    $t = Bridge.getEnumerator(System.Windows.DependencyProperty.Cache.getKeys(), System.String);
                    try {
                        while ($t.moveNext()) {
                            var cacheKey = $t.Current;
                            if (System.String.startsWith(cacheKey, key)) {
                                items.add(System.Windows.DependencyProperty.Cache.get(cacheKey));
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    if (addBase) {
                        var baseValues = System.Windows.DependencyProperty.GetAllProperties(Bridge.Reflection.getBaseType(ownerType));
                        if (baseValues != null) {
                            items.addRange(baseValues);
                        }
                    }

                    return items;
                },
                CreateKey: function (ownerTypeFullName, propertyName) {
                    return (ownerTypeFullName || "") + "->" + (propertyName || "");
                },
                CreateKey$1: function (ownerType, propertyName) {
                    if (ownerType == null) {
                        throw new System.ArgumentNullException("ownerType");
                    }


                    return System.Windows.DependencyProperty.CreateKey(Bridge.Reflection.getTypeFullName(ownerType), propertyName);
                },
                TryFind: function (ownerType, propertyName) {

                    var key = System.Windows.DependencyProperty.CreateKey$1(ownerType, propertyName);
                    var property = { v : null };
                    System.Windows.DependencyProperty.Cache.tryGetValue(key, property);

                    return property.v;
                },
                Search: function (ownerType, propertyName) {
                    while (true) {
                        if (ownerType == null || Bridge.referenceEquals(ownerType, System.Object)) {
                            return null;
                        }

                        var dependencyProperty = System.Windows.DependencyProperty.TryFind(ownerType, propertyName);
                        if (dependencyProperty != null) {
                            return dependencyProperty;
                        }

                        ownerType = Bridge.Reflection.getBaseType(ownerType);
                    }
                },
                TryInvokeOnPropertyChange: function (instance, name, newValue, oldValue) {
                    var $t, $t1;
                    var dependencyProperty = System.Windows.DependencyProperty.Search(Bridge.getType(instance), name);
                    if (dependencyProperty == null) {
                        return;
                    }
                    if (Bridge.staticEquals((($t = dependencyProperty.PropertyMetadata) != null ? $t.PropertyChangedCallback : null), null)) {
                        return;
                    }

                    ($t1 = dependencyProperty.PropertyMetadata) != null ? $t1.PropertyChangedCallback(instance, new System.Windows.DependencyPropertyChangedEventArgs.$ctor2(name, newValue, oldValue)) : null;
                },
                Register$2: function (description) {
                    if (System.Windows.DependencyProperty.Cache.containsKey(description.Key)) {
                        throw new System.ArgumentException(description.Key);
                    }

                    System.Windows.DependencyProperty.Cache.set(description.Key, description);

                },
                Register: function (name, propertyType, ownerType) {
                    var $t;
                    var dependencyProperty = ($t = new System.Windows.DependencyProperty(), $t.Name = name, $t.PropertyType = propertyType, $t.OwnerType = ownerType, $t);
                    System.Windows.DependencyProperty.Register$2(dependencyProperty);

                    return dependencyProperty;
                },
                Register$1: function (name, propertyType, ownerType, propertyMetadata) {
                    var $t;
                    var dependencyProperty = ($t = new System.Windows.DependencyProperty(), $t.Name = name, $t.PropertyType = propertyType, $t.OwnerType = ownerType, $t.PropertyMetadata = propertyMetadata, $t);
                    System.Windows.DependencyProperty.Register$2(dependencyProperty);

                    return dependencyProperty;
                }
            }
        },
        fields: {
            Name: null,
            OwnerType: null,
            PropertyType: null,
            PropertyMetadata: null
        },
        props: {
            Key: {
                get: function () {
                    return System.Windows.DependencyProperty.CreateKey(Bridge.Reflection.getTypeFullName(this.OwnerType), this.Name);
                }
            }
        }
    });

    Bridge.define("System.Windows.DOM", {
        statics: {
            props: {
                body: {
                    get: function () {
                        return $("body");
                    }
                },
                head: {
                    get: function () {
                        return $("head");
                    }
                }
            },
            methods: {
                a: function (className) {
                    return System.Windows.DOM.CreateElement$1("a", className);
                },
                button: function (className) {
                    return System.Windows.DOM.CreateElement$1("button", className);
                },
                ById: function (id) {
                    return $(document.getElementById(id));
                },
                CreateElement: function (tagName) {
                    return $(document.createElement(tagName));
                },
                CreateElement$1: function (tagName, className) {
                    return $(document.createElement(tagName)).addClass(className);
                },
                div: function (className) {
                    if (className === void 0) { className = null; }
                    return System.Windows.DOM.CreateElement$1("div", className);
                },
                h1: function (className) {
                    if (className === void 0) { className = null; }
                    return System.Windows.DOM.CreateElement$1("h1", className);
                },
                h2: function (className) {
                    if (className === void 0) { className = null; }
                    return System.Windows.DOM.CreateElement$1("h2", className);
                },
                h3: function (className) {
                    if (className === void 0) { className = null; }
                    return System.Windows.DOM.CreateElement$1("h3", className);
                },
                i: function (className) {
                    if (className === void 0) { className = null; }
                    return System.Windows.DOM.CreateElement$1("i", className);
                },
                img: function (className) {
                    if (className === void 0) { className = null; }
                    return System.Windows.DOM.CreateElement$1("img", className);
                },
                input: function (type, className) {
                    if (className === void 0) { className = null; }
                    return System.Windows.DOM.CreateElement$1("input", className).attr("type", type);
                },
                label: function (className) {
                    if (className === void 0) { className = null; }
                    return System.Windows.DOM.CreateElement$1("label", className);
                },
                li: function (className) {
                    if (className === void 0) { className = null; }
                    return System.Windows.DOM.CreateElement$1("li", className);
                },
                textarea: function (className) {
                    if (className === void 0) { className = null; }
                    return System.Windows.DOM.CreateElement$1("textarea", className);
                },
                ul: function (className) {
                    if (className === void 0) { className = null; }
                    return System.Windows.DOM.CreateElement$1("ul", className);
                }
            }
        }
    });

    Bridge.define("System.Windows.FrameworkElementExtensions", {
        statics: {
            methods: {
                Attr: function (T, element, attributeName, value) {
                    element._root.attr(attributeName, value);
                    return element;
                },
                Attr$1: function (T, element, attributeName) {
                    return element._root.attr(attributeName);
                },
                html: function (T, element) {
                    return element._root.html();
                },
                Val$1: function (T, element) {
                    return element._root.val();
                },
                Val: function (T, element, value) {
                    element._root.val(value);

                    return element;
                }
            }
        }
    });

    Bridge.define("System.Windows.HtmlBodyElement", {
        statics: {
            fields: {
                _value: null
            },
            props: {
                Value: {
                    get: function () {
                        var $t;
                        if (System.Windows.HtmlBodyElement._value == null) {
                            System.Windows.HtmlBodyElement._value = ($t = new System.Windows.HtmlElement(), $t._root = System.Windows.DOM.body, $t);
                        }

                        return System.Windows.HtmlBodyElement._value;
                    }
                }
            }
        }
    });

    Bridge.define("System.Windows.PropertyMetadata", {
        fields: {
            DefaultValue: null,
            PropertyChangedCallback: null
        },
        ctors: {
            $ctor2: function (propertyChangedCallback) {
                this.$initialize();
                this.PropertyChangedCallback = propertyChangedCallback;
            },
            $ctor1: function (defaultValue, propertyChangedCallback) {
                this.$initialize();
                this.DefaultValue = defaultValue;
                this.PropertyChangedCallback = propertyChangedCallback;
            },
            ctor: function (defaultValue) {
                this.$initialize();
                this.DefaultValue = defaultValue;
            }
        }
    });

    Bridge.define("System.Windows.PropertyPath", {
        statics: {
            methods: {
                op_Implicit: function (path) {
                    return new System.Windows.PropertyPath(path);
                }
            }
        },
        fields: {
            Triggers: null,
            "_pathLastNodeIsReachable": false,
            Path: null
        },
        props: {
            "IsNotReadyToUpdate": {
                get: function () {
                    return !this["_pathLastNodeIsReachable"];
                }
            },
            LastTrigger: {
                get: function () {
                    return this.Triggers.getItem(((this.Triggers.Count - 1) | 0));
                }
            }
        },
        ctors: {
            init: function () {
                this.Triggers = new (System.Collections.Generic.List$1(System.Windows.PropertyPath.Trigger)).ctor();
                this["_pathLastNodeIsReachable"] = true;
            },
            ctor: function (path) {
                this.$initialize();
                this.Path = path;
            }
        },
        methods: {
            Clear: function () {
                this.Triggers.forEach(function (t) {
                    t.StopListen();
                });
                this.Triggers.clear();
                this["_pathLastNodeIsReachable"] = true;
            },
            GetPropertyValue: function () {
                if (this.Triggers.Count === 0) {
                    throw new System.InvalidOperationException("PropertyPathProblem:" + (this.Path || ""));
                }

                var lastTrigger = this.LastTrigger;
                var instance = lastTrigger["Instance"];
                var propertyName = lastTrigger.PropertyName;

                var value = System.ComponentModel.ReflectionHelper.GetPropertyValue(instance, propertyName);

                return value;
            },
            Listen: function (instance, onPropertyValueChanged) {
                this.Walk(instance);

                var len = this.Triggers.Count;

                for (var i = 0; i < len; i = (i + 1) | 0) {
                    var trigger = this.Triggers.getItem(i);

                    trigger.OnPropertyValueChanged = Bridge.fn.bind(this, function () {
                        this.Listen(instance, onPropertyValueChanged);
                        onPropertyValueChanged();
                    });
                    trigger.Listen();
                }
            },
            SetPropertyValue: function (value) {
                var $t;
                var lastTrigger = this.LastTrigger;
                var instance = lastTrigger["Instance"];
                var propertyName = lastTrigger.PropertyName;

                var propertyType = ($t = System.ComponentModel.ReflectionHelper.FindProperty(instance, propertyName)) != null ? $t.rt : null;
                if (propertyType != null) {
                    value = System.Cast.To$2(value, propertyType, System.Globalization.CultureInfo.getCurrentCulture());
                }

                System.ComponentModel.ReflectionHelper.SetPropertyValue(instance, propertyName, value);
            },
            Walk: function (instance) {
                this.Clear();

                this.ParsePath(instance, this.Path);
            },
            ParsePath: function (instance, path) {
                var $t;
                while (true) {
                    if (instance == null) {
                        this["_pathLastNodeIsReachable"] = false;
                        return;
                    }

                    var firstDat = System.String.indexOf(path, String.fromCharCode(46));

                    if (firstDat < 0) {
                        this.Triggers.add(($t = new System.Windows.PropertyPath.Trigger(), $t["Instance"] = instance, $t.PropertyName = path, $t));
                        return;
                    }

                    var propertyName = path.substr(0, firstDat);

                    this.Triggers.add(($t = new System.Windows.PropertyPath.Trigger(), $t["Instance"] = instance, $t.PropertyName = propertyName, $t));

                    instance = System.ComponentModel.ReflectionHelper.GetPropertyValue(instance, propertyName);

                    path = path.substr(((firstDat + 1) | 0));
                }
            }
        }
    });

    Bridge.define("System.Windows.PropertyPath.Trigger", {
        fields: {
            "Instance": null,
            OnPropertyValueChanged: null,
            PropertyName: null
        },
        props: {
            "InstanceAsNotifyPropertyChanged": {
                get: function () {
                    return Bridge.as(this["Instance"], System.ComponentModel.INotifyPropertyChanged);
                }
            }
        },
        methods: {
            Listen: function () {
                if (this["InstanceAsNotifyPropertyChanged"] == null) {
                    return;
                }

                this["InstanceAsNotifyPropertyChanged"].System$ComponentModel$INotifyPropertyChanged$addPropertyChanged(Bridge.fn.cacheBind(this, this.OnChange));
            },
            StopListen: function () {
                if (this["InstanceAsNotifyPropertyChanged"] == null) {
                    return;
                }

                this["InstanceAsNotifyPropertyChanged"].System$ComponentModel$INotifyPropertyChanged$removePropertyChanged(Bridge.fn.cacheBind(this, this.OnChange));
            },
            toString: function () {
                return System.String.concat(this["Instance"], "->") + (this.PropertyName || "");
            },
            OnChange: function (sender, e) {
                if (Bridge.referenceEquals(e.propertyName, this.PropertyName)) {
                    this.OnPropertyValueChanged();
                }
            }
        }
    });

    Bridge.define("System.Windows.Template", {
        statics: {
            fields: {
                Cache: null
            },
            ctors: {
                init: function () {
                    this.Cache = new (System.Collections.Generic.Dictionary$2(System.String,System.Windows.Template))();
                }
            },
            methods: {
                CreateFromXml: function (xmlTemplate) {
                    var $t;
                    var rootNode = System.Xml.XmlHelper.GetRootNode(xmlTemplate);

                    var template = ($t = new System.Windows.Template(), $t._xmlTemplate = xmlTemplate, $t._rootNode = rootNode, $t);

                    return template;
                },
                CreateFrom: function (xmlNode) {
                    var $t;

                    return ($t = new System.Windows.Template(), $t._rootNode = xmlNode, $t);
                },
                RegisterAsXml: function (key, xmlTemplate) {
                    var $t;
                    var rootNode = System.Xml.XmlHelper.GetRootNode(xmlTemplate);

                    var template = ($t = new System.Windows.Template(), $t._key = key, $t._xmlTemplate = xmlTemplate, $t._rootNode = rootNode, $t);

                    System.Windows.Template.Cache.set(key, template);
                },
                RegisterAsXml$1: function (key, xmlTemplate) {
                    System.Windows.Template.RegisterAsXml(Bridge.Reflection.getTypeFullName(key), xmlTemplate);
                },
                GetDefaultTemplate: function (type) {
                    var cacheKey = Bridge.Reflection.getTypeFullName(type);

                    var template = { v : null };

                    if (System.Windows.Template.Cache.tryGetValue(cacheKey, template)) {
                        return template.v;
                    }

                    var templateAsXmlString = Bridge.CustomUIMarkup.Resources.GetXmlFileContent(System.Windows.Template.GetResourceKey(type));

                    if (templateAsXmlString == null) {
                        System.Windows.Template.Cache.set(cacheKey, null);
                        return null;
                    }

                    template.v = System.Windows.Template.CreateFromXml(templateAsXmlString);


                    System.Windows.Template.Cache.set(cacheKey, template.v);

                    return template.v;
                },
                GetResourceKey: function (type) {
                    if (type == null) {
                        throw new System.ArgumentNullException("type");
                    }

                    return (System.String.replaceAll(System.Extensions.RemoveFromStart(Bridge.Reflection.getTypeFullName(type), "Bridge.CustomUIMarkup."), ".", "/") || "") + ".Template.xml";
                },
                Register: function (type) {
                    if (type == null) {
                        throw new System.ArgumentNullException("type");
                    }

                    var resourceKey = System.Windows.Template.GetResourceKey(type);

                    var templateXml = Bridge.CustomUIMarkup.Resources.GetXmlFileContent(resourceKey);

                    System.Windows.Template.RegisterAsXml(Bridge.Reflection.getTypeFullName(type), templateXml);
                },
                Get$1: function (key) {
                    return System.Windows.Template.Get(Bridge.Reflection.getTypeFullName(key));
                },
                Get: function (key) {

                    var template = System.Windows.Template.Find(key);
                    if (template == null) {
                        throw new System.InvalidOperationException("TemplateNotFound. Key: " + (key || ""));
                    }
                    return template;
                },
                Find$1: function (key) {
                    return System.Windows.Template.Find(Bridge.Reflection.getTypeFullName(key));
                },
                Find: function (key) {
                    var template = { v : null };
                    System.Windows.Template.Cache.tryGetValue(key, template);
                    return template.v;
                }
            }
        },
        fields: {
            _key: null,
            _xmlTemplate: null,
            _rootNode: null
        },
        props: {
            Root: {
                get: function () {
                    return this._rootNode;
                }
            }
        },
        ctors: {
            ctor: function () {
                this.$initialize();

            }
        }
    });

    Bridge.define("System.Windows.TextWrapping", {
        $kind: "enum",
        statics: {
            fields: {
                WrapWithOverflow: 0,
                NoWrap: 1,
                Wrap: 2
            }
        }
    });

    Bridge.define("System.Windows.Visibility", {
        $kind: "enum",
        statics: {
            fields: {
                Visible: 0,
                Hidden: 1,
                Collapsed: 2
            }
        },
        $utype: System.Byte
    });

    Bridge.define("System.Xml.XmlException", {
        inherits: [System.SystemException],
        ctors: {
            ctor: function (message, innerException) {
                this.$initialize();
                System.SystemException.ctor.call(this, message, innerException);
            }
        }
    });

    Bridge.define("System.Xml.XmlHelper", {
        statics: {
            methods: {
                GetRootNode: function (xmlString) {
                    var $t;
                    return ($t = System.Xml.XmlHelper.Parse(xmlString)) != null ? $t.firstChild : null;
                },
                Parse: function (xmlString) {
                    try {
                        xmlString = System.String.replaceAll(System.String.replaceAll(xmlString, "x:Name=", "x.Name = "), "x:Name =", "x.Name = ");
                        return $.parseXML(xmlString);
                    }
                    catch (e) {
                        e = System.Exception.create(e);
                        throw new System.Xml.XmlException("XmlParseErrorOccured.", e);
                    }
                }
            }
        }
    });

    Bridge.define("System.Windows.DependencyObject", {
        inherits: [System.ComponentModel.Bag],
        methods: {
            SetValue$1: function (dp, value) {
                this.setItem(dp.Name, value);
            },
            GetValue$1: function (dp) {
                var $t;
                var value = this.getItem(dp.Name);
                if (value == null) {
                    if ((($t = dp.PropertyMetadata) != null ? $t.DefaultValue : null) != null) {
                        return dp.PropertyMetadata.DefaultValue;
                    }

                    if (Bridge.Reflection.isEnum(dp.PropertyType)) {
                        return System.Enum.parse(dp.PropertyType, "0");
                    }
                }
                return value;
            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup_DesignerSamples.ExampleDataContext", {
        inherits: [System.ComponentModel.Bag],
        fields: {
            _inner: null,
            _examples: null,
            _currentTemplate: null
        },
        props: {
            "Inner": {
                get: function () {
                    return this._inner;
                },
                set: function (value) {
                    if (!Bridge.referenceEquals(this._inner, value)) {
                        this._inner = value;
                        this.OnPropertyChanged("Inner");
                    }
                }
            },
            Examples: {
                get: function () {
                    return this._examples;
                },
                set: function (value) {
                    if (!Bridge.referenceEquals(this._examples, value)) {
                        this._examples = value;
                        this.OnPropertyChanged("Examples");
                    }
                }
            },
            CurrentTemplate: {
                get: function () {
                    return this._currentTemplate;
                },
                set: function (value) {
                    if (!Bridge.referenceEquals(this._currentTemplate, value)) {
                        this._currentTemplate = value;
                        this.OnPropertyChanged("CurrentTemplate");
                    }
                }
            }
        },
        ctors: {
            ctor: function () {
                this.$initialize();
                System.ComponentModel.Bag.ctor.call(this);
                this.Examples = function (_o1) {
                        var $t;
                        _o1.add(($t = new Bridge.CustomUIMarkup_DesignerSamples.ExampleInfo(), $t.Name = "DataGrid", $t.XmlTemplate = "\r\n\r\n\r\n<div Padding='11'>\r\n\t<DataGrid ItemsSource='{Examples}'>\r\n\t\t<DataGrid.Columns>\r\n\t\t\t<DataGridColumn Label='Label_A'    Name = 'Name' />\r\n\t\t\t<DataGridColumn Label='xxxx'    Name = 'Name' />\r\n\t\t</DataGrid.Columns>\r\n\t</DataGrid>\r\n</div> \r\n\r\n", $t));
                        _o1.add(($t = new Bridge.CustomUIMarkup_DesignerSamples.ExampleInfo(), $t.Name = "Add review", $t.XmlTemplate = "\r\n\r\n\r\n<ui.segment Margin='11'>\r\n\t<ui.form >\r\n\t\t<ui.header.2>Add a review</ui.header.2>\r\n\r\n\t\t<field Label='your Rating'>\r\n\t\t\t<ui_rating  MaxRate='5'  />\r\n\t\t</field>\r\n\r\n\t\t<field Label='Name' >\r\n\t\t\t<textBox  IsMandatory='true' />\r\n\t\t</field>\r\n\r\n\t\t<field Label='Your review'>\r\n\t\t\t<textArea  IsMandatory='true' />\r\n\t\t</field>\r\n\r\n\t\t<ui.basic.button> GÃ¶nder\r\n\t\t</ui.basic.button>\r\n\r\n\t</ui.form>\r\n\r\n</ui.segment>\r\n\r\n", $t));
                        _o1.add(($t = new Bridge.CustomUIMarkup_DesignerSamples.ExampleInfo(), $t.Name = "comments", $t.XmlTemplate = "\r\n\r\n<ui_comments>\r\n\t<comment AvatarImageUrl='img/AvatarImageSample.jpg'  \r\n             Author='adana'\r\n             MetadataTimeInfo='11 agustos Pazar 5:44 AM'\r\n             Text='uzuncana bir comment br  sdfsdfsdfsgggguzuncana bir comment br  sdfsdfsdfsgggguzuncana bir comment br  sdfsdfsdfsgggguzuncana bir comment br  sdfsdfsdfsgggguzuncana bir comment br  sdfsdfsdfsgggguzuncana bir comment br  sdfsdfsdfsgggguzuncana bir comment br  sdfsdfsdfsgggg'\r\n             />\r\n  \r\n  <comment AvatarImageUrl='img/AvatarImageSample.jpg'  \r\n             Author='ahmet'\r\n             MetadataTimeInfo='11 agustos Pazar 5:44 AM'\r\n             Text='uzuncana bir comment br  sdfsdfsdfsgggguzuncana bir comment br  sdfsdfsdfsgggguzuncana bir comment br  sdfsdfsdfsgggguzuncana bir comment br  sdfsdfsdfsgggguzuncana bir comment br  sdfsdfsdfsgggguzuncana bir comment br  sdfsdfsdfsgggguzuncana bir comment br  sdfsdfsdfsgggg'\r\n             />\r\n    \r\n   <comment AvatarImageUrl='img/AvatarImageSample.jpg'  \r\n             Author='xyz'\r\n             MetadataTimeInfo='11 agustos Pazar 5:44 AM'\r\n             Text='uzuncana bir comment br  sdfsdfsdfsgggguzuncana bir comment br  sdfsdfsdfsgggguzuncana bir comment br  sdfsdfsdfsgggguzuncana bir comment br  sdfsdfsdfsgggguzuncana bir comment br  sdfsdfsdfsgggguzuncana bir comment br  sdfsdfsdfsgggguzuncana bir comment br  sdfsdfsdfsgggg'\r\n             />\r\n  \r\n</ui_comments>\r\n\r\n", $t));
                        _o1.add(($t = new Bridge.CustomUIMarkup_DesignerSamples.ExampleInfo(), $t.Name = "Tabs", $t.XmlTemplate = "\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n<div Padding='11'>\r\n\t<ui_top_attached_tabular_menu>\r\n\t\t<Tab Header ='Header1' AddClass='active'>\r\n  \t\t\t<div class='ui segment'>\r\n                <ui.header.3> Product description</ui.header.3>\r\n          \t    <p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo.</p>\r\n            </div>\r\n  \t\t</Tab>  \r\n  \r\n  \t\t<Tab Header ='Header2'> \r\n  \t\t\tWrite Content here 2\r\n  \t\t</Tab> \r\n\t</ui_top_attached_tabular_menu> \r\n</div>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n", $t));
                        _o1.add(($t = new Bridge.CustomUIMarkup_DesignerSamples.ExampleInfo(), $t.Name = "Viewverjs", $t.XmlTemplate = "\r\n\r\n\r\n\r\n<div>\r\n  <ImageGalery>\r\n      <img src='img/carousel_1.jpg'  />\r\n      <img src='img/carousel_1.jpg'  />\r\n      <img src='img/carousel_1.jpg'  />\r\n      <img src='img/carousel_1.jpg'  />\r\n      <img src='img/carousel_1.jpg'  />\r\n      <img src='img/carousel_1.jpg'  />\r\n      <img src='img/carousel_1.jpg'  />\r\n      <img src='img/carousel_1.jpg'  />\r\n      <img src='img/carousel_1.jpg'  />\r\n      <img src='img/carousel_1.jpg'  />\r\n      <img src='img/carousel_1.jpg'  />\r\n      <img src='img/carousel_1.jpg'  />\r\n      <img src='img/carousel_1.jpg'  />\r\n      <img src='img/carousel_1.jpg'  />\r\n      <img src='img/carousel_1.jpg'  />\r\n      <img src='img/carousel_1.jpg'  />\r\n      <img src='img/carousel_1.jpg'  />\r\n  </ImageGalery>\r\n</div>\r\n\r\n\r\n\r\n\r\n\r\n", $t));
                        _o1.add(($t = new Bridge.CustomUIMarkup_DesignerSamples.ExampleInfo(), $t.Name = "All", $t.XmlTemplate = "\r\n\r\n\r\n\r\n\r\n\r\n<ui.page.grid>\r\n   <ui.container>\r\n      <ui.text.menu.navbar FontSize='18'>\r\n         <left.menu>\r\n            <item>Project Name</item>\r\n         </left.menu>\r\n         <right.menu>\r\n            <item>Home</item>\r\n            <item>About</item>\r\n            <item>Contact</item>\r\n         </right.menu>\r\n      </ui.text.menu.navbar>\r\n      <ui.divider MarginBottom='10' />\r\n      <Carousel DataSource='img/carousel_1.jpg,img/carousel_2.jpg,img/carousel_3.jpg' />\r\n      <ui.divider MarginBottom='10' />\r\n\t  <ui.cards>\r\n\t  \r\n\t\t  <card>\r\n\t\t\t <ui.image Src='http://www.samsunkorkuciftligi.com/upload/20170314__2069208026.jpg' />\r\n\t\t\t <content Align='Center'>\r\n\t\t\t\t<Header Align='Center'>Motor Safari</Header>\r\n\t\t\t\t<description>Macera sizi bekliyor...</description>\r\n\t\t\t\t<ui.basic.button Text='Ä°ncele' MarginTop='11' AddClass='yellow' />\r\n\t\t\t </content>\r\n\t\t  </card>\r\n\t\t  \r\n\t\t  <card>\r\n\t\t\t <ui.image Src='http://www.samsunkorkuciftligi.com/upload/20170314__2069208026.jpg' />\r\n\t\t\t <content Align='Center'>\r\n\t\t\t\t<Header Align='Center'>Motor Safari</Header>\r\n\t\t\t\t<description>Macera sizi bekliyor...</description>\r\n\t\t\t\t<ui.basic.button Text='Ä°ncele' MarginTop='11' AddClass='yellow' />\r\n\t\t\t </content>\r\n\t\t  </card>\r\n\t\t  \r\n\t  </ui.cards>\r\n   </ui.container>\r\n</ui.page.grid>\r\n\r\n\r\n\r\n", $t));
                        _o1.add(($t = new Bridge.CustomUIMarkup_DesignerSamples.ExampleInfo(), $t.Name = "DataGrid", $t.XmlTemplate = "\r\n\r\n\r\n<ui-container>\r\n    <DataGrid />\r\n</ui-container>\r\n\r\n", $t));
                        _o1.add(($t = new Bridge.CustomUIMarkup_DesignerSamples.ExampleInfo(), $t.Name = "Card", $t.XmlTemplate = "\r\n\r\n<ui.cards>\r\n\r\n    <card>\r\n\t    <ui.image Src='http://www.samsunkorkuciftligi.com/upload/20170314__2069208026.jpg'/>\r\n\t    <content Align='Center'>\r\n            <Header Align='Center' >Motor Safari</Header>\r\n            <description> Macera sizi bekliyor...</description>\r\n            <ui.basic.button Text='Ä°ncele' MarginTop='11' AddClass='yellow' />\r\n        </content>\t\r\n    </card>\r\n\r\n</ui.cards>\r\n", $t));
                        _o1.add(($t = new Bridge.CustomUIMarkup_DesignerSamples.ExampleInfo(), $t.Name = "Grid.column", $t.XmlTemplate = "\r\n\r\n\r\n<ui.grid>\r\n  \r\n    <column Width='27' Align='Center'>\r\n        <Icon Type='Setting' Color='#ffbb00' FontSize='17' />\r\n    </column>\r\n  \r\n  \t<Column Width='80'>\r\n        <TextBlock Text='Start Date:' Color='#888888' FontSize='13' FontWeight='600' TextWrapping='NoWrap' />\r\n    </Column>\r\n  \t\r\n  \t<Column   Align='Left' >\r\n        <TextBlock Text='November 1, 2017 15:30' Color='#888888' FontSize='12' FontWeight='600' TextWrapping='NoWrap' />\r\n    </Column>\r\n</ui.grid>\r\n\r\n", $t));
                        _o1.add(($t = new Bridge.CustomUIMarkup_DesignerSamples.ExampleInfo(), $t.Name = "Form", $t.XmlTemplate = "\r\n\r\n\r\n<ui.segment>\r\n  <ui.page.grid Align='Center' MarginTop='5'>\r\n      <ui.form  Padding='55' Border='1px solid #ddd'>\r\n        <ui.header.3>Input form</ui.header.3>\r\n     <Field Value='A' Label='yy'>\r\n        <TextBox PlaceHolder='Write 1' />\r\n     </Field>\r\n     <ui.stacked>\r\n        <Field Value='A' Label='yy' >\r\n           <TextBox PlaceHolder='Write 1' IsMandatory='True' />\r\n        </Field>\r\n     </ui.stacked>\r\n     <ui.equal.width.grid>\r\n        <column>\r\n           <Field Value='A' Label='yy'>\r\n              <TextBox PlaceHolder='Write 1' />\r\n           </Field>\r\n        </column>\r\n        <column>\r\n           <Field Value='A' Label='yy'>\r\n              <TextBox PlaceHolder='Write 1' />\r\n           </Field>\r\n        </column>\r\n     </ui.equal.width.grid>\r\n        \r\n        <ui.grid>\r\n          <column Align='Right'>\r\n        \t\t<ui.button Text='No'   />\r\n            \t<ui.button Text='Yes'  AddClass='positive'  />\r\n            </column>\r\n        </ui.grid>\r\n  </ui.form>\r\n  </ui.page.grid>\r\n</ui.segment>\r\n\r\n\r\n\r\n\r\n", $t));
                        return _o1;
                    }(new (System.Collections.Generic.List$1(Bridge.CustomUIMarkup_DesignerSamples.ExampleInfo)).ctor());
            }
        }
    });

    /**
     * @memberof System.Collections.Specialized
     * @callback System.Collections.Specialized.NotifyCollectionChangedEventHandler
     * @param   {System.Object}                                                      sender    
     * @param   {System.Collections.Specialized.NotifyCollectionChangedEventArgs}    e
     * @return  {void}
     */

    /** @namespace System.Collections.ObjectModel */

    /**
     * Implementation of a dynamic data collection based on generic Collection&lt;T&gt;,
     implementing INotifyCollectionChanged to notify listeners
     when items get added, removed or the whole list is refreshed.
     *
     * @public
     * @class System.Collections.ObjectModel.ObservableCollection$1
     * @augments System.Collections.ObjectModel.Collection$1
     * @implements  System.Collections.Specialized.INotifyCollectionChanged
     * @implements  System.ComponentModel.INotifyPropertyChanged
     */
    Bridge.define("System.Collections.ObjectModel.ObservableCollection$1", function (T) { return {
        inherits: [System.Collections.ObjectModel.Collection$1(T),System.Collections.Specialized.INotifyCollectionChanged,System.ComponentModel.INotifyPropertyChanged],
        statics: {
            fields: {
                CountString: null,
                "IndexerName": null
            },
            ctors: {
                init: function () {
                    this.CountString = "Count";
                    this["IndexerName"] = "Item[]";
                }
            }
        },
        fields: {
            _monitor: null
        },
        events: {
            /**
             * Occurs when the collection changes, either by adding or removing an item.
             *
             * @instance
             * @public
             * @this System.Collections.ObjectModel.ObservableCollection$1
             * @memberof System.Collections.ObjectModel.ObservableCollection$1
             * @function addCollectionChanged
             * @param   {System.Collections.Specialized.NotifyCollectionChangedEventHandler}    value
             * @return  {void}
             * @see {@link INotifyCollectionChanged}
             */
            /**
             * Occurs when the collection changes, either by adding or removing an item.
             *
             * @instance
             * @public
             * @this System.Collections.ObjectModel.ObservableCollection$1
             * @memberof System.Collections.ObjectModel.ObservableCollection$1
             * @function removeCollectionChanged
             * @param   {System.Collections.Specialized.NotifyCollectionChangedEventHandler}    value
             * @return  {void}
             * @see {@link INotifyCollectionChanged}
             */
            CollectionChanged: null,
            /**
             * PropertyChanged event (per {@link }).
             *
             * @instance
             * @protected
             * @this System.Collections.ObjectModel.ObservableCollection$1
             * @memberof System.Collections.ObjectModel.ObservableCollection$1
             * @function addPropertyChanged
             * @param   {System.ComponentModel.PropertyChangedEventHandler}    value
             * @return  {void}
             */
            /**
             * PropertyChanged event (per {@link }).
             *
             * @instance
             * @protected
             * @this System.Collections.ObjectModel.ObservableCollection$1
             * @memberof System.Collections.ObjectModel.ObservableCollection$1
             * @function removePropertyChanged
             * @param   {System.ComponentModel.PropertyChangedEventHandler}    value
             * @return  {void}
             */
            PropertyChanged: null
        },
        alias: ["addCollectionChanged", "System$Collections$Specialized$INotifyCollectionChanged$addCollectionChanged",
        "removeCollectionChanged", "System$Collections$Specialized$INotifyCollectionChanged$removeCollectionChanged"],
        ctors: {
            init: function () {
                this._monitor = new (System.Collections.ObjectModel.ObservableCollection$1.SimpleMonitor(T))();
            },
            /**
             * Initializes a new instance of ObservableCollection that is empty and has default initial capacity.
             *
             * @instance
             * @public
             * @this System.Collections.ObjectModel.ObservableCollection$1
             * @memberof System.Collections.ObjectModel.ObservableCollection$1
             * @return  {void}
             */
            ctor: function () {
                this.$initialize();
                System.Collections.ObjectModel.Collection$1(T).ctor.call(this);
            },
            /**
             * Initializes a new instance of the ObservableCollection class
             that contains elements copied from the specified list
             *
             * @instance
             * @public
             * @this System.Collections.ObjectModel.ObservableCollection$1
             * @memberof System.Collections.ObjectModel.ObservableCollection$1
             * @throws list is a null reference
             * @param   {System.Collections.Generic.List$1}    list    The list whose elements are copied to the new list.
             * @return  {void}
             */
            $ctor2: function (list) {
                this.$initialize();
                System.Collections.ObjectModel.Collection$1(T).$ctor1.call(this, (list != null) ? new (System.Collections.Generic.List$1(T)).$ctor2(list.Count) : list);
                // Workaround for VSWhidbey bug 562681 (tracked by Windows bug 1369339).
                // We should be able to simply call the base(list) ctor.  But Collection<T>
                // doesn't copy the list (contrary to the documentation) - it uses the
                // list directly as its storage.  So we do the copying here.
                //
                this.CopyFrom(list);
            },
            /**
             * Initializes a new instance of the ObservableCollection class that contains
             elements copied from the specified collection and has sufficient capacity
             to accommodate the number of elements copied.
             *
             * @instance
             * @public
             * @this System.Collections.ObjectModel.ObservableCollection$1
             * @memberof System.Collections.ObjectModel.ObservableCollection$1
             * @throws collection is a null reference
             * @param   {System.Collections.Generic.IEnumerable$1}    collection    The collection whose elements are copied to the new list.
             * @return  {void}
             */
            $ctor1: function (collection) {
                this.$initialize();
                System.Collections.ObjectModel.Collection$1(T).ctor.call(this);
                if (collection == null) {
                    throw new System.ArgumentNullException("collection");
                }

                this.CopyFrom(collection);
            }
        },
        methods: {
            /**
             * PropertyChanged event (per {@link }).
             *
             * @instance
             * @memberof System.Collections.ObjectModel.ObservableCollection$1
             * @event System.Collections.ObjectModel.ObservableCollection$1#PropertyChanged
             * @return  {System.ComponentModel.PropertyChangedEventHandler}
             */
            System$ComponentModel$INotifyPropertyChanged$addPropertyChanged: function (value) {
                this.addPropertyChanged(value);
            },
            /**
             * PropertyChanged event (per {@link }).
             *
             * @instance
             * @memberof System.Collections.ObjectModel.ObservableCollection$1
             * @event System.Collections.ObjectModel.ObservableCollection$1#PropertyChanged
             * @return  {System.ComponentModel.PropertyChangedEventHandler}
             */
            System$ComponentModel$INotifyPropertyChanged$removePropertyChanged: function (value) {
                this.removePropertyChanged(value);
            },
            CopyFrom: function (collection) {
                var items = this["Items"];
                if (collection != null && items != null) {
                    var enumerator = Bridge.getEnumerator(collection, T);
                    try {
                        while (enumerator.System$Collections$IEnumerator$moveNext()) {
                            System.Array.add(items, enumerator[Bridge.geti(enumerator, "System$Collections$Generic$IEnumerator$1$" + Bridge.getTypeAlias(T) + "$Current$1", "System$Collections$Generic$IEnumerator$1$Current$1")], T);
                        }
                    }
                    finally {
                        if (Bridge.hasValue(enumerator)) {
                            enumerator.System$IDisposable$dispose();
                        }
                    }
                }
            },
            /**
             * Move item at oldIndex to newIndex.
             *
             * @instance
             * @public
             * @this System.Collections.ObjectModel.ObservableCollection$1
             * @memberof System.Collections.ObjectModel.ObservableCollection$1
             * @param   {number}    oldIndex    
             * @param   {number}    newIndex
             * @return  {void}
             */
            Move: function (oldIndex, newIndex) {
                this.MoveItem(oldIndex, newIndex);
            },
            /**
             * Called by base class Collection&lt;T&gt; when the list is being cleared;
             raises a CollectionChanged event to any listeners.
             *
             * @instance
             * @protected
             * @override
             * @this System.Collections.ObjectModel.ObservableCollection$1
             * @memberof System.Collections.ObjectModel.ObservableCollection$1
             * @return  {void}
             */
            ClearItems: function () {
                this.CheckReentrancy();
                System.Collections.ObjectModel.Collection$1(T).prototype.ClearItems.call(this);
                this.OnPropertyChanged$1(System.Collections.ObjectModel.ObservableCollection$1(T).CountString);
                this.OnPropertyChanged$1(System.Collections.ObjectModel.ObservableCollection$1(T)["IndexerName"]);
                this.OnCollectionReset();
            },
            /**
             * Called by base class Collection&lt;T&gt; when an item is removed from list;
             raises a CollectionChanged event to any listeners.
             *
             * @instance
             * @protected
             * @override
             * @this System.Collections.ObjectModel.ObservableCollection$1
             * @memberof System.Collections.ObjectModel.ObservableCollection$1
             * @param   {number}    index
             * @return  {void}
             */
            RemoveItem: function (index) {
                this.CheckReentrancy();
                var removedItem = this.getItem(index);

                System.Collections.ObjectModel.Collection$1(T).prototype.RemoveItem.call(this, index);

                this.OnPropertyChanged$1(System.Collections.ObjectModel.ObservableCollection$1(T).CountString);
                this.OnPropertyChanged$1(System.Collections.ObjectModel.ObservableCollection$1(T)["IndexerName"]);
                this.OnCollectionChanged$1(System.Collections.Specialized.NotifyCollectionChangedAction.Remove, removedItem, index);
            },
            /**
             * Called by base class Collection&lt;T&gt; when an item is added to list;
             raises a CollectionChanged event to any listeners.
             *
             * @instance
             * @protected
             * @override
             * @this System.Collections.ObjectModel.ObservableCollection$1
             * @memberof System.Collections.ObjectModel.ObservableCollection$1
             * @param   {number}    index    
             * @param   {T}         item
             * @return  {void}
             */
            InsertItem: function (index, item) {
                this.CheckReentrancy();
                System.Collections.ObjectModel.Collection$1(T).prototype.InsertItem.call(this, index, item);

                this.OnPropertyChanged$1(System.Collections.ObjectModel.ObservableCollection$1(T).CountString);
                this.OnPropertyChanged$1(System.Collections.ObjectModel.ObservableCollection$1(T)["IndexerName"]);
                this.OnCollectionChanged$1(System.Collections.Specialized.NotifyCollectionChangedAction.Add, item, index);
            },
            /**
             * Called by base class Collection&lt;T&gt; when an item is set in list;
             raises a CollectionChanged event to any listeners.
             *
             * @instance
             * @protected
             * @override
             * @this System.Collections.ObjectModel.ObservableCollection$1
             * @memberof System.Collections.ObjectModel.ObservableCollection$1
             * @param   {number}    index    
             * @param   {T}         item
             * @return  {void}
             */
            SetItem: function (index, item) {
                this.CheckReentrancy();
                var originalItem = this.getItem(index);
                System.Collections.ObjectModel.Collection$1(T).prototype.SetItem.call(this, index, item);

                this.OnPropertyChanged$1(System.Collections.ObjectModel.ObservableCollection$1(T)["IndexerName"]);
                this.OnCollectionChanged$3(System.Collections.Specialized.NotifyCollectionChangedAction.Replace, originalItem, item, index);
            },
            /**
             * Called by base class ObservableCollection&lt;T&gt; when an item is to be moved within the list;
             raises a CollectionChanged event to any listeners.
             *
             * @instance
             * @protected
             * @this System.Collections.ObjectModel.ObservableCollection$1
             * @memberof System.Collections.ObjectModel.ObservableCollection$1
             * @param   {number}    oldIndex    
             * @param   {number}    newIndex
             * @return  {void}
             */
            MoveItem: function (oldIndex, newIndex) {
                this.CheckReentrancy();

                var removedItem = this.getItem(oldIndex);

                System.Collections.ObjectModel.Collection$1(T).prototype.RemoveItem.call(this, oldIndex);
                System.Collections.ObjectModel.Collection$1(T).prototype.InsertItem.call(this, newIndex, removedItem);

                this.OnPropertyChanged$1(System.Collections.ObjectModel.ObservableCollection$1(T)["IndexerName"]);
                this.OnCollectionChanged$2(System.Collections.Specialized.NotifyCollectionChangedAction.Move, removedItem, newIndex, oldIndex);
            },
            /**
             * Raises a PropertyChanged event (per {@link }).
             *
             * @instance
             * @protected
             * @this System.Collections.ObjectModel.ObservableCollection$1
             * @memberof System.Collections.ObjectModel.ObservableCollection$1
             * @param   {System.ComponentModel.PropertyChangedEventArgs}    e
             * @return  {void}
             */
            OnPropertyChanged: function (e) {
                if (!Bridge.staticEquals(this.PropertyChanged, null)) {
                    this.PropertyChanged(this, e);
                }
            },
            /**
             * Helper to raise a PropertyChanged event  /&gt;).
             *
             * @instance
             * @private
             * @this System.Collections.ObjectModel.ObservableCollection$1
             * @memberof System.Collections.ObjectModel.ObservableCollection$1
             * @param   {string}    propertyName
             * @return  {void}
             */
            OnPropertyChanged$1: function (propertyName) {
                this.OnPropertyChanged(new System.ComponentModel.PropertyChangedEventArgs(propertyName));
            },
            /**
             * Raise CollectionChanged event to any listeners.
             Properties/methods modifying this ObservableCollection will raise
             a collection changed event through this virtual method.
             *
             * @instance
             * @protected
             * @this System.Collections.ObjectModel.ObservableCollection$1
             * @memberof System.Collections.ObjectModel.ObservableCollection$1
             * @param   {System.Collections.Specialized.NotifyCollectionChangedEventArgs}    e
             * @return  {void}
             */
            OnCollectionChanged: function (e) {
                var $t;
                if (!Bridge.staticEquals(this.CollectionChanged, null)) {
                    $t = this.BlockReentrancy();
                    try {
                        this.CollectionChanged(this, e);
                    }
                    finally {
                        if (Bridge.hasValue($t)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                }
            },
            /**
             * Helper to raise CollectionChanged event to any listeners
             *
             * @instance
             * @private
             * @this System.Collections.ObjectModel.ObservableCollection$1
             * @memberof System.Collections.ObjectModel.ObservableCollection$1
             * @param   {System.Collections.Specialized.NotifyCollectionChangedAction}    action    
             * @param   {System.Object}                                                   item      
             * @param   {number}                                                          index
             * @return  {void}
             */
            OnCollectionChanged$1: function (action, item, index) {
                this.OnCollectionChanged(new System.Collections.Specialized.NotifyCollectionChangedEventArgs.$ctor8(action, item, index));
            },
            /**
             * Helper to raise CollectionChanged event to any listeners
             *
             * @instance
             * @private
             * @this System.Collections.ObjectModel.ObservableCollection$1
             * @memberof System.Collections.ObjectModel.ObservableCollection$1
             * @param   {System.Collections.Specialized.NotifyCollectionChangedAction}    action      
             * @param   {System.Object}                                                   item        
             * @param   {number}                                                          index       
             * @param   {number}                                                          oldIndex
             * @return  {void}
             */
            OnCollectionChanged$2: function (action, item, index, oldIndex) {
                this.OnCollectionChanged(new System.Collections.Specialized.NotifyCollectionChangedEventArgs.$ctor9(action, item, index, oldIndex));
            },
            /**
             * Helper to raise CollectionChanged event to any listeners
             *
             * @instance
             * @private
             * @this System.Collections.ObjectModel.ObservableCollection$1
             * @memberof System.Collections.ObjectModel.ObservableCollection$1
             * @param   {System.Collections.Specialized.NotifyCollectionChangedAction}    action     
             * @param   {System.Object}                                                   oldItem    
             * @param   {System.Object}                                                   newItem    
             * @param   {number}                                                          index
             * @return  {void}
             */
            OnCollectionChanged$3: function (action, oldItem, newItem, index) {
                this.OnCollectionChanged(new System.Collections.Specialized.NotifyCollectionChangedEventArgs.$ctor11(action, newItem, oldItem, index));
            },
            /**
             * Disallow reentrant attempts to change this collection. E.g. a event handler
             of the CollectionChanged event is not allowed to make changes to this collection.
             *
             * @instance
             * @protected
             * @this System.Collections.ObjectModel.ObservableCollection$1
             * @memberof System.Collections.ObjectModel.ObservableCollection$1
             * @return  {System.IDisposable}
             */
            BlockReentrancy: function () {
                this._monitor.Enter();
                return this._monitor;
            },
            /**
             * Check and assert for reentrant attempts to change this collection.
             *
             * @instance
             * @protected
             * @this System.Collections.ObjectModel.ObservableCollection$1
             * @memberof System.Collections.ObjectModel.ObservableCollection$1
             * @throws raised when changing the collection
             while another collection change is still being notified to other listeners
             * @return  {void}
             */
            CheckReentrancy: function () {
                if (this._monitor.Busy) {
                    // we can allow changes if there's only one listener - the problem
                    // only arises if reentrant changes make the original event args
                    // invalid for later listeners.  This keeps existing code working
                    // (e.g. Selector.SelectedItems).
                    if ((!Bridge.staticEquals(this.CollectionChanged, null)) && (Bridge.fn.getInvocationList(this.CollectionChanged).length > 1)) {
                        throw new System.InvalidOperationException(System.SR.GetString(System.SR.ObservableCollectionReentrancyNotAllowed));
                    }
                }
            },
            /**
             * Helper to raise CollectionChanged event with action == Reset to any listeners
             *
             * @instance
             * @private
             * @this System.Collections.ObjectModel.ObservableCollection$1
             * @memberof System.Collections.ObjectModel.ObservableCollection$1
             * @return  {void}
             */
            OnCollectionReset: function () {
                this.OnCollectionChanged(new System.Collections.Specialized.NotifyCollectionChangedEventArgs.ctor(System.Collections.Specialized.NotifyCollectionChangedAction.Reset));
            }
        }
    }; });

    Bridge.define("System.Windows.Data.Converters.BooleanToVisibilityConverter", {
        inherits: [System.Windows.Data.IValueConverter],
        alias: [
            "Convert", "System$Windows$Data$IValueConverter$Convert",
            "ConvertBack", "System$Windows$Data$IValueConverter$ConvertBack"
        ],
        methods: {
            Convert: function (value, targetType, parameter, culture) {
                if (Bridge.is(value, System.Boolean)) {
                    return Bridge.box(System.Nullable.getValue(Bridge.cast(Bridge.unbox(value), System.Boolean)) ? System.Windows.Visibility.Visible : System.Windows.Visibility.Collapsed, System.Windows.Visibility, System.Enum.toStringFn(System.Windows.Visibility));
                }

                return Bridge.box(System.Windows.Visibility.Collapsed, System.Windows.Visibility, System.Enum.toStringFn(System.Windows.Visibility));
            },
            ConvertBack: function (value, targetType, parameter, culture) {
                if (!(Bridge.is(value, System.Byte))) {
                    return Bridge.box(false, System.Boolean, System.Boolean.toString);
                }
                return Bridge.box(System.Nullable.getValue(Bridge.cast(Bridge.unbox(value), System.Byte)) === System.Windows.Visibility.Visible, System.Boolean, System.Boolean.toString);
            }
        }
    });

    Bridge.define("System.Windows.Data.HTMLBindingInfo", {
        inherits: [System.Windows.Data.BindingInfo],
        statics: {
            methods: {
                TryParseExpression: function (value) {
                    var $t;
                    var bindingInfo = System.Windows.Data.BindingInfo.TryParseExpression(value);
                    if (bindingInfo == null) {
                        return null;
                    }

                    return ($t = new System.Windows.Data.HTMLBindingInfo(), $t.SourcePath = bindingInfo.SourcePath, $t.Converter = bindingInfo.Converter, $t);
                },
                TargetCanUpdateSource: function (element) {
                    if (Bridge.referenceEquals(element.get(0).tagName, "INPUT")) {
                        var type = element.attr("type");

                        if (Bridge.referenceEquals((type != null ? type.toUpperCase() : null), "HIDDEN")) {
                            return true;
                        }
                    }

                    return false;
                }
            }
        },
        props: {
            Target$1: {
                get: function () {
                    return Bridge.cast(this.Target, $);
                },
                set: function (value) {
                    this.Target = value;
                }
            }
        },
        methods: {
            GetTargetValue: function () {
                return this.Target$1.val();
            },
            UpdateTarget: function () {
                var value = this.SourcePath.GetPropertyValue();

                var path = this.TargetPath.Path.toUpperCase();

                if (Bridge.referenceEquals(path, "INNERHTML")) {
                    this.Target$1.html(System.String.concat(value, ""));
                    return;
                }

                if (Bridge.referenceEquals(path, "VALUE")) {
                    this.Target$1.val(System.String.concat(value, "")).change();
                    return;
                }

                this.Target$1.attr(this.TargetPath.Path, System.String.concat(value, ""));
            },
            ConnectTargetToSource: function () {
                var element = this.Target$1;

                if (Bridge.referenceEquals(element.get(0).tagName, "INPUT")) {
                    var type = element.attr("type");

                    if (Bridge.referenceEquals((type != null ? type.toUpperCase() : null), "HIDDEN")) {
                        this.Target$1.on("change", Bridge.fn.cacheBind(this, this.UpdateSource));
                        return;
                    }
                }

                this.Target$1.focusout(Bridge.fn.bind(this, function (ev) {
                        this.UpdateSource();
                    }));
            }
        }
    });

    Bridge.define("System.Windows.DependencyPropertyChangedEventArgs", {
        inherits: [System.ComponentModel.BagChangedEventArgs],
        ctors: {
            ctor: function (propertyName) {
                this.$initialize();
                System.ComponentModel.BagChangedEventArgs.ctor.call(this, propertyName);
            },
            $ctor1: function (propertyName, newValue) {
                this.$initialize();
                System.ComponentModel.BagChangedEventArgs.$ctor1.call(this, propertyName, newValue);
            },
            $ctor2: function (propertyName, newValue, oldValue) {
                this.$initialize();
                System.ComponentModel.BagChangedEventArgs.$ctor2.call(this, propertyName, newValue, oldValue);
            }
        }
    });

    Bridge.define("System.Windows.FrameworkElement", {
        inherits: [System.Windows.DependencyObject],
        statics: {
            fields: {
                BorderProperty: null,
                ClassProperty: null,
                AddClassProperty: null,
                MarginProperty: null,
                MarginLeftProperty: null,
                MarginRightProperty: null,
                MarginBottomProperty: null,
                MarginTopProperty: null,
                PaddingLeftProperty: null,
                PaddingRightProperty: null,
                PaddingBottomProperty: null,
                PaddingTopProperty: null,
                PaddingProperty: null,
                TextWrappingProperty: null,
                FontWeightProperty: null,
                FontSizeProperty: null,
                WidthProperty: null,
                WidthPercentProperty: null,
                ColorProperty: null,
                "InnerHTMLProperty": null,
                VisibilityProperty: null,
                HeightProperty: null,
                HeightPercentProperty: null,
                BackgroundProperty: null,
                "ID": 0
            },
            ctors: {
                init: function () {
                    this.BorderProperty = System.Windows.DependencyProperty.Register$1("Border", System.String, System.Windows.FrameworkElement, System.Windows.FrameworkElement.CreateJQueryCssUpdater("border"));
                    this.ClassProperty = System.Windows.DependencyProperty.Register$1("Class", System.String, System.Windows.FrameworkElement, System.Windows.FrameworkElement.CreateHtmlAttributeUpdater("class"));
                    this.AddClassProperty = System.Windows.DependencyProperty.Register$1("AddClass", System.String, System.Windows.FrameworkElement, new System.Windows.PropertyMetadata.$ctor2(System.Windows.FrameworkElement.OnAddClassChanged));
                    this.MarginProperty = System.Windows.DependencyProperty.Register$1("Margin", System.Nullable$1(System.Double), System.Windows.FrameworkElement, System.Windows.FrameworkElement.CreateJQueryCssUpdater("margin"));
                    this.MarginLeftProperty = System.Windows.DependencyProperty.Register$1("MarginLeft", System.Nullable$1(System.Double), System.Windows.FrameworkElement, System.Windows.FrameworkElement.CreateJQueryCssUpdater("marginLeft"));
                    this.MarginRightProperty = System.Windows.DependencyProperty.Register$1("MarginRight", System.Nullable$1(System.Double), System.Windows.FrameworkElement, System.Windows.FrameworkElement.CreateJQueryCssUpdater("marginRight"));
                    this.MarginBottomProperty = System.Windows.DependencyProperty.Register$1("MarginBottom", System.Nullable$1(System.Double), System.Windows.FrameworkElement, System.Windows.FrameworkElement.CreateJQueryCssUpdater("marginBottom"));
                    this.MarginTopProperty = System.Windows.DependencyProperty.Register$1("MarginTop", System.Nullable$1(System.Double), System.Windows.FrameworkElement, System.Windows.FrameworkElement.CreateJQueryCssUpdater("marginTop"));
                    this.PaddingLeftProperty = System.Windows.DependencyProperty.Register$1("PaddingLeft", System.Nullable$1(System.Double), System.Windows.FrameworkElement, System.Windows.FrameworkElement.CreateJQueryCssUpdater("paddingLeft"));
                    this.PaddingRightProperty = System.Windows.DependencyProperty.Register$1("PaddingRight", System.Nullable$1(System.Double), System.Windows.FrameworkElement, System.Windows.FrameworkElement.CreateJQueryCssUpdater("paddingRight"));
                    this.PaddingBottomProperty = System.Windows.DependencyProperty.Register$1("PaddingBottom", System.Nullable$1(System.Double), System.Windows.FrameworkElement, System.Windows.FrameworkElement.CreateJQueryCssUpdater("paddingBottom"));
                    this.PaddingTopProperty = System.Windows.DependencyProperty.Register$1("PaddingTop", System.Nullable$1(System.Double), System.Windows.FrameworkElement, System.Windows.FrameworkElement.CreateJQueryCssUpdater("paddingTop"));
                    this.PaddingProperty = System.Windows.DependencyProperty.Register$1("Padding", System.Nullable$1(System.Double), System.Windows.FrameworkElement, System.Windows.FrameworkElement.CreateJQueryCssUpdater("padding"));
                    this.TextWrappingProperty = System.Windows.DependencyProperty.Register$1("TextWrapping", System.Windows.TextWrapping, System.Windows.FrameworkElement, new System.Windows.PropertyMetadata.$ctor2(System.Windows.FrameworkElement.OnTextWrappingChanged));
                    this.FontWeightProperty = System.Windows.DependencyProperty.Register$1("FontWeight", System.Double, System.Windows.FrameworkElement, System.Windows.FrameworkElement.CreateJQueryCssUpdater("fontWeight"));
                    this.FontSizeProperty = System.Windows.DependencyProperty.Register$1("FontSize", System.Double, System.Windows.FrameworkElement, System.Windows.FrameworkElement.CreateJQueryCssUpdater("fontSize"));
                    this.WidthProperty = System.Windows.DependencyProperty.Register$1("Width", System.Double, System.Windows.FrameworkElement, System.Windows.FrameworkElement.CreateJQueryCssUpdater("width"));
                    this.WidthPercentProperty = System.Windows.DependencyProperty.Register$1("WidthPercent", System.Double, System.Windows.FrameworkElement, System.Windows.FrameworkElement.CreateJQueryCssUpdater$1("width", function (v) {
                        return System.String.concat(v, "%");
                    }));
                    this.ColorProperty = System.Windows.DependencyProperty.Register$1("Color", System.String, System.Windows.FrameworkElement, System.Windows.FrameworkElement.CreateJQueryCssUpdater("color"));
                    this["InnerHTMLProperty"] = System.Windows.DependencyProperty.Register$1("InnerHTML", System.String, System.Windows.FrameworkElement, new System.Windows.PropertyMetadata.$ctor2(System.Windows.FrameworkElement.OnInnerHTMLChanged));
                    this.VisibilityProperty = System.Windows.DependencyProperty.Register$1("Visibility", System.Windows.Visibility, System.Windows.FrameworkElement, new System.Windows.PropertyMetadata.$ctor2(System.Windows.FrameworkElement.OnVisibilityChanged));
                    this.HeightProperty = System.Windows.DependencyProperty.Register$1("Height", System.Double, System.Windows.FrameworkElement, System.Windows.FrameworkElement.CreateJQueryCssUpdater("height"));
                    this.HeightPercentProperty = System.Windows.DependencyProperty.Register$1("HeightPercent", System.Double, System.Windows.FrameworkElement, System.Windows.FrameworkElement.CreateJQueryCssUpdater$1("height", function (v) {
                        return System.String.concat(v, "%");
                    }));
                    this.BackgroundProperty = System.Windows.DependencyProperty.Register$1("Background", System.String, System.Windows.FrameworkElement, new System.Windows.PropertyMetadata.$ctor2(System.Windows.FrameworkElement.OnBackgroundChanged));
                }
            },
            methods: {
                AddCssClassOnTrueElseRemove: function (cssClass) {
                    return new System.Windows.PropertyMetadata.$ctor2(function (d, e) {
                        var me = Bridge.cast(d, System.Windows.FrameworkElement);

                        if (System.Nullable.eq(System.Extensions.ToBooleanNullable(e.NewValue), true)) {
                            me._root.addClass(cssClass);
                            return;
                        }

                        me._root.removeClass(cssClass);
                    });
                },
                CreateHtmlAttributeUpdater: function (htmlAttribute) {
                    return new System.Windows.PropertyMetadata.$ctor2(function (d, e) {
                        var $t;
                        var me = Bridge.cast(d, System.Windows.FrameworkElement);

                        me._root.attr(htmlAttribute, ($t = e.NewValue) != null ? $t.toString() : null);
                    });
                },
                CreateJQueryCssUpdater: function (jqueryCssAttribute) {
                    return new System.Windows.PropertyMetadata.$ctor2(function (d, e) {
                        var me = Bridge.cast(d, System.Windows.FrameworkElement);

                        me._root.css(jqueryCssAttribute, Bridge.unbox(e.NewValue));
                    });
                },
                CreateJQueryCssUpdater$1: function (jqueryCssAttribute, valueConverter) {
                    return new System.Windows.PropertyMetadata.$ctor2(function (d, e) {
                        var me = Bridge.cast(d, System.Windows.FrameworkElement);

                        me._root.css(jqueryCssAttribute, Bridge.unbox(valueConverter(e.NewValue)));
                    });
                },
                RegisterDependencyProperty: function (name, propertyType, ownerType, propertyChangedCallback) {
                    return System.Windows.DependencyProperty.Register$1(name, propertyType, ownerType, new System.Windows.PropertyMetadata.$ctor2(propertyChangedCallback));
                },
                OnAddClassChanged: function (d, e) {
                    var me = Bridge.cast(d, System.Windows.FrameworkElement);

                    me._root != null ? me._root.addClass(Bridge.cast(e.NewValue, System.String)) : null;
                },
                OnTextWrappingChanged: function (d, e) {
                    var me = Bridge.cast(d, System.Windows.FrameworkElement);

                    var value = System.Nullable.getValue(Bridge.cast(Bridge.unbox(e.NewValue), System.Int32));
                    if (value === System.Windows.TextWrapping.NoWrap) {
                        me._root.css("white-space", "nowrap");
                        return;
                    }
                    if (value === System.Windows.TextWrapping.Wrap) {
                        me._root.css("white-space", "normal");
                        return;
                    }

                    throw new System.ArgumentException(System.Enum.toString(System.Windows.TextWrapping, value));
                },
                OnInnerHTMLChanged: function (d, e) {
                    var me = Bridge.cast(d, System.Windows.FrameworkElement);

                    me._root != null ? me._root.html(Bridge.cast(e.NewValue, System.String)) : null;
                },
                OnVisibilityChanged: function (d, e) {
                    var me = Bridge.cast(d, System.Windows.FrameworkElement);

                    var newValue = e.NewValue;

                    var value = System.Nullable.getValue(Bridge.cast(Bridge.unbox(newValue), System.Byte));

                    if (value === System.Windows.Visibility.Visible) {
                        me._root.css("visibility", "visible");
                    } else {
                        me._root.css("visibility", "hidden");
                    }
                },
                OnBackgroundChanged: function (d, e) {
                    var fe = Bridge.cast(d, System.Windows.FrameworkElement);
                    var newValue = e.NewValue;

                    if (System.Extensions.IsNull(newValue)) {
                        fe._root.css("background", "");
                        return;
                    }
                    if (Bridge.is(newValue, System.String)) {
                        fe._root.css("background", Bridge.as(newValue, System.String));
                        return;
                    }

                    throw new System.ArgumentException(newValue.toString());
                }
            }
        },
        fields: {
            _root: null,
            _logicalParent: null,
            _visaulParent: null,
            _visualChilderen: null,
            _logicalChilderen: null,
            _id: null,
            _dataContext: null
        },
        events: {
            AfterConnectToLogicalParent: null,
            AfterConnectToVisualParent: null,
            AfterLogicalChildAdd: null,
            BeforeLogicalChildAdd: null,
            AfterVisualChildAdd: null,
            BeforeConnectToLogicalParent: null,
            BeforeConnectToVisualParent: null
        },
        props: {
            _el: {
                get: function () {
                    return this._root.get(0);
                }
            },
            LogicalParent: {
                get: function () {
                    return this._logicalParent;
                }
            },
            VisaulParent: {
                get: function () {
                    return this._visaulParent;
                }
            },
            VisualChilderen: {
                get: function () {
                    return this.GetVisualChilderen();
                }
            },
            VisualChilderenCount: {
                get: function () {
                    var $t;
                    return ($t = (this._visualChilderen != null ? this._visualChilderen.Count : null), $t != null ? $t : 0);
                }
            },
            LogicalChilderen: {
                get: function () {
                    return this.GetLogicalChilderen();
                }
            },
            LogicalChilderenCount: {
                get: function () {
                    var $t;
                    return ($t = (this._logicalChilderen != null ? this._logicalChilderen.Count : null), $t != null ? $t : 0);
                }
            },
            Root: {
                get: function () {
                    return this._root;
                }
            },
            Border: {
                get: function () {
                    return Bridge.cast(this.GetValue$1(System.Windows.FrameworkElement.BorderProperty), System.String);
                },
                set: function (value) {
                    this.SetValue$1(System.Windows.FrameworkElement.BorderProperty, value);
                }
            },
            Class: {
                get: function () {
                    return Bridge.cast(this.GetValue$1(System.Windows.FrameworkElement.ClassProperty), System.String);
                },
                set: function (value) {
                    this.SetValue$1(System.Windows.FrameworkElement.ClassProperty, value);
                }
            },
            AddClass: {
                get: function () {
                    return Bridge.cast(this.GetValue$1(System.Windows.FrameworkElement.AddClassProperty), System.String);
                },
                set: function (value) {
                    this.SetValue$1(System.Windows.FrameworkElement.AddClassProperty, value);
                }
            },
            Margin: {
                get: function () {
                    return Bridge.cast(Bridge.unbox(this.GetValue$1(System.Windows.FrameworkElement.MarginProperty)), System.Double, true);
                },
                set: function (value) {
                    this.SetValue$1(System.Windows.FrameworkElement.MarginProperty, Bridge.box(value, System.Double, System.Nullable.toStringFn(System.Double.format), System.Nullable.getHashCodeFn(System.Double.getHashCode)));
                }
            },
            MarginLeft: {
                get: function () {
                    return Bridge.cast(Bridge.unbox(this.GetValue$1(System.Windows.FrameworkElement.MarginLeftProperty)), System.Double, true);
                },
                set: function (value) {
                    this.SetValue$1(System.Windows.FrameworkElement.MarginLeftProperty, Bridge.box(value, System.Double, System.Nullable.toStringFn(System.Double.format), System.Nullable.getHashCodeFn(System.Double.getHashCode)));
                }
            },
            MarginRight: {
                get: function () {
                    return Bridge.cast(Bridge.unbox(this.GetValue$1(System.Windows.FrameworkElement.MarginRightProperty)), System.Double, true);
                },
                set: function (value) {
                    this.SetValue$1(System.Windows.FrameworkElement.MarginRightProperty, Bridge.box(value, System.Double, System.Nullable.toStringFn(System.Double.format), System.Nullable.getHashCodeFn(System.Double.getHashCode)));
                }
            },
            MarginBottom: {
                get: function () {
                    return Bridge.cast(Bridge.unbox(this.GetValue$1(System.Windows.FrameworkElement.MarginBottomProperty)), System.Double, true);
                },
                set: function (value) {
                    this.SetValue$1(System.Windows.FrameworkElement.MarginBottomProperty, Bridge.box(value, System.Double, System.Nullable.toStringFn(System.Double.format), System.Nullable.getHashCodeFn(System.Double.getHashCode)));
                }
            },
            MarginTop: {
                get: function () {
                    return Bridge.cast(Bridge.unbox(this.GetValue$1(System.Windows.FrameworkElement.MarginTopProperty)), System.Double, true);
                },
                set: function (value) {
                    this.SetValue$1(System.Windows.FrameworkElement.MarginTopProperty, Bridge.box(value, System.Double, System.Nullable.toStringFn(System.Double.format), System.Nullable.getHashCodeFn(System.Double.getHashCode)));
                }
            },
            PaddingLeft: {
                get: function () {
                    return Bridge.cast(Bridge.unbox(this.GetValue$1(System.Windows.FrameworkElement.PaddingLeftProperty)), System.Double, true);
                },
                set: function (value) {
                    this.SetValue$1(System.Windows.FrameworkElement.PaddingLeftProperty, Bridge.box(value, System.Double, System.Nullable.toStringFn(System.Double.format), System.Nullable.getHashCodeFn(System.Double.getHashCode)));
                }
            },
            PaddingRight: {
                get: function () {
                    return Bridge.cast(Bridge.unbox(this.GetValue$1(System.Windows.FrameworkElement.PaddingRightProperty)), System.Double, true);
                },
                set: function (value) {
                    this.SetValue$1(System.Windows.FrameworkElement.PaddingRightProperty, Bridge.box(value, System.Double, System.Nullable.toStringFn(System.Double.format), System.Nullable.getHashCodeFn(System.Double.getHashCode)));
                }
            },
            PaddingBottom: {
                get: function () {
                    return Bridge.cast(Bridge.unbox(this.GetValue$1(System.Windows.FrameworkElement.PaddingBottomProperty)), System.Double, true);
                },
                set: function (value) {
                    this.SetValue$1(System.Windows.FrameworkElement.PaddingBottomProperty, Bridge.box(value, System.Double, System.Nullable.toStringFn(System.Double.format), System.Nullable.getHashCodeFn(System.Double.getHashCode)));
                }
            },
            PaddingTop: {
                get: function () {
                    return Bridge.cast(Bridge.unbox(this.GetValue$1(System.Windows.FrameworkElement.PaddingTopProperty)), System.Double, true);
                },
                set: function (value) {
                    this.SetValue$1(System.Windows.FrameworkElement.PaddingTopProperty, Bridge.box(value, System.Double, System.Nullable.toStringFn(System.Double.format), System.Nullable.getHashCodeFn(System.Double.getHashCode)));
                }
            },
            Padding: {
                get: function () {
                    return Bridge.cast(Bridge.unbox(this.GetValue$1(System.Windows.FrameworkElement.PaddingProperty)), System.Double, true);
                },
                set: function (value) {
                    this.SetValue$1(System.Windows.FrameworkElement.PaddingProperty, Bridge.box(value, System.Double, System.Nullable.toStringFn(System.Double.format), System.Nullable.getHashCodeFn(System.Double.getHashCode)));
                }
            },
            TextWrapping: {
                get: function () {
                    return System.Nullable.getValue(Bridge.cast(Bridge.unbox(this.getItem("TextWrapping")), System.Int32));
                },
                set: function (value) {
                    this.setItem("TextWrapping", Bridge.box(value, System.Windows.TextWrapping, System.Enum.toStringFn(System.Windows.TextWrapping)));
                }
            },
            FontWeight: {
                get: function () {
                    return this.getItem("FontWeight");
                },
                set: function (value) {
                    this.setItem("FontWeight", value);
                }
            },
            FontSize: {
                get: function () {
                    return System.Nullable.getValue(Bridge.cast(Bridge.unbox(this.GetValue$1(System.Windows.FrameworkElement.FontSizeProperty)), System.Double));
                },
                set: function (value) {
                    this.SetValue$1(System.Windows.FrameworkElement.FontSizeProperty, Bridge.box(value, System.Double, System.Double.format, System.Double.getHashCode));
                }
            },
            Width: {
                get: function () {
                    return System.Nullable.getValue(Bridge.cast(Bridge.unbox(this.GetValue$1(System.Windows.FrameworkElement.WidthProperty)), System.Double));
                },
                set: function (value) {
                    this.SetValue$1(System.Windows.FrameworkElement.WidthProperty, Bridge.box(value, System.Double, System.Double.format, System.Double.getHashCode));
                }
            },
            WidthPercent: {
                get: function () {
                    return System.Nullable.getValue(Bridge.cast(Bridge.unbox(this.GetValue$1(System.Windows.FrameworkElement.WidthPercentProperty)), System.Double));
                },
                set: function (value) {
                    this.SetValue$1(System.Windows.FrameworkElement.WidthPercentProperty, Bridge.box(value, System.Double, System.Double.format, System.Double.getHashCode));
                }
            },
            Color: {
                get: function () {
                    return Bridge.cast(this.getItem("Color"), System.String);
                },
                set: function (value) {
                    this.setItem("Color", value);
                }
            },
            "InnerHTML": {
                get: function () {
                    return Bridge.cast(this.GetValue$1(System.Windows.FrameworkElement["InnerHTMLProperty"]), System.String);
                },
                set: function (value) {
                    this.SetValue$1(System.Windows.FrameworkElement["InnerHTMLProperty"], value);
                }
            },
            Visibility: {
                get: function () {
                    return System.Nullable.getValue(Bridge.cast(Bridge.unbox(this.GetValue$1(System.Windows.FrameworkElement.VisibilityProperty)), System.Byte));
                },
                set: function (value) {
                    this.SetValue$1(System.Windows.FrameworkElement.VisibilityProperty, Bridge.box(value, System.Windows.Visibility, System.Enum.toStringFn(System.Windows.Visibility)));
                }
            },
            Height: {
                get: function () {
                    return System.Nullable.getValue(Bridge.cast(Bridge.unbox(this.GetValue$1(System.Windows.FrameworkElement.HeightProperty)), System.Double));
                },
                set: function (value) {
                    this.SetValue$1(System.Windows.FrameworkElement.HeightProperty, Bridge.box(value, System.Double, System.Double.format, System.Double.getHashCode));
                }
            },
            HeightPercent: {
                get: function () {
                    return System.Nullable.getValue(Bridge.cast(Bridge.unbox(this.GetValue$1(System.Windows.FrameworkElement.HeightPercentProperty)), System.Double));
                },
                set: function (value) {
                    this.SetValue$1(System.Windows.FrameworkElement.HeightPercentProperty, Bridge.box(value, System.Double, System.Double.format, System.Double.getHashCode));
                }
            },
            "Id": {
                get: function () {
                    var $t;
                    if (this._id == null) {
                        this._id = "WS-" + Bridge.identity(System.Windows.FrameworkElement["ID"], ($t = (System.Windows.FrameworkElement["ID"] + 1) | 0, System.Windows.FrameworkElement["ID"] = $t, $t));
                    }
                    return this._id;
                }
            },
            DataContext: {
                get: function () {
                    return this._dataContext;
                },
                set: function (value) {
                    if (!Bridge.referenceEquals(this._dataContext, value)) {
                        this._dataContext = value;
                        this.OnPropertyChanged("DataContext");
                    }
                }
            }
        },
        ctors: {
            ctor: function (tag, className) {
                if (tag === void 0) { tag = null; }
                if (className === void 0) { className = null; }

                this.$initialize();
                System.Windows.DependencyObject.ctor.call(this);
                if (tag != null) {
                    this._root = System.Windows.DOM.CreateElement$1(tag, className);
                }

                this.addPropertyChanged(Bridge.fn.bind(this, function (s, e) {
                    var propertyChangeEventArgs = Bridge.as(e, System.ComponentModel.BagChangedEventArgs);
                    if (propertyChangeEventArgs != null) {
                        System.Windows.DependencyProperty.TryInvokeOnPropertyChange(this, propertyChangeEventArgs.propertyName, propertyChangeEventArgs.NewValue, propertyChangeEventArgs.OldValue);
                    }
                }));
            }
        },
        methods: {
            RenderInBody: function () {
                System.Windows.HtmlBodyElement.Value.AddLogicalChild(this);
            },
            AddLogicalChild: function (child) {
                !Bridge.staticEquals(this.BeforeLogicalChildAdd, null) ? this.BeforeLogicalChildAdd(child) : null;

                !Bridge.staticEquals(child.BeforeConnectToLogicalParent, null) ? child.BeforeConnectToLogicalParent(this) : null;

                this.GetLogicalChilderen().add(child);

                child._logicalParent = this;

                !Bridge.staticEquals(this.AfterLogicalChildAdd, null) ? this.AfterLogicalChildAdd(child) : null;

                !Bridge.staticEquals(child.AfterConnectToLogicalParent, null) ? child.AfterConnectToLogicalParent() : null;
            },
            RemoveLogicalChild: function (child) {
                this._logicalChilderen != null ? this._logicalChilderen.remove(child) : null;
            },
            RemoveVisualChild: function (child) {
                this._visualChilderen != null ? this._visualChilderen.remove(child) : null;

                Bridge.CustomUIMarkup.Common.Extensions.RemoveFromParent(child._root);
            },
            AddVisualChild: function (child) {
                !Bridge.staticEquals(child.BeforeConnectToVisualParent, null) ? child.BeforeConnectToVisualParent(this) : null;

                child._root.appendTo(this._root);

                child._visaulParent = this;

                !Bridge.staticEquals(this.AfterVisualChildAdd, null) ? this.AfterVisualChildAdd(child) : null;

                !Bridge.staticEquals(child.AfterConnectToVisualParent, null) ? child.AfterConnectToVisualParent() : null;

                this.GetVisualChilderen().add(child);
            },
            ClearVisualChilds: function () {
                this._root.empty();
                this._visualChilderen != null ? this._visualChilderen.clear() : null;
            },
            ClearLogicalChilds: function () {
                this._logicalChilderen != null ? this._logicalChilderen.clear() : null;
            },
            GetVisualChildAt: function (index) {
                return System.Array.getItem(this.VisualChilderen, index, System.Windows.FrameworkElement);
            },
            GetVisualChildAt$1: function (indexes) {
                if (indexes === void 0) { indexes = []; }
                var currentElement = this;
                var len = indexes.length;
                for (var i = 0; i < len; i = (i + 1) | 0) {
                    var index = indexes[System.Array.index(i, indexes)];

                    currentElement = currentElement.GetVisualChildAt(index);
                }

                return currentElement;
            },
            GetVisualChilderen: function () {
                if (this._visualChilderen == null) {
                    this._visualChilderen = new (System.Collections.Generic.List$1(System.Windows.FrameworkElement)).ctor();
                }

                return this._visualChilderen;
            },
            GetLogicalChilderen: function () {
                if (this._logicalChilderen == null) {
                    this._logicalChilderen = new (System.Collections.Generic.List$1(System.Windows.FrameworkElement)).ctor();
                }

                return this._logicalChilderen;
            },
            GetLogicalChildAt: function (index) {
                return System.Array.getItem(this.LogicalChilderen, index, System.Windows.FrameworkElement);
            },
            InitDOM: function () {
                if (this._root == null) {
                    this._root = $(document.createElement("div"));
                }
            },
            On: function (eventName, handler) {
                this._root.on(eventName, handler);
            }
        }
    });

    Bridge.define("System.Windows.Controls.Control", {
        inherits: [System.Windows.FrameworkElement],
        fields: {
            Template: null
        },
        events: {
            AfterTemplateApplied: null
        },
        props: {
            DefaultTemplateAsXml: {
                get: function () {
                    return null;
                }
            },
            DefaultTemplate: {
                get: function () {
                    var key = Bridge.Reflection.getTypeFullName(Bridge.getType(this));

                    var template = { v : null };

                    if (System.Windows.Template.Cache.tryGetValue(key, template)) {
                        return template.v;
                    }

                    var defaultTemplateAsXml = this.DefaultTemplateAsXml;
                    if (defaultTemplateAsXml == null) {
                        System.Windows.Template.Cache.set(key, null);
                        return null;
                    }

                    template.v = System.Windows.Template.CreateFromXml(defaultTemplateAsXml);

                    System.Windows.Template.Cache.set(key, template.v);

                    return template.v;
                }
            }
        },
        methods: {
            ApplyTemplate: function () {
                var template = this.Template || this.DefaultTemplate;

                if (template == null) {
                    return;
                }

                Bridge.CustomUIMarkup.UI.Builder.BuildControlTemplate(template, this);

                !Bridge.staticEquals(this.AfterTemplateApplied, null) ? this.AfterTemplateApplied() : null;
            }
        }
    });

    Bridge.define("System.Windows.HtmlElement", {
        inherits: [System.Windows.FrameworkElement],
        ctors: {
            ctor: function (tag, className) {
                if (tag === void 0) { tag = null; }
                if (className === void 0) { className = null; }

                this.$initialize();
                System.Windows.FrameworkElement.ctor.call(this, tag, className);
                this.addAfterLogicalChildAdd(Bridge.fn.cacheBind(this, this.AddVisualChild));
            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup_DesignerSamples.ExampleInfo", {
        inherits: [System.Windows.FrameworkElement],
        fields: {
            _name: null,
            _xmlTemplate: null
        },
        props: {
            Name: {
                get: function () {
                    return this._name;
                },
                set: function (value) {
                    if (!Bridge.referenceEquals(this._name, value)) {
                        this._name = value;
                        this.OnPropertyChanged("Name");
                    }
                }
            },
            XmlTemplate: {
                get: function () {
                    return this._xmlTemplate;
                },
                set: function (value) {
                    if (!Bridge.referenceEquals(this._xmlTemplate, value)) {
                        this._xmlTemplate = value;
                        this.OnPropertyChanged("XmlTemplate");
                    }
                }
            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup.Libraries.CodeMirror.UIEditor", {
        inherits: [System.Windows.Controls.Control],
        fields: {
            _lineNumberToControlMap: null,
            _sourceText: null,
            _sourceDataContext: null
        },
        props: {
            DefaultTemplateAsXml: {
                get: function () {
                    return "<div  HeightPercent = '100' WidthPercent = '100'>    <SplitPanel Orientation='horizontal' HeightPercent = '100' WidthPercent = '100'>        <XmlEditor Text ='{SourceText}' HeightPercent = '100' WidthPercent = '100'                    OnTextChanged = '{OnTextChanged}'                    OnCursorLineNumberChanged = '{OnCursorLineNumberChanged}' />        <div Border = '1px solid Green' HeightPercent = '100' WidthPercent = '100' />    </SplitPanel></div>";
                }
            },
            Container: {
                get: function () {
                    return this.GetVisualChildAt$1([0, 0]).GetLogicalChildAt(1);
                }
            },
            SourceText: {
                get: function () {
                    return this._sourceText;
                },
                set: function (value) {
                    if (!Bridge.referenceEquals(this._sourceText, value)) {
                        this._sourceText = value;
                        this.OnPropertyChanged("SourceText");
                    }
                }
            },
            SourceDataContext: {
                get: function () {
                    return this._sourceDataContext;
                },
                set: function (value) {
                    if (!Bridge.referenceEquals(this._sourceDataContext, value)) {
                        this._sourceDataContext = value;
                        this.OnPropertyChanged("SourceDataContext");
                    }
                }
            }
        },
        ctors: {
            init: function () {
                this._lineNumberToControlMap = new (System.Collections.Generic.Dictionary$2(System.Int32,System.Windows.FrameworkElement))();
            }
        },
        methods: {
            OnCursorLineNumberChanged: function (lineNumber) {
                this.FocusToLine(lineNumber);
            },
            FocusToLine: function (lineNumber) {
                lineNumber = (lineNumber + 1) | 0;
                var component = { v : null };
                this._lineNumberToControlMap != null ? this._lineNumberToControlMap.tryGetValue(lineNumber, component) : null;
                if (component.v == null) {
                    return;
                }

                var query = component.v._root;

                Bridge.CustomUIMarkup.Common.Extensions.highlight(query);
            },
            OnTextChanged: function () {
                var $t;
                this.ClearOutput();

                if (System.String.isNullOrWhiteSpace(this.SourceText)) {
                    return;
                }





                try {


                    var fe = ($t = new System.Windows.FrameworkElement(), $t.DataContext = this.SourceDataContext, $t);


                    Bridge.CustomUIMarkup.UI.Builder.LoadComponent$1(fe, System.Xml.XmlHelper.GetRootNode(this.SourceText), true, Bridge.fn.bind(this, function (line, element) {
                        this._lineNumberToControlMap.set(line, element);
                    }), this.SourceText);



                    var component = fe.GetLogicalChildAt(0);

                    this.SetOutput(component);
                }
                catch ($e1) {
                    $e1 = System.Exception.create($e1);
                    var e;
                    if (Bridge.is($e1, System.Xml.XmlException)) {
                        e = $e1;
                        Bridge.Console.clear();
                        Bridge.Console.log(e);
                        this.SetErrorMessage(e.toString());
                    } else {
                        e = $e1;
                        Bridge.Console.clear();
                        Bridge.Console.log(e);
                        this.SetErrorMessage(e.toString());
                    }
                }
            },
            ClearOutput: function () {
                this.Container.ClearVisualChilds();
            },
            SetErrorMessage: function (message) {
                this.ClearOutput();

                var textBlock = Bridge.CustomUIMarkup.UI.Builder.Create(Bridge.CustomUIMarkup.Libraries.SemanticUI.TextBlock);

                textBlock.Text = message;

                this.Container.AddLogicalChild(textBlock);
            },
            SetOutput: function (element) {
                this.ClearOutput();

                this.Container.AddLogicalChild(element);
            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup.Libraries.CodeMirror.XmlEditor", {
        inherits: [System.Windows.Controls.Control],
        statics: {
            fields: {
                TextProperty: null
            },
            ctors: {
                init: function () {
                    this.TextProperty = System.Windows.DependencyProperty.Register$1("Text", System.String, Bridge.CustomUIMarkup.Libraries.CodeMirror.XmlEditor, new System.Windows.PropertyMetadata.$ctor2(Bridge.CustomUIMarkup.Libraries.CodeMirror.XmlEditor.TextChanged));
                }
            },
            methods: {
                TextChanged: function (d, e) {
                    var newValue = Bridge.cast(e.NewValue, System.String);

                    var me = Bridge.cast(d, Bridge.CustomUIMarkup.Libraries.CodeMirror.XmlEditor);

                    if (me._editor != null) {
                        if (me.isFiring_OnTextChanged) {
                            return;
                        }

                        me._editor.setValue(newValue);
                    }
                }
            }
        },
        fields: {
            _editor: null,
            isFiring_OnTextChanged: false,
            _textArea: null,
            _cursorCurrentLineNumber: 0,
            "SchemaInfo": null
        },
        events: {
            OnTextChanged: null,
            OnCursorLineNumberChanged: null
        },
        props: {
            Text: {
                get: function () {
                    return Bridge.cast(this.GetValue$1(Bridge.CustomUIMarkup.Libraries.CodeMirror.XmlEditor.TextProperty), System.String);
                },
                set: function (value) {
                    this.SetValue$1(Bridge.CustomUIMarkup.Libraries.CodeMirror.XmlEditor.TextProperty, value);
                }
            }
        },
        ctors: {
            ctor: function () {
                this.$initialize();
                System.Windows.Controls.Control.ctor.call(this);
                System.ComponentModel.Extensions.OnPropertyChanged(this, "FontSize", Bridge.fn.cacheBind(this, this.FontSizeChanged));


                window.setTimeout(Bridge.fn.bind(this, function () {
                    Bridge.CustomUIMarkup.Common.Trace.Log$1(this, this.DataContext);
                }), 1003);
            }
        },
        methods: {
            FontSizeChanged: function () {
                var fontSize = this.FontSize;

                var me = this;

                if (me._editor != null) {
                    if (me.isFiring_OnTextChanged) {
                        return;
                    }

                    me._editor.display.wrapper.style.fontSize = fontSize + 'px';
                    me._editor.refresh();
                }
            },
            InitDOM: function () {
                this._root = System.Windows.DOM.div();
                this.Render();
            },
            Render: function () {
                this._root.empty();

                this._root.css("height", "100%");

                ((this._textArea = System.Windows.DOM.textarea())).appendTo(this._root).css("height", "100%");

                window.setTimeout(Bridge.fn.bind(this, function () {
                    this.Render$1(this._textArea.get(0));
                }), 0);
            },
            Render$1: function (textAreaElement) {
                var fontSize = this.getItem("FontSize") == null ? 15 : this.FontSize;

                var schemaInfo = this["SchemaInfo"];

                


function completeAfter(cm, pred) 
{
	var cur = cm.getCursor();
	if (!pred || pred()) setTimeout(function() 
	{
		if (!cm.state.completionActive)
		cm.showHint({completeSingle: false});
	}, 100);
	
	return CodeMirror.Pass;
}

function completeIfAfterLt(cm) 
{
	return completeAfter(cm, function() {
		var cur = cm.getCursor();
		return cm.getRange(CodeMirror.Pos(cur.line, cur.ch - 1), cur) == '<';
	});
}

function completeIfInTag(cm) 
{
	return completeAfter(cm, function() 
    {
	  var tok = cm.getTokenAt(cm.getCursor());

	  if (tok.type == 'string' && (!/['']/.test(tok.string.charAt(tok.string.length - 1)) || tok.string.length == 1))
      {
            return false;
      }
	  var inner = CodeMirror.innerMode(cm.getMode(), tok.state).state;
	  return inner.tagName;
	});
}

this._editor = CodeMirror.fromTextArea(textAreaElement, 
{
	mode: 'xml',
	lineNumbers: true,
	extraKeys: {
	  '<': completeAfter,
	  '\'': completeIfAfterLt,
	  ' ': completeIfInTag,
	  '=': completeIfInTag,
	  'Ctrl-Space': 'autocomplete'
	},
	hintOptions: {schemaInfo: schemaInfo},
    autoCloseTags:true,
    matchTags: {bothTags: false},
    foldGutter: true,
    gutters: ['CodeMirror-linenumbers', 'CodeMirror-foldgutter']
});

var me = this;
var onChange = function(editor,changeObj)
{ 
    me.Fire_OnTextChanged.apply(me,[editor,changeObj]);
}

this._editor.on('change', onChange );

var onCursorActivity= function(e)
{ 
    me.Fire_onCursorActivity.apply(me,[e]);
}

this._editor.on('cursorActivity', onCursorActivity );






me._editor.display.wrapper.style.fontSize = fontSize + 'px';
me._editor.display.wrapper.style.height = '95%';



            },
            Fire_OnTextChanged: function (editor, changeObj) {
                if (this.isFiring_OnTextChanged) {
                    return;
                }

                this.isFiring_OnTextChanged = true;

                if (this._editor != null) {
                    var editorValue = this._editor.getValue();
                    this.Text = editorValue;
                }

                !Bridge.staticEquals(this.OnTextChanged, null) ? this.OnTextChanged() : null;

                this.isFiring_OnTextChanged = false;
            },
            Fire_onCursorActivity: function (e) {
                this._cursorCurrentLineNumber = e.doc.getCursor().line;

                !Bridge.staticEquals(this.OnCursorLineNumberChanged, null) ? this.OnCursorLineNumberChanged(this._cursorCurrentLineNumber) : null;
            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup.Libraries.SemanticUI.Combo", {
        inherits: [System.Windows.Controls.Control],
        statics: {
            fields: {
                DefaultTextProperty: null
            },
            ctors: {
                init: function () {
                    this.DefaultTextProperty = System.Windows.DependencyProperty.Register$1("DefaultText", System.String, Bridge.CustomUIMarkup.Libraries.SemanticUI.Combo, new System.Windows.PropertyMetadata.ctor(null));
                }
            }
        },
        fields: {
            _menu: null,
            _hidden: null,
            _wrapper: null,
            _options: null,
            _itemsSource: null,
            _displayMemberPath: null,
            _selectedValuePath: null,
            _selectedValue: null
        },
        props: {
            DefaultTemplateAsXml: {
                get: function () {
                    return "<div class = 'ui selection dropdown'>    <input type = 'hidden' value='{SelectedValue}'  x.Name = '_hidden' />    <i class = 'dropdown icon' />    <div class = 'default text' >{DefaultText}</div>    <div class = 'menu' x.Name='_menu' /></div>";
                }
            },
            DefaultText: {
                get: function () {
                    return Bridge.cast(this.GetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.Combo.DefaultTextProperty), System.String);
                },
                set: function (value) {
                    this.SetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.Combo.DefaultTextProperty, value);
                }
            },
            Options: {
                get: function () {
                    return this._options;
                },
                set: function (value) {
                    if (!Bridge.referenceEquals(this._options, value)) {
                        this._options = value;
                        this.OnPropertyChanged("Options");
                    }
                }
            },
            "ItemsSource": {
                get: function () {
                    return this._itemsSource;
                },
                set: function (value) {
                    if (!Bridge.referenceEquals(this._itemsSource, value)) {
                        this._itemsSource = value;
                        this.OnPropertyChanged("ItemsSource");
                    }
                }
            },
            DisplayMemberPath: {
                get: function () {
                    return this._displayMemberPath;
                },
                set: function (value) {
                    if (!Bridge.referenceEquals(this._displayMemberPath, value)) {
                        this._displayMemberPath = value;
                        this.OnPropertyChanged("DisplayMemberPath");
                    }
                }
            },
            SelectedValuePath: {
                get: function () {
                    return this._selectedValuePath;
                },
                set: function (value) {
                    if (!Bridge.referenceEquals(this._selectedValuePath, value)) {
                        this._selectedValuePath = value;
                        this.OnPropertyChanged("SelectedValuePath");
                    }
                }
            },
            SelectedValue: {
                get: function () {
                    return this._selectedValue;
                },
                set: function (value) {
                    if (!Bridge.referenceEquals(this._selectedValue, value)) {
                        this._selectedValue = value;
                        this.OnPropertyChanged("SelectedValue");
                    }
                }
            }
        },
        ctors: {
            ctor: function () {
                this.$initialize();
                System.Windows.Controls.Control.ctor.call(this);
                this.addBeforeConnectToLogicalParent(Bridge.fn.bind(this, function (parent) {
                    this._wrapper = this._root.dropdown();

                    this.addPropertyChanged(Bridge.fn.bind(this, function (e, args) {
                        if (Bridge.is(this.Options, System.String)) {
                            this.SetOptionsFrom(System.String.split((System.String.concat(this.Options, "")), [44].map(function(i) {{ return String.fromCharCode(i); }})));
                        }

                        if (Bridge.referenceEquals(args.propertyName, "SelectedValue")) {
                            this._hidden._root.val(System.String.concat(args.newValue, ""));
                        }
                    }));
                }));

                this.addPropertyChanged(Bridge.fn.bind(this, function (s, e) {
                    if (Bridge.referenceEquals(e.propertyName, "ItemsSource") || Bridge.referenceEquals(e.propertyName, "DisplayMemberPath") || Bridge.referenceEquals(e.propertyName, "SelectedValuePath")) {
                        this.TryToBind();
                    }
                }));


            }
        },
        methods: {
            SetOptionsFrom: function (options) {
                var $t, $t1;
                this._menu.ClearVisualChilds();

                $t = Bridge.getEnumerator(options, System.String);
                try {
                    while ($t.moveNext()) {
                        var option = $t.Current;
                        var optionElement = ($t1 = new System.Windows.HtmlElement("div", "item"), $t1["InnerHTML"] = option, $t1);
                        System.Windows.FrameworkElementExtensions.Attr(Bridge.global.System.Windows.HtmlElement, optionElement, "data-value", option);

                        this._menu.AddLogicalChild(optionElement);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }},
            TryToBind: function () {
                var $t;
                if (this["ItemsSource"] == null || this.DisplayMemberPath == null || this.SelectedValuePath == null) {
                    return;
                }

                var enumerableItemSource = Bridge.as(this["ItemsSource"], System.Collections.IEnumerable);
                if (enumerableItemSource == null) {
                    return;
                }

                this._menu.ClearVisualChilds();

                $t = Bridge.getEnumerator(enumerableItemSource);
                try {
                    while ($t.moveNext()) {
                        var record = $t.Current;
                        var optionElement = new System.Windows.HtmlElement("div", "item");

                        var text = System.String.concat(System.ComponentModel.ReflectionHelper.GetPropertyValue(record, this.DisplayMemberPath), "");
                        var value = System.String.concat(System.ComponentModel.ReflectionHelper.GetPropertyValue(record, this.SelectedValuePath), "");

                        optionElement["InnerHTML"] = text;
                        System.Windows.FrameworkElementExtensions.Attr(Bridge.global.System.Windows.HtmlElement, optionElement, "data-value", value);

                        this._menu.AddLogicalChild(optionElement);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }}
        }
    });

    Bridge.define("Bridge.CustomUIMarkup.Libraries.SemanticUI.comment", {
        inherits: [System.Windows.Controls.Control],
        statics: {
            fields: {
                "AvatarImageUrlProperty": null,
                AuthorProperty: null,
                "MetadataTimeInfoProperty": null,
                TextProperty: null
            },
            ctors: {
                init: function () {
                    this["AvatarImageUrlProperty"] = System.Windows.DependencyProperty.Register("AvatarImageUrl", System.String, Bridge.CustomUIMarkup.Libraries.SemanticUI.comment);
                    this.AuthorProperty = System.Windows.DependencyProperty.Register("Author", System.String, Bridge.CustomUIMarkup.Libraries.SemanticUI.comment);
                    this["MetadataTimeInfoProperty"] = System.Windows.DependencyProperty.Register("MetadataTimeInfo", System.String, Bridge.CustomUIMarkup.Libraries.SemanticUI.comment);
                    this.TextProperty = System.Windows.DependencyProperty.Register("Text", System.String, Bridge.CustomUIMarkup.Libraries.SemanticUI.comment);
                }
            }
        },
        props: {
            DefaultTemplateAsXml: {
                get: function () {
                    return "<div class='comment'>  <a class='avatar'>    <img src='{AvatarImageUrl}' />  </a>  <div class='content'>    <a class='author'>{Author}</a>    <div class='metadata'>      <span>{MetadataTimeInfo}</span>    </div>    <div class='text'>{Text}</div>  </div></div>";
                }
            },
            "AvatarImageUrl": {
                get: function () {
                    return Bridge.cast(this.GetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.comment["AvatarImageUrlProperty"]), System.String);
                },
                set: function (value) {
                    this.SetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.comment["AvatarImageUrlProperty"], value);
                }
            },
            Author: {
                get: function () {
                    return Bridge.cast(this.GetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.comment.AuthorProperty), System.String);
                },
                set: function (value) {
                    this.SetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.comment.AuthorProperty, value);
                }
            },
            "MetadataTimeInfo": {
                get: function () {
                    return Bridge.cast(this.GetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.comment["MetadataTimeInfoProperty"]), System.String);
                },
                set: function (value) {
                    this.SetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.comment["MetadataTimeInfoProperty"], value);
                }
            },
            Text: {
                get: function () {
                    return Bridge.cast(this.GetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.comment.TextProperty), System.String);
                },
                set: function (value) {
                    this.SetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.comment.TextProperty, value);
                }
            }
        }
    });

    Bridge.define("System.Windows.Controls.ItemsControl", {
        inherits: [System.Windows.Controls.Control],
        fields: {
            _itemsSource: null,
            "ItemTemplate": null
        },
        events: {
            "ItemClicked": null
        },
        props: {
            DefaultTemplateAsXml: {
                get: function () {
                    return "<div />";
                }
            },
            "ItemsSource": {
                get: function () {
                    return this._itemsSource;
                },
                set: function (value) {
                    if (!Bridge.referenceEquals(this._itemsSource, value)) {
                        this._itemsSource = value;
                        this.OnPropertyChanged("ItemsSource");
                    }
                }
            }
        },
        ctors: {
            ctor: function () {
                this.$initialize();
                System.Windows.Controls.Control.ctor.call(this);
                this.addAfterLogicalChildAdd(Bridge.fn.cacheBind(this, this.AddVisualChild));

                this.addBeforeConnectToLogicalParent(Bridge.fn.cacheBind(this, this.OnBeforeConnectToLogicalParent));

                System.ComponentModel.Extensions.OnPropertyChanged(this, "ItemsSource", Bridge.fn.cacheBind(this, this.ReRender));
            }
        },
        methods: {
            OnBeforeConnectToLogicalParent: function (arg) {
                this.ReRender();
            },
            RaiseEvent_ItemClicked: function (itemDataContext) {
                !Bridge.staticEquals(this.ItemClicked, null) ? this.ItemClicked(itemDataContext) : null;
            },
            ReRender: function () {
                var $t;


                if (this["ItemsSource"] == null) {
                    Bridge.CustomUIMarkup.Common.Trace.OperationWasCanceled("ReRender", "ItemsSourceis null.");

                    return;
                }

                var list = Bridge.as(this["ItemsSource"], System.Collections.IList);
                if (list == null) {
                    throw new System.ArgumentException("MustbeList:ItemsSource@ItemsSource.Type:" + (Bridge.Reflection.getTypeFullName(Bridge.getType(this["ItemsSource"])) || ""));
                }


                this.ClearVisualChilds();
                this.ClearLogicalChilds();


                var itemTemplate = this["ItemTemplate"];

                var len = System.Array.getCount(list);
                for (var i = 0; i < len; i = (i + 1) | 0) {
                    var itemData = { v : System.Array.getItem(list, i) };


                    var item = null;
                    if (itemTemplate != null) {
                        var fe = ($t = new System.Windows.FrameworkElement(), $t.DataContext = itemData.v, $t);

                        Bridge.CustomUIMarkup.UI.Builder.LoadComponent$1(fe, this["ItemTemplate"].Root);

                        item = fe.GetLogicalChildAt(0);



                    } else {
                        var textBlock = Bridge.CustomUIMarkup.UI.Builder.Create(Bridge.CustomUIMarkup.Libraries.SemanticUI.TextBlock);
                        textBlock["InnerHTML"] = itemData.v != null ? itemData.v.toString() : null;

                        item = textBlock;

                    }


                    item.On("click", (function ($me, itemData) {
                        return Bridge.fn.bind($me, function () {
                            !Bridge.staticEquals(this.ItemClicked, null) ? this.ItemClicked(itemData.v) : null;
                        });
                    })(this, itemData));

                    this.AddLogicalChild(item);
                }
            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup.Libraries.SemanticUI.DataGridColumn", {
        inherits: [System.Windows.Controls.Control],
        statics: {
            fields: {
                EditorTypeProperty: null,
                LabelProperty: null,
                NameProperty: null
            },
            ctors: {
                init: function () {
                    this.EditorTypeProperty = System.Windows.DependencyProperty.Register$1("EditorType", Bridge.CustomUIMarkup.Libraries.SemanticUI.DataGridCellEditorType, Bridge.CustomUIMarkup.Libraries.SemanticUI.DataGridColumn, new System.Windows.PropertyMetadata.ctor(0));
                    this.LabelProperty = System.Windows.DependencyProperty.Register$1("Label", System.String, Bridge.CustomUIMarkup.Libraries.SemanticUI.DataGridColumn, new System.Windows.PropertyMetadata.ctor(null));
                    this.NameProperty = System.Windows.DependencyProperty.Register$1("Name", System.String, Bridge.CustomUIMarkup.Libraries.SemanticUI.DataGridColumn, new System.Windows.PropertyMetadata.ctor(null));
                }
            }
        },
        props: {
            DefaultTemplateAsXml: {
                get: function () {
                    return "<th>{Label}</th>";
                }
            },
            EditorType: {
                get: function () {
                    return System.Nullable.getValue(Bridge.cast(Bridge.unbox(this.GetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.DataGridColumn.EditorTypeProperty)), System.Int32));
                },
                set: function (value) {
                    this.SetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.DataGridColumn.EditorTypeProperty, Bridge.box(value, Bridge.CustomUIMarkup.Libraries.SemanticUI.DataGridCellEditorType, System.Enum.toStringFn(Bridge.CustomUIMarkup.Libraries.SemanticUI.DataGridCellEditorType)));
                }
            },
            Label: {
                get: function () {
                    return Bridge.cast(this.GetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.DataGridColumn.LabelProperty), System.String);
                },
                set: function (value) {
                    this.SetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.DataGridColumn.LabelProperty, value);
                }
            },
            Name: {
                get: function () {
                    return Bridge.cast(this.GetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.DataGridColumn.NameProperty), System.String);
                },
                set: function (value) {
                    this.SetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.DataGridColumn.NameProperty, value);
                }
            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup.Libraries.SemanticUI.DatePicker", {
        inherits: [System.Windows.Controls.Control],
        statics: {
            fields: {
                ValueProperty: null,
                DefaultTextProperty: null
            },
            ctors: {
                init: function () {
                    this.ValueProperty = System.Windows.DependencyProperty.Register$1("Value", System.Nullable$1(System.DateTime), Bridge.CustomUIMarkup.Libraries.SemanticUI.DatePicker, new System.Windows.PropertyMetadata.$ctor1(null, Bridge.CustomUIMarkup.Libraries.SemanticUI.DatePicker.OnValueChanged));
                    this.DefaultTextProperty = System.Windows.DependencyProperty.Register$1("DefaultText", System.String, Bridge.CustomUIMarkup.Libraries.SemanticUI.DatePicker, new System.Windows.PropertyMetadata.ctor(null));
                }
            },
            methods: {
                OnValueChanged: function (d, e) {
                    var datePicker = Bridge.cast(d, Bridge.CustomUIMarkup.Libraries.SemanticUI.DatePicker);

                    var root = datePicker._root;
                    var value = Bridge.as(e.NewValue, System.DateTime, true);
                    var valueAsString = "";
                    if (System.Nullable.hasValue(value)) {
                        valueAsString = System.Nullable.toString(value, function ($t) { return System.DateTime.format($t); });
                    }

                    root.calendar('set date',valueAsString);
                }
            }
        },
        props: {
            Value: {
                get: function () {
                    return Bridge.cast(Bridge.unbox(this.GetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.DatePicker.ValueProperty)), System.DateTime, true);
                },
                set: function (value) {
                    this.SetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.DatePicker.ValueProperty, Bridge.box(value, System.DateTime, System.Nullable.toStringFn(System.DateTime.format), System.Nullable.getHashCode));
                }
            },
            DefaultText: {
                get: function () {
                    return Bridge.cast(this.GetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.DatePicker.DefaultTextProperty), System.String);
                },
                set: function (value) {
                    this.SetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.DatePicker.DefaultTextProperty, value);
                }
            },
            DefaultTemplateAsXml: {
                get: function () {
                    return "<div class='ui calendar'>    <div class='ui input left icon'>        <i class='calendar icon'/>        <input type='text' placeholder='{DefaultText}'/>    </div></div>";
                }
            }
        },
        ctors: {
            ctor: function () {
                this.$initialize();
                System.Windows.Controls.Control.ctor.call(this);
                var _wrapper;

                this.addBeforeConnectToLogicalParent(Bridge.fn.bind(this, function (parent) {
                    var root = this._root;
                    root.calendar({type: 'date'});
                }));

            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup.Libraries.SemanticUI.ElementBase", {
        inherits: [System.Windows.HtmlElement],
        statics: {
            fields: {
                SizeProperty: null,
                "IsCenterAlignedProperty": null,
                "IsRightAlignedProperty": null,
                AlignProperty: null
            },
            ctors: {
                init: function () {
                    this.SizeProperty = System.Windows.DependencyProperty.Register$1("Size", Bridge.CustomUIMarkup.Libraries.SemanticUI.Size, Bridge.CustomUIMarkup.Libraries.SemanticUI.ElementBase, new System.Windows.PropertyMetadata.$ctor2(Bridge.CustomUIMarkup.Libraries.SemanticUI.ElementBase.OnSizeChanged));
                    this["IsCenterAlignedProperty"] = System.Windows.DependencyProperty.Register$1("IsCenterAligned", System.Boolean, Bridge.CustomUIMarkup.Libraries.SemanticUI.ElementBase, new System.Windows.PropertyMetadata.$ctor2(Bridge.CustomUIMarkup.Libraries.SemanticUI.ElementBase.IsCenterAlignedChanged));
                    this["IsRightAlignedProperty"] = System.Windows.DependencyProperty.Register$1("IsRightAligned", System.Boolean, Bridge.CustomUIMarkup.Libraries.SemanticUI.ElementBase, new System.Windows.PropertyMetadata.$ctor2(Bridge.CustomUIMarkup.Libraries.SemanticUI.ElementBase.IsRightAlignedChanged));
                    this.AlignProperty = System.Windows.DependencyProperty.Register$1("Align", Bridge.CustomUIMarkup.Libraries.SemanticUI.Align, Bridge.CustomUIMarkup.Libraries.SemanticUI.ElementBase, new System.Windows.PropertyMetadata.$ctor2(Bridge.CustomUIMarkup.Libraries.SemanticUI.ElementBase.OnAlignChanged));
                }
            },
            methods: {
                OnSizeChanged: function (d, e) {
                    var me = Bridge.cast(d, Bridge.CustomUIMarkup.Libraries.SemanticUI.ElementBase);

                    var newValue = System.Nullable.getValue(Bridge.cast(Bridge.unbox(e.NewValue), System.Int32));

                    me._root.addClass(System.Enum.toString(Bridge.CustomUIMarkup.Libraries.SemanticUI.Size, newValue).toLowerCase());
                },
                IsCenterAlignedChanged: function (d, e) {
                    Bridge.cast(d, Bridge.CustomUIMarkup.Libraries.SemanticUI.ElementBase).AddCssClassOnTrueElseRemove(e.NewValue, "center aligned");
                },
                IsRightAlignedChanged: function (d, e) {
                    Bridge.cast(d, Bridge.CustomUIMarkup.Libraries.SemanticUI.ElementBase).AddCssClassOnTrueElseRemove(e.NewValue, "right aligned");
                },
                OnAlignChanged: function (d, e) {
                    var me = Bridge.cast(d, Bridge.CustomUIMarkup.Libraries.SemanticUI.ElementBase);

                    var value = System.Nullable.getValue(Bridge.cast(Bridge.unbox(e.NewValue), System.Int32));
                    var className = (System.Enum.toString(Bridge.CustomUIMarkup.Libraries.SemanticUI.Align, value).toLowerCase() || "") + " aligned";

                    me.AddCssClassOnTrueElseRemove(e.NewValue, className);
                }
            }
        },
        props: {
            Size: {
                get: function () {
                    return System.Nullable.getValue(Bridge.cast(Bridge.unbox(this.getItem("Size")), System.Int32));
                },
                set: function (value) {
                    this.setItem("Size", Bridge.box(value, Bridge.CustomUIMarkup.Libraries.SemanticUI.Size, System.Enum.toStringFn(Bridge.CustomUIMarkup.Libraries.SemanticUI.Size)));
                }
            },
            Align: {
                get: function () {
                    return System.Nullable.getValue(Bridge.cast(Bridge.unbox(this.getItem("Align")), System.Int32));
                },
                set: function (value) {
                    this.setItem("Align", Bridge.box(value, Bridge.CustomUIMarkup.Libraries.SemanticUI.Align, System.Enum.toStringFn(Bridge.CustomUIMarkup.Libraries.SemanticUI.Align)));
                }
            },
            HtmlTag: {
                get: function () {
                    return "div";
                }
            },
            HtmlClassName: {
                get: function () {
                    return Bridge.Reflection.getTypeName(Bridge.getType(this));
                }
            }
        },
        methods: {
            AddCssClassOnTrueElseRemove: function (value, cssClass) {
                if (System.Nullable.eq(System.Extensions.ToBooleanNullable(value), true)) {
                    this._root.addClass(cssClass);
                    return;
                }

                this._root.removeClass(cssClass);
            },
            InitDOM: function () {

                this._root = System.Windows.DOM.CreateElement$1(this.HtmlTag, this.HtmlClassName);

            }
        }
    });

    Bridge.define("System.Windows.ContentControl", {
        inherits: [System.Windows.Controls.Control],
        statics: {
            fields: {
                ContentProperty: null
            },
            ctors: {
                init: function () {
                    this.ContentProperty = System.Windows.FrameworkElement.RegisterDependencyProperty("Content", System.Object, System.Windows.ContentControl, System.Windows.ContentControl.OnContentChanged);
                }
            },
            methods: {
                Find: function (element) {
                    var elementAsContentPresenter = Bridge.as(element, System.Windows.ContentPresenter);

                    if (elementAsContentPresenter != null) {
                        return elementAsContentPresenter;
                    }

                    var len = element.VisualChilderenCount;

                    for (var i = 0; i < len; i = (i + 1) | 0) {
                        elementAsContentPresenter = System.Windows.ContentControl.Find(element.GetVisualChildAt(i));
                        if (elementAsContentPresenter != null) {
                            return elementAsContentPresenter;
                        }
                    }

                    return null;
                },
                OnContentChanged: function (d, e) {
                    Bridge.cast(d, System.Windows.ContentControl).OnContentChanged();
                }
            }
        },
        fields: {
            _contentPresenter: null,
            _isContentChanging: false
        },
        props: {
            Content: {
                get: function () {
                    return this.GetValue$1(System.Windows.ContentControl.ContentProperty);
                },
                set: function (value) {
                    this.SetValue$1(System.Windows.ContentControl.ContentProperty, value);
                }
            }
        },
        ctors: {
            ctor: function () {
                this.$initialize();
                System.Windows.Controls.Control.ctor.call(this);

                this.addAfterLogicalChildAdd(Bridge.fn.cacheBind(this, this.CanOnlyBeOneChild));
                this.addAfterLogicalChildAdd(Bridge.fn.cacheBind(this, this.AssignFirstLogicalChildToContent));
                this.addAfterTemplateApplied(Bridge.fn.cacheBind(this, this.InitializeContentPresenter));
            }
        },
        methods: {
            InitializeContentPresenter: function () {
                this._contentPresenter = System.Windows.ContentControl.Find(this);
                if (this._contentPresenter == null) {
                    throw new System.InvalidOperationException("ContentPresenter must be defined in template.");
                }

            },
            AssignFirstLogicalChildToContent: function (element) {
                if (this._isContentChanging) {
                    return;
                }

                this.Content = element;
            },
            CanOnlyBeOneChild: function (child) {
                if (this.LogicalChilderenCount === 2) {
                    Bridge.CustomUIMarkup.Common.Trace.Log$2("GetLogicalChildAt(0)", this.GetLogicalChildAt(0));
                    Bridge.CustomUIMarkup.Common.Trace.Log$2("GetLogicalChildAt(1)", this.GetLogicalChildAt(1));

                    throw new System.InvalidOperationException("Content cannot be set more than once.");
                }
            },
            OnContentChanged: function () {

                if (this._contentPresenter == null) {
                    throw new System.InvalidOperationException("'ContentPresenter' element not found.");
                }

                this._isContentChanging = true;

                var content = this.Content;

                if (content == null) {
                    this._isContentChanging = false;
                    this._contentPresenter["InnerHTML"] = null;
                    return;
                }


                var frameworkElement = Bridge.as(content, System.Windows.FrameworkElement);
                if (frameworkElement != null) {
                    if (this._contentPresenter.LogicalChilderenCount === 1) {
                        this._contentPresenter.RemoveLogicalChild(this._contentPresenter.GetLogicalChildAt(0));
                    }

                    if (this._contentPresenter.VisualChilderenCount === 1) {
                        this._contentPresenter.RemoveVisualChild(this._contentPresenter.GetVisualChildAt(0));
                    }

                    this._contentPresenter.AddLogicalChild(frameworkElement);

                    if (this.LogicalChilderenCount === 1) {
                        this.RemoveLogicalChild(this.GetLogicalChildAt(0));
                    }

                    this.AddLogicalChild(frameworkElement);

                    this._isContentChanging = false;
                    return;
                }

                var contentAsString = content.toString();

                var textBlock = Bridge.CustomUIMarkup.UI.Builder.Create(Bridge.CustomUIMarkup.Libraries.SemanticUI.TextBlock);
                textBlock.Text = contentAsString;
                this._contentPresenter.AddLogicalChild(textBlock);

                if (this.LogicalChilderenCount === 1) {
                    this.RemoveLogicalChild(this.GetLogicalChildAt(0));
                }

                this.AddLogicalChild(textBlock);

                this._isContentChanging = false;
            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup.Libraries.SemanticUI.InputText", {
        inherits: [System.Windows.Controls.Control],
        statics: {
            fields: {
                TextProperty: null,
                PlaceHolderProperty: null,
                "IsMandatoryProperty": null
            },
            ctors: {
                init: function () {
                    this.TextProperty = System.Windows.DependencyProperty.Register$1("Text", System.String, Bridge.CustomUIMarkup.Libraries.SemanticUI.InputText, new System.Windows.PropertyMetadata.$ctor2(Bridge.CustomUIMarkup.Libraries.SemanticUI.InputText.OnTextChanged));
                    this.PlaceHolderProperty = System.Windows.DependencyProperty.Register$1("PlaceHolder", System.String, Bridge.CustomUIMarkup.Libraries.SemanticUI.InputText, new System.Windows.PropertyMetadata.$ctor2(Bridge.CustomUIMarkup.Libraries.SemanticUI.InputText.OnPlaceHolderChanged));
                    this["IsMandatoryProperty"] = System.Windows.DependencyProperty.Register$1("IsMandatory", System.Boolean, Bridge.CustomUIMarkup.Libraries.SemanticUI.InputText, new System.Windows.PropertyMetadata.$ctor2(Bridge.CustomUIMarkup.Libraries.SemanticUI.InputText.OnIsMandatoryChanged));
                }
            },
            methods: {
                OnTextChanged: function (d, e) {
                    var me = Bridge.cast(d, Bridge.CustomUIMarkup.Libraries.SemanticUI.InputText);

                    me._inputElement._root.val(Bridge.cast(e.NewValue, System.String));
                },
                OnPlaceHolderChanged: function (d, e) {
                    var me = Bridge.cast(d, Bridge.CustomUIMarkup.Libraries.SemanticUI.InputText);
                    System.Windows.FrameworkElementExtensions.Attr(Bridge.global.System.Windows.FrameworkElement, me._inputElement, "placeholder", Bridge.cast(e.NewValue, System.String));
                },
                OnIsMandatoryChanged: function (d, e) {
                    var me = Bridge.cast(d, Bridge.CustomUIMarkup.Libraries.SemanticUI.InputText);

                    if (System.Nullable.getValue(Bridge.cast(Bridge.unbox(e.NewValue), System.Boolean))) {
                        me.InitializeCornerLabelDiv();
                    } else {
                        me.RemoveCornerLabelDiv();
                    }
                }
            }
        },
        fields: {
            _inputElement: null,
            "AllowOnlyDecimalInputs": false,
            "AllowOnlyNumericInputs": false,
            _cornerLabelDiv: null
        },
        events: {
            KeyPress: null
        },
        props: {
            DefaultTemplateAsXml: {
                get: function () {
                    return "<div class='ui input'>   <input type='text'  x:Name = '_inputElement' /></div>";
                }
            },
            _value: {
                get: function () {
                    return this._inputElement._root.val();
                }
            },
            Text: {
                get: function () {
                    return Bridge.cast(this.GetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.InputText.TextProperty), System.String);
                },
                set: function (value) {
                    this.SetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.InputText.TextProperty, value);
                }
            },
            PlaceHolder: {
                get: function () {
                    return Bridge.cast(this.GetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.InputText.PlaceHolderProperty), System.String);
                },
                set: function (value) {
                    this.SetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.InputText.PlaceHolderProperty, value);
                }
            },
            "IsMandatory": {
                get: function () {
                    return System.Extensions.ToBoolean(this.GetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.InputText["IsMandatoryProperty"]));
                },
                set: function (value) {
                    this.SetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.InputText["IsMandatoryProperty"], Bridge.box(value, System.Boolean, System.Boolean.toString));
                }
            }
        },
        ctors: {
            ctor: function () {
                this.$initialize();
                System.Windows.Controls.Control.ctor.call(this);
                this.addBeforeConnectToLogicalParent(Bridge.fn.bind(this, function (parent) {
                    this.AttachEvents();
                }));
            }
        },
        methods: {
            AttachEvents: function () {
                this._inputElement._root.focusout(Bridge.fn.cacheBind(this, this.OnFocusOut));
                this._inputElement._root.keypress(Bridge.fn.cacheBind(this, this.OnKeyPress));
            },
            DisableNonDecimalInputs: function (e) {
                var isDot = e.which === 46;

                if (isDot) {
                    var alreadyContainsDot = System.String.indexOf(((this._value || "") + ""), String.fromCharCode(46)) >= 0;
                    if (alreadyContainsDot) {
                        e.preventDefault();
                    }

                    return;
                }

                this.DisableNonNumericValues(e);
            },
            DisableNonNumericValues: function (e) {
                if (e.which !== 8 && e.which !== 0 && (e.which < 48 || e.which > 57)) {
                    e.preventDefault();
                }
            },
            OnFocusOut: function (e) {
                var val = System.Windows.FrameworkElementExtensions.Val$1(Bridge.global.System.Windows.FrameworkElement, this._inputElement);
                if (System.String.isNullOrEmpty(val)) {
                    return;
                }

                if (Bridge.referenceEquals(val.trim(), ".")) {
                    if (this["AllowOnlyDecimalInputs"]) {
                        System.Windows.FrameworkElementExtensions.Val(Bridge.global.System.Windows.FrameworkElement, this._inputElement, "");
                        return;
                    }

                }

                this.Text = val;
            },
            OnKeyPress: function (e) {
                !Bridge.staticEquals(this.KeyPress, null) ? this.KeyPress(e) : null;

                if (this["AllowOnlyDecimalInputs"]) {
                    this.DisableNonDecimalInputs(e);
                    return;
                }

                if (this["AllowOnlyNumericInputs"]) {
                    this.DisableNonNumericValues(e);
                }
            },
            InitializeCornerLabelDiv: function () {
                if (this._cornerLabelDiv == null) {
                    this._cornerLabelDiv = System.Windows.DOM.div("ui corner label").appendTo(this._root);
                    System.Windows.DOM.i("asterisk icon").appendTo(this._cornerLabelDiv);
                    this._root.addClass("labeled");
                }
            },
            RemoveCornerLabelDiv: function () {
                if (this._cornerLabelDiv == null) {
                    return;
                }

                Bridge.CustomUIMarkup.Common.Extensions.RemoveFromParent(this._cornerLabelDiv);
                this._cornerLabelDiv = null;

                this._root.removeClass("labeled");
            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup.Libraries.SemanticUI.TextBlock", {
        inherits: [System.Windows.Controls.Control],
        statics: {
            fields: {
                TextProperty: null
            },
            ctors: {
                init: function () {
                    this.TextProperty = System.Windows.DependencyProperty.Register$1("Text", System.String, Bridge.CustomUIMarkup.Libraries.SemanticUI.TextBlock, new System.Windows.PropertyMetadata.ctor(null));
                }
            }
        },
        props: {
            DefaultTemplateAsXml: {
                get: function () {
                    return "<div InnerHTML = '{Text}' css.display = 'inline-block' />";
                }
            },
            Text: {
                get: function () {
                    return Bridge.cast(this.GetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.TextBlock.TextProperty), System.String);
                },
                set: function (value) {
                    this.SetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.TextBlock.TextProperty, value);
                }
            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup.Libraries.SemanticUI.ui_rating", {
        inherits: [System.Windows.Controls.Control],
        statics: {
            fields: {
                "IconIsStarProperty": null,
                MaxRateProperty: null,
                RateProperty: null
            },
            ctors: {
                init: function () {
                    this["IconIsStarProperty"] = System.Windows.DependencyProperty.Register$1("IconIsStar", System.Boolean, Bridge.CustomUIMarkup.Libraries.SemanticUI.ui_rating, new System.Windows.PropertyMetadata.ctor(Bridge.box(true, System.Boolean, System.Boolean.toString)));
                    this.MaxRateProperty = System.Windows.DependencyProperty.Register$1("MaxRate", System.Nullable$1(System.Int32), Bridge.CustomUIMarkup.Libraries.SemanticUI.ui_rating, System.Windows.FrameworkElement.CreateHtmlAttributeUpdater("data-max-rating"));
                    this.RateProperty = System.Windows.DependencyProperty.Register$1("Rate", System.Nullable$1(System.Int32), Bridge.CustomUIMarkup.Libraries.SemanticUI.ui_rating, System.Windows.FrameworkElement.CreateHtmlAttributeUpdater("data-rating"));
                }
            }
        },
        props: {
            DefaultTemplateAsXml: {
                get: function () {
                    return "<div class='ui star rating'  data-max-rating = '{MaxRate}' data-rating ='{Rate}'  />";
                }
            },
            "IconIsStar": {
                get: function () {
                    return Bridge.cast(Bridge.unbox(this.GetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.ui_rating["IconIsStarProperty"])), System.Boolean, true);
                },
                set: function (value) {
                    this.SetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.ui_rating["IconIsStarProperty"], Bridge.box(value, System.Boolean, System.Nullable.toStringFn(System.Boolean.toString), System.Nullable.getHashCode));
                }
            },
            MaxRate: {
                get: function () {
                    return Bridge.cast(Bridge.unbox(this.GetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.ui_rating.MaxRateProperty)), System.Int32, true);
                },
                set: function (value) {
                    this.SetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.ui_rating.MaxRateProperty, Bridge.box(value, System.Int32, System.Nullable.toString, System.Nullable.getHashCode));
                }
            },
            Rate: {
                get: function () {
                    return Bridge.cast(Bridge.unbox(this.GetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.ui_rating.RateProperty)), System.Int32, true);
                },
                set: function (value) {
                    this.SetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.ui_rating.RateProperty, Bridge.box(value, System.Int32, System.Nullable.toString, System.Nullable.getHashCode));
                }
            }
        },
        ctors: {
            ctor: function () {
                this.$initialize();
                System.Windows.Controls.Control.ctor.call(this);
                this.addBeforeConnectToLogicalParent(Bridge.fn.bind(this, function (parent) {
                    this._root.rating();
                }));
            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup.Libraries.SemanticUI.ui_top_attached_tabular_menu", {
        inherits: [System.Windows.Controls.Control],
        fields: {
            _headerContainer: null
        },
        props: {
            DefaultTemplateAsXml: {
                get: function () {
                    return "<div>    <div x:Name ='_headerContainer'  class = 'ui top attached tabular menu' /></div>";
                }
            },
            Tabs: {
                get: function () {
                    return System.Linq.Enumerable.from(this.LogicalChilderen).select(function (tab) {
                            return Bridge.as(tab, Bridge.CustomUIMarkup.Libraries.SemanticUI.TabItem);
                        });
                }
            }
        },
        ctors: {
            ctor: function () {
                this.$initialize();
                System.Windows.Controls.Control.ctor.call(this);
                this.addAfterLogicalChildAdd(Bridge.fn.cacheBind(this, this.OnAfterAddChild));
                this.addBeforeConnectToLogicalParent(Bridge.fn.cacheBind(this, this.OnBeforeConnectToParent));
            }
        },
        methods: {
            AddTab: function (tabItem) {
                this._headerContainer.AddVisualChild(tabItem._headerElement);

                this.AddVisualChild(tabItem._bodyElement);

                tabItem._headerElement._root.click(Bridge.fn.bind(this, function () {
                    this.ActivateTab(tabItem);
                }));
            },
            ActivateTab: function (tabItem) {
                var $t;
                $t = Bridge.getEnumerator(this.Tabs, Bridge.CustomUIMarkup.Libraries.SemanticUI.TabItem);
                try {
                    while ($t.moveNext()) {
                        var tab = $t.Current;
                        tab["IsActive"] = false;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                tabItem["IsActive"] = true;
            },
            OnAfterAddChild: function (element) {
                var tabItem = Bridge.as(element, Bridge.CustomUIMarkup.Libraries.SemanticUI.TabItem);
                if (tabItem == null) {
                    throw new System.ArgumentException();
                }

                this.AddTab(tabItem);
            },
            OnBeforeConnectToParent: function (parent) {
                this._root.tab();
                if (System.Linq.Enumerable.from(this.Tabs).any()) {
                    this.ActivateTab(System.Linq.Enumerable.from(this.Tabs).firstOrDefault(null, null));
                }
            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup.Libraries.split_js.SplitPanel", {
        inherits: [System.Windows.Controls.Control],
        statics: {
            fields: {
                OrientationProperty: null
            },
            ctors: {
                init: function () {
                    this.OrientationProperty = System.Windows.DependencyProperty.Register$1("Orientation", System.Windows.Controls.Orientation, Bridge.CustomUIMarkup.Libraries.split_js.SplitPanel, new System.Windows.PropertyMetadata.$ctor2(Bridge.CustomUIMarkup.Libraries.split_js.SplitPanel.OnOrientationChanged));
                }
            },
            methods: {
                OnOrientationChanged: function (d, e) {
                    var me = Bridge.cast(d, Bridge.CustomUIMarkup.Libraries.split_js.SplitPanel);
                    me.SetOrientation(System.Nullable.getValue(Bridge.cast(Bridge.unbox(e.NewValue), System.Int32)));
                }
            }
        },
        fields: {
            _wrapper: null
        },
        props: {
            DefaultTemplateAsXml: {
                get: function () {
                    return "<div>   <div class='{Class}' />   <div class='{Class}' /></div>";
                }
            },
            Left: {
                get: function () {
                    return this.GetVisualChildAt$1([0, 0]);
                }
            },
            Right: {
                get: function () {
                    return this.GetVisualChildAt$1([0, 1]);
                }
            },
            Orientation: {
                get: function () {
                    return System.Nullable.getValue(Bridge.cast(Bridge.unbox(this.GetValue$1(Bridge.CustomUIMarkup.Libraries.split_js.SplitPanel.OrientationProperty)), System.Int32));
                },
                set: function (value) {
                    this.SetValue$1(Bridge.CustomUIMarkup.Libraries.split_js.SplitPanel.OrientationProperty, Bridge.box(value, System.Windows.Controls.Orientation, System.Enum.toStringFn(System.Windows.Controls.Orientation)));
                }
            }
        },
        ctors: {
            ctor: function () {
                this.$initialize();
                System.Windows.Controls.Control.ctor.call(this);
                this.addAfterLogicalChildAdd(Bridge.fn.cacheBind(this, this.AfterAddChildElement));
                this.addBeforeConnectToLogicalParent(Bridge.fn.cacheBind(this, this.ReInitializeWrapper));
                this.addBeforeConnectToVisualParent(Bridge.fn.cacheBind(this, this.ReInitializeWrapper));
            }
        },
        methods: {
            AfterAddChildElement: function (element) {
                if (this.LogicalChilderenCount === 1) {
                    this.Left.AddVisualChild(element);
                } else {
                    this.Right.AddVisualChild(element);
                }
            },
            ReInitializeWrapper: function (parent) {
                if (parent === void 0) { parent = null; }
                this._wrapper != null ? this._wrapper.destroy() : null;

                this._wrapper = this.Split();
            },
            SetOrientation: function (orientation) {
                var direction = orientation === System.Windows.Controls.Orientation.Horizontal ? "horizontal" : "vertical";

                this.Class = "split split-" + (direction || "");

                Bridge.CustomUIMarkup.Common.Extensions.Foreach(this._root.children(), Bridge.fn.bind(this, function (c) {
                    Bridge.CustomUIMarkup.Common.Extensions.SetClass(c, this.Class);
                }));

                if (this.LogicalParent != null) {
                    this.ReInitializeWrapper();
                }
            },
            Split: function () {
                // ReSharper disable once UnusedVariable
                var left = this.Left._root.get(0);
                // ReSharper disable once UnusedVariable
                var right = this.Right._root.get(0);

                return Split([ left, right], { sizes:[50,50],  direction:this._direction });
                ;
            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup.Libraries.Swiper.Slider", {
        inherits: [System.Windows.Controls.Control],
        statics: {
            fields: {
                DelayProperty: null
            },
            ctors: {
                init: function () {
                    this.DelayProperty = System.Windows.DependencyProperty.Register$1("Delay", System.String, Bridge.CustomUIMarkup.Libraries.Swiper.Slider, new System.Windows.PropertyMetadata.ctor(Bridge.box(2000, System.Int32)));
                }
            }
        },
        props: {
            DefaultTemplateAsXml: {
                get: function () {
                    return "<div class='swiper-container'>    <div class='swiper-wrapper' /></div>";
                }
            },
            Delay: {
                get: function () {
                    return System.Nullable.getValue(Bridge.cast(Bridge.unbox(this.GetValue$1(Bridge.CustomUIMarkup.Libraries.Swiper.Slider.DelayProperty)), System.Int32));
                },
                set: function (value) {
                    this.SetValue$1(Bridge.CustomUIMarkup.Libraries.Swiper.Slider.DelayProperty, Bridge.box(value, System.Int32));
                }
            }
        },
        ctors: {
            ctor: function () {
                this.$initialize();
                System.Windows.Controls.Control.ctor.call(this);
                this.addBeforeConnectToLogicalParent(Bridge.fn.cacheBind(this, this.InitWrapper));
                this.addAfterLogicalChildAdd(Bridge.fn.cacheBind(this, this.CreateSlide));
            }
        },
        methods: {
            CreateSlide: function (element) {
                var item = Bridge.CustomUIMarkup.UI.Builder.Create(Bridge.CustomUIMarkup.Libraries.Swiper.Slider.SwiperItemControl);
                item.Content = element;

                this.GetVisualChildAt(0).AddVisualChild(item);
            },
            InitWrapper: function (parent) {
                // ReSharper disable once UnusedVariable
                var delay = this.Delay;
                // ReSharper disable once UnusedVariable
                var me = this;

                

setTimeout(function(){

    new Swiper(me._root, {
      spaceBetween: 30,
      centeredSlides: true,
      autoplay: {
        delay: delay,
        disableOnInteraction: false,
      }
    });


},0);



            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup.Libraries.viewerjs.Viewer", {
        inherits: [System.Windows.Controls.Control],
        fields: {
            _wrapper: null
        },
        ctors: {
            ctor: function () {
                this.$initialize();
                System.Windows.Controls.Control.ctor.call(this);
                this.addBeforeConnectToLogicalParent(Bridge.fn.cacheBind(this, this.InitWrapper));
                this.addAfterLogicalChildAdd(Bridge.fn.cacheBind(this, this.CreateImage));
            }
        },
        methods: {
            InitDOM: function () {
                this._root = System.Windows.DOM.ul("pictures");
            },
            CreateImage: function (element) {
                var li = new System.Windows.HtmlElement("li");
                li.AddVisualChild(element);
                this.AddVisualChild(li);

                // DOM.li().AppendTo(_root).Append(element._root);
            },
            InitWrapper: function (parent) {
                // ReSharper disable once UnusedVariable
                var root = this._root.get(0);
                // ReSharper disable once UnusedVariable
                var me = this;
                var id = this["Id"];


                var css = "\r\n.pictures {\r\n      margin: 0;\r\n      padding: 0;\r\n      list-style: none;\r\n      max-width: 30rem;\r\n      display:table-cell;\r\n    }\r\n\r\n    .pictures > li {\r\n      float: left;\r\n      width: 33.3%;\r\n      height: 33.3%;\r\n      margin: 0 -1px -1px 0;\r\n      border: 1px solid transparent;\r\n      overflow: hidden;\r\n    }\r\n\r\n    .pictures > li > img {\r\n      width: 100%;\r\n      cursor: -webkit-zoom-in;\r\n      cursor: zoom-in;\r\n    }\r\n";

                

setTimeout(function(){

    var options = {};
    me._wrapper = new Viewer(root, options);





$( '<style> '+css+'</style>' ).appendTo( 'head' );

},0);








            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup_DesignerSamples.AppContainer", {
        inherits: [System.Windows.HtmlElement],
        statics: {
            props: {
                "TestUI": {
                    get: function () {
                        return "\r\n\r\n<div class='ui two row grid' HeightPercent = '100' WidthPercent = '100' >\r\n    <row>\r\n        <column Align='Center'>\r\n             <ComboBox \r\n                ItemsSource = '{Binding Examples}' \r\n                DisplayMemberPath = 'Name'\r\n                SelectedValuePath = 'XmlTemplate' \r\n\t\t        SelectedValue = '{Binding CurrentTemplate}' />\r\n        </column>\r\n    </row>\r\n    \r\n    <row HeightPercent = '100'>\r\n        <UIEditor SourceDataContext='{Inner}'   SourceText = '{CurrentTemplate}'/>\r\n    </row>\r\n        \r\n</div>\r\n\r\n\r\n";
                    }
                }
            }
        },
        ctors: {
            ctor: function () {
                this.$initialize();
                System.Windows.HtmlElement.ctor.call(this);

                Bridge.CustomUIMarkup.UI.Builder.LoadComponent(this, Bridge.CustomUIMarkup_DesignerSamples.AppContainer["TestUI"]);
                this.HeightPercent = 100;
            }
        }
    });

    Bridge.define("System.Windows.ContentPresenter", {
        inherits: [System.Windows.HtmlElement]
    });

    Bridge.define("System.Windows.Controls.Primitives.Selector", {
        inherits: [System.Windows.Controls.ItemsControl],
        statics: {
            fields: {
                "SelectedItemProperty": null,
                SelectedValueProperty: null,
                SelectedValuePathProperty: null
            },
            ctors: {
                init: function () {
                    this["SelectedItemProperty"] = System.Windows.DependencyProperty.Register$1("SelectedItem", System.Object, System.Windows.Controls.Primitives.Selector, new System.Windows.PropertyMetadata.ctor(null));
                    this.SelectedValueProperty = System.Windows.DependencyProperty.Register$1("SelectedValue", System.Object, System.Windows.Controls.Primitives.Selector, new System.Windows.PropertyMetadata.ctor(null));
                    this.SelectedValuePathProperty = System.Windows.DependencyProperty.Register$1("SelectedValuePath", System.String, System.Windows.Controls.Primitives.Selector, new System.Windows.PropertyMetadata.ctor(null));
                }
            }
        },
        props: {
            "SelectedItem": {
                get: function () {
                    return this.GetValue$1(System.Windows.Controls.Primitives.Selector["SelectedItemProperty"]);
                },
                set: function (value) {
                    this.SetValue$1(System.Windows.Controls.Primitives.Selector["SelectedItemProperty"], value);
                }
            },
            SelectedValue: {
                get: function () {
                    return this.GetValue$1(System.Windows.Controls.Primitives.Selector.SelectedValueProperty);
                },
                set: function (value) {
                    this.SetValue$1(System.Windows.Controls.Primitives.Selector.SelectedValueProperty, value);
                }
            },
            SelectedValuePath: {
                get: function () {
                    return Bridge.cast(this.GetValue$1(System.Windows.Controls.Primitives.Selector.SelectedValuePathProperty), System.String);
                },
                set: function (value) {
                    this.SetValue$1(System.Windows.Controls.Primitives.Selector.SelectedValuePathProperty, value);
                }
            }
        },
        ctors: {
            ctor: function () {
                this.$initialize();
                System.Windows.Controls.ItemsControl.ctor.call(this);
                this.addItemClicked(Bridge.fn.cacheBind(this, this.OnItemClicked));
            }
        },
        methods: {
            OnItemClicked: function (itemDataContext) {
                if (this.SelectedValuePath == null) {
                    this["SelectedItem"] = itemDataContext;
                    return;
                }

                this["SelectedItem"] = System.ComponentModel.ReflectionHelper.GetPropertyValue(itemDataContext, this.SelectedValuePath);

            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup.Libraries.SemanticUI.Field", {
        inherits: [System.Windows.ContentControl],
        statics: {
            fields: {
                LabelVisibilityProperty: null,
                ErrorMessageVisibilityProperty: null,
                ErrorMessageProperty: null,
                LabelProperty: null
            },
            ctors: {
                init: function () {
                    this.LabelVisibilityProperty = System.Windows.DependencyProperty.Register$1("LabelVisibility", System.Windows.Visibility, Bridge.CustomUIMarkup.Libraries.SemanticUI.Field, new System.Windows.PropertyMetadata.ctor(Bridge.box(System.Windows.Visibility.Collapsed, System.Windows.Visibility, System.Enum.toStringFn(System.Windows.Visibility))));
                    this.ErrorMessageVisibilityProperty = System.Windows.DependencyProperty.Register$1("ErrorMessageVisibility", System.Windows.Visibility, Bridge.CustomUIMarkup.Libraries.SemanticUI.Field, new System.Windows.PropertyMetadata.ctor(Bridge.box(System.Windows.Visibility.Collapsed, System.Windows.Visibility, System.Enum.toStringFn(System.Windows.Visibility))));
                    this.ErrorMessageProperty = System.Windows.DependencyProperty.Register("ErrorMessage", System.String, Bridge.CustomUIMarkup.Libraries.SemanticUI.Field);
                    this.LabelProperty = System.Windows.DependencyProperty.Register("Label", System.String, Bridge.CustomUIMarkup.Libraries.SemanticUI.Field);
                }
            }
        },
        props: {
            DefaultTemplateAsXml: {
                get: function () {
                    return "<div class = 'field' on.click = 'ClearErrorMessage' >   <label Visibility = '{LabelVisibility}'>{Label}</label>   <ContentPresenter />   <div class = 'ui red pointing label transition' Visibility = '{ErrorMessageVisibility}'> {ErrorMessage} </div></div>";
                }
            },
            LabelVisibility: {
                get: function () {
                    return System.Nullable.getValue(Bridge.cast(Bridge.unbox(this.GetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.Field.LabelVisibilityProperty)), System.Byte));
                },
                set: function (value) {
                    this.SetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.Field.LabelVisibilityProperty, Bridge.box(value, System.Windows.Visibility, System.Enum.toStringFn(System.Windows.Visibility)));
                }
            },
            ErrorMessageVisibility: {
                get: function () {
                    return System.Nullable.getValue(Bridge.cast(Bridge.unbox(this.GetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.Field.ErrorMessageVisibilityProperty)), System.Byte));
                },
                set: function (value) {
                    this.SetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.Field.ErrorMessageVisibilityProperty, Bridge.box(value, System.Windows.Visibility, System.Enum.toStringFn(System.Windows.Visibility)));
                }
            },
            ErrorMessage: {
                get: function () {
                    return Bridge.cast(this.GetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.Field.ErrorMessageProperty), System.String);
                },
                set: function (value) {
                    this.SetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.Field.ErrorMessageProperty, value);
                }
            },
            Label: {
                get: function () {
                    return Bridge.cast(this.GetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.Field.LabelProperty), System.String);
                },
                set: function (value) {
                    this.SetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.Field.LabelProperty, value);
                }
            }
        },
        ctors: {
            ctor: function () {
                this.$initialize();
                System.Windows.ContentControl.ctor.call(this);
                System.ComponentModel.Extensions.OnPropertyChanged(this, "ErrorMessage", Bridge.fn.bind(this, function () {
                    if (this.ErrorMessage == null) {
                        this.Class = "field";
                        this.ErrorMessageVisibility = System.Windows.Visibility.Collapsed;
                        return;
                    }

                    this.Class = "field error";
                    this.ErrorMessageVisibility = System.Windows.Visibility.Visible;
                }));

                System.ComponentModel.Extensions.OnPropertyChanged(this, "Label", Bridge.fn.bind(this, function () {
                    if (this.Label == null) {
                        this.LabelVisibility = System.Windows.Visibility.Collapsed;
                        return;
                    }

                    this.LabelVisibility = System.Windows.Visibility.Visible;
                }));
            }
        },
        methods: {
            ClearErrorMessage: function () {
                if (this.ErrorMessage != null) {
                    this.ErrorMessage = null;
                }
            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup.Libraries.SemanticUI.Modal", {
        inherits: [Bridge.CustomUIMarkup.Libraries.SemanticUI.ElementBase,System.Windows.Markup.IAddChild],
        fields: {
            content: null,
            header: null,
            _title: null
        },
        props: {
            Title: {
                get: function () {
                    return this._title;
                },
                set: function (value) {
                    if (!Bridge.referenceEquals(this._title, value)) {
                        this._title = value;
                        this.OnPropertyChanged("Title");
                    }
                }
            }
        },
        alias: ["Add", "System$Windows$Markup$IAddChild$Add"],
        methods: {
            Add: function (element) {
                this.content.append(element.Root);
            },
            InitDOM: function () {
                this._root = System.Windows.DOM.div("ui modal");

                this.header = System.Windows.DOM.div("header").appendTo(this._root);

                this.content = System.Windows.DOM.div("content").appendTo(this._root);

                this._root.modal("show");

                // BindPropertyToInnerHTML(nameof(Title), header);
            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup.Libraries.SemanticUI.TabItem", {
        inherits: [System.Windows.ContentControl],
        statics: {
            fields: {
                HeaderProperty: null,
                "IsActiveProperty": null
            },
            ctors: {
                init: function () {
                    this.HeaderProperty = System.Windows.DependencyProperty.Register("Header", System.String, Bridge.CustomUIMarkup.Libraries.SemanticUI.TabItem);
                    this["IsActiveProperty"] = System.Windows.DependencyProperty.Register$1("IsActive", System.Boolean, Bridge.CustomUIMarkup.Libraries.SemanticUI.TabItem, new System.Windows.PropertyMetadata.$ctor1(Bridge.getDefaultValue(System.Boolean), Bridge.CustomUIMarkup.Libraries.SemanticUI.TabItem.OnIsActiveChanged));
                }
            },
            methods: {
                OnIsActiveChanged: function (d, e) {
                    var tabItem = Bridge.cast(d, Bridge.CustomUIMarkup.Libraries.SemanticUI.TabItem);

                    if (System.Extensions.ToBoolean(e.NewValue)) {
                        tabItem._headerElement.Class = "item active";
                        tabItem._bodyElement.Class = "ui bottom attached tab segment active";
                    } else {
                        tabItem._headerElement.Class = "item";
                        tabItem._bodyElement.Class = "ui bottom attached tab segment";
                    }
                }
            }
        },
        fields: {
            _headerElement: null,
            _bodyElement: null
        },
        props: {
            DefaultTemplateAsXml: {
                get: function () {
                    return "<div>    <a x:Name = '_headerElement' class = 'item' data-tab='{Id}' >{Header}</a>    <div x:Name = '_BodyElement' class = 'ui bottom attached tab segment' data-tab = '{Id}' >        <ContentPresenter />    </div></div>";
                }
            },
            Header: {
                get: function () {
                    return Bridge.cast(this.GetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.TabItem.HeaderProperty), System.String);
                },
                set: function (value) {
                    this.SetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.TabItem.HeaderProperty, value);
                }
            },
            "IsActive": {
                get: function () {
                    return System.Nullable.getValue(Bridge.cast(Bridge.unbox(this.GetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.TabItem["IsActiveProperty"])), System.Boolean));
                },
                set: function (value) {
                    this.SetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.TabItem["IsActiveProperty"], Bridge.box(value, System.Boolean, System.Boolean.toString));
                }
            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup.Libraries.SemanticUI.TextArea", {
        inherits: [Bridge.CustomUIMarkup.Libraries.SemanticUI.InputText],
        statics: {
            fields: {
                RowsProperty: null
            },
            ctors: {
                init: function () {
                    this.RowsProperty = System.Windows.DependencyProperty.Register$1("Rows", System.Nullable$1(System.Int32), Bridge.CustomUIMarkup.Libraries.SemanticUI.TextArea, new System.Windows.PropertyMetadata.$ctor2(Bridge.CustomUIMarkup.Libraries.SemanticUI.TextArea.OnRowsChanged));
                }
            },
            methods: {
                OnRowsChanged: function (d, e) {
                    var me = Bridge.cast(d, Bridge.CustomUIMarkup.Libraries.SemanticUI.TextArea);
                    var value = Bridge.as(e.NewValue, System.Int32, true);
                    if (System.Nullable.hasValue(value)) {
                        me._inputElement._root.attr("rows", System.Nullable.getValue(value));
                    }
                }
            }
        },
        props: {
            DefaultTemplateAsXml: {
                get: function () {
                    return "<div class='ui input'>   <textarea /></div>";
                }
            },
            Rows: {
                get: function () {
                    return Bridge.cast(Bridge.unbox(this.GetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.TextArea.RowsProperty)), System.Int32, true);
                },
                set: function (value) {
                    this.SetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.TextArea.RowsProperty, Bridge.box(value, System.Int32, System.Nullable.toString, System.Nullable.getHashCode));
                }
            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup.Libraries.Swiper.Slider.SwiperItemControl", {
        inherits: [System.Windows.ContentControl],
        props: {
            DefaultTemplateAsXml: {
                get: function () {
                    return "<div class='swiper-slide'>    <ContentPresenter /></div>";
                }
            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup.UI.XmlEditor", {
        inherits: [Bridge.CustomUIMarkup.Libraries.CodeMirror.XmlEditor],
        props: {
            "SchemaInfo": {
                get: function () {
                    var xmlIntellisenseInfos = Bridge.CustomUIMarkup.UI.TypeFinder.Tags;
                    return Bridge.CustomUIMarkup.Libraries.CodeMirror.SchemaInfo.CreateFrom(xmlIntellisenseInfos).ToJson();
                }
            }
        }
    });

    Bridge.define("System.Windows.Controls.UserControl", {
        inherits: [System.Windows.ContentControl],
        props: {
            DefaultTemplateAsXml: {
                get: function () {
                    return "<div HeightPercent = '100'      WidthPercent  = '100' >    <ContentPresenter HeightPercent = '100' WidthPercent  = '100' /></div>";
                }
            }
        }
    });

    Bridge.define("System.Windows.Controls.Primitives.MultiSelector", {
        inherits: [System.Windows.Controls.Primitives.Selector]
    });

    Bridge.define("Bridge.CustomUIMarkup.Libraries.SemanticUI.FieldDecimal", {
        inherits: [Bridge.CustomUIMarkup.Libraries.SemanticUI.Field],
        statics: {
            fields: {
                ValueProperty: null
            },
            ctors: {
                init: function () {
                    this.ValueProperty = System.Windows.DependencyProperty.Register$1("Value", System.Nullable$1(System.Decimal), Bridge.CustomUIMarkup.Libraries.SemanticUI.FieldDecimal, new System.Windows.PropertyMetadata.ctor(null));
                }
            }
        },
        props: {
            DefaultTemplateAsXml: {
                get: function () {
                    return "<div class='field' on.click = 'ClearErrorMessage' >   <label Visibility = '{LabelVisibility}'>{Label}</label>   <ContentPresenter>       <textBox Text = '{Value}' AllowOnlyDecimalInputs = 'True' />   </ContentPresenter>   <div class = 'ui red pointing label transition' Visibility = '{ErrorMessageVisibility}'> {ErrorMessage} </div></div>";
                }
            },
            Value: {
                get: function () {
                    return Bridge.cast(Bridge.unbox(this.GetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.FieldDecimal.ValueProperty)), System.Decimal, true);
                },
                set: function (value) {
                    this.SetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.FieldDecimal.ValueProperty, value);
                }
            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup.Libraries.SemanticUI.FieldInt32", {
        inherits: [Bridge.CustomUIMarkup.Libraries.SemanticUI.Field],
        statics: {
            fields: {
                ValueProperty: null
            },
            ctors: {
                init: function () {
                    this.ValueProperty = System.Windows.DependencyProperty.Register$1("Value", System.Nullable$1(System.Int32), Bridge.CustomUIMarkup.Libraries.SemanticUI.FieldInt32, new System.Windows.PropertyMetadata.ctor(null));
                }
            }
        },
        props: {
            DefaultTemplateAsXml: {
                get: function () {
                    return "<div class='field' on.click = 'ClearErrorMessage' >   <label Visibility = '{LabelVisibility}'>{Label}</label>   <ContentPresenter>       <textBox Text = '{Value}' AllowOnlyNumericInputs = 'True' />   </ContentPresenter>   <div class = 'ui red pointing label transition' Visibility = '{ErrorMessageVisibility}'> {ErrorMessage} </div></div>";
                }
            },
            Value: {
                get: function () {
                    return Bridge.cast(Bridge.unbox(this.GetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.FieldInt32.ValueProperty)), System.Int32, true);
                },
                set: function (value) {
                    this.SetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.FieldInt32.ValueProperty, Bridge.box(value, System.Int32, System.Nullable.toString, System.Nullable.getHashCode));
                }
            }
        }
    });

    Bridge.define("Bridge.CustomUIMarkup.Libraries.SemanticUI.FieldString", {
        inherits: [Bridge.CustomUIMarkup.Libraries.SemanticUI.Field],
        statics: {
            fields: {
                ValueProperty: null
            },
            ctors: {
                init: function () {
                    this.ValueProperty = System.Windows.DependencyProperty.Register$1("Value", System.String, Bridge.CustomUIMarkup.Libraries.SemanticUI.FieldString, new System.Windows.PropertyMetadata.ctor(null));
                }
            }
        },
        props: {
            DefaultTemplateAsXml: {
                get: function () {
                    return "<div class='field' on.click = 'ClearErrorMessage' >   <label Visibility = '{LabelVisibility}'>{Label}</label>   <ContentPresenter>       <textBox Text = '{Value}'/>   </ContentPresenter>   <div class = 'ui red pointing label transition' Visibility = '{ErrorMessageVisibility}'> {ErrorMessage} </div></div>";
                }
            },
            Value: {
                get: function () {
                    return Bridge.cast(this.GetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.FieldString.ValueProperty), System.String);
                },
                set: function (value) {
                    this.SetValue$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.FieldString.ValueProperty, value);
                }
            }
        }
    });

    Bridge.define("System.Windows.Controls.ListBox", {
        inherits: [System.Windows.Controls.Primitives.Selector]
    });

    Bridge.define("Bridge.CustomUIMarkup.Libraries.SemanticUI.DataGrid", {
        inherits: [System.Windows.Controls.Primitives.MultiSelector],
        statics: {
            methods: {
                Wrap: function (me, root) {
                    

setTimeout(function()
{
    var options = 
    {
        destroy:true,
        language:dataTables_language   
    };

    me._wrapper = root.DataTable(options); 

},0) ;
                }
            }
        },
        fields: {
            _selectedRow: null,
            _thead: null,
            _thead_first_tr: null,
            _tbody: null,
            _wrapper: null,
            SelectedRowBackground: null,
            Columns: null,
            _columnNames: null
        },
        props: {
            DefaultTemplateAsXml: {
                get: function () {
                    return "<div  />";
                }
            },
            ColumnNames: {
                get: function () {
                    return this._columnNames;
                },
                set: function (value) {
                    if (!Bridge.referenceEquals(this._columnNames, value)) {
                        this._columnNames = value;
                        this.OnPropertyChanged("ColumnNames");
                    }
                }
            }
        },
        ctors: {
            init: function () {
                this.SelectedRowBackground = "#27ae60";
                this.Columns = new (System.Collections.Generic.List$1(Bridge.CustomUIMarkup.Libraries.SemanticUI.DataGridColumn)).ctor();
            },
            ctor: function () {
                this.$initialize();
                System.Windows.Controls.Primitives.MultiSelector.ctor.call(this);
                this.addBeforeConnectToLogicalParent(Bridge.fn.cacheBind(this, this.OnBeforeConnectToLogicalParent$1));

                System.ComponentModel.Extensions.OnPropertyChanged(this, "ColumnNames", Bridge.fn.cacheBind(this, this.ParseColumnNames));

                this.addAfterConnectToLogicalParent(Bridge.fn.bind(this, function () {
                    System.ComponentModel.Extensions.OnPropertyChanged(this, "ItemsSource", Bridge.fn.cacheBind(this, this.ReRender$1));
                }));


            }
        },
        methods: {
            MarkSelectedRow: function (element) {
                this._selectedRow != null ? this._selectedRow._root.css("background", "") : null;

                element.Root.css("background", this.SelectedRowBackground);

                this._selectedRow = element;
            },
            OnBeforeConnectToLogicalParent$1: function (arg) {
                this.ReRender$1();
            },
            ParseColumnNames: function () {
                var $t, $t1;
                System.Array.clear(this.Columns, Bridge.CustomUIMarkup.Libraries.SemanticUI.DataGridColumn);

                $t = Bridge.getEnumerator(System.Linq.Enumerable.from(System.String.split(this.ColumnNames, [44].map(function(i) {{ return String.fromCharCode(i); }}))).where(function (x) {
                        return !System.String.isNullOrWhiteSpace(x);
                    }));
                try {
                    while ($t.moveNext()) {
                        var value1 = $t.Current;
                        var arr = System.Linq.Enumerable.from(System.String.split(value1, [58].map(function(i) {{ return String.fromCharCode(i); }}))).where(function (x) {
                                return !System.String.isNullOrWhiteSpace(x);
                            }).toArray(System.String);
                        System.Array.add(this.Columns, ($t1 = new Bridge.CustomUIMarkup.Libraries.SemanticUI.DataGridColumn(), $t1.Name = ((arr[System.Array.index(0, arr)] || "") + "").trim(), $t1.Label = ((arr[System.Array.index(1, arr)] || "") + "").trim(), $t1), Bridge.CustomUIMarkup.Libraries.SemanticUI.DataGridColumn);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }},
            ReRender$1: function () {
                var $t, $t1, $t2;


                if (this["ItemsSource"] == null) {
                    Bridge.CustomUIMarkup.Common.Trace.OperationWasCanceled("ReRender", "ItemsSourceis null.");


                    return;
                }

                var list = Bridge.as(this["ItemsSource"], System.Collections.IList);
                if (list == null) {
                    throw new System.ArgumentException("MustbeList:ItemsSource@ItemsSource.Type:" + ((($t = this["ItemsSource"]) != null ? Bridge.Reflection.getTypeFullName(Bridge.getType($t)) : null) || ""));
                }

                this.ClearVisualChilds();
                this.ClearLogicalChilds();

                var table = new System.Windows.HtmlElement("table", "ui celled table");

                this.AddLogicalChild(table);

                table.AddVisualChild((this._thead = new System.Windows.HtmlElement("thead")));

                this._thead.AddVisualChild((this._thead_first_tr = new System.Windows.HtmlElement("tr")));

                $t1 = Bridge.getEnumerator(this.Columns, Bridge.CustomUIMarkup.Libraries.SemanticUI.DataGridColumn);
                try {
                    while ($t1.moveNext()) {
                        var columnInfo = $t1.Current;
                        this._thead_first_tr.AddVisualChild(columnInfo);
                    }
                } finally {
                    if (Bridge.is($t1, System.IDisposable)) {
                        $t1.System$IDisposable$dispose();
                    }
                }
                table.AddVisualChild((this._tbody = new System.Windows.HtmlElement("tbody")));

                var len = System.Array.getCount(list);
                for (var i = 0; i < len; i = (i + 1) | 0) {
                    var itemData = { v : System.Array.getItem(list, i) };

                    var tr = { v : new System.Windows.HtmlElement("tr") };

                    $t2 = Bridge.getEnumerator(this.Columns, Bridge.CustomUIMarkup.Libraries.SemanticUI.DataGridColumn);
                    try {
                        while ($t2.moveNext()) {
                            var columnInfo1 = $t2.Current;
                            var td = new System.Windows.HtmlElement("td");

                            var cellValue = System.ComponentModel.ReflectionHelper.GetPropertyValue(itemData.v, columnInfo1.Name);

                            if (columnInfo1.EditorType === Bridge.CustomUIMarkup.Libraries.SemanticUI.DataGridCellEditorType.Text) {
                                td["InnerHTML"] = cellValue != null ? cellValue.toString() : null;
                            } else {
                                throw new System.NotImplementedException(System.Enum.toString(Bridge.CustomUIMarkup.Libraries.SemanticUI.DataGridCellEditorType, columnInfo1.EditorType));
                            }

                            //var bindingInfo = new BindingInfo
                            //{
                            //    Source = itemData,
                            //    SourcePath = columnInfo.Name,
                            //    BindingMode = BindingMode.OneWay,
                            //    Target = td,
                            //    TargetPath = nameof(td.InnerHTML)
                            //};
                            //bindingInfo.Connect();

                            tr.v.AddLogicalChild(td);
                        }
                    } finally {
                        if (Bridge.is($t2, System.IDisposable)) {
                            $t2.System$IDisposable$dispose();
                        }
                    }
                    this._tbody.AddLogicalChild(tr.v);

                    tr.v.On("click", (function ($me, tr) {
                        return Bridge.fn.bind($me, function () {
                            this.MarkSelectedRow(tr.v);
                        });
                    })(this, tr));

                    tr.v.On("click", (function ($me, itemData) {
                        return Bridge.fn.bind($me, function () {
                            this.RaiseEvent_ItemClicked(itemData.v);
                        });
                    })(this, itemData));


                }


                var me = this;

                Bridge.CustomUIMarkup.Libraries.SemanticUI.DataGrid.Wrap(me, table._root);
            }
        }
    });
});

//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAiZmlsZSI6ICJCcmlkZ2UuQ3VzdG9tVUlNYXJrdXAuanMiLAogICJzb3VyY2VSb290IjogIiIsCiAgInNvdXJjZXMiOiBbIkNvbW1vbi9Bc3luY0FqYXguY3MiLCJDb21tb24vQ29udmVydEhlbHBlci5jcyIsIkNvbW1vbi9FeHRlbnNpb25zLmNzIiwiQ29tbW9uL0ZpbGVVdGlsLmNzIiwiQ29tbW9uL1NjcmlwdExvYWRlci5jcyIsIkNvbW1vbi9UcmFjZS5jcyIsIkNvbW1vbi9YbWxJbnRlbGxpc2Vuc2VJbmZvLmNzIiwiTGlicmFyaWVzL0NvZGVNaXJyb3IvRWxlbWVudHMuY3MiLCJMaWJyYXJpZXMvQ29kZU1pcnJvci9TY2hlbWFJbmZvLmNzIiwiLk5ldCBPdmVycmlkZS9TeXN0ZW0vQ29tcG9uZW50TW9kZWwvQmFnLmNzIiwiTGlicmFyaWVzL1NlbWFudGljVUkvRWxlbWVudHMuY3MiLCJMaWJyYXJpZXMvU2VtYW50aWNVSS9OdW1iZXJUb1dvcmQuY3MiLCJMaWJyYXJpZXMvc3BsaXRfanMvRWxlbWVudHMuY3MiLCJMaWJyYXJpZXMvU3dpcGVyL0VsZW1lbnRzLmNzIiwiTGlicmFyaWVzL3ZpZXdlcmpzL0VsZW1lbnRzLmNzIiwiUmVzb3VyY2VzLmNzIiwiVG9rZW5pemVycy9Ub2tlbml6ZXIuY3MiLCJVSS9CdWlsZGVyLmNzIiwiVUkvRXh0ZW5zaW9ucy5jcyIsIlVJL1R5cGVGaW5kZXIuY3MiLCJCcmlkZ2UuQ3VzdG9tVUlNYXJrdXBfRGVzaWduZXJTYW1wbGVzL0FwcC5jcyIsIkJyaWRnZS5IdG1sNS9FeHRlbnNpb25zLmNzIiwiQnJpZGdlLmpRdWVyeTIvRXh0ZW5zaW9ucy5jcyIsIi5OZXQgT3ZlcnJpZGUvU3lzdGVtL0V4Y2VwdGlvbnMuY3MiLCIuTmV0IE92ZXJyaWRlL1N5c3RlbS9DYXN0LmNzIiwiLk5ldCBPdmVycmlkZS9TeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy9FeHRlbnNpb25zLmNzIiwiLk5ldCBPdmVycmlkZS9TeXN0ZW0uQ29sbGVjdGlvbnMuT2JqZWN0TW9kZWwvQ29sbGVjdGlvbi5jcyIsIi5OZXQgT3ZlcnJpZGUvU3lzdGVtLkNvbGxlY3Rpb25zLk9iamVjdE1vZGVsL09ic2VydmFibGVDb2xsZWN0aW9uLmNzIiwiLk5ldCBPdmVycmlkZS9TeXN0ZW0uQ29sbGVjdGlvbnMuU3BlY2lhbGl6ZWQvb3ZlcmlkZXMuY3MiLCIuTmV0IE92ZXJyaWRlL1N5c3RlbS9Db21wb25lbnRNb2RlbC9CYWdDaGFuZ2VkRXZlbnRBcmdzLmNzIiwiLk5ldCBPdmVycmlkZS9TeXN0ZW0vQ29tcG9uZW50TW9kZWwvRXh0ZW5zaW9ucy5jcyIsIi5OZXQgT3ZlcnJpZGUvU3lzdGVtL0NvbXBvbmVudE1vZGVsL1JlZmxlY3Rpb25IZWxwZXIuY3MiLCIuTmV0IE92ZXJyaWRlL1N5c3RlbS5Db21wb25lbnRNb2RlbC9UeXBlQ29udmVydGVyQXR0cmlidXRlLmNzIiwiLk5ldCBPdmVycmlkZS9TeXN0ZW0uY3MiLCIuTmV0IE92ZXJyaWRlL1N5c3RlbS9FeHRlbnNpb25zLmNzIiwiLk5ldCBPdmVycmlkZS9TeXN0ZW0uUmVmbGVjdGlvbi9FeHRlbnNpb25zLmNzIiwiLk5ldCBPdmVycmlkZS9TUi5jcyIsIi5OZXQgT3ZlcnJpZGUvU3lzdGVtLlRleHQvRW5jb2RpbmdIZWxwZXIuY3MiLCIuTmV0IE92ZXJyaWRlL1N5c3RlbS9UaHJvd0hlbHBlci5jcyIsIi5OZXQgT3ZlcnJpZGUvU3lzdGVtLldpbmRvd3MuRGF0YS9CaW5kaW5nSW5mby5jcyIsIi5OZXQgT3ZlcnJpZGUvU3lzdGVtLldpbmRvd3MvRGVwZW5kZW5jeVByb3BlcnR5LmNzIiwiLk5ldCBPdmVycmlkZS9TeXN0ZW0uV2luZG93cy9ET00uY3MiLCIuTmV0IE92ZXJyaWRlL1N5c3RlbS5XaW5kb3dzL0ZyYW1ld29ya0VsZW1lbnQuQ2hpbGRNYW5hZ2VtZW50LmNzIiwiLk5ldCBPdmVycmlkZS9TeXN0ZW0uV2luZG93cy9Qcm9wZXJ0eU1ldGFkYXRhLmNzIiwiLk5ldCBPdmVycmlkZS9TeXN0ZW0uV2luZG93cy9Qcm9wZXJ0eVBhdGguY3MiLCIuTmV0IE92ZXJyaWRlL1N5c3RlbS5XaW5kb3dzL1RlbXBsYXRlLmNzIiwiLk5ldCBPdmVycmlkZS9TeXN0ZW0uWG1sL1N5c3RlbS5YbWwuY3MiLCIuTmV0IE92ZXJyaWRlL1N5c3RlbS5YbWwvWG1sSGVscGVyLmNzIiwiLk5ldCBPdmVycmlkZS9TeXN0ZW0uV2luZG93cy9EZXBlbmRlbmN5T2JqZWN0LmNzIiwiQnJpZGdlLkN1c3RvbVVJTWFya3VwX0Rlc2lnbmVyU2FtcGxlcy9FeGFtcGxlRGF0YUNvbnRleHQuY3MiLCIuTmV0IE92ZXJyaWRlL1N5c3RlbS5XaW5kb3dzLkRhdGEvSVZhbHVlQ29udmVydGVyLmNzIiwiLk5ldCBPdmVycmlkZS9TeXN0ZW0uV2luZG93cy5EYXRhL0hUTUxCaW5kaW5nSW5mby5jcyIsIi5OZXQgT3ZlcnJpZGUvU3lzdGVtLldpbmRvd3MuQ29udHJvbHMvQ29udHJvbC5jcyIsIi5OZXQgT3ZlcnJpZGUvU3lzdGVtLldpbmRvd3MvRnJhbWV3b3JrRWxlbWVudC5jcyIsIkJyaWRnZS5DdXN0b21VSU1hcmt1cF9EZXNpZ25lclNhbXBsZXMvRXhhbXBsZUluZm8uY3MiLCJMaWJyYXJpZXMvQ29kZU1pcnJvci9VSUVkaXRvci5jcyIsIkxpYnJhcmllcy9Db2RlTWlycm9yL1htbEVkaXRvci5jcyIsIkxpYnJhcmllcy9TZW1hbnRpY1VJL0NvbWJvLmNzIiwiTGlicmFyaWVzL1NlbWFudGljVUkvY29tbWVudC5jcyIsIkxpYnJhcmllcy9TZW1hbnRpY1VJL0l0ZW1zQ29udHJvbC5jcyIsIkxpYnJhcmllcy9TZW1hbnRpY1VJL0RhdGFHcmlkLmNzIiwiTGlicmFyaWVzL1NlbWFudGljVUkvRWxlbWVudEJhc2UuY3MiLCJMaWJyYXJpZXMvU2VtYW50aWNVSS9JbnB1dFRleHQuY3MiLCJMaWJyYXJpZXMvU2VtYW50aWNVSS9UZXh0QmxvY2suY3MiLCJMaWJyYXJpZXMvU2VtYW50aWNVSS91aV9yYXRpbmcuY3MiLCJMaWJyYXJpZXMvU2VtYW50aWNVSS91aV90b3BfYXR0YWNoZWRfdGFidWxhcl9tZW51LmNzIiwiTGlicmFyaWVzL3NwbGl0X2pzL1NwbGl0UGFuZWwuY3MiLCJMaWJyYXJpZXMvU3dpcGVyL1NsaWRlci5jcyIsIkxpYnJhcmllcy92aWV3ZXJqcy9WaWV3ZXIuY3MiLCJMaWJyYXJpZXMvU2VtYW50aWNVSS9GaWVsZC5jcyIsIkxpYnJhcmllcy9TZW1hbnRpY1VJL01vZGFsLmNzIiwiTGlicmFyaWVzL1NlbWFudGljVUkvVGFiSXRlbS5jcyIsIkxpYnJhcmllcy9TZW1hbnRpY1VJL1RleHRBcmVhLmNzIiwiVUkvWG1sRWRpdG9yLmNzIiwiTGlicmFyaWVzL1NlbWFudGljVUkvRmllbGRTdHJpbmcuY3MiXSwKICAibmFtZXMiOiBbIiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7OztnQ0FtQjhDQSxLQUFZQSxNQUFhQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7NENBRTNEQSxVQUFjQSxVQUFJQSxtREFFUkEsZUFDQ0E7NENBRVhBLGdCQUFvQkEsQUFBMkJBO3VEQUFXQTs7OzRDQUUxREEsZUFBbUJBLEFBQXFCQTtnREFBUUEsOEJBQVNBLFFBQUtBLEFBQXFDQSxRQUFlQSxhQUFZQTs7OzRDQUU5SEEsT0FBV0Esd0NBQXlCQSxTQUFTQSxlQUFlQTs7NENBRTVEQSxTQUFNQTs7Ozs7Ozs0Q0FFTkEsZUFBT0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7NEJBR01BLGtCQUEyQkEsY0FBdUJBOztnQkFFL0RBLE9BQVlBLHFCQUdGQSxnQkFDQ0EsaUNBRUdBLCtCQUFDQSxHQUFHQSxHQUFHQTtvQkFFYkEsb0JBQWVBO29CQUNmQSxzQkFBc0JBLE1BQU1BOzJCQUd4QkEsK0JBQUNBLE9BQU9BLFFBQVFBO29CQUVwQkEsd0RBQTJCQSxZQUFXQTs7b0JBRXRDQSx1Q0FBVUE7O29CQUVWQSxjQUFTQSxjQUFhQSwrQkFBdUJBOztvQkFFN0NBLHVDQUFVQTs7b0JBRVZBLGtCQUFrQkEsTUFBTUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozt3QkNsRE9BLE9BQU9BOzs7OztzQ0FJbEJBLE9BQW1CQTtvQkFFL0NBLE9BQU9BLHdEQUFXQSxPQUFPQSxZQUFZQTs7d0NBR1RBLE9BQW1CQSxZQUFpQkE7b0JBRWhFQSxJQUFJQSxjQUFjQTt3QkFFZEEsTUFBTUEsSUFBSUE7OztvQkFHZEEsSUFBSUEsU0FBU0E7d0JBRVRBLElBQUlBLHlDQUFzQkEsa0NBQTJCQSxlQUFlQTs0QkFFaEVBLE9BQU9BOzs7d0JBR1hBLE1BQU1BLElBQUlBLGlDQUEwQkEseUZBQWtEQTs7O29CQUcxRkEsSUFBSUEsOENBQW1CQSxlQUFjQSxtQ0FBNEJBO3dCQUU3REEsT0FBT0E7OztvQkFHWEEscUJBQXFCQSxrQ0FBMkJBO29CQUNoREEsSUFBSUEsa0JBQWtCQTt3QkFFbEJBLGFBQWFBOzs7b0JBR2pCQSxJQUFJQSxtQ0FBY0EsQUFBT0E7d0JBQ3JCQSxPQUFPQSxvQ0FBa0JBLE9BQU9BOztvQkFDcENBLElBQUlBLG1DQUFjQSxBQUFPQTt3QkFDckJBLE9BQU9BLGlDQUFlQSxPQUFPQTs7b0JBQ2pDQSxJQUFJQSxtQ0FBY0EsQUFBT0E7d0JBQ3JCQSxPQUFPQSxrQ0FBZ0JBLE9BQU9BOztvQkFDbENBLElBQUlBLG1DQUFjQSxBQUFPQTt3QkFDckJBLE9BQU9BLGlDQUFlQSxPQUFPQTs7b0JBQ2pDQSxJQUFJQSxtQ0FBY0EsQUFBT0E7d0JBQ3JCQSxPQUFPQSxrQ0FBZ0JBLE9BQU9BOztvQkFDbENBLElBQUlBLG1DQUFjQSxBQUFPQTt3QkFDckJBLE9BQU9BLG1DQUFpQkEsT0FBT0E7O29CQUNuQ0EsSUFBSUEsbUNBQWNBLEFBQU9BO3dCQUNyQkEsT0FBT0Esa0NBQWdCQSxPQUFPQTs7b0JBQ2xDQSxJQUFJQSxtQ0FBY0EsQUFBT0E7d0JBQ3JCQSxPQUFPQSxtQ0FBaUJBLE9BQU9BOztvQkFDbkNBLElBQUlBLG1DQUFjQSxBQUFPQTt3QkFDckJBLE9BQU9BLHVCQUFnQkEsT0FBT0E7O29CQUNsQ0EsSUFBSUEsbUNBQWNBLEFBQU9BO3dCQUNyQkEsT0FBT0Esd0JBQWlCQSxPQUFPQTs7b0JBQ25DQSxJQUFJQSxtQ0FBY0EsQUFBT0E7d0JBQ3JCQSxPQUFPQSxtQ0FBaUJBLE9BQU9BOztvQkFDbkNBLElBQUlBLG1DQUFjQSxBQUFPQTt3QkFDckJBLE9BQU9BLG1DQUFpQkEsT0FBT0E7O29CQUNuQ0EsSUFBSUEsbUNBQWNBLEFBQU9BO3dCQUNyQkEsT0FBT0EseUJBQWtCQSxPQUFPQTs7b0JBQ3BDQSxJQUFJQSxtQ0FBY0EsQUFBT0E7d0JBQ3JCQSxPQUFPQSxxQ0FBbUJBLE9BQU9BOztvQkFDckNBLElBQUlBLG1DQUFjQSxBQUFPQTt3QkFDckJBLE9BQU9BLHdCQUFpQkEsT0FBT0E7O29CQUNuQ0EsSUFBSUEsbUNBQWNBLEFBQU9BO3dCQUNyQkEsT0FBT0E7OztvQkFFWEEsTUFBTUEsSUFBSUEsaUNBQTBCQSxxREFBWUEsa0VBQStDQTs7OEJBR3RFQSxhQUFhQTtvQkFFdENBLE9BQU9BLFlBQWNBLDBFQUFpQkEsQUFBT0E7Ozs7Ozs7OztpREMxRVBBLFNBQXNCQSxhQUFxQkE7OztvQkFJakZBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkEyQkFBOzsrREFJbURBO29CQUVuREEsT0FBT0E7OzhDQUcyQkE7b0JBRWxDQSxPQUFPQSxpQ0FBMEJBOzs0Q0FHQ0E7b0JBRWxDQSxTQUFPQSxPQUFLQSxpQkFBZUEsQUFBUUE7O29CQUVuQ0EsT0FBT0E7O3FDQUdvQkE7b0JBRTNCQSxlQUFlQTtvQkFDZkEsY0FBY0E7OztvQkFHZEE7b0JBQ0FBOztvQkFFQUEsa0JBQWtCQSxBQUF3QkE7d0JBRXRDQSwyQkFBMkJBO3dCQUMzQkEsa0JBQWtCQTs7Ozs7OztvQkFPdEJBLE9BQU9BOzt5Q0FHd0JBLE9BQW1CQTtvQkFFbERBLGVBQWVBLFNBQU9BLE9BQUtBLG1CQUFpQkEsQUFBUUE7b0JBQ3BEQSxJQUFJQSxZQUFZQSxRQUFRQTt3QkFFcEJBLHNCQUFzQkE7d0JBQ3RCQSxPQUFPQTs7O29CQUdYQSwwQkFBMEJBOztvQkFFMUJBLE9BQU9BOzt3Q0FHdUJBLE9BQW1CQTtvQkFFakRBLGVBQWVBLFNBQU9BLE9BQUtBLG1CQUFpQkEsQUFBUUE7b0JBQ3BEQSxJQUFJQSxZQUFZQSxRQUFRQTt3QkFFcEJBLHNCQUFzQkE7d0JBQ3RCQSxPQUFPQTs7O29CQUdYQSx5QkFBeUJBOztvQkFFekJBLE9BQU9BOzttQ0FHa0JBLE9BQW1CQTtvQkFFNUNBLFNBQU9BLE9BQUtBLHNCQUFzQkEsQUFBMkRBLFVBQUNBLEdBQUVBO3dCQUFNQSxPQUFPQSxFQUFXQTt5QkFBTUEsQUFBUUE7O29CQUV0SUEsT0FBT0E7O29DQUVtQkEsT0FBbUJBO29CQUU3Q0Esb0JBQW9CQTs7b0JBRXBCQSxPQUFPQTs7Ozs7Ozs7O3FDQ3BIa0JBLEtBQVlBO29CQUVyQ0EsT0FBWUEscUJBR0ZBLGNBQ0lBLFVBQUNBLEdBQUdBLEdBQUdBO3dCQUFXQSxRQUFRQTs7Ozs7Ozs7Ozt1Q0N5QmJBO29CQUUzQkEsaUJBQTBCQSxtQ0FBaUNBOzt3Q0FFL0JBOztvQkFFNUJBLDBCQUFvQkE7Ozs7NEJBRWhCQSxzREFBWUE7Ozs7Ozs7Ozs7Ozs7Ozs7Z0JBM0JoQkEsSUFBSUEsZ0JBQVdBO29CQUVYQTs7O2dCQUdKQSxJQUFJQSxjQUFTQTtvQkFFVEE7b0JBQ0FBOzs7Z0JBR0pBLFlBQWlCQSxtQ0FBUUEsNEJBQVFBLEFBQXNFQSwrQkFBQ0EsR0FBR0EsR0FBR0E7b0JBRTFHQTtvQkFDQUE7Ozs7Ozs7Ozs7Ozs7aURDekJnRUEsS0FBSUE7Ozs7aUNBSXJEQSxRQUFlQTtvQkFFbENBLElBQUlBLFVBQVVBO3dCQUVWQSxpQkFBaUJBLDBGQUE0RUEsMERBQXNCQTt3QkFDbkhBLElBQUlBOzRCQUVBQTs7OztvQkFJUkEsWUFBMkJBOzsrQkFHUkE7b0JBRW5CQSxZQUEyQkE7O2lDQUdSQSxTQUFnQkE7b0JBRW5DQSxZQUEyQkE7b0JBQzNCQSxZQUEyQkEsV0FBU0EsUUFBTUEsaUJBQWVBLE9BQUtBLHVCQUFxQkEsQUFBZUE7O2dEQUc5REEsZUFBc0JBO29CQUUxREEsWUFBMkJBLDhFQUFxRUE7Ozs7Ozs7Ozs7Ozs7NEJDaEN6RUEsU0FBZ0JBOztnQkFFdkNBLGdDQUFhQSxXQUFXQTtnQkFDeEJBLGdDQUFhQSxRQUFRQTs7O2dCQUdyQkEsZUFBVUE7Z0JBQ1ZBLFlBQU9BOzs7Ozs7Ozs7Ozs7Ozs7O29CQ05QQSxzREFBNkJBLEFBQThEQTs7b0JBRTNGQSx1REFBOEJBLEFBQThEQTs7Ozs7Ozs7OzJEQ3FCcERBO29CQUV4Q0Esc0JBQXlCQTs7c0NBRU9BOztvQkFFaENBLGlCQUFpQkEsVUFBSUEsbUVBRVZBLEtBQUlBOztvQkFHZkEsMEJBQXFCQTs7Ozs0QkFFakJBLFdBQVdBOzRCQUNYQSxXQUFXQTs7NEJBRVhBLHNGQUFnQ0E7OzRCQUVoQ0EsVUFBVUEsV0FBSUEsaUVBRUhBLHVCQUNNQSxLQUFJQTs0QkFFckJBLDJCQUEyQkEsbURBQW9DQTs0QkFDL0RBLE1BQW1CQTs7OztvQ0FFZkEsb0JBQW9CQSxXQUFJQSx1RUFBc0JBO29DQUM5Q0EsSUFBSUEsd0NBQW1CQSxBQUFPQTt3Q0FFMUJBLHVCQUF1QkE7OztvQ0FHM0JBLElBQUlBO3dDQUVBQSx1QkFBdUJBLHFCQUFjQTs7O29DQUd6Q0EsaUNBQW1CQTs7Ozs7OzZCQUV2QkEsSUFBSUEscUJBQXFCQTtnQ0FFckJBLG1CQUFtQkE7OzRCQUV2QkEsa0NBQW9CQTs7Ozs7OztvQkFHeEJBLE9BQU9BOzs7Ozs7Ozs7O2dCQUtQQSxlQUFlQTs7Z0JBRWZBLEtBQW9CQTs7Ozt3QkFFaEJBLGlCQUFpQkE7O3dCQUVqQkEsTUFBOEJBOzs7O2dDQUUxQkEsV0FBV0Esc0JBQXNCQTs7Ozs7Ozt3QkFHckNBLGFBQWFBO3dCQUNiQSxlQUFrQkE7d0JBQ2xCQSxrQkFBcUJBOzt3QkFFckJBLFNBQVNBLFlBQVlBOzs7Ozs7O2dCQUd6QkEsT0FBT0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O2dDQ3RGb0NBLEtBQUlBOzs7Ozs7Ozs7Ozs7OzsrQkFZNUJBO2dCQUViQSxPQUFPQSxjQUFTQTs7Ozs7Ozs7Ozs7OzsrQkFGSEE7Z0JBR2JBLGNBQVNBLGNBQWNBOzs7Ozs7Ozs7Ozs7cUNBWVRBO2dCQUVwQkEsT0FBT0EsMEJBQXFCQTs7Ozs7Ozs7Ozs7O21DQVVSQTtnQkFFcEJBLE9BQU9BLG1CQUFZQTs7Ozs7Ozs7Ozs7O2dDQVFBQTtnQkFFbkJBLGtCQUFlQTtnQkFDZkEsMEJBQXFCQSxjQUFrQkE7Z0JBQ3ZDQSxPQUFPQTs7Ozs7Ozs7Ozs7OztnQ0FRVUEsY0FBcUJBO2dCQUV0Q0EsZUFBZUEsY0FBU0E7O2dCQUV4QkEsSUFBSUEsQ0FBQ0EsdUJBQWdCQSxVQUFVQTtvQkFFM0JBLElBQUlBLHdCQUFnQkE7d0JBRWhCQTs7OztnQkFJUkEsSUFBSUEsdUJBQWdCQSxVQUFTQSxTQUFVQSx1QkFBZ0JBLE9BQU1BO29CQUV6REE7OztnQkFHSkEsa0JBQVNBLGNBQWdCQTs7Z0JBRXpCQSx5QkFBa0JBLGNBQWNBLE9BQU9BOzs7Ozs7Ozs7Ozs7OzsyQ0FpQnBCQSxNQUFhQSxVQUFpQkE7Z0JBRWpEQSwyQ0FBaUJBLFFBQUtBLEFBQXFDQSxxQkFBdUJBLE1BQU1BLElBQUlBLGlEQUFvQkEsTUFBTUEsVUFBVUEsYUFBWUE7Ozs7Ozs7Ozs7Ozt5Q0FPMUdBO2dCQUVsQ0EsMkNBQWlCQSxRQUFLQSxBQUFxQ0EscUJBQXVCQSxNQUFNQSxJQUFJQSwrQ0FBb0JBLFNBQVFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O3dDQzRCdkZBOzs7O3lDQTlJSkEsS0FBbUJBOzs7b0JBRWhEQSxPQUFPQSxJQUFJQSwyQkFBWUEsS0FBSUE7Ozs7O29CQU0zQkEsaURBQXdCQSxBQUErREE7K0JBQU1BOzs7b0JBRTdGQSxLQUFLQSxXQUFXQSxTQUFTQTt3QkFFckJBLHNCQUFnQkE7O3dCQUVoQkEsMENBQWlCQSxpREFBNkJBLEFBQStEQTs7dUNBQU1BLHlFQUFxQkE7Ozs7Ozs7b0JBSzVJQSxvREFBMkJBLEFBQStEQTsrQkFBTUE7OztvQkFFaEdBLEtBQUtBLFlBQVdBLFVBQVNBO3dCQUVyQkEsdUJBQWdCQTs7d0JBRWhCQSwwQ0FBaUJBLGtEQUE2QkEsQUFBK0RBOzt1Q0FBTUEseUVBQXFCQTs7Ozs7Ozs7b0JBTTVJQSx1REFBOEJBLEFBQThEQTs7b0JBRTVGQSxtREFBMkJBLEFBQThEQTs7b0JBRXpGQSx1REFBOEJBLEFBQThEQTtvQkFDNUZBLHFEQUE0QkEsQUFBOERBO29CQUMxRkEsc0RBQTZCQSxBQUE4REE7b0JBQzNGQSx5REFBZ0NBLEFBQThEQTtvQkFDOUZBLHdEQUErQkEsQUFBOERBO29CQUM3RkEsMERBQWlDQSxBQUE4REE7b0JBQy9GQSw4REFBcUNBLEFBQStEQTsrQkFBTUEsSUFBSUE7O29CQUM5R0EsdURBQThCQSxBQUE4REE7b0JBQzVGQSx1REFBOEJBLEFBQThEQTs7b0JBRTVGQSxxREFBNEJBLEFBQThEQTtvQkFDMUZBLHlEQUFnQ0EsQUFBK0RBOytCQUFNQSxJQUFJQTs7b0JBQ3pHQSx5REFBZ0NBLEFBQStEQTsrQkFBTUEsSUFBSUE7Ozs7b0JBR3pHQSxxREFBNEJBLEFBQThEQTs7b0JBRTFGQSwwRUFBaURBLEFBQThEQTtvQkFDL0dBLGlEQUF3QkEsQUFBOERBO29CQUN0RkEscURBQTRCQSxBQUE4REE7OztvQkFHMUZBLG1EQUEwQkEsQUFBOERBO29CQUN4RkEsc0RBQTZCQSxBQUE4REE7b0JBQzNGQSxtRUFBMENBLEFBQThEQTs7b0JBRXhHQSx3REFBK0JBLEFBQThEQTs7OztvQkFJN0ZBLGlCQUFpQkE7O29CQWtDakJBLDBCQUEwQkE7Ozs7NEJBRXRCQSwwQ0FBaUJBLGtEQUE2QkEsQUFBK0RBOzsyQ0FBTUEseUVBQXFCQTs7OzRCQUN4SUEsMENBQWlCQSxrREFBNkJBLEFBQStEQTs7MkNBQU1BLHlFQUFxQkE7Ozs0QkFDeElBLDBDQUFpQkEsa0RBQTZCQSxBQUErREE7OzJDQUFNQSx5RUFBcUJBOzs7Ozs7Ozs7b0JBRzVJQSxzREFBNkJBLEFBQStEQTsrQkFBTUE7O29CQUNsR0Esc0RBQTZCQSxBQUErREE7K0JBQU1BOzs7O29CQUdsR0Esb0RBQTJCQSxBQUErREE7K0JBQU1BOztvQkFDaEdBLHlEQUFnQ0EsQUFBK0RBOytCQUFNQTs7b0JBQ3JHQSx5REFBZ0NBLEFBQStEQTsrQkFBTUE7O29CQUNyR0EseURBQWdDQSxBQUErREE7K0JBQU1BOzs7O29CQUdyR0EseURBQWdDQSxBQUErREE7K0JBQU1BOzs7b0JBRXJHQSwyQkFBeUJBOzs7OzRCQUVyQkEsMENBQWlCQSxXQUFTQSxtQkFBVUEsQUFBK0RBOzsyQ0FBTUEsdUVBQW1CQTs7Ozs7Ozs7O29CQUdoSUEsNkRBQW9DQSxBQUErREE7K0JBQU1BOztvQkFDekdBLG1EQUEwQkEsQUFBK0RBOytCQUFNQTs7b0JBQy9GQSxnREFBdUJBLEFBQStEQTsrQkFBTUE7O29CQUM1RkEsZ0RBQXVCQSxBQUErREE7K0JBQU1BOztvQkFDNUZBLG1EQUEwQkEsQUFBK0RBOytCQUFNQTs7b0JBQy9GQSxnREFBdUJBLEFBQStEQTsrQkFBTUE7Ozs7b0JBRzVGQSwwREFBaUNBLEFBQThEQTtvQkFDL0ZBLHNEQUE2QkEsQUFBOERBO29CQUMzRkEsNERBQW1DQSxBQUE4REE7b0JBQ2pHQSxxREFBNEJBLEFBQThEQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O2tDQ3RJbEVBO29CQUV4QkEsT0FBT0Esb0ZBQVNBLE9BQVRBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkNGUEEsd0RBQStCQSxBQUE4REE7Ozs7Ozs7Ozs7b0JDQTdGQSwyREFBa0NBLEFBQThEQTs7Ozs7Ozs7OztvQkNBaEdBLHlEQUFnQ0EsQUFBOERBOzs7Ozs7Ozs7NkNDRTNEQTtvQkFFbkNBLE9BQU9BOzs7Ozs7Ozs7Ozt3QkMwR0hBLE9BQU9BLEFBQTBEQSxVQUFDQTtnQ0FBT0EsUUFBUUEsSUFBSUEsaURBQWdCQTtnQ0FBa0NBLFFBQVFBLElBQUlBLGlEQUFnQkE7Z0NBQW1DQSxRQUFRQSxJQUFJQSxpREFBZ0JBO2dDQUFzQ0EsUUFBUUEsSUFBSUEsaURBQWdCQTtnQ0FBdUNBLFFBQVFBLElBQUlBLGlEQUFnQkE7Z0NBQTJCQSxRQUFRQSxJQUFJQSxpREFBZ0JBO2dDQUE0QkEsUUFBUUEsSUFBSUEsaURBQWdCQTtnQ0FBK0JBLFFBQVFBLElBQUlBLGlEQUFnQkE7Z0NBQXNEQSxRQUFRQSxJQUFJQSxpREFBZ0JBO2dDQUFtQ0EsUUFBUUEsSUFBSUEsaURBQWdCQTtnQ0FBMEJBLFFBQVFBLElBQUlBLGlEQUFnQkE7Z0NBQXdCQSxPQUFPQTs4QkFBbHRCQSxLQUFJQTs7Ozs7Ozs7Ozs7O3dCQWF6Q0EsT0FBT0EsQUFBMERBLFVBQUNBO2dDQUFPQSxRQUFRQSxJQUFJQSxpREFBZ0JBO2dDQUErQkEsUUFBUUEsSUFBSUEsaURBQWdCQTtnQ0FBc0NBLFFBQVFBLElBQUlBLGlEQUFnQkE7Z0NBQXVDQSxRQUFRQSxJQUFJQSxpREFBZ0JBO2dDQUFzREEsUUFBUUEsSUFBSUEsaURBQWdCQTtnQ0FBMEJBLFFBQVFBLElBQUlBLGlEQUFnQkE7Z0NBQXdCQSxPQUFPQTs4QkFBdmFBLEtBQUlBOzs7Ozs7Ozs7Ozs7OzRCQW5EcENBOztnQkFFVEEsaUJBQVlBO2dCQUNaQSxhQUFRQTs7OEJBR0NBLFdBQXFCQTs7Z0JBRTlCQSxpQkFBWUE7Z0JBQ1pBLGFBQVFBOzs7OztnQkFZUkEsT0FBT0EsSUFBSUEsOENBQU1BLGdCQUFXQTs7O2dCQUs1QkEsT0FBT0EsdUVBQU1BLHlCQUFrQkE7Ozs7Ozs7Ozs7Ozs0QkF0RVpBLFdBQXFCQSxjQUFxQkE7O2dCQUU3REEsY0FBU0EsSUFBSUEsMENBQU1BLGNBQWNBO2dCQUNqQ0Esa0JBQWFBO2dCQUNiQSxtQkFBY0E7Ozs7bUNBS3lCQTs7Ozs7Ozs7Ozs7Ozs7Ozs7d0NBRXZDQSxVQUFjQSxvQkFBZUE7NENBQzdCQSxNQUFVQTs0Q0FDVkEsQUFBS0E7Ozs7OzZDQUFXQSxJQUFJQTs7Ozs7Ozs7d0NBRWhCQSxRQUFZQSxZQUFRQTs7NENBRXBCQSxzQkFBYUEsVUFBSUEsa0VBRUFBLG1DQUNGQSxxQkFBY0Esd0NBQ2JBLDRCQUNKQSxrQ0FDS0E7Ozs7Ozs7Ozt3Q0FWSUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Z0NBK0ZRQTs7Z0JBRWpDQSx1QkFBdUJBOztnQkFFdkJBLElBQUlBLG9CQUFvQkE7b0JBRXBCQSxNQUFNQSxJQUFJQTs7O2dCQUdkQSxtQkFBbUJBLEtBQUlBOztnQkFFdkJBLEtBQWdDQTs7Ozt3QkFFNUJBLHNCQUFzQkEsNEJBQW1GQSw0QkFBNEJBLGNBQWpGQTs7Ozs7OztnQkFHeERBLFlBQVlBLEtBQUlBOztnQkFFaEJBLHFCQUFxQkEsNEJBQXdGQSxzQkFBYUEsQUFBZ0ZBOytCQUFLQTsrQkFDaEtBLEFBQW1IQTsyQkFBS0E7OztnQkFHdktBLGdCQUF1QkE7O2dCQUV2QkEsVUFBVUE7Z0JBQ1ZBLEtBQUtBLFdBQVdBLElBQUlBLEtBQUtBO29CQUVyQkEsZ0JBQWdCQSx1QkFBZUEsV0FBZ0JBLEFBQWdGQTsrQkFBS0E7O29CQUNwSUEsSUFBSUEsYUFBYUEsUUFBUUEsMEJBQXVCQTt3QkFFNUNBOzs7b0JBR0pBLFVBQVVBLElBQUlBLDhDQUFNQSxxQkFBcUJBOztvQkFFekNBLFlBQVlBOzs7Z0JBR2hCQSxPQUFPQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs0Q0NyS21FQSxBQUErRUEsVUFBQ0E7NEJBQU9BLGVBQWNBO3VDQUFNQSxJQUFJQTs7NEJBQW9CQSxPQUFPQTswQkFBNUdBLEtBQUlBOzREQUV0REEsVUFBSUEsb0VBRXZDQTs7OztrQ0E0QkFBO29CQUVuQkEsY0FBY0E7O29CQUVkQSxPQUFPQSxrREFBaUJBOztvQ0FHQUEsS0FBWUE7b0JBRXBDQSxzREFBaUJBLG1CQUFpQkE7O3lDQUtSQSxHQUFHQTtvQkFFN0JBLFdBQVNBLE9BQUtBLEFBQXFDQSwwQkFBeUJBOztvQkFFNUVBLE9BQU9BOztnREFHK0JBLGFBQXNCQTs7b0JBRTVEQSxjQUFjQSxVQUFJQSxtREFFRkEsbUNBQ0VBLHFCQUNMQTs7b0JBSWJBLGlCQUFpQkEsa0JBQWtCQSxtQkFBbUJBOztvQkFFdERBLG1DQUFtQ0E7b0JBQ25DQSxJQUFJQSxnQ0FBZ0NBO3dCQUVoQ0EsTUFBTUEsSUFBSUE7OztvQkFHZEEsZ0JBQWdCQTtvQkFDaEJBLHVCQUF1QkE7O3lDQUdNQSxTQUEwQkE7b0JBRXZEQSxpREFBY0EsU0FBU0EsaUNBQXNCQTs7MkNBR2RBLFNBQTBCQSxNQUFjQSxjQUEyQkEsc0JBQTJEQTs7Ozs7b0JBRTdKQSxjQUFjQSxVQUFJQSxtREFFRkEsdUJBQ0VBLHFCQUNMQSw4QkFDTUEsNkJBQ0hBOztvQkFHaEJBLElBQUlBLDJDQUF3QkE7d0JBRXhCQSxnQ0FBZ0NBOzs7b0JBR3BDQSxpQkFBaUJBLGtCQUFrQkEsbUJBQW1CQTs7b0JBRXREQSxtQ0FBbUNBO29CQUNuQ0EsSUFBSUEsZ0NBQWdDQTt3QkFFaENBLE1BQU1BLElBQUlBOzs7b0JBR2RBLHlDQUFRQTtvQkFDUkEsd0JBQXdCQTs7MERBR2tCQTtvQkFFMUNBLFVBQVVBOztvQkFFVkEsS0FBS0EsV0FBV0EsSUFBSUEsS0FBS0E7d0JBRXJCQSxXQUFXQSxZQUFZQTt3QkFDdkJBLGVBQWVBOzt3QkFFZkEsSUFBSUEsYUFBWUEsS0FDWkEsYUFBWUE7NEJBRVpBOzs7d0JBR0pBLE9BQU9BOzs7b0JBR1hBLE1BQU1BLElBQUlBOzttQ0FHTUE7b0JBRWhCQSxJQUFJQSxrQkFBa0JBO3dCQUVsQkE7Ozs0Q0FJcUJBO29CQUV6QkEsT0FBT0EsNEJBQXNDQSxxQkFBWUEsNEJBQXNDQSxxQkFBWUEsNEJBQXNDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7OztrQ0FnYnRHQSxJQUFJQTs7OztpQ0E3YWxDQSxTQUFpQkE7Z0JBRTlCQSxJQUFJQSxxQkFBb0JBO29CQUVwQkEsT0FBT0E7OztnQkFHWEEsSUFBSUEscUJBQW9CQTtvQkFFcEJBLE9BQU9BLG1CQUFjQSxTQUFTQTs7OztnQkFJbENBLElBQUlBLDZCQUF3QkE7b0JBRXhCQSxPQUFPQTs7O2dCQUdYQSxlQUFlQSxvQkFBZUE7Ozs7Z0JBSTlCQSwyQkFBbUJBOztnQkFFbkJBLElBQUlBO29CQUVBQSxpQkFBaUJBLHVFQUE4QkEsZ0JBQVdBOztvQkFFMURBLGdEQUFzQkEsUUFBS0EsQUFBcUNBLDBCQUE0QkEsWUFBWUEsWUFBV0E7OztnQkFHdkhBLDJCQUFzQkEsU0FBU0EsVUFBVUE7Ozs7Z0JBSXpDQSx1QkFBa0JBLFNBQVNBOztnQkFFM0JBLGlCQUFpQkE7O2dCQUVqQkEsVUFBVUE7O2dCQUVWQSxLQUFLQSxXQUFXQSxJQUFJQSxLQUFLQTtvQkFFckJBLGdCQUFnQkEsV0FBV0E7O29CQUUzQkEsY0FBY0EsZUFBVUEsV0FBV0E7O29CQUVuQ0EsYUFBUUEsVUFBVUE7OztnQkFHdEJBLE9BQU9BOzt5Q0FHWUEsU0FBaUJBO2dCQUVwQ0EsaUJBQWlCQTs7Z0JBRWpCQSxVQUFVQTtnQkFDVkEsS0FBS0EsV0FBV0EsSUFBSUEsS0FBS0E7b0JBRXJCQSxvQkFBb0JBLFdBQVdBOztvQkFFL0JBLHNCQUFpQkEsVUFBVUEsd0JBQW9CQTs7O3FDQUlsQ0EsU0FBaUJBOztnQkFHbENBLFdBQVdBO2dCQUNYQSxJQUFJQSxpQ0FBMEJBO29CQUUxQkEsT0FBT0E7Ozs7Z0JBSVhBLGtCQUFrQkEsbURBQStCQTtnQkFDakRBLElBQUlBLGVBQWVBO29CQUVmQSwwQkFBMEJBOztvQkFFMUJBLHFCQUFxQkE7b0JBQ3JCQSx5QkFBeUJBLDBEQUFpQkE7O29CQUUxQ0EscUJBQXFCQTtvQkFDckJBOztvQkFFQUE7b0JBQ0FBLE9BQU9BOzs7Z0JBR1hBLCtCQUErQkE7Z0JBQy9CQSxJQUFJQSw0QkFBNEJBO29CQUU1QkEsbUNBQW1DQTtvQkFDbkNBLE9BQU9BOzs7Z0JBR1hBLDRCQUE0QkE7O2dCQUU1QkEsT0FBT0E7OytCQUdFQSxRQUFlQTtnQkFFeEJBLElBQUlBLFdBQVdBO29CQUVYQTs7O2dCQUdKQSxnQ0FBZ0NBO2dCQUNoQ0EsSUFBSUEsNkJBQTZCQTtvQkFFN0JBOzs7Z0JBR0pBLHFDQUE4Q0E7OzhDQUdWQTs7O2dCQUdwQ0EsVUFBVUE7O2dCQUVWQSx3QkFBcUNBO2dCQUNyQ0EsOERBQTZCQSxtQkFBbUJBO2dCQUNoREEsSUFBSUEsb0NBQWVBO29CQUVmQSxPQUFPQTs7O2dCQUdYQSxrQkFBa0JBLE1BQW9DQSxvQkFBYUEsT0FBS0EsWUFBNERBLE9BQUtBLEFBQU1BOztnQkFFL0lBLElBQUlBLGVBQWVBO29CQUVmQSxJQUFJQSxrREFBaUJBO3dCQUVqQkEsT0FBT0EsSUFBSUEsMkJBQVlBOzs7b0JBRzNCQSxNQUFNQSxJQUFJQSx5QkFBa0JBLHVCQUFzQkE7OztnQkFHdERBLE9BQU9BLFlBQWtCQSxzQkFBeUJBOztzQ0FHdEJBO2dCQUU1QkEsZUFBZUEsNEJBQXVCQTtnQkFDdENBLHlDQUFRQTs7Z0JBRVJBLE9BQU9BOzs2Q0FHZ0JBLFNBQWlCQSxVQUEyQkE7O2dCQUVuRUEsSUFBSUE7b0JBRUFBLHVCQUF1QkE7O29CQUl2QkEscUNBQXFDQTtvQkFDckNBLElBQUlBLGtDQUFrQ0E7d0JBRWxDQSxrQkFBa0JBLFVBQUlBLG9EQUVKQSxvREFDTEEsb0dBRUFBO3dCQUdiQTs7d0JBSUFBLFNBQVNBLG1EQUErQkE7d0JBQ3hDQSxJQUFJQSxNQUFNQTs0QkFFTkEsTUFBTUEsSUFBSUEsaUNBQTBCQSwrQkFBOEJBOzs7d0JBR3RFQSxpQkFBaUJBO3dCQUNqQkEsWUFBWUE7d0JBQ1pBLGdCQUFnQkEsMERBQWlCQTt3QkFDakNBLFlBQVlBO3dCQUNaQTt3QkFDQUE7Ozs7d0NBT1VBLFVBQWlCQSxNQUFhQTs7Z0JBRWhEQSxJQUFJQTtvQkFFQUE7OztnQkFHSkEsb0JBQW9CQTs7Z0JBRXBCQSxJQUFJQTtvQkFFQUE7OztnQkFHSkEscUJBQXFCQSxvREFBOEJBLFVBQVVBOztnQkFFN0RBLFNBQVNBLG1EQUErQkE7Z0JBQ3hDQSxJQUFJQSxNQUFNQTtvQkFFTkEsZ0JBQWdCQSxpREFBMkJBLFVBQVVBO29CQUNyREEsSUFBSUEsYUFBYUE7d0JBRWJBLGlCQUFpQkEscURBQStCQSxrQkFBYUE7O3dCQUU3REEsY0FBY0EsaUNBQTRIQSxZQUFiQTs7d0JBRTdIQSxzQ0FBMEJBLFVBQVVBOzt3QkFFcENBOzs7b0JBR0pBLElBQUlBO3dCQUVBQSxJQUFJQSxrQkFBa0JBOzRCQUVsQkEsc0JBQXNCQSxVQUFJQSxtREFFYkEsMEJBQ0lBLElBQUlBLDRCQUFhQSxrQkFBaUJBLDBDQUN0Q0EsOENBQ0lBLGdFQUNDQTs7NEJBR2xCQSxJQUFJQSwwREFBc0NBO2dDQUV0Q0EsOEJBQThCQTs7Ozs0QkFJbENBOzs0QkFFQUE7Ozs7b0JBSVJBLGdCQUFnQkEsSUFBSUEsNEJBQWFBLGtCQUFpQkE7b0JBQ2xEQSxZQUFZQTs7O29CQUdaQSxZQUFZQTtvQkFDWkEsZ0JBQWdCQTs7b0JBRWhCQTs7b0JBRUFBOzs7Z0JBR0pBLElBQUlBLGtCQUFrQkE7b0JBRWxCQSxJQUFJQTt3QkFFQUEsd0RBQWtDQSxVQUFVQSxNQUFNQSxrQkFBV0EsbUJBQTZCQTt3QkFDMUZBOzs7b0JBR0pBLDBCQUEwQkEscURBQW1DQSxBQUFPQTtvQkFDcEVBLDZCQUE2QkEsdUJBQXFCQSxPQUFLQSw4RUFBcUNBLEFBQVFBO29CQUNwR0EsSUFBSUEsMEJBQTBCQTt3QkFFMUJBLGdCQUFnQkEsWUFBeUJBO3dCQUN6Q0EscUJBQXFCQSxZQUFrQkEsc0JBQXlCQTt3QkFDaEVBLHFCQUFxQkEsMkRBQXVCQSxPQUFPQSxnRUFBK0JBLFVBQW9CQSxNQUFNQTs7d0JBRTVHQSx3REFBa0NBLFVBQVVBLE1BQU1BO3dCQUNsREE7OztvQkFHSkEsd0RBQWtDQSxVQUFVQSxNQUFNQSw2REFBaUJBO29CQUNuRUE7OztnQkFHSkEsSUFBSUE7b0JBRUFBLGdCQUFnQkE7OztvQkFHaEJBLElBQUlBO3dCQUVBQSxhQUFhQSwyRUFBdUNBOzt3QkFFcERBO3dCQUNBQTt3QkFDQUE7d0JBQ0FBLGlCQUFpQkEsNkJBQU9BO3dCQUN4QkE7d0JBQ0FBO3dCQUNBQSxxQkFBcUJBLDZCQUFPQTs7d0JBRTVCQSxTQUFTQSxrRUFBMkJBOzt3QkFFcENBLDBCQUFtQ0EsV0FBV0EsQUFBd0JBOzRCQUFRQSw0QkFBVUEsMkJBQVFBOzt3QkFDaEdBOzs7b0JBR0pBLGtCQUFpQkEsNkRBQWtDQSwwREFBUEE7O29CQUU1Q0EsMEJBQW1DQSxXQUFXQSxBQUF3QkE7d0JBQVFBLHFDQUFrQkE7O29CQUNoR0E7OztnQkFHSkEsSUFBSUE7b0JBRUFBLHlCQUF5QkE7b0JBQ3pCQSxpQ0FBMENBLG9CQUFvQkE7b0JBQzlEQTs7OztnQkFJSkEsSUFBSUE7b0JBRUFBLE1BQU1BLElBQUlBOzs7Ozs7Z0JBTWRBLElBQUlBO29CQUVBQSx5REFBbUNBLGFBQVFBLE9BQU9BOztvQkFFbERBOzs7Z0JBR0pBLGtDQUEyQ0EsTUFBTUE7OytDQUd4QkE7Z0JBRXpCQSxxQkFBcUJBO2dCQUNyQkEsZUFBZUE7Ozs7O2dCQUtmQSxJQUFJQSxDQUFDQSxtQ0FBb0JBO29CQUVyQkE7OztnQkFHSkEsbUJBQW1CQSw0Q0FBeUJBO2dCQUM1Q0EsSUFBSUEsZ0JBQWdCQTtvQkFFaEJBOzs7Z0JBR0pBLG1CQUFtQkEsZ0ZBQXVDQTtnQkFDMURBLElBQUlBLGdCQUFnQkE7b0JBRWhCQTs7OztnQkFJSkEsbUJBQW1CQTtnQkFDbkJBLElBQUlBLHFDQUFnQkEsQUFBT0E7b0JBRXZCQSxvQkFBb0JBLG1DQUFvQkEsZ0VBQStCQTtvQkFDdkVBLHdEQUFrQ0EsMEJBQWtCQSxjQUFjQTtvQkFDbEVBOzs7Z0JBR0pBLElBQUlBLCtDQUE0QkEscUNBQWdCQSxBQUFPQTtvQkFFbkRBLGdCQUFnQkEsQ0FBQ0E7O29CQUVqQkEsc0JBQWtCQSwwQkFBa0JBLGNBQWNBO29CQUNsREE7Ozs7Ozs7O2dCQVFKQSxJQUFJQSxrQkFBMEJBO29CQUUxQkEsaUJBQWlCQSx3Q0FBc0JBOztvQkFFdkNBLGdCQUFnQkE7OztvQkFHaEJBLGlCQUFpQkE7O29CQUVqQkEsVUFBVUE7O29CQUVWQSxLQUFLQSxXQUFXQSxJQUFJQSxLQUFLQTt3QkFFckJBLGdCQUFnQkEsV0FBV0E7O3dCQUUzQkEsSUFBSUEsdUJBQXNCQTs0QkFFdEJBOzs7d0JBR0pBLGNBQWNBLG9CQUFlQTs7O3dCQUc3QkEsMkJBQXNCQSxXQUFXQSxTQUFTQTs7d0JBRTFDQSx1QkFBa0JBLFdBQVVBOzt3QkFFNUJBLG1DQUFpQkEsMEJBQVlBOzs7b0JBR2pDQTs7OztnQkFJSkEsTUFBTUEsSUFBSUEsK0JBQXdCQTs7Ozs7Ozs7O3dDQzdqQkpBO29CQUU5QkEsSUFBSUEscUJBQW9CQTt3QkFFcEJBLE9BQU9BOzs7b0JBR1hBLE9BQU9BOzt5Q0FHbUJBLEdBQUdBLFNBQWdCQTtvQkFFN0NBLCtDQUFzQkEsU0FBU0E7O29CQUUvQkEsT0FBT0E7Ozs7Ozs7Ozs7Ozs7Ozt3QkMwQ3dEQSxPQUFPQTs7Ozs7O3dCQU1sRUEsSUFBSUEsbURBQWVBOzRCQUVmQSxrREFBY0EsS0FBSUE7NEJBQ2xCQSwwQkFBaUNBOzs7O29DQUU3QkEsb0RBQVlBLHdDQUFzQ0E7Ozs7Ozs7O3dCQUkxREEsT0FBT0E7Ozs7OztpQ0FwRW1DQSxLQUFJQTs7Ozt1Q0F1RnBCQSxTQUFnQkE7b0JBRTlDQSw4Q0FBVUEsSUFBSUEsaURBQW9CQSxTQUFTQTs7Ozs7Z0NBZGxCQTtnQkFFekJBLElBQUlBLDJEQUF1QkE7b0JBRXZCQSxPQUFPQSxtREFBV0E7OztnQkFHdEJBLE9BQU9BOzs7Ozs7Ozs7b0JDL0NQQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7O29CQUVBQSxFQUFhQSxBQUF1QkE7Ozs7b0JBUXBDQSxtQkFBbUJBLFVBQUlBLHVFQUVMQSxXQUFJQSx5SEFHTkEsV0FBSUE7O29CQUlwQkEsMkJBQTJCQSxVQUFJQSx1SEFHbkJBLFdBQUlBOztvQkFNaEJBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozt3Q0NyRThCQTtvQkFFOUJBLFVBQVVBOztvQkFFVkEsZ0JBQWdCQTs7b0JBRWhCQSxPQUFPQTs7Ozs7Ozs7O29DQ1BtQkEsT0FBbUJBO29CQUU3Q0EsdUJBQVNBOztvQkFFVEEsT0FBT0E7O29EQUdtQ0E7b0JBRTFDQTs7b0JBRUFBLE9BQU9BOzswQ0FHeUJBO29CQUVoQ0E7O29CQUVBQSxPQUFPQTs7MENBR3lCQTtvQkFFaENBOztvQkFFQUEsT0FBT0E7O3FDQUdvQkEsT0FBbUJBO29CQUU5Q0EsbUJBQW1CQTs7b0JBRW5CQSxPQUFPQTs7eUNBR3dCQTtvQkFFL0JBOztvQkFFQUEsT0FBT0E7Ozs7Ozs7Ozs0QkM3QnVCQSxTQUF1QkE7Ozs7O3VEQUF3Q0EsU0FBU0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztnQ0NMbEZBLE9BQWNBLFlBQWlCQTs7b0JBRW5EQSxJQUFJQSxjQUFjQTt3QkFFZEEsTUFBTUEsSUFBSUE7OztvQkFHZEEsSUFBSUEsU0FBU0E7d0JBRVRBLE9BQU9BOzs7O29CQUlYQSxJQUFLQSwrQ0FBNkJBLCtFQUF5Q0EsQUFBT0E7d0JBRTlFQSxPQUFPQSxpQkFBR0EsT0FBTUEscUZBQW9DQTs7OztvQkFJeERBLGdCQUFnQkE7O29CQUVoQkEsSUFBSUEsa0NBQWFBO3dCQUViQSxPQUFPQTs7O29CQUdYQSxJQUFJQSxtQ0FBY0EsQUFBT0E7d0JBRXJCQSxPQUFPQTs7Ozs7b0JBS1hBLHFCQUFxQkE7OztvQkFHckJBOzs7Ozs7Ozs7O29CQVdBQSxJQUFJQSw4Q0FBMkJBO3dCQUUzQkEsT0FBT0E7OztvQkFHWEEsTUFBTUEsSUFBSUEsNEJBQXFCQSxnQ0FBWUEsa0NBQWdDQTs7Ozs7Ozs7Ozs7Ozs7Z0NBTWxEQSxhQUFhQSxPQUFjQTtvQkFFcERBLE9BQU9BLFlBQWNBLDhCQUFHQSxPQUFPQSxBQUFPQSxhQUFjQTs7Ozs7Ozs7Ozs7Ozs4QkFNM0JBLGFBQWFBO29CQUV0Q0EsT0FBT0EsOEJBQWdCQSxPQUFPQTs7Ozs7Ozs7O3VDQzlFREEsTUFBTUEsUUFBUUEsWUFBMENBLEtBQVVBO29CQUUvRkEsa0JBQVlBO29CQUNaQSxJQUFJQSx1QkFBdUJBLEtBQVNBO3dCQUVoQ0EsT0FBT0E7OztvQkFHWEEsT0FBT0E7Ozs7Ozs7Ozs7OENDcVg0QkE7OztvQkFJbkNBLE9BQU9BLENBQUNBLENBQUNBLHdCQUFlQSxDQUFDQSxTQUFTQSxRQUFRQSw2QkFBY0E7Ozs7Ozs7Ozs7O29CQXZXbERBLE9BQU9BOzs7OztvQkFLUEEsT0FBT0E7Ozs7O29CQWtJVEEsT0FBT0E7Ozs7O29CQWlJUEEsT0FBT0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Z0JBdFJYQSxhQUFRQSxLQUFJQTs7OEJBR0VBOztnQkFFZEEsSUFBSUEsUUFBUUE7b0JBRVJBLDhDQUF1Q0E7O2dCQUUzQ0EsYUFBUUE7Ozs7K0JBYUVBO2dCQUVKQSxPQUFPQSxpQ0FBTUE7OytCQUZUQTtnQkFLTkEsSUFBSUE7b0JBRUFBLDhDQUF1Q0E7OztnQkFHM0NBLElBQUlBLGFBQWFBLFNBQVNBO29CQUV0QkE7OztnQkFHSkEsYUFBUUEsT0FBT0E7O3dEQTBOTEE7Z0JBRVJBLE9BQU9BLGlDQUFNQTs7d0RBRkxBO2dCQUtWQSx3REFBaURBLE9BQU9BOztnQkFFeERBO29CQUVJQSxhQUFLQSxPQUFTQSxZQUFHQTs7Ozs7d0JBSWpCQSx3REFBaURBLE9BQU9BLEFBQU9BOzs7Ozs7OzJCQW5PM0RBO2dCQUVaQSxJQUFJQTtvQkFFQUEsOENBQXVDQTs7O2dCQUczQ0EsWUFBWUE7Z0JBQ1pBLGdCQUFXQSxPQUFPQTs7b0RBMFBSQTtnQkFFVkEsSUFBSUE7b0JBRUFBLDhDQUF1Q0E7O2dCQUUzQ0Esd0RBQWlEQSxPQUFPQTs7Z0JBRXhEQTtvQkFFSUEsU0FBSUEsWUFBR0E7Ozs7O3dCQUlQQSx3REFBaURBLE9BQU9BLEFBQU9BOzs7Ozs7Z0JBR25FQSxPQUFPQTs7O2dCQXRRUEEsSUFBSUE7b0JBRUFBLDhDQUF1Q0E7OztnQkFHM0NBOzs4QkFHZUEsT0FBV0E7Z0JBRTFCQSxnQ0FBYUEsT0FBT0E7OzZEQXVIQUEsT0FBYUE7Z0JBRWpDQSxJQUFJQSxTQUFTQTtvQkFFVEEsOENBQXVDQTs7O2dCQUczQ0EsSUFBSUE7b0JBRUFBLDBDQUFtQ0E7OztnQkFHdkNBLElBQUlBO29CQUVBQSwwQ0FBbUNBOzs7Z0JBR3ZDQSxJQUFJQTtvQkFFQUEsc0RBQTZDQSxnQ0FBeUJBOzs7Z0JBRzFFQSxJQUFJQSxpQkFBZUEsY0FBUUE7b0JBRXZCQSwwQ0FBbUNBOzs7Z0JBR3ZDQSxhQUFhQTtnQkFDYkEsSUFBSUEsVUFBVUE7b0JBRVZBLGdDQUFhQSxRQUFRQTs7Ozs7Ozs7b0JBVXJCQSxpQkFBa0JBO29CQUNsQkEsaUJBQWtCQSxBQUFPQTtvQkFDekJBLElBQUlBLENBQUNBLENBQUNBLCtDQUE0QkEsZUFBZUEsK0NBQTRCQTt3QkFFekVBLDBDQUFtQ0E7Ozs7Ozs7b0JBT3ZDQSxjQUFtQkE7b0JBQ25CQSxJQUFJQSxXQUFXQTt3QkFFWEEsMENBQW1DQTs7O29CQUd2Q0EsWUFBWUE7b0JBQ1pBO3dCQUVJQSxLQUFLQSxXQUFXQSxJQUFJQSxPQUFPQTs0QkFFdkJBLDJDQUFRQSxtQ0FBUkEsWUFBbUJBLGlDQUFNQTs7Ozs7OzRCQUs3QkEsMENBQW1DQTs7Ozs7OztnQ0F2TDFCQTtnQkFFakJBLE9BQU9BLGtDQUFlQTs7eURBMFBOQTtnQkFFaEJBLElBQUlBLGtFQUFtQkE7b0JBRW5CQSxPQUFPQSxjQUFTQSxZQUFHQTs7Z0JBRXZCQTs7O2dCQTNQQUEsT0FBT0E7OztnQkFpRlBBLE9BQU9BLHFCQUFDQSxZQUFhQTs7K0JBOUVOQTtnQkFFZkEsT0FBT0EsaUNBQWNBOzt3REF5UFBBO2dCQUVkQSxJQUFJQSxrRUFBbUJBO29CQUVuQkEsT0FBT0EsYUFBUUEsWUFBR0E7O2dCQUV0QkEsT0FBT0E7OzhCQTVQUUEsT0FBV0E7Z0JBRTFCQSxJQUFJQTtvQkFFQUEsOENBQXVDQTs7O2dCQUczQ0EsSUFBSUEsYUFBYUEsUUFBUUE7b0JBRXJCQSxzREFBNkNBLGdDQUF5QkE7OztnQkFHMUVBLGdCQUFXQSxPQUFPQTs7dURBbVBKQSxPQUFXQTtnQkFFekJBLElBQUlBO29CQUVBQSw4Q0FBdUNBOztnQkFFM0NBLHdEQUFpREEsT0FBT0E7O2dCQUV4REE7b0JBRUlBLFlBQU9BLE9BQU9BLFlBQUdBOzs7Ozt3QkFJakJBLHdEQUFpREEsT0FBT0EsQUFBT0E7Ozs7Ozs7OEJBOVBwREE7Z0JBRWZBLElBQUlBO29CQUVBQSw4Q0FBdUNBOzs7Z0JBRzNDQSxZQUFZQSxpQ0FBY0E7Z0JBQzFCQSxJQUFJQTtvQkFBV0E7O2dCQUNmQSxnQkFBV0E7Z0JBQ1hBOzt1REF5UGNBO2dCQUVkQSxJQUFJQTtvQkFFQUEsOENBQXVDQTs7O2dCQUczQ0EsSUFBSUEsa0VBQW1CQTtvQkFFbkJBLFlBQU9BLFlBQUdBOzs7Z0NBL1BHQTtnQkFFakJBLElBQUlBO29CQUVBQSw4Q0FBdUNBOzs7Z0JBRzNDQSxJQUFJQSxhQUFhQSxTQUFTQTtvQkFFdEJBOzs7Z0JBR0pBLGdCQUFXQTs7O2dCQUtYQTs7a0NBRzhCQSxPQUFXQTtnQkFFekNBLGdDQUFhQSxPQUFPQTs7a0NBR1VBO2dCQUU5QkEsa0NBQWVBOzsrQkFHWUEsT0FBV0E7Z0JBRXRDQSxpQ0FBTUEsT0FBU0E7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQzhPVUEsT0FBT0E7Ozs7Ozs7Z0JBUjFCQTs7O2dCQUtBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OENDa0RzQkE7O29CQUc1QkEsT0FBT0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBcllIQSxPQUFPQTs7Ozs7Ozs7Ozs7Ozs7OztvQkFZUEEsT0FBT0E7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBWVBBLE9BQU9BOzs7Ozs7Ozs7Ozs7Ozs7O29CQVlQQSxPQUFPQTs7Ozs7Ozs7Ozs7Ozs7OztvQkFZUEEsT0FBT0E7Ozs7Ozs0Q0E1RGlCQTs0Q0FFQUE7Ozs7Ozs7Ozs7Ozs0QkFpRVFBOztnQkFFcENBLElBQUlBLFdBQVVBO29CQUVWQSxNQUFNQSxJQUFJQTs7Z0JBRWRBLG1CQUFtQkEsUUFBUUEsTUFBTUE7Ozs7Ozs7Ozs7Ozs7OzhCQVFHQSxRQUFzQ0E7O2dCQUUxRUEsSUFBSUEsV0FBVUEsb0VBQXFDQSxXQUFVQSx1RUFBd0NBLFdBQVVBO29CQUUzR0EsTUFBTUEsSUFBSUE7O2dCQUVkQSxJQUFJQSxXQUFVQTtvQkFFVkEsMkJBQTJCQSxRQUFRQSxZQUFPQSxDQUFDQSxtQkFBZUEsMERBQWdCQTtvQkFDMUVBOztnQkFFSkEsSUFBSUEsZUFBZUE7b0JBRWZBLE1BQU1BLElBQUlBOztnQkFFZEEsbUJBQW1CQSxRQUFRQSxNQUFNQTs7Ozs7Ozs7Ozs7Ozs7OzhCQVNHQSxRQUFzQ0EsYUFBb0JBOztnQkFFOUZBLElBQUlBLFdBQVVBLG9FQUFxQ0EsV0FBVUEsdUVBQXdDQSxXQUFVQTtvQkFFM0dBLE1BQU1BLElBQUlBOztnQkFFZEEsSUFBSUEsV0FBVUE7b0JBRVZBLDJCQUEyQkEsUUFBUUEsWUFBT0EsQ0FBQ0EsbUJBQWVBLDBEQUFnQkE7b0JBQzFFQTs7Z0JBRUpBLElBQUlBLGVBQWVBO29CQUVmQSxNQUFNQSxJQUFJQTs7Z0JBRWRBLElBQUlBLFVBQVNBO29CQUVUQSxNQUFNQSxJQUFJQTs7Z0JBRWRBLG1CQUFtQkEsUUFBUUEsTUFBTUE7Ozs7Ozs7Ozs7Ozs7OEJBT0dBLFFBQXNDQTs7Z0JBRTFFQSxJQUFJQSxXQUFVQSxvRUFBcUNBLFdBQVVBLHVFQUF3Q0EsV0FBVUE7b0JBRTNHQSxNQUFNQSxJQUFJQTs7Z0JBRWRBLElBQUlBLFdBQVVBO29CQUVWQSxJQUFJQSxnQkFBZ0JBO3dCQUVoQkEsTUFBTUEsSUFBSUE7O29CQUVkQSwyQkFBMkJBLFFBQVFBLGNBQWNBO29CQUNqREE7O2dCQUVKQSxJQUFJQSxnQkFBZ0JBO29CQUVoQkEsTUFBTUEsSUFBSUE7O2dCQUVkQSxtQkFBbUJBLFFBQVFBLE1BQU1BOzs7Ozs7Ozs7Ozs7Ozs7OzhCQVVHQSxRQUFzQ0EsY0FBb0JBOztnQkFFOUZBLElBQUlBLFdBQVVBLG9FQUFxQ0EsV0FBVUEsdUVBQXdDQSxXQUFVQTtvQkFFM0dBLE1BQU1BLElBQUlBOztnQkFFZEEsSUFBSUEsV0FBVUE7b0JBRVZBLElBQUlBLGdCQUFnQkE7d0JBRWhCQSxNQUFNQSxJQUFJQTs7b0JBRWRBLElBQUlBLGdCQUFnQkE7d0JBRWhCQSxNQUFNQSxJQUFJQTs7b0JBRWRBLDJCQUEyQkEsUUFBUUEsY0FBY0E7b0JBQ2pEQTs7Z0JBRUpBLElBQUlBLGdCQUFnQkE7b0JBRWhCQSxNQUFNQSxJQUFJQTs7Z0JBRWRBLElBQUlBLGtCQUFpQkE7b0JBRWpCQSxNQUFNQSxJQUFJQTs7Z0JBRWRBLG1CQUFtQkEsUUFBUUEsTUFBTUE7Ozs7Ozs7Ozs7Ozs7OzsrQkFTR0EsUUFBc0NBLFNBQWdCQTs7Z0JBRTFGQSxJQUFJQSxXQUFVQTtvQkFFVkEsTUFBTUEsSUFBSUE7O2dCQUVkQSxlQUFvQkEsbUJBQWVBO2dCQUNuQ0EsZ0JBQXFCQSxtQkFBZUE7Z0JBQ3BDQSw2QkFBNkJBLFFBQVFBLFlBQU9BLHFDQUFVQSxZQUFPQSxzQ0FBV0EsSUFBSUE7Ozs7Ozs7Ozs7Ozs7Ozs7K0JBVXhDQSxRQUFzQ0EsU0FBZ0JBLFNBQWdCQTs7Z0JBRTFHQSxJQUFJQSxXQUFVQTtvQkFFVkEsTUFBTUEsSUFBSUE7O2dCQUVkQSxZQUFZQTtnQkFDWkEsZUFBb0JBLG1CQUFlQTtnQkFDbkNBLGdCQUFxQkEsbUJBQWVBO2dCQUNwQ0EsNkJBQTZCQSxRQUFRQSxZQUFPQSxxQ0FBVUEsWUFBT0Esc0NBQVdBLE9BQU9BOzs7Ozs7Ozs7Ozs7Ozs7OzhCQVUzQ0EsUUFBc0NBLFVBQWdCQTs7Z0JBRTFGQSxJQUFJQSxXQUFVQTtvQkFFVkEsTUFBTUEsSUFBSUE7O2dCQUVkQSxJQUFJQSxZQUFZQTtvQkFFWkEsTUFBTUEsSUFBSUE7O2dCQUVkQSxJQUFJQSxZQUFZQTtvQkFFWkEsTUFBTUEsSUFBSUE7O2dCQUVkQSw2QkFBNkJBLFFBQVFBLFVBQVVBLFVBQVVBLElBQUlBOzs7Ozs7Ozs7Ozs7Ozs7Ozs4QkFXekJBLFFBQXNDQSxVQUFnQkEsVUFBZ0JBOztnQkFFMUdBLElBQUlBLFdBQVVBO29CQUVWQSxNQUFNQSxJQUFJQTs7Z0JBRWRBLElBQUlBLFlBQVlBO29CQUVaQSxNQUFNQSxJQUFJQTs7Z0JBRWRBLElBQUlBLFlBQVlBO29CQUVaQSxNQUFNQSxJQUFJQTs7Z0JBRWRBLDZCQUE2QkEsUUFBUUEsVUFBVUEsVUFBVUEsZUFBZUE7Ozs7Ozs7Ozs7Ozs7Ozs7OEJBVXBDQSxRQUFzQ0EsYUFBb0JBLE9BQVdBOztnQkFFekdBLElBQUlBLFdBQVVBO29CQUVWQSxNQUFNQSxJQUFJQSx5QkFBa0JBLDBDQUFtQ0EsbUJBQWVBOztnQkFFbEZBLElBQUlBO29CQUVBQSxNQUFNQSxJQUFJQSx5QkFBa0JBOztnQkFFaENBLGVBQW9CQSxtQkFBZUE7Z0JBQ25DQSw2QkFBNkJBLFFBQVFBLFVBQVVBLFVBQVVBLE9BQU9BOzs7Ozs7Ozs7Ozs7Ozs7OzhCQVU1QkEsUUFBc0NBLGNBQW9CQSxPQUFXQTs7Z0JBRXpHQSxJQUFJQSxXQUFVQTtvQkFFVkEsTUFBTUEsSUFBSUEseUJBQWtCQSwwQ0FBbUNBLG1CQUFlQTs7Z0JBRWxGQSxJQUFJQTtvQkFFQUEsTUFBTUEsSUFBSUEseUJBQWtCQTs7Z0JBRWhDQSw2QkFBNkJBLFFBQVFBLGNBQWNBLGNBQWNBLE9BQU9BOzs4QkFHbENBLFFBQXNDQSxVQUFnQkEsVUFBZ0JBLFVBQWNBOztnQkFFMUhBO2dCQUNBQTtnQkFDQUEsZUFBZUE7Z0JBQ2ZBLElBQUlBLFlBQVlBO29CQUVaQSxRQUFRQTs7b0JBSVJBLFFBQVFBLG1GQUFtQkE7OztnQkFHL0JBLG9CQUFpQkE7Z0JBQ2pCQSxJQUFJQSxZQUFZQTtvQkFFWkEsU0FBU0E7O29CQUlUQSxTQUFTQSxtRkFBbUJBOzs7Z0JBR2hDQSxvQkFBaUJBO2dCQUNqQkEsNEJBQXlCQTtnQkFDekJBLDRCQUF5QkE7Ozs7cUNBR0ZBLFFBQXNDQSxVQUFnQkE7Z0JBRTdFQTtnQkFDQUEsZUFBZUE7Z0JBQ2ZBLElBQUlBLFlBQVlBO29CQUVaQSxRQUFRQTs7b0JBSVJBLFFBQVFBLG1GQUFtQkE7OztnQkFHL0JBLG9CQUFpQkE7Z0JBQ2pCQSw0QkFBeUJBOzs2Q0FHTUEsUUFBc0NBLGNBQW9CQTtnQkFFekZBLElBQUlBLFdBQVVBO29CQUVWQSxtQkFBbUJBLFFBQVFBLGNBQWNBO29CQUN6Q0E7O2dCQUVKQSxJQUFJQSxXQUFVQTtvQkFFVkEsc0JBQXNCQSxRQUFRQSxjQUFjQTs7OytDQUlmQSxRQUFzQ0EsVUFBZ0JBLFVBQWdCQSxlQUFtQkE7Z0JBRTFIQSxtQkFBbUJBLFFBQVFBLFVBQVVBO2dCQUNyQ0Esc0JBQXNCQSxRQUFRQSxVQUFVQTs7d0NBR2RBLFFBQXNDQSxVQUFnQkE7Z0JBRWhGQTtnQkFDQUEsZUFBZUE7Z0JBQ2ZBLElBQUlBLFlBQVlBO29CQUVaQSxRQUFRQTs7b0JBSVJBLFFBQVFBLG1GQUFtQkE7OztnQkFHL0JBLG9CQUFpQkE7Z0JBQ2pCQSw0QkFBeUJBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7NEJDNWFGQTs7K0VBQTRCQTs7Ozs7Ozs7Ozs7Ozs4QkFTNUJBLGNBQXFCQTs7K0VBQXdCQTtnQkFFcEVBLGdCQUFXQTs7Ozs7Ozs7Ozs7Ozs7OEJBU1lBLGNBQXFCQSxVQUFpQkE7OytFQUF3QkE7Z0JBRXJGQSxnQkFBV0E7Z0JBQ1hBLGdCQUFXQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7NkNDNUJzQkEsdUJBQW1EQSxjQUFxQkE7b0JBRXpHQSxJQUFJQSx5QkFBeUJBO3dCQUV6QkEsTUFBTUEsSUFBSUE7O29CQUVkQSxzRkFBeUNBLFVBQUNBLEdBQUdBO3dCQUV6Q0EsSUFBSUEsdUNBQWtCQTs0QkFFbEJBOzs7Ozs7Ozs7Ozs7O3dCQ1ZnQ0EsT0FBT0E7Ozs7O3FDQUlqQkEsVUFBaUJBO29CQUUvQ0EsSUFBSUEsWUFBWUE7d0JBRVpBLE1BQU1BLElBQUlBOzs7b0JBR2RBLElBQUlBLGFBQWFBO3dCQUViQSxNQUFNQSxJQUFJQTs7O29CQUdkQSxXQUFXQTtvQkFDWEEsSUFBSUEsUUFBUUE7d0JBRVJBLE1BQU1BLElBQUlBOzs7b0JBR2RBLE9BQU9BLDJDQUFjQTs7MENBR2VBLFVBQWlCQTtvQkFFckRBLElBQUlBLFlBQVlBO3dCQUVaQSxNQUFNQSxJQUFJQTs7O29CQUdkQSxJQUFJQSxjQUFjQTt3QkFFZEEsTUFBTUEsSUFBSUE7OztvQkFHZEEsV0FBV0E7b0JBQ1hBLElBQUlBLFFBQVFBO3dCQUVSQSxNQUFNQSxJQUFJQTs7O29CQUdkQSxPQUFPQSwyQ0FBZUE7OzRDQUdjQSxVQUFpQkEsWUFBbUJBOztvQkFFeEVBLElBQUlBLFlBQVlBO3dCQUVaQSxNQUFNQSxJQUFJQTs7O29CQUdkQSxJQUFJQSxjQUFjQTt3QkFFZEEsTUFBTUEsSUFBSUE7OztvQkFHZEEsV0FBV0E7b0JBQ1hBLElBQUlBLFFBQVFBO3dCQUVSQSxNQUFNQSxJQUFJQTs7O29CQUdkQSxPQUFPQSxzQ0FBMkJBLDBEQUFaQSxZQUF5QkE7O3dDQUdYQSxVQUFpQkE7b0JBRXJEQSxJQUFJQSxZQUFZQTt3QkFFWkEsTUFBTUEsSUFBSUE7OztvQkFHZEEsSUFBSUEsZ0JBQWdCQTt3QkFFaEJBLE1BQU1BLElBQUlBOzs7b0JBR2RBLFdBQVdBO29CQUNYQSxJQUFJQSxRQUFRQTt3QkFFUkEsTUFBTUEsSUFBSUE7OztvQkFHZEEsT0FBT0EsNENBQWlCQTs7eUNBR1dBLFVBQWlCQTtvQkFFcERBLGlCQUFpQkEsc0RBQWVBLFVBQVVBO29CQUMxQ0EsSUFBSUEsY0FBY0E7d0JBRWRBLE1BQU1BLElBQUlBLDhCQUF1QkEsc0JBQXFCQSwrRUFBdUNBOzs7b0JBR2pHQSxPQUFPQTs7NENBRzJCQSxVQUFpQkE7b0JBRW5EQSxtQkFBbUJBLG9EQUFhQSxVQUFVQTs7b0JBRTFDQSxJQUFJQSxnQkFBZ0JBO3dCQUVoQkEsVUFBVUE7d0JBQ1ZBLElBQUlBLE9BQU9BOzRCQUVQQSxPQUFPQSxhQUFhQTs7O3dCQUd4QkEsTUFBTUEsSUFBSUEsOEJBQXVCQSw4RUFBcUNBOzs7b0JBRzFFQSxPQUFPQSx3Q0FBc0JBOztrQ0FHTEEsVUFBaUJBO29CQUV6Q0EsaUJBQWlCQSxzREFBZUEsVUFBVUE7b0JBQzFDQSxJQUFJQSxjQUFjQTt3QkFFZEEsTUFBTUEsSUFBSUEsOEJBQXVCQSw4RUFBcUNBOzs7b0JBRzFFQSxPQUFPQSxvQ0FBa0JBOztvQ0FHREEsVUFBaUJBLFlBQW1CQTs7b0JBRTVEQSxpQkFBaUJBLHNEQUFlQSxVQUFVQTtvQkFDMUNBLElBQUlBLGNBQWNBO3dCQUVkQSxNQUFNQSxJQUFJQSw4QkFBdUJBLDhFQUFxQ0E7OztvQkFHMUVBLE9BQU9BLG9DQUFrQkEsb0NBQVVBOzs7Ozs7Ozs7Ozs7O3VEQU9VQSxVQUFpQkE7b0JBRTlEQSxJQUFJQSxZQUFZQTt3QkFFWkEsTUFBTUEsSUFBSUE7OztvQkFHZEEsSUFBSUEsY0FBY0E7d0JBRWRBLE1BQU1BLElBQUlBOzs7b0JBR2RBLGlCQUFpQkEsK0RBQTZCQTtvQkFDOUNBLElBQUlBLGNBQWNBO3dCQUVkQSxNQUFNQSxJQUFJQSw4QkFBdUJBLDZFQUFpQ0E7OztvQkFHdEVBLE9BQU9BLG9DQUFrQkEsd0JBQVVBOzs2Q0FHRkEsVUFBaUJBLFdBQWtCQTtvQkFFcEVBLHdEQUFpQkEsVUFBVUE7O29CQUUzQkEsV0FBV0E7b0JBQ1hBLElBQUlBLFFBQVFBO3dCQUVSQSxNQUFNQSxJQUFJQTs7O29CQUdkQSxnQkFBZ0JBLHNDQUF5QkEsMERBQVhBO29CQUM5QkEsSUFBSUEsYUFBYUE7d0JBRWJBLE1BQU1BLElBQUlBLDhCQUF1QkEscUJBQW9CQSwrRUFBdUNBOzs7b0JBR2hHQSx5Q0FBbUJBLHdCQUFVQTs7NENBR0dBLFVBQWlCQSxjQUFxQkE7b0JBRXRFQSx3REFBaUJBLFVBQVVBOztvQkFFM0JBLFdBQVdBO29CQUNYQSxJQUFJQSxRQUFRQTt3QkFFUkEsTUFBTUEsSUFBSUE7OztvQkFHZEEsbUJBQW1CQSxvREFBYUEsVUFBVUE7O29CQUUxQ0EsSUFBSUEsZ0JBQWdCQTt3QkFFaEJBLFVBQVVBO3dCQUNWQSxJQUFJQSxPQUFPQTs0QkFFUEEsYUFBYUEsY0FBY0E7NEJBQzNCQTs7O3dCQUdKQSxNQUFNQSxJQUFJQSw4QkFBdUJBLDBEQUF1QkE7OztvQkFHNURBLHdDQUFzQkEsd0JBQVVBOzs7Ozs7Ozs7Ozs7OytDQU1LQSxVQUFpQkE7b0JBRXREQSxlQUFlQSw2REFBc0JBLFVBQVVBO29CQUMvQ0EsSUFBSUEsWUFBWUE7d0JBRVpBLE9BQU9BOzs7b0JBR1hBLE9BQU9BLG9DQUFrQkE7OzRDQUtBQSxVQUFpQkE7b0JBRTFDQSxJQUFJQSxZQUFZQTt3QkFFWkEsTUFBTUEsSUFBSUE7OztvQkFHZEEsSUFBSUEsY0FBY0E7d0JBRWRBLE1BQU1BLElBQUlBOzs7Ozs7Ozs7Ozs7OztpREFPd0JBLFVBQWlCQTtvQkFFdkRBLElBQUlBLFlBQVlBO3dCQUVaQSxPQUFPQTs7O29CQUdYQSxPQUFPQSw0QkFBOEVBLCtFQUFtQ0EsQUFBb0VBO21DQUFLQSw0QkFBVUE7Ozs7Ozs7Ozs7Ozs7OztvQkM5TzNNQSx1REFBVUEsSUFBSUE7Ozs7Ozs7Ozs7O29CQXNCbUJBLE9BQU9BOzs7Ozs7OztnQkFqQnhDQSxnQkFBV0E7OzhCQUdlQTs7O2dCQUUxQkEsYUFBUUE7Z0JBQ1JBLGdCQUFXQTs7OEJBR2VBOzs7Z0JBRTFCQSxxQ0FBaUJBO2dCQUNqQkEsZ0JBQWdCQTs7Ozs4QkFTUUE7Z0JBRXhCQSw2QkFBNkJBO2dCQUM3QkEsSUFBSUEsMEJBQTBCQTtvQkFFMUJBOztnQkFFSkEsT0FBT0EsaUVBQTRDQTs7O2dCQUtuREEsT0FBT0E7Ozs7Ozs7Ozs7Ozs7d0JDNEJpREEsT0FBT0E7Ozs7Ozs7d0JBSjVCQSxBQUFPQTt3QkFBUUEsQUFBT0E7d0JBQVNBLEFBQU9BO3dCQUFTQSxBQUFPQTt3QkFBT0EsQUFBT0E7d0JBQU9BLEFBQU9BO3dCQUFRQSxBQUFPQTt3QkFBT0EsQUFBT0E7d0JBQVFBLEFBQU9BO3dCQUFTQSxBQUFPQTt3QkFBTUEsQUFBT0E7d0JBQU9BLEFBQU9BO3dCQUFPQSxBQUFPQTt3QkFBUUEsQUFBT0E7d0JBQVFBLEFBQU9BO3dCQUFTQSxBQUFPQTt3QkFBVUEsQUFBT0E7d0JBQVdBLEFBQU9BO3dCQUFTQSxBQUFPQTs7Ozs7d0NBUS9SQSxPQUFjQTtvQkFFMUNBLE9BQU9BLDZCQUFXQSxPQUFPQSxVQUFVQTs7d0NBR1BBLE9BQWNBLFVBQW1CQTtvQkFFN0RBLElBQUlBLFNBQVNBLFFBQVFBLENBQUNBLGFBQVlBLHlCQUFrQkEsYUFBWUEsMEJBQW1CQSxhQUFZQTt3QkFFM0ZBLE9BQU9BOzs7b0JBR1hBLFFBQVFBO3dCQUVKQSxLQUFLQTs0QkFDREEsT0FBT0Esb0NBQWtCQSxPQUFPQTt3QkFDcENBLEtBQUtBOzRCQUNEQSxPQUFPQSxpQ0FBZUEsT0FBT0E7d0JBQ2pDQSxLQUFLQTs0QkFDREEsT0FBT0Esa0NBQWdCQSxPQUFPQTt3QkFDbENBLEtBQUtBOzRCQUNEQSxPQUFPQSxpQ0FBZUEsT0FBT0E7d0JBQ2pDQSxLQUFLQTs0QkFDREEsT0FBT0Esa0NBQWdCQSxPQUFPQTt3QkFDbENBLEtBQUtBOzRCQUNEQSxPQUFPQSxtQ0FBaUJBLE9BQU9BO3dCQUNuQ0EsS0FBS0E7NEJBQ0RBLE9BQU9BLGtDQUFnQkEsT0FBT0E7d0JBQ2xDQSxLQUFLQTs0QkFDREEsT0FBT0EsbUNBQWlCQSxPQUFPQTt3QkFDbkNBLEtBQUtBOzRCQUNEQSxPQUFPQSx1QkFBZ0JBLE9BQU9BO3dCQUNsQ0EsS0FBS0E7NEJBQ0RBLE9BQU9BLHdCQUFpQkEsT0FBT0E7d0JBQ25DQSxLQUFLQTs0QkFDREEsT0FBT0EsbUNBQWlCQSxPQUFPQTt3QkFDbkNBLEtBQUtBOzRCQUNEQSxPQUFPQSxtQ0FBaUJBLE9BQU9BO3dCQUNuQ0EsS0FBS0E7NEJBQ0RBLE9BQU9BLHlCQUFrQkEsT0FBT0E7d0JBQ3BDQSxLQUFLQTs0QkFDREEsT0FBT0EscUNBQW1CQSxPQUFPQTt3QkFDckNBLEtBQUtBOzRCQUNEQSxPQUFPQSx3QkFBaUJBLE9BQU9BO3dCQUNuQ0EsS0FBS0E7NEJBQ0RBLE9BQU9BO3dCQUNYQSxLQUFLQTs0QkFDREEsTUFBTUEsSUFBSUEsNEJBQXFCQTt3QkFDbkNBLEtBQUtBOzRCQUNEQSxNQUFNQSxJQUFJQSw0QkFBcUJBO3dCQUNuQ0E7NEJBQ0lBLE1BQU1BLElBQUlBLHlCQUFrQkE7OztzQ0FJUkEsT0FBY0E7b0JBRTFDQSxPQUFPQSw2QkFBV0EsT0FBT0EsZ0JBQWdCQTs7d0NBR2JBLE9BQWNBLGdCQUFxQkE7b0JBRS9EQSxJQUFJQSxrQkFBa0JBO3dCQUVsQkEsTUFBTUEsSUFBSUE7OztvQkFHZEEsSUFBSUEsU0FBU0E7Ozs7O3dCQU1UQSxPQUFPQTs7O29CQUdYQSxJQUFJQSw4Q0FBbUJBO3dCQUVuQkEsT0FBT0E7OztvQkFHWEEsdUJBQXVCQTs7b0JBRXZCQSxJQUFJQSx5Q0FBb0JBLEFBQU9BO3dCQUMzQkEsT0FBT0Esb0NBQWtCQSxPQUFPQTs7b0JBQ3BDQSxJQUFJQSx5Q0FBb0JBLGdEQUFhQSxBQUFNQSxzQkFBbkJBO3dCQUNwQkEsT0FBT0EsaUNBQWVBLE9BQU9BOztvQkFDakNBLElBQUlBLHlDQUFvQkEsZ0RBQWFBLEFBQU1BLHVCQUFuQkE7d0JBQ3BCQSxPQUFPQSxrQ0FBZ0JBLE9BQU9BOztvQkFDbENBLElBQUlBLHlDQUFvQkEsZ0RBQWFBLEFBQU1BLHNCQUFuQkE7d0JBQ3BCQSxPQUFPQSxpQ0FBZUEsT0FBT0E7O29CQUNqQ0EsSUFBSUEseUNBQW9CQSxnREFBYUEsQUFBTUEsMEJBQW5CQTt3QkFDcEJBLE9BQU9BLGtDQUFnQkEsT0FBT0E7O29CQUNsQ0EsSUFBSUEseUNBQW9CQSxnREFBYUEsQUFBTUEsMkJBQW5CQTt3QkFDcEJBLE9BQU9BLG1DQUFpQkEsT0FBT0E7O29CQUNuQ0EsSUFBSUEseUNBQW9CQSxnREFBYUEsQUFBTUEsMEJBQW5CQTt3QkFDcEJBLE9BQU9BLGtDQUFnQkEsT0FBT0E7O29CQUNsQ0EsSUFBSUEseUNBQW9CQSxnREFBYUEsQUFBTUEsMkJBQW5CQTt3QkFDcEJBLE9BQU9BLG1DQUFpQkEsT0FBT0E7O29CQUNuQ0EsSUFBSUEseUNBQW9CQSxnREFBYUEsQUFBTUEsMEJBQW5CQTt3QkFDcEJBLE9BQU9BLHVCQUFnQkEsT0FBT0E7O29CQUNsQ0EsSUFBSUEseUNBQW9CQSxnREFBYUEsQUFBTUEsMkJBQW5CQTt3QkFDcEJBLE9BQU9BLHdCQUFpQkEsT0FBT0E7O29CQUNuQ0EsSUFBSUEseUNBQW9CQSxnREFBYUEsQUFBTUEsd0JBQW5CQTt3QkFDcEJBLE9BQU9BLG1DQUFpQkEsT0FBT0E7O29CQUNuQ0EsSUFBSUEseUNBQW9CQSxnREFBYUEsQUFBTUEsd0JBQW5CQTt3QkFDcEJBLE9BQU9BLG1DQUFpQkEsT0FBT0E7O29CQUNuQ0EsSUFBSUEseUNBQW9CQSxnREFBYUEsQUFBTUEseUJBQW5CQTt3QkFDcEJBLE9BQU9BLHlCQUFrQkEsT0FBT0E7O29CQUNwQ0EsSUFBSUEseUNBQW9CQSxnREFBYUEsQUFBTUEsMEJBQW5CQTt3QkFDcEJBLE9BQU9BLHFDQUFtQkEsT0FBT0E7O29CQUNyQ0EsSUFBSUEseUNBQW9CQSxnREFBYUEsQUFBTUEsd0JBQW5CQTt3QkFDcEJBLE9BQU9BLHdCQUFpQkEsT0FBT0E7O29CQUNuQ0EsSUFBSUEseUNBQW9CQSxnREFBYUEsQUFBTUEsd0JBQW5CQTt3QkFDcEJBLE9BQU9BOzs7b0JBRVhBLE1BQU1BLElBQUlBOzt5REFLOEJBO29CQUV4Q0EsT0FBT0E7Ozs7Ozs7Ozs7Ozs7aUNBcEsyQkEsSUFBSUE7Ozs7Ozs7Ozs7O2dCQVl0Q0EsT0FBT0E7OztnQkFLUEEsT0FBT0E7O2dDQUdZQTtnQkFFbkJBLE9BQU9BOzs7Ozs7Ozs7Ozs7aUNBM0MwQkEsSUFBSUE7Ozs7Ozs7Ozs7O2dCQVlyQ0EsT0FBT0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozt3QkMxQnVDQSxPQUFPQTs7Ozs7Ozs7Ozs7Ozs7Ozs7bUNBTy9CQSxNQUFrQkEsT0FBY0E7O29CQUV0REEsSUFBSUEsdUJBQWdCQSxNQUFNQSxTQUFTQSx1QkFBZ0JBLE9BQU9BO3dCQUV0REE7OztvQkFHSkEsSUFBSUEsQ0FBQ0E7d0JBRURBLE1BQU1BLHFDQUFtQkE7OztvQkFHN0JBLElBQUlBLENBQUNBO3dCQUVEQSxNQUFNQSxxQ0FBbUJBOzs7b0JBRzdCQSxPQUFPQSx5QkFBa0JBLE1BQU1BLDBCQUEwQkEseUJBQWtCQSxPQUFPQTs7Ozs7Ozs7Ozs7OzJDQU1qREE7b0JBRWpDQSxJQUFJQTt3QkFFQUEsT0FBT0E7OztvQkFHWEEsT0FBT0Esc0JBQXlCQTs7Ozs7Ozs7Ozs7Ozs7O3dDQWFKQSxNQUFrQkEsT0FBY0E7O29CQUU1REEsSUFBSUEsdUJBQWdCQSxNQUFNQSxTQUFTQSx1QkFBZ0JBLE9BQU9BO3dCQUV0REE7OztvQkFHSkEsSUFBSUEscUNBQW9CQTt3QkFFcEJBLE9BQU9BLHlCQUFrQkEsTUFBTUEsbUJBQWtCQSx5QkFBa0JBLE9BQU9BOztvQkFFOUVBLE1BQU1BLElBQUlBLHlCQUFrQkE7Ozs7Ozs7Ozs7OztxQ0FVSEE7b0JBRXpCQSxPQUFPQSxDQUFDQSx1QkFBZ0JBLE9BQU9BOzs7Ozs7Ozs7Ozs7a0NBVVRBO29CQUV0QkEsT0FBT0EsdUJBQWdCQSxPQUFPQTs7Ozs7Ozs7Ozs7O3FDQU1MQTtvQkFFekJBLElBQUlBLHVCQUFnQkEsT0FBT0E7d0JBRXZCQTs7O29CQUdKQSxJQUFJQSxpQ0FDQUEsa0NBQ0FBLG1DQUNBQSxtQ0FDQUEsbUNBQ0FBLGtDQUNBQSxrQ0FDQUEsa0NBQ0FBLG9DQUNBQSxtQ0FDQUE7d0JBRUFBOzs7b0JBR0pBOzs7Ozs7Ozs7Ozs7dUNBTXlCQTtvQkFFekJBLElBQUlBLFFBQVFBO3dCQUVSQSxNQUFNQSxJQUFJQTs7O29CQUdkQSxJQUFJQSw2QkFBUUEsQUFBT0EsZ0JBQ2ZBLDZCQUFRQSxBQUFPQSxpQkFDZkEsNkJBQVFBLEFBQU9BLGtCQUNmQSw2QkFBUUEsQUFBT0Esa0JBQ2ZBLDZCQUFRQSxBQUFPQSxrQkFDZkEsNkJBQVFBLEFBQU9BLGlCQUNmQSw2QkFBUUEsQUFBT0EsaUJBQ2ZBLDZCQUFRQSxBQUFPQSxpQkFDZkEsNkJBQVFBLEFBQU9BLG1CQUNmQSw2QkFBUUEsQUFBT0Esa0JBQ2ZBLDZCQUFRQSxBQUFPQTt3QkFFZkE7OztvQkFHSkE7Ozs7Ozs7Ozs7Ozs7O2tDQVlzQkEsTUFBa0JBLE9BQWNBOztvQkFFdERBLElBQUlBLHVCQUFnQkEsTUFBTUE7d0JBRXRCQSxPQUFPQSx1QkFBZ0JBLE9BQU9BOzs7b0JBR2xDQSxtQkFBbUJBO29CQUNuQkEsSUFBSUEsZ0JBQWdCQTt3QkFFaEJBLE9BQU9BLDRCQUFvQkE7O29CQUUvQkEsSUFBSUE7d0JBRUFBOzs7b0JBR0pBLElBQUlBLHFDQUFvQkE7d0JBRXBCQSxPQUFPQSx5QkFBa0JBLE1BQU1BLHdCQUFtQkEseUJBQWtCQSxPQUFPQTs7O29CQUcvRUEsT0FBT0Esb0JBQVlBOzs7Ozs7Ozs7Ozs7b0NBUU1BO29CQUV6QkEsT0FBT0E7Ozs7Ozs7Ozs7Ozs7eUNBTXdCQSxNQUFrQkE7b0JBRWpEQSxJQUFJQSw2QkFBY0E7d0JBRWRBLE9BQU9BLGVBQWtCQSxnQkFBY0E7OztvQkFHM0NBLE9BQU9BOzs7Ozs7Ozs7Ozs7OzJDQU0wQkEsTUFBa0JBO29CQUVuREEsSUFBSUEsUUFBUUE7d0JBRVJBLE9BQU9BOzs7b0JBR1hBLElBQUlBLCtCQUFnQkE7d0JBRWhCQSxPQUFPQSxZQUFlQSxjQUFjQSxnQkFBY0E7OztvQkFHdERBLE9BQU9BOzs7Ozs7Ozs7Ozs7cUNBUWtCQTtvQkFFekJBLE9BQU9BLDhCQUFVQSxPQUFPQTs7Ozs7Ozs7Ozs7Ozs7dUNBVUNBLE9BQW1CQTtvQkFFNUNBLElBQUlBO3dCQUVBQSxNQUFNQSxJQUFJQTs7b0JBRWRBLE9BQU9BLHlCQUFrQkEsT0FBT0E7Ozs7Ozs7Ozs7Ozs2Q0FRRUE7b0JBRWxDQSxPQUFPQSxzQ0FBa0JBLE9BQU9BOzs7Ozs7Ozs7Ozs7OytDQVNFQSxPQUFtQkE7b0JBRXJEQSxJQUFJQTt3QkFFQUEsT0FBT0E7O29CQUVYQSxPQUFPQSx5QkFBa0JBLE9BQU9BOzs7Ozs7Ozs7Ozs7Ozt1Q0FVSkEsT0FBbUJBO29CQUUvQ0EsSUFBSUE7d0JBRUFBLE1BQU1BLElBQUlBOztvQkFFZEEsT0FBT0EseUJBQWtCQSxPQUFPQTs7Ozs7Ozs7Ozs7OztxQ0FTSkE7b0JBRTVCQSxJQUFJQTt3QkFFQUEsTUFBTUEsSUFBSUE7O29CQUVkQSxPQUFPQSw4QkFBVUEsT0FBT0E7Ozs7Ozs7Ozs7Ozs7K0NBU2FBLE9BQW1CQTtvQkFFeERBLElBQUlBO3dCQUVBQSxPQUFPQTs7b0JBRVhBLE9BQU9BLHlCQUFrQkEsT0FBT0E7Ozs7Ozs7Ozs7Ozs2Q0FRS0E7b0JBRXJDQSxPQUFPQSxzQ0FBa0JBLE9BQU9BOzs7Ozs7Ozs7Ozs7O21DQVNWQTtvQkFFdEJBLElBQUlBO3dCQUVBQSxNQUFNQSxJQUFJQTs7b0JBRWRBLE9BQU9BLHVCQUFnQkEsT0FBT0E7Ozs7Ozs7Ozs7Ozs7NkNBU0NBLE9BQW1CQTtvQkFFbERBLElBQUlBO3dCQUVBQSxPQUFPQTs7b0JBRVhBLE9BQU9BLHVCQUFnQkEsT0FBT0E7Ozs7Ozs7Ozs7OzsyQ0FNQ0E7b0JBRS9CQSxPQUFPQSxvQ0FBZ0JBLE9BQU9BOzs7Ozs7Ozs7Ozs7OENBVVVBO29CQUV4Q0EsT0FBT0EsSUFBSUEseUJBQWtCQTs7Ozs7Ozs7O21DRDNYSkEsT0FBbUJBOztvQkFHNUNBLE9BQU9BOzs7Ozs7Ozs7NEJBTW1CQSxTQUFxQkE7Ozs7O3VEQUF3Q0EsU0FBU0E7Ozs7Ozs7Ozs7Ozs7b0JWa0I1RkEsT0FBT0E7Ozs7OzRCQUlnQkEsU0FBdUJBOzs7Ozt1REFBd0NBLFNBQVNBOzs4QkFHeEVBLFlBQW1CQTs7dURBQXVCQTtnQkFFckVBLGtCQUFrQkE7Ozs7Ozs7O3VDWXBDV0EsVUFBd0JBLE1BQWFBO29CQUVsRUEsZUFBZUEseUNBQXlDQTs7b0JBRXhEQSxJQUFJQSxZQUFZQTt3QkFFWkEsSUFBSUE7NEJBRUFBLE1BQU1BLElBQUlBLGlDQUEwQkEsdUJBQXNCQTs7O3dCQUc5REEsT0FBT0E7OztvQkFHWEEsT0FBT0Esd0NBQTRCQTs7Ozs7Ozs7OzRCWnNETEEsU0FBdUJBOzs7Ozt1REFBd0NBLFNBQVNBOzs7Ozs7Ozs0QkFiN0VBLFNBQXVCQTs7Ozs7dURBQXdDQSxTQUFTQTs7Ozs7Ozs7Ozs7Ozs7OztxQ2FuRHRFQSxNQUFhQTs7b0JBRXhDQSxPQUFPQTs7Ozs7Ozs7O3dDQ1J1QkE7b0JBRTlCQSx5QkFBeUJBLGdDQUF5QkE7b0JBQ2xEQSxPQUFPQSxvQ0FBd0JBOzs7Ozs7Ozs7MkNDdUZJQTtvQkFFbkNBLFVBQWFBO29CQUNiQSxRQUFRQTt3QkFFSkEsS0FBS0E7O2dDQUVHQTtnQ0FDQUE7O3dCQUVSQSxLQUFLQTs7Z0NBRUdBO2dDQUNBQTs7d0JBRVJBLEtBQUtBOztnQ0FFR0E7Z0NBQ0FBOzt3QkFFUkEsS0FBS0E7O2dDQUVHQTtnQ0FDQUE7O3dCQUVSQSxLQUFLQTs7Z0NBRUdBO2dDQUNBQTs7d0JBRVJBLEtBQUtBOztnQ0FFR0E7Z0NBQ0FBOzt3QkFFUkEsS0FBS0E7O2dDQUVHQTtnQ0FDQUE7O3dCQUVSQSxLQUFLQTs7Z0NBRUdBO2dDQUNBQTs7d0JBRVJBLEtBQUtBOztnQ0FFR0E7Z0NBQ0FBOzt3QkFFUkEsS0FBS0E7O2dDQUVHQTtnQ0FDQUE7O3dCQUVSQSxLQUFLQTs7Z0NBRUdBO2dDQUNBQTs7d0JBRVJBLEtBQUtBOztnQ0FFR0E7Z0NBQ0FBOzt3QkFFUkEsS0FBS0E7O2dDQUVHQTtnQ0FDQUE7O3dCQUVSQSxLQUFLQTs7Z0NBRUdBO2dDQUNBQTs7d0JBRVJBLEtBQUtBOztnQ0FFR0E7Z0NBQ0FBOzt3QkFFUkEsS0FBS0E7O2dDQUVHQTtnQ0FDQUE7O3dCQUVSQSxLQUFLQTs7Z0NBRUdBO2dDQUNBQTs7d0JBRVJBLEtBQUtBOztnQ0FFR0E7Z0NBQ0FBOzt3QkFFUkEsS0FBS0E7O2dDQUVHQTtnQ0FDQUE7O3dCQUVSQSxLQUFLQTs7Z0NBRUdBO2dDQUNBQTs7d0JBRVJBLEtBQUtBOztnQ0FFR0E7Z0NBQ0FBOzt3QkFFUkEsS0FBS0E7O2dDQUVHQTtnQ0FDQUE7O3dCQUVSQSxLQUFLQTs7Z0NBRUdBO2dDQUNBQTs7d0JBRVJBLEtBQUtBOztnQ0FFR0E7Z0NBQ0FBOzt3QkFFUkE7O2dDQUVRQSxPQUFPQTs7O29CQUduQkEsT0FBT0E7OzJDQUc0QkE7b0JBRW5DQSxVQUFhQTtvQkFDYkEsUUFBUUE7d0JBRUpBLEtBQUtBOztnQ0FFR0E7Z0NBQ0FBOzt3QkFFUkEsS0FBS0E7O2dDQUVHQTtnQ0FDQUE7O3dCQUVSQSxLQUFLQTs7Z0NBRUdBO2dDQUNBQTs7d0JBRVJBLEtBQUtBOztnQ0FFR0E7Z0NBQ0FBOzt3QkFFUkEsS0FBS0E7O2dDQUVHQTtnQ0FDQUE7O3dCQUVSQSxLQUFLQTs7Z0NBRUdBO2dDQUNBQTs7d0JBRVJBLEtBQUtBOztnQ0FFR0E7Z0NBQ0FBOzt3QkFFUkEsS0FBS0E7O2dDQUVHQTtnQ0FDQUE7O3dCQUVSQSxLQUFLQTs7Z0NBRUdBO2dDQUNBQTs7d0JBRVJBLEtBQUtBOztnQ0FFR0E7Z0NBQ0FBOzt3QkFFUkEsS0FBS0E7O2dDQUVHQTtnQ0FDQUE7O3dCQUVSQSxLQUFLQTs7Z0NBRUdBO2dDQUNBQTs7d0JBRVJBLEtBQUtBOztnQ0FFR0E7Z0NBQ0FBOzt3QkFFUkEsS0FBS0E7O2dDQUVHQTtnQ0FDQUE7O3dCQUVSQSxLQUFLQTs7Z0NBRUdBO2dDQUNBQTs7d0JBRVJBLEtBQUtBOztnQ0FFR0E7Z0NBQ0FBOzt3QkFFUkEsS0FBS0E7O2dDQUVHQTtnQ0FDQUE7O3dCQUVSQSxLQUFLQTs7Z0NBRUdBO2dDQUNBQTs7d0JBRVJBLEtBQUtBOztnQ0FFR0E7Z0NBQ0FBOzt3QkFFUkEsS0FBS0E7O2dDQUVHQTtnQ0FD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c291cmNlc0NvbnRlbnQiOiBbInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxudXNpbmcgQnJpZGdlLmpRdWVyeTI7XHJcblxyXG5uYW1lc3BhY2UgQnJpZGdlLkN1c3RvbVVJTWFya3VwLkNvbW1vblxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgQXN5bmNBamF4IDogSVByb21pc2VcclxuICAgIHtcclxuICAgICAgICAjcmVnaW9uIEZpZWxkc1xyXG4gICAgICAgIHN0cmluZyBfZXJyb3I7XHJcbiAgICAgICAgc3RyaW5nIFJlc3BvbnNlVGV4dDtcclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gUHJvcGVydGllc1xyXG4gICAgICAgIHN0cmluZyBEYXRhIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBzdHJpbmcgVXJsIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gUHVibGljIE1ldGhvZHNcclxuICAgICAgICBwdWJsaWMgc3RhdGljIGFzeW5jIFRhc2s8c3RyaW5nPiBQb3N0KHN0cmluZyB1cmwsIHN0cmluZyBkYXRhLCBBY3Rpb248c3RyaW5nPiBvbkVycm9yID0gbnVsbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBwcm9taXNlID0gbmV3IEFzeW5jQWpheFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBVcmwgPSB1cmwsXHJcbiAgICAgICAgICAgICAgICBEYXRhID0gZGF0YVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0SGFuZGxlciA9IChGdW5jPEFzeW5jQWpheCwgc3RyaW5nPikgKHJlcXVlc3QgPT4gcmVxdWVzdC5SZXNwb25zZVRleHQpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGVycm9ySGFuZGxlciA9IChBY3Rpb248QXN5bmNBamF4PikgKG1lID0+IHsgb25FcnJvciE9bnVsbD9nbG9iYWw6OkJyaWRnZS5TY3JpcHQuRnJvbUxhbWJkYSgoKT0+b25FcnJvci5JbnZva2UobWUuX2Vycm9yKSk6bnVsbDsgfSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgdGFzayA9IFRhc2suRnJvbVByb21pc2U8c3RyaW5nPihwcm9taXNlLCByZXN1bHRIYW5kbGVyLCBlcnJvckhhbmRsZXIpO1xyXG5cclxuICAgICAgICAgICAgYXdhaXQgdGFzaztcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0YXNrLlJlc3VsdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFRoZW4oRGVsZWdhdGUgZnVsZmlsbGVkSGFuZGxlciwgRGVsZWdhdGUgZXJyb3JIYW5kbGVyLCBEZWxlZ2F0ZSBwcm9ncmVzc0hhbmRsZXIgPSBudWxsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgalF1ZXJ5LkFqYXgobmV3IEFqYXhPcHRpb25zXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFR5cGUgPSBcIlBPU1RcIixcclxuICAgICAgICAgICAgICAgIFVybCA9IFVybCxcclxuICAgICAgICAgICAgICAgIERhdGEgPSBEYXRhLFxyXG4gICAgICAgICAgICAgICAgQXN5bmMgPSB0cnVlLFxyXG4gICAgICAgICAgICAgICAgU3VjY2VzcyA9IChvLCBzLCBhcmczKSA9PlxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFJlc3BvbnNlVGV4dCA9IGFyZzMuUmVzcG9uc2VUZXh0O1xyXG4gICAgICAgICAgICAgICAgICAgIGZ1bGZpbGxlZEhhbmRsZXIuQ2FsbChudWxsLCB0aGlzKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgRXJyb3IgPSAoanFYaHIsIHN0YXR1cywgZXJycm9yKSA9PlxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFRyYWNlLk9wZXJhdGlvbldhc0NhbmNlbGVkKFwiQFBPU1Q6XCIgKyBVcmwsIFwiQWpheCBFcnJvciBPY2N1cmVkLlwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgVHJhY2UuTG9nKGpxWGhyKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgX2Vycm9yID0gXCJAc3RhdHVzOlwiICsgc3RhdHVzICsgXCIgQGVycnJvcjpcIiArIGVycnJvcjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgVHJhY2UuTG9nKF9lcnJvcik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9ySGFuZGxlci5DYWxsKG51bGwsIHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG4gICAgfVxyXG59IiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uR2xvYmFsaXphdGlvbjtcclxuXHJcbm5hbWVzcGFjZSBCcmlkZ2UuQ3VzdG9tVUlNYXJrdXAuQ29tbW9uXHJcbntcclxuICAgIC8vLyA8c3VtbWFyeT5cclxuICAgIC8vLyAgICAgVXRpbGl0eSBtZXRob2RzIGZvciBjYXN0aW5nIG9wZXJhdGlvbnNcclxuICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIENvbnZlcnRIZWxwZXJcclxuICAgIHtcclxuICAgICAgICAjcmVnaW9uIFByb3BlcnRpZXNcclxuICAgICAgICBzdGF0aWMgSUZvcm1hdFByb3ZpZGVyIEZvcm1hdFByb3ZpZGVyIHtnZXR7cmV0dXJuIEN1bHR1cmVJbmZvLkN1cnJlbnRDdWx0dXJlO319XHJcbiAgICAgICAgI2VuZHJlZ2lvbiBcclxuXHJcbiAgICAgICAgI3JlZ2lvbiBQdWJsaWMgTWV0aG9kc1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgb2JqZWN0IENoYW5nZVR5cGUodGhpcyBvYmplY3QgdmFsdWUsIFR5cGUgdGFyZ2V0VHlwZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBDaGFuZ2VUeXBlKHZhbHVlLCB0YXJnZXRUeXBlLCBGb3JtYXRQcm92aWRlcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIG9iamVjdCBDaGFuZ2VUeXBlKHRoaXMgb2JqZWN0IHZhbHVlLCBUeXBlIHRhcmdldFR5cGUsIElGb3JtYXRQcm92aWRlciBwcm92aWRlcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICh0YXJnZXRUeXBlID09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudE51bGxFeGNlcHRpb24oXCJ0YXJnZXRUeXBlXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodmFsdWUgPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldFR5cGUuSXNDbGFzcyB8fCBOdWxsYWJsZS5HZXRVbmRlcmx5aW5nVHlwZSh0YXJnZXRUeXBlKSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXhjZXB0aW9uKFwiQHZhbHVlOm51bGwgY2FuIG5vdCBjb252ZXJ0ZWQgdG8gQHRhcmdldFR5cGU6XCIgKyB0YXJnZXRUeXBlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHZhbHVlLkdldFR5cGUoKSA9PSB0YXJnZXRUeXBlIHx8IHRhcmdldFR5cGUuSXNJbnN0YW5jZU9mVHlwZSh2YWx1ZSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIHVuZGVybHlpbmdUeXBlID0gTnVsbGFibGUuR2V0VW5kZXJseWluZ1R5cGUodGFyZ2V0VHlwZSk7XHJcbiAgICAgICAgICAgIGlmICh1bmRlcmx5aW5nVHlwZSAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXRUeXBlID0gdW5kZXJseWluZ1R5cGU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0YXJnZXRUeXBlID09IHR5cGVvZihib29sKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBDb252ZXJ0LlRvQm9vbGVhbih2YWx1ZSwgcHJvdmlkZXIpO1xyXG4gICAgICAgICAgICBpZiAodGFyZ2V0VHlwZSA9PSB0eXBlb2YoY2hhcikpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gQ29udmVydC5Ub0NoYXIodmFsdWUsIHByb3ZpZGVyKTtcclxuICAgICAgICAgICAgaWYgKHRhcmdldFR5cGUgPT0gdHlwZW9mKHNieXRlKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBDb252ZXJ0LlRvU0J5dGUodmFsdWUsIHByb3ZpZGVyKTtcclxuICAgICAgICAgICAgaWYgKHRhcmdldFR5cGUgPT0gdHlwZW9mKGJ5dGUpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIENvbnZlcnQuVG9CeXRlKHZhbHVlLCBwcm92aWRlcik7XHJcbiAgICAgICAgICAgIGlmICh0YXJnZXRUeXBlID09IHR5cGVvZihzaG9ydCkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gQ29udmVydC5Ub0ludDE2KHZhbHVlLCBwcm92aWRlcik7XHJcbiAgICAgICAgICAgIGlmICh0YXJnZXRUeXBlID09IHR5cGVvZih1c2hvcnQpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIENvbnZlcnQuVG9VSW50MTYodmFsdWUsIHByb3ZpZGVyKTtcclxuICAgICAgICAgICAgaWYgKHRhcmdldFR5cGUgPT0gdHlwZW9mKGludCkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gQ29udmVydC5Ub0ludDMyKHZhbHVlLCBwcm92aWRlcik7XHJcbiAgICAgICAgICAgIGlmICh0YXJnZXRUeXBlID09IHR5cGVvZih1aW50KSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBDb252ZXJ0LlRvVUludDMyKHZhbHVlLCBwcm92aWRlcik7XHJcbiAgICAgICAgICAgIGlmICh0YXJnZXRUeXBlID09IHR5cGVvZihsb25nKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBDb252ZXJ0LlRvSW50NjQodmFsdWUsIHByb3ZpZGVyKTtcclxuICAgICAgICAgICAgaWYgKHRhcmdldFR5cGUgPT0gdHlwZW9mKHVsb25nKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBDb252ZXJ0LlRvVUludDY0KHZhbHVlLCBwcm92aWRlcik7XHJcbiAgICAgICAgICAgIGlmICh0YXJnZXRUeXBlID09IHR5cGVvZihmbG9hdCkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gQ29udmVydC5Ub1NpbmdsZSh2YWx1ZSwgcHJvdmlkZXIpO1xyXG4gICAgICAgICAgICBpZiAodGFyZ2V0VHlwZSA9PSB0eXBlb2YoZG91YmxlKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBDb252ZXJ0LlRvRG91YmxlKHZhbHVlLCBwcm92aWRlcik7XHJcbiAgICAgICAgICAgIGlmICh0YXJnZXRUeXBlID09IHR5cGVvZihkZWNpbWFsKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBDb252ZXJ0LlRvRGVjaW1hbCh2YWx1ZSwgcHJvdmlkZXIpO1xyXG4gICAgICAgICAgICBpZiAodGFyZ2V0VHlwZSA9PSB0eXBlb2YoRGF0ZVRpbWUpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIENvbnZlcnQuVG9EYXRlVGltZSh2YWx1ZSwgcHJvdmlkZXIpO1xyXG4gICAgICAgICAgICBpZiAodGFyZ2V0VHlwZSA9PSB0eXBlb2Yoc3RyaW5nKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBDb252ZXJ0LlRvU3RyaW5nKHZhbHVlLCBwcm92aWRlcik7XHJcbiAgICAgICAgICAgIGlmICh0YXJnZXRUeXBlID09IHR5cGVvZihvYmplY3QpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG5cclxuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FeGNlcHRpb24oXCJAdmFsdWU6XCIgKyB2YWx1ZSArIFwiIGNhbiBub3QgY29udmVydGVkIHRvIEB0YXJnZXRUeXBlOlwiICsgdGFyZ2V0VHlwZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFRUYXJnZXRUeXBlIFRvPFRUYXJnZXRUeXBlPih0aGlzIG9iamVjdCB2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiAoVFRhcmdldFR5cGUpIHZhbHVlLkNoYW5nZVR5cGUodHlwZW9mKFRUYXJnZXRUeXBlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuICAgIH1cclxufSIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLlhtbDtcclxudXNpbmcgQnJpZGdlLkh0bWw1O1xyXG51c2luZyBCcmlkZ2UualF1ZXJ5MjtcclxuXHJcbm5hbWVzcGFjZSBCcmlkZ2UuQ3VzdG9tVUlNYXJrdXAuQ29tbW9uXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgRXh0ZW5zaW9uc1xyXG4gICAge1xyXG4gICAgICAgXHJcblxyXG5cclxuICAgICAgICBpbnRlcm5hbCBzdGF0aWMgaW50IEdldE9yaWdpbmFsTGluZU51bWJlcih0aGlzIFhtbE5vZGUgZWxlbWVudCwgWG1sTm9kZSB4bWxSb290Tm9kZSwgc3RyaW5nIHNDb250ZW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9qc2ZpZGRsZS5uZXQvZzExM2MzNTAvMy9cclxuXHJcbiAgICAgICAgICAgIFNjcmlwdC5Xcml0ZTxpbnQ+KFxyXG4gICAgICAgICAgICAgICAgQFwiXHJcblxyXG4gICAgdmFyIHNUYWdOYW1lID0gZWxlbWVudC50YWdOYW1lO1xyXG4gICAgdmFyIGFOb2RlTGlzdEJ5VGFnID0geG1sUm9vdE5vZGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoc1RhZ05hbWUpO1xyXG4gICAgdmFyIGlNYXhJbmRleCA9IDA7XHJcbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IGFOb2RlTGlzdEJ5VGFnLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgaWYgKGFOb2RlTGlzdEJ5VGFnLml0ZW0oaikgPT09IGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgaU1heEluZGV4ID0gajtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgdmFyIHJlZ2V4ID0gbmV3IFJlZ0V4cCgnPCcgKyBzVGFnTmFtZSwgJ2cnKTtcclxuICAgIHZhciBvZmZzZXQgPSAwO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPD0gaU1heEluZGV4OyBpKyspIHtcclxuICAgICAgICBvZmZzZXQgPSByZWdleC5leGVjKHNDb250ZW50KS5pbmRleDtcclxuICAgIH1cclxuICAgIHZhciBsaW5lID0gMDtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc0NvbnRlbnQuc3Vic3RyaW5nKDAsIG9mZnNldCkubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAoc0NvbnRlbnRbaV0gPT09ICdcXG4nKSB7XHJcbiAgICAgICAgICAgIGxpbmUrKztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbGluZSArIDE7XHJcblxyXG5cIik7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgI3JlZ2lvbiBQdWJsaWMgTWV0aG9kc1xyXG4gICAgICAgIC8vIFJlU2hhcnBlciBkaXNhYmxlIG9uY2UgVW51c2VkUGFyYW1ldGVyLkdsb2JhbFxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBHZXRFbGVtZW50c0J5VGFnTmFtZUlzTm90U3VwcG9ydGluZyh0aGlzIEVsZW1lbnQgZWxlbWVudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTY3JpcHQuV3JpdGU8Ym9vbD4oXCJlbGVtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lID09PSB1bmRlZmluZWRcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgSXNOdWxsT3JXaGl0ZVNwYWNlKHRoaXMgc3RyaW5nIHZhbHVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5Jc051bGxPcldoaXRlU3BhY2UodmFsdWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBqUXVlcnkgUmVtb3ZlRnJvbVBhcmVudCh0aGlzIGpRdWVyeSBxdWVyeSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHF1ZXJ5IT1udWxsP3F1ZXJ5LlJlbW92ZSgpOihqUXVlcnkpbnVsbDtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBxdWVyeTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgalF1ZXJ5IGhpZ2hsaWdodCh0aGlzIGpRdWVyeSBlbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBvbGRDb2xvciA9IGVsLkNzcyhcImJhY2tncm91bmQtY29sb3JcIik7XHJcbiAgICAgICAgICAgIHZhciBvcGFjaXR5ID0gZWwuQ3NzKFwib3BhY2l0eVwiKTtcclxuXHJcblxyXG4gICAgICAgICAgICBlbC5Dc3MoXCJiYWNrZ3JvdW5kLWNvbG9yXCIsIFwiI2ZmZmY5OVwiKTtcclxuICAgICAgICAgICAgZWwuQ3NzKFwib3BhY2l0eVwiLCAwLjkpO1xyXG5cclxuICAgICAgICAgICAgV2luZG93LlNldFRpbWVvdXQoKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZWwuQ3NzKFwiYmFja2dyb3VuZC1jb2xvclwiLCBvbGRDb2xvcik7XHJcbiAgICAgICAgICAgICAgICBlbC5Dc3MoXCJvcGFjaXR5XCIsIG9wYWNpdHkpO1xyXG4gICAgICAgICAgICB9KSw2MDApO1xyXG5cclxuICAgICAgICAgICAgXHJcblxyXG4gICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGVsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBqUXVlcnkgU2V0Rmlyc3RDaGlsZCh0aGlzIGpRdWVyeSBxdWVyeSwgalF1ZXJ5IGNoaWxkRWxlbWVudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZHJlbiA9IHF1ZXJ5IT1udWxsP3F1ZXJ5LkNoaWxkcmVuKCk6KGpRdWVyeSludWxsO1xyXG4gICAgICAgICAgICBpZiAoY2hpbGRyZW4gPT0gbnVsbCB8fCBjaGlsZHJlbi5MZW5ndGg9PSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjaGlsZEVsZW1lbnQuQXBwZW5kVG8ocXVlcnkpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHF1ZXJ5O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjaGlsZEVsZW1lbnQuSW5zZXJ0QmVmb3JlKGNoaWxkcmVuLkZpcnN0KCkpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHF1ZXJ5O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBqUXVlcnkgU2V0TGFzdENoaWxkKHRoaXMgalF1ZXJ5IHF1ZXJ5LCBqUXVlcnkgY2hpbGRFbGVtZW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGNoaWxkcmVuID0gcXVlcnkhPW51bGw/cXVlcnkuQ2hpbGRyZW4oKTooalF1ZXJ5KW51bGw7XHJcbiAgICAgICAgICAgIGlmIChjaGlsZHJlbiA9PSBudWxsIHx8IGNoaWxkcmVuLkxlbmd0aCA9PSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjaGlsZEVsZW1lbnQuQXBwZW5kVG8ocXVlcnkpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHF1ZXJ5O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjaGlsZEVsZW1lbnQuSW5zZXJ0QWZ0ZXIoY2hpbGRyZW4uTGFzdCgpKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBxdWVyeTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgalF1ZXJ5IEZvcmVhY2godGhpcyBqUXVlcnkgcXVlcnksIEFjdGlvbjxqUXVlcnk+IGFjdGlvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHF1ZXJ5IT1udWxsP3F1ZXJ5LkNoaWxkcmVuKCkuRWFjaCgoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPGludCwgZ2xvYmFsOjpCcmlkZ2UuSHRtbDUuRWxlbWVudD4pKChlLGkpID0+IGFjdGlvbihuZXcgalF1ZXJ5KGUpKSkpOihqUXVlcnkpbnVsbDtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBxdWVyeTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBqUXVlcnkgU2V0Q2xhc3ModGhpcyBqUXVlcnkgcXVlcnksIHN0cmluZyBuZXdDbGFzc05hbWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBxdWVyeS5BdHRyKFwiY2xhc3NcIiwgbmV3Q2xhc3NOYW1lKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBxdWVyeTtcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG4gICAgfVxyXG59IiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBCcmlkZ2UualF1ZXJ5MjtcclxuXHJcbm5hbWVzcGFjZSBCcmlkZ2UuQ3VzdG9tVUlNYXJrdXAuQ29tbW9uXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgRmlsZVV0aWxcclxuICAgIHtcclxuICAgICAgICAjcmVnaW9uIFB1YmxpYyBNZXRob2RzXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIFJlYWRBc3luYyhzdHJpbmcgdXJsLCBBY3Rpb248c3RyaW5nPiBzdWNjZXNzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgalF1ZXJ5LkFqYXgobmV3IEFqYXhPcHRpb25zXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIEFzeW5jID0gZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBVcmwgPSB1cmwsXHJcbiAgICAgICAgICAgICAgICBTdWNjZXNzID0gKG8sIHMsIGFyZzMpID0+IHsgc3VjY2VzcyhhcmczLlJlc3BvbnNlVGV4dCk7IH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuICAgIH1cclxufSIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIEJyaWRnZS5qUXVlcnkyO1xyXG5cclxubmFtZXNwYWNlIEJyaWRnZS5DdXN0b21VSU1hcmt1cC5Db21tb25cclxue1xyXG4gICAgcHVibGljIGNsYXNzIFNjcmlwdExvYWRlclxyXG4gICAge1xyXG4gICAgICAgICNyZWdpb24gRmllbGRzXHJcbiAgICAgICAgaW50IGluZGV4O1xyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBQdWJsaWMgUHJvcGVydGllc1xyXG4gICAgICAgIHB1YmxpYyBBY3Rpb24gT25Mb2FjQ29tcGxldGVkIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgSVJlYWRPbmx5TGlzdDxzdHJpbmc+IFNjcmlwdHMgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBQdWJsaWMgTWV0aG9kc1xyXG4gICAgICAgIHB1YmxpYyB2b2lkIExvYWQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKFNjcmlwdHMgPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoaW5kZXggPj0gU2NyaXB0cy5Db3VudClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgT25Mb2FjQ29tcGxldGVkKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGpRdWVyeS5HZXRTY3JpcHQoU2NyaXB0c1tpbmRleF0sIChnbG9iYWw6OlN5c3RlbS5BY3Rpb248b2JqZWN0LCBzdHJpbmcsIGdsb2JhbDo6QnJpZGdlLmpRdWVyeTIuanFYSFI+KSgoYSwgYiwgYykgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaW5kZXgrKztcclxuICAgICAgICAgICAgICAgIExvYWQoKTtcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBMb2FkQ3NzRmlsZShzdHJpbmcgdXJsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmV3IGpRdWVyeShcImhlYWRcIikuQXBwZW5kKFwiPGxpbmsgcmVsPSdzdHlsZXNoZWV0JyBocmVmPSdcIisgdXJsICsgXCInIHR5cGU9J3RleHQvY3NzJyAvPlwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIExvYWRDc3NGaWxlcyhJRW51bWVyYWJsZTxzdHJpbmc+IGNzcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB1cmwgaW4gY3NzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBMb2FkQ3NzRmlsZSh1cmwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLldpbmRvd3M7XHJcblxyXG5uYW1lc3BhY2UgQnJpZGdlLkN1c3RvbVVJTWFya3VwLkNvbW1vblxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgVHJhY2VcclxuICAgIHtcclxuICAgICAgICAjcmVnaW9uIFN0YXRpYyBGaWVsZHNcclxuICAgICAgICBpbnRlcm5hbCBzdGF0aWMgcmVhZG9ubHkgRGljdGlvbmFyeTxUeXBlLCBib29sPiBEaXNhYmxlZFR5cGVzRm9yVHJhY2UgPSBuZXcgRGljdGlvbmFyeTxUeXBlLCBib29sPigpO1xyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBQdWJsaWMgTWV0aG9kc1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBMb2cob2JqZWN0IGNhbGxlciwgb2JqZWN0IFZhbHVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGNhbGxlciAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaXNEaXNhYmxlZCA9IFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkV4dGVuc2lvbnMuVHJ5R2V0VmFsdWU8Z2xvYmFsOjpTeXN0ZW0uVHlwZSxib29sPihEaXNhYmxlZFR5cGVzRm9yVHJhY2UsY2FsbGVyLkdldFR5cGUoKSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzRGlzYWJsZWQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBTY3JpcHQuQ2FsbChcImNvbnNvbGUubG9nXCIsIFZhbHVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBMb2cob2JqZWN0IFZhbHVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgU2NyaXB0LkNhbGwoXCJjb25zb2xlLmxvZ1wiLCBWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgTG9nKHN0cmluZyBtZXNzYWdlLCBGcmFtZXdvcmtFbGVtZW50IGVsZW1lbnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBTY3JpcHQuQ2FsbChcImNvbnNvbGUubG9nXCIsIG1lc3NhZ2UpO1xyXG4gICAgICAgICAgICBTY3JpcHQuQ2FsbChcImNvbnNvbGUubG9nXCIsIGVsZW1lbnQhPW51bGwmJmVsZW1lbnQuX3Jvb3QhPW51bGw/ZWxlbWVudC5fcm9vdC5HZXQoMCk6KEh0bWw1LkVsZW1lbnQpbnVsbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgT3BlcmF0aW9uV2FzQ2FuY2VsZWQoc3RyaW5nIG9wZXJhdGlvbk5hbWUsIHN0cmluZyByZWFzb24pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBTY3JpcHQuQ2FsbChcImNvbnNvbGUubG9nXCIsIHJlYXNvbiArIFwiIEZvciB0aGlzIHJlYXNvbiBvcGVyYXRpb24gd2FzIGNhbmNlbGVkLkBvcGVyYXRpb25OYW1lOlwiICsgb3BlcmF0aW9uTmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuICAgIH1cclxufSIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkRpYWdub3N0aWNzO1xyXG5cclxubmFtZXNwYWNlIEJyaWRnZS5DdXN0b21VSU1hcmt1cC5Db21tb25cclxue1xyXG4gICAgcHVibGljIGNsYXNzIFhtbEludGVsbGlzZW5zZUluZm9cclxuICAgIHtcclxuICAgICAgICAjcmVnaW9uIENvbnN0cnVjdG9yc1xyXG4gICAgICAgIHB1YmxpYyBYbWxJbnRlbGxpc2Vuc2VJbmZvKHN0cmluZyB0YWdOYW1lLCBUeXBlIHR5cGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBEZWJ1Zy5Bc3NlcnQodGFnTmFtZSAhPSBudWxsKTtcclxuICAgICAgICAgICAgRGVidWcuQXNzZXJ0KHR5cGUgIT0gbnVsbCk7XHJcbiAgICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgVGFnTmFtZSA9IHRhZ05hbWU7XHJcbiAgICAgICAgICAgIFR5cGUgPSB0eXBlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gUHVibGljIFByb3BlcnRpZXNcclxuICAgICAgICBwdWJsaWMgc3RyaW5nW10gQ2hpbGRyZW5UYWdzIHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBUYWdOYW1lIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVHlwZSBUeXBlIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuICAgIH1cclxufSIsInVzaW5nIEJyaWRnZS5DdXN0b21VSU1hcmt1cC5VSTtcclxuXHJcbm5hbWVzcGFjZSBCcmlkZ2UuQ3VzdG9tVUlNYXJrdXAuTGlicmFyaWVzLkNvZGVNaXJyb3Jcclxue1xyXG4gICAgc3RhdGljIGNsYXNzIEVsZW1lbnRzXHJcbiAgICB7XHJcbiAgICAgICAgI3JlZ2lvbiBQdWJsaWMgTWV0aG9kc1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBSZWdpc3RlclRvQnVpbGRlcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBCdWlsZGVyLlJlZ2lzdGVyKFwiVUlFZGl0b3JcIiwgKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uV2luZG93cy5GcmFtZXdvcmtFbGVtZW50PilCdWlsZGVyLkNyZWF0ZTxVSUVkaXRvcj4pO1xyXG5cclxuICAgICAgICAgICAgQnVpbGRlci5SZWdpc3RlcihcIlhtbEVkaXRvclwiLCAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5XaW5kb3dzLkZyYW1ld29ya0VsZW1lbnQ+KUJ1aWxkZXIuQ3JlYXRlPFhtbEVkaXRvcj4pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcbiAgICB9XHJcbn0iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uV2luZG93cztcclxudXNpbmcgQnJpZGdlLkN1c3RvbVVJTWFya3VwLkNvbW1vbjtcclxuXHJcbm5hbWVzcGFjZSBCcmlkZ2UuQ3VzdG9tVUlNYXJrdXAuTGlicmFyaWVzLkNvZGVNaXJyb3Jcclxue1xyXG4gICAgY2xhc3MgVGFnSW5mb1xyXG4gICAge1xyXG4gICAgICAgICNyZWdpb24gUHVibGljIFByb3BlcnRpZXNcclxuICAgICAgICBwdWJsaWMgSUNvbGxlY3Rpb248QXR0cmlidXRlSW5mbz4gQXR0cmlidXRlcyB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIElDb2xsZWN0aW9uPHN0cmluZz4gQ2hpbGRyZW5UYWdzIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIE5hbWUgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuICAgIH1cclxuXHJcbiAgICBjbGFzcyBBdHRyaWJ1dGVJbmZvXHJcbiAgICB7XHJcbiAgICAgICAgI3JlZ2lvbiBQdWJsaWMgUHJvcGVydGllc1xyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgTmFtZSB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIElDb2xsZWN0aW9uPHN0cmluZz4gVmFsdWVzIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcbiAgICB9XHJcblxyXG4gICAgY2xhc3MgU2NoZW1hSW5mb1xyXG4gICAge1xyXG4gICAgICAgICNyZWdpb24gUHVibGljIFByb3BlcnRpZXNcclxuICAgICAgICBwdWJsaWMgSUNvbGxlY3Rpb248VGFnSW5mbz4gVGFncyB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIFB1YmxpYyBNZXRob2RzXHJcblxyXG4gICAgICAgIHN0YXRpYyB2b2lkIEZvcmNlVG9Mb2FkRGVwZW5kZW5jeVByb3BlcnRpZXMoVHlwZSB0eXBlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQWN0aXZhdG9yLkNyZWF0ZUluc3RhbmNlKHR5cGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFNjaGVtYUluZm8gQ3JlYXRlRnJvbShJRW51bWVyYWJsZTxYbWxJbnRlbGxpc2Vuc2VJbmZvPiBpbnRlbGxpc2Vuc2VJbmZvcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBzY2hlbWFJbmZvID0gbmV3IFNjaGVtYUluZm9cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVGFncyA9IG5ldyBMaXN0PFRhZ0luZm8+KClcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBwYWlyIGluIGludGVsbGlzZW5zZUluZm9zKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IHBhaXIuVGFnTmFtZTtcclxuICAgICAgICAgICAgICAgIHZhciB0eXBlID0gcGFpci5UeXBlO1xyXG5cclxuICAgICAgICAgICAgICAgIEZvcmNlVG9Mb2FkRGVwZW5kZW5jeVByb3BlcnRpZXModHlwZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHRhZyA9IG5ldyBUYWdJbmZvXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgTmFtZSA9IG5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgQXR0cmlidXRlcyA9IG5ldyBMaXN0PEF0dHJpYnV0ZUluZm8+KClcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB2YXIgZGVwZW5kZW5jeVByb3BlcnRpZXMgPSBEZXBlbmRlbmN5UHJvcGVydHkuR2V0QWxsUHJvcGVydGllcyh0eXBlKTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBkcCBpbiBkZXBlbmRlbmN5UHJvcGVydGllcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYXR0cmlidXRlSW5mbyA9IG5ldyBBdHRyaWJ1dGVJbmZvIHtOYW1lID0gZHAuTmFtZX07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRwLlByb3BlcnR5VHlwZSA9PSB0eXBlb2YoYm9vbCkpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVJbmZvLlZhbHVlcyA9IG5ld1tdIHtcInRydWVcIiwgXCJmYWxzZVwifTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkcC5Qcm9wZXJ0eVR5cGUuSXNFbnVtKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlSW5mby5WYWx1ZXMgPSBFbnVtLkdldE5hbWVzKGRwLlByb3BlcnR5VHlwZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB0YWcuQXR0cmlidXRlcy5BZGQoYXR0cmlidXRlSW5mbyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAocGFpci5DaGlsZHJlblRhZ3MgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0YWcuQ2hpbGRyZW5UYWdzID0gcGFpci5DaGlsZHJlblRhZ3M7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzY2hlbWFJbmZvLlRhZ3MuQWRkKHRhZyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzY2hlbWFJbmZvO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG9iamVjdCBUb0pzb24oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGluc3RhbmNlID0gT2JqZWN0TGl0ZXJhbC5DcmVhdGU8b2JqZWN0PigpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHRhZyBpbiBUYWdzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXR0cmlidXRlcyA9IE9iamVjdExpdGVyYWwuQ3JlYXRlPG9iamVjdD4oKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgYXR0cmlidXRlSW5mbyBpbiB0YWcuQXR0cmlidXRlcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzW2F0dHJpYnV0ZUluZm8uTmFtZV0gPSBhdHRyaWJ1dGVJbmZvLlZhbHVlcztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgdGFnT2JqID0gT2JqZWN0TGl0ZXJhbC5DcmVhdGU8b2JqZWN0PigpO1xyXG4gICAgICAgICAgICAgICAgdGFnT2JqW1wiYXR0cnNcIl0gPSBhdHRyaWJ1dGVzO1xyXG4gICAgICAgICAgICAgICAgdGFnT2JqW1wiY2hpbGRyZW5cIl0gPSB0YWcuQ2hpbGRyZW5UYWdzO1xyXG5cclxuICAgICAgICAgICAgICAgIGluc3RhbmNlW3RhZy5OYW1lXSA9IHRhZ09iajtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGluc3RhbmNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcbiAgICB9XHJcbn0iLCJ1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxuXHJcbm5hbWVzcGFjZSBTeXN0ZW0uQ29tcG9uZW50TW9kZWxcclxue1xyXG4gICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgLy8vICAgICBUaGUgYmFnXHJcbiAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgLy8vIDxzZWVhbHNvIGNyZWY9XCJTeXN0ZW0uQ29tcG9uZW50TW9kZWwuSU5vdGlmeVByb3BlcnR5Q2hhbmdlZFwiIC8+XHJcbiAgICBbU2VyaWFsaXphYmxlXVxyXG4gICAgcHVibGljIGNsYXNzIEJhZyA6IElOb3RpZnlQcm9wZXJ0eUNoYW5nZWRcclxuICAgIHtcclxuICAgICAgICAjcmVnaW9uIEZpZWxkc1xyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gICAgIFRoZSBlbnRyaWVzXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICByZWFkb25seSBEaWN0aW9uYXJ5PHN0cmluZywgb2JqZWN0PiBfZW50cmllcyA9IG5ldyBEaWN0aW9uYXJ5PHN0cmluZywgb2JqZWN0PigpO1xyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBQdWJsaWMgSW5kZXhlcnNcclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vICAgICBHZXRzIG9yIHNldHMgdGhlIDxzZWUgY3JlZj1cIlN5c3RlbS5PYmplY3RcIiAvPiB3aXRoIHRoZSBzcGVjaWZpZWQgcHJvcGVydHkgbmFtZS5cclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIC8vLyA8dmFsdWU+XHJcbiAgICAgICAgLy8vICAgICBUaGUgPHNlZSBjcmVmPVwiU3lzdGVtLk9iamVjdFwiIC8+LlxyXG4gICAgICAgIC8vLyA8L3ZhbHVlPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInByb3BlcnR5TmFtZVwiPk5hbWUgb2YgdGhlIHByb3BlcnR5LjwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxyZXR1cm5zPjwvcmV0dXJucz5cclxuICAgICAgICBwdWJsaWMgbmV3IG9iamVjdCB0aGlzW3N0cmluZyBwcm9wZXJ0eU5hbWVdXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gR2V0VmFsdWUocHJvcGVydHlOYW1lKTsgfVxyXG4gICAgICAgICAgICBzZXQgeyBTZXRWYWx1ZShwcm9wZXJ0eU5hbWUsIHZhbHVlKTsgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gUHVibGljIE1ldGhvZHNcclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vICAgICBEZXRlcm1pbmVzIHdoZXRoZXIgdGhlIHNwZWNpZmllZCBwcm9wZXJ0eSBuYW1lIGNvbnRhaW5zIGtleS5cclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInByb3BlcnR5TmFtZVwiPk5hbWUgb2YgdGhlIHByb3BlcnR5LjwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxyZXR1cm5zPlxyXG4gICAgICAgIC8vLyAgICAgPGM+dHJ1ZTwvYz4gaWYgdGhlIHNwZWNpZmllZCBwcm9wZXJ0eSBuYW1lIGNvbnRhaW5zIGtleTsgb3RoZXJ3aXNlLCA8Yz5mYWxzZTwvYz4uXHJcbiAgICAgICAgLy8vIDwvcmV0dXJucz5cclxuICAgICAgICBwdWJsaWMgYm9vbCBDb250YWluc0tleShzdHJpbmcgcHJvcGVydHlOYW1lKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9lbnRyaWVzLkNvbnRhaW5zS2V5KHByb3BlcnR5TmFtZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vICAgICBEZXRlcm1pbmVzIHdoZXRoZXIgdGhlIHNwZWNpZmllZCBwcm9wZXJ0eSBuYW1lIGNvbnRhaW5zIGtleS5cclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInByb3BlcnR5TmFtZVwiPk5hbWUgb2YgdGhlIHByb3BlcnR5LjwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxyZXR1cm5zPlxyXG4gICAgICAgIC8vLyAgICAgPGM+dHJ1ZTwvYz4gaWYgdGhlIHNwZWNpZmllZCBwcm9wZXJ0eSBuYW1lIGNvbnRhaW5zIGtleTsgb3RoZXJ3aXNlLCA8Yz5mYWxzZTwvYz4uXHJcbiAgICAgICAgLy8vIDwvcmV0dXJucz5cclxuICAgICAgICBwdWJsaWMgYm9vbCBDb250YWluc0tleShFbnVtIHByb3BlcnR5TmFtZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBDb250YWluc0tleShwcm9wZXJ0eU5hbWUuVG9TdHJpbmcoKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vICAgICBHZXRzIHRoZSB2YWx1ZS5cclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInByb3BlcnR5TmFtZVwiPk5hbWUgb2YgdGhlIHByb3BlcnR5LjwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxyZXR1cm5zPjwvcmV0dXJucz5cclxuICAgICAgICBwdWJsaWMgb2JqZWN0IEdldFZhbHVlKHN0cmluZyBwcm9wZXJ0eU5hbWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBvYmplY3QgdmFsdWUgPSBudWxsO1xyXG4gICAgICAgICAgICBfZW50cmllcy5UcnlHZXRWYWx1ZShwcm9wZXJ0eU5hbWUsIG91dCB2YWx1ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gICAgIFNldHMgdGhlIHZhbHVlLlxyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwicHJvcGVydHlOYW1lXCI+TmFtZSBvZiB0aGUgcHJvcGVydHkuPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJ2YWx1ZVwiPlRoZSB2YWx1ZS48L3BhcmFtPlxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFNldFZhbHVlKHN0cmluZyBwcm9wZXJ0eU5hbWUsIG9iamVjdCB2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBvbGRWYWx1ZSA9IEdldFZhbHVlKHByb3BlcnR5TmFtZSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIVJlZmVyZW5jZUVxdWFscyhvbGRWYWx1ZSwgbnVsbCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChvbGRWYWx1ZS5FcXVhbHModmFsdWUpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKFJlZmVyZW5jZUVxdWFscyhvbGRWYWx1ZSxudWxsICkgJiYgUmVmZXJlbmNlRXF1YWxzKHZhbHVlLG51bGwpIClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBfZW50cmllc1twcm9wZXJ0eU5hbWVdID0gdmFsdWU7XHJcblxyXG4gICAgICAgICAgICBPblByb3BlcnR5Q2hhbmdlZChwcm9wZXJ0eU5hbWUsIHZhbHVlLCBvbGRWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBJTm90aWZ5UHJvcGVydHlDaGFuZ2VkIE1lbWJlcnNcclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vICAgICBOb3RpZmllcyBjbGllbnRzIHRoYXQgYSBwcm9wZXJ0eSB2YWx1ZSBoYXMgY2hhbmdlZC5cclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIFtmaWVsZDogTm9uU2VyaWFsaXplZF1cclxuICAgICAgICBwdWJsaWMgZXZlbnQgUHJvcGVydHlDaGFuZ2VkRXZlbnRIYW5kbGVyIFByb3BlcnR5Q2hhbmdlZDtcclxuXHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyAgICAgQ2FsbGVkIHdoZW4gW3Byb3BlcnR5IGNoYW5nZWRdLlxyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwicHJvcFwiPlRoZSBwcm9wZXJ0eS48L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cIm5ld1ZhbHVlXCI+VGhlIG5ldyB2YWx1ZS48L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cIm9sZFZhbHVlXCI+VGhlIG9sZCB2YWx1ZS48L3BhcmFtPlxyXG4gICAgICAgIHZvaWQgT25Qcm9wZXJ0eUNoYW5nZWQoc3RyaW5nIHByb3AsIG9iamVjdCBuZXdWYWx1ZSwgb2JqZWN0IG9sZFZhbHVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgUHJvcGVydHlDaGFuZ2VkIT1udWxsP2dsb2JhbDo6QnJpZGdlLlNjcmlwdC5Gcm9tTGFtYmRhKCgpPT5Qcm9wZXJ0eUNoYW5nZWQuSW52b2tlKHRoaXMsIG5ldyBCYWdDaGFuZ2VkRXZlbnRBcmdzKHByb3AsIG5ld1ZhbHVlLCBvbGRWYWx1ZSkpKTpudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyAgICAgQ2FsbGVkIHdoZW4gW3Byb3BlcnR5IGNoYW5nZWRdLlxyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwicHJvcFwiPlRoZSBwcm9wZXJ0eS48L3BhcmFtPlxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIHZvaWQgT25Qcm9wZXJ0eUNoYW5nZWQoc3RyaW5nIHByb3ApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBQcm9wZXJ0eUNoYW5nZWQhPW51bGw/Z2xvYmFsOjpCcmlkZ2UuU2NyaXB0LkZyb21MYW1iZGEoKCk9PlByb3BlcnR5Q2hhbmdlZC5JbnZva2UodGhpcywgbmV3IEJhZ0NoYW5nZWRFdmVudEFyZ3MocHJvcCkpKTpudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcbiAgICB9XHJcbn0iLCJ1c2luZyBTeXN0ZW0uV2luZG93cztcclxudXNpbmcgU3lzdGVtLldpbmRvd3MuQ29udHJvbHM7XHJcbnVzaW5nIEJyaWRnZS5DdXN0b21VSU1hcmt1cC5VSTtcclxuXHJcbm5hbWVzcGFjZSBCcmlkZ2UuQ3VzdG9tVUlNYXJrdXAuTGlicmFyaWVzLlNlbWFudGljVUlcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBFbGVtZW50c1xyXG4gICAge1xyXG5cclxuICAgICAgICBzdGF0aWMgSHRtbEVsZW1lbnQgQ3JlYXRlRWxlbWVudChzdHJpbmcgdGFnID0gbnVsbCwgc3RyaW5nIGNsYXNzTmFtZSA9IG51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEh0bWxFbGVtZW50KHRhZyxjbGFzc05hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAjcmVnaW9uIFB1YmxpYyBNZXRob2RzXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIFJlZ2lzdGVyVG9CdWlsZGVyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIC8vIHJvd1xyXG4gICAgICAgICAgICBCdWlsZGVyLlJlZ2lzdGVyKFwicm93XCIsIChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLldpbmRvd3MuRnJhbWV3b3JrRWxlbWVudD4pKCgpID0+IENyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJyb3dcIikpKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAyOyBpIDw9IDE2OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBjbGFzc05hbWUgPSBpLlRvV29yZCgpICsgXCIgY29sdW1uIHJvd1wiO1xyXG5cclxuICAgICAgICAgICAgICAgIEJ1aWxkZXIuUmVnaXN0ZXIoY2xhc3NOYW1lLlJlcGxhY2UoXCIgXCIsIFwiX1wiKSwgKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uV2luZG93cy5GcmFtZXdvcmtFbGVtZW50PikoKCkgPT4gQ3JlYXRlRWxlbWVudChcImRpdlwiLCBjbGFzc05hbWUpKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICAvLyBjb2x1bW5cclxuICAgICAgICAgICAgQnVpbGRlci5SZWdpc3RlcihcImNvbHVtblwiLCAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5XaW5kb3dzLkZyYW1ld29ya0VsZW1lbnQ+KSgoKSA9PiBDcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiY29sdW1uXCIpKSk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMjsgaSA8PSAxNjsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2xhc3NOYW1lID0gaS5Ub1dvcmQoKSArIFwiIHdpZGUgY29sdW1uXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgQnVpbGRlci5SZWdpc3RlcihjbGFzc05hbWUuUmVwbGFjZShcIiBcIiwgXCJfXCIpLCAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5XaW5kb3dzLkZyYW1ld29ya0VsZW1lbnQ+KSgoKSA9PiBDcmVhdGVFbGVtZW50KFwiZGl2XCIsIGNsYXNzTmFtZSkpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgXHJcblxyXG4gICAgICAgICAgICAvLyBUZXh0QmxvY2tcclxuICAgICAgICAgICAgQnVpbGRlci5SZWdpc3RlcihcIlRleHRCbG9ja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5XaW5kb3dzLkZyYW1ld29ya0VsZW1lbnQ+KUJ1aWxkZXIuQ3JlYXRlPFRleHRCbG9jaz4pO1xyXG5cclxuICAgICAgICAgICAgQnVpbGRlci5SZWdpc3RlcihcIkZpZWxkXCIsICAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5XaW5kb3dzLkZyYW1ld29ya0VsZW1lbnQ+KUJ1aWxkZXIuQ3JlYXRlPEZpZWxkPik7XHJcblxyXG4gICAgICAgICAgICBCdWlsZGVyLlJlZ2lzdGVyKFwidGV4dElucHV0XCIsIChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLldpbmRvd3MuRnJhbWV3b3JrRWxlbWVudD4pQnVpbGRlci5DcmVhdGU8SW5wdXRUZXh0Pik7XHJcbiAgICAgICAgICAgIEJ1aWxkZXIuUmVnaXN0ZXIoXCJ0ZXh0Qm94XCIsIChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLldpbmRvd3MuRnJhbWV3b3JrRWxlbWVudD4pQnVpbGRlci5DcmVhdGU8SW5wdXRUZXh0Pik7XHJcbiAgICAgICAgICAgIEJ1aWxkZXIuUmVnaXN0ZXIoXCJ0ZXh0QXJlYVwiLCAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5XaW5kb3dzLkZyYW1ld29ya0VsZW1lbnQ+KUJ1aWxkZXIuQ3JlYXRlPFRleHRBcmVhPik7XHJcbiAgICAgICAgICAgIEJ1aWxkZXIuUmVnaXN0ZXIoXCJGaWVsZFN0cmluZ1wiLCAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5XaW5kb3dzLkZyYW1ld29ya0VsZW1lbnQ+KUJ1aWxkZXIuQ3JlYXRlPEZpZWxkU3RyaW5nPik7XHJcbiAgICAgICAgICAgIEJ1aWxkZXIuUmVnaXN0ZXIoXCJGaWVsZEludDMyXCIsIChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLldpbmRvd3MuRnJhbWV3b3JrRWxlbWVudD4pQnVpbGRlci5DcmVhdGU8RmllbGRJbnQzMj4pO1xyXG4gICAgICAgICAgICBCdWlsZGVyLlJlZ2lzdGVyKFwiRmllbGREZWNpbWFsXCIsIChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLldpbmRvd3MuRnJhbWV3b3JrRWxlbWVudD4pQnVpbGRlci5DcmVhdGU8RmllbGREZWNpbWFsPik7IFxyXG4gICAgICAgICAgICBCdWlsZGVyLlJlZ2lzdGVyKFwiQ29udGVudFByZXNlbnRlclwiLCAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5XaW5kb3dzLkZyYW1ld29ya0VsZW1lbnQ+KSgoKSA9PiBuZXcgQ29udGVudFByZXNlbnRlcigpKSk7XHJcbiAgICAgICAgICAgIEJ1aWxkZXIuUmVnaXN0ZXIoXCJ1aV9yYXRpbmdcIiwgKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uV2luZG93cy5GcmFtZXdvcmtFbGVtZW50PilCdWlsZGVyLkNyZWF0ZTx1aV9yYXRpbmc+KTtcclxuICAgICAgICAgICAgQnVpbGRlci5SZWdpc3RlcihcInVpLXJhdGluZ1wiLCAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5XaW5kb3dzLkZyYW1ld29ya0VsZW1lbnQ+KUJ1aWxkZXIuQ3JlYXRlPHVpX3JhdGluZz4pO1xyXG5cclxuICAgICAgICAgICAgQnVpbGRlci5SZWdpc3RlcihcImNvbW1lbnRcIiwgKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uV2luZG93cy5GcmFtZXdvcmtFbGVtZW50PilCdWlsZGVyLkNyZWF0ZTxjb21tZW50Pik7XHJcbiAgICAgICAgICAgIEJ1aWxkZXIuUmVnaXN0ZXIoXCJ1aV9jb21tZW50c1wiLCAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5XaW5kb3dzLkZyYW1ld29ya0VsZW1lbnQ+KSgoKSA9PiBuZXcgSHRtbEVsZW1lbnQoXCJkaXZcIiwgXCJ1aSBjb21tZW50c1wiKSkpO1xyXG4gICAgICAgICAgICBCdWlsZGVyLlJlZ2lzdGVyKFwidWktY29tbWVudHNcIiwgKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uV2luZG93cy5GcmFtZXdvcmtFbGVtZW50PikoKCkgPT4gbmV3IEh0bWxFbGVtZW50KFwiZGl2XCIsIFwidWkgY29tbWVudHNcIikpKTtcclxuXHJcblxyXG4gICAgICAgICAgICBCdWlsZGVyLlJlZ2lzdGVyKFwiY29tbWVudFwiLCAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5XaW5kb3dzLkZyYW1ld29ya0VsZW1lbnQ+KUJ1aWxkZXIuQ3JlYXRlPGNvbW1lbnQ+KTtcclxuXHJcbiAgICAgICAgICAgIEJ1aWxkZXIuUmVnaXN0ZXIoXCJ1aV90b3BfYXR0YWNoZWRfdGFidWxhcl9tZW51XCIsIChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLldpbmRvd3MuRnJhbWV3b3JrRWxlbWVudD4pQnVpbGRlci5DcmVhdGU8dWlfdG9wX2F0dGFjaGVkX3RhYnVsYXJfbWVudT4pO1xyXG4gICAgICAgICAgICBCdWlsZGVyLlJlZ2lzdGVyKFwiVGFiXCIsIChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLldpbmRvd3MuRnJhbWV3b3JrRWxlbWVudD4pQnVpbGRlci5DcmVhdGU8VGFiSXRlbT4pO1xyXG4gICAgICAgICAgICBCdWlsZGVyLlJlZ2lzdGVyKFwiVGFiSXRlbVwiLCAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5XaW5kb3dzLkZyYW1ld29ya0VsZW1lbnQ+KUJ1aWxkZXIuQ3JlYXRlPFRhYkl0ZW0+KTtcclxuXHJcblxyXG4gICAgICAgICAgICBCdWlsZGVyLlJlZ2lzdGVyKFwiY29tYm9cIiwgKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uV2luZG93cy5GcmFtZXdvcmtFbGVtZW50PilCdWlsZGVyLkNyZWF0ZTxDb21ibz4pO1xyXG4gICAgICAgICAgICBCdWlsZGVyLlJlZ2lzdGVyKFwiY29tYm9Cb3hcIiwgKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uV2luZG93cy5GcmFtZXdvcmtFbGVtZW50PilCdWlsZGVyLkNyZWF0ZTxDb21ibz4pO1xyXG4gICAgICAgICAgICBCdWlsZGVyLlJlZ2lzdGVyKFwidWkuc2VsZWN0aW9uLmRyb3Bkb3duXCIsIChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLldpbmRvd3MuRnJhbWV3b3JrRWxlbWVudD4pQnVpbGRlci5DcmVhdGU8Q29tYm8+KTtcclxuXHJcbiAgICAgICAgICAgIEJ1aWxkZXIuUmVnaXN0ZXIoXCJEYXRlUGlja2VyXCIsIChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLldpbmRvd3MuRnJhbWV3b3JrRWxlbWVudD4pQnVpbGRlci5DcmVhdGU8RGF0ZVBpY2tlcj4pO1xyXG4gICAgICAgICAgICBcclxuXHJcblxyXG4gICAgICAgICAgICB2YXIgY2xhc3NOYW1lcyA9IG5ld1tdXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFwidWkgc2VnbWVudFwiLFxyXG4gICAgICAgICAgICAgICAgXCJ1aSBmb3JtXCIsXHJcbiAgICAgICAgICAgICAgICBcInVpIGdyaWRcIixcclxuICAgICAgICAgICAgICAgIFwidWkgcGFnZSBncmlkXCIsXHJcbiAgICAgICAgICAgICAgICBcInVpIHRleHQgbWVudSBuYXZiYXJcIixcclxuICAgICAgICAgICAgICAgIFwibGVmdCBtZW51XCIsXHJcbiAgICAgICAgICAgICAgICBcInVpIHN0YWNrZWRcIixcclxuICAgICAgICAgICAgICAgIFwiY29tcHV0ZXIgdGFibGV0IG9ubHkgcm93XCIsXHJcbiAgICAgICAgICAgICAgICBcInVpIG5hdmJhciBtZW51XCIsXHJcbiAgICAgICAgICAgICAgICBcIm1vYmlsZSBvbmx5IHJvd1wiLFxyXG4gICAgICAgICAgICAgICAgXCJyaWdodCBtZW51XCIsXHJcbiAgICAgICAgICAgICAgICBcInVpIGhpZGRlbiBjbGVhcmluZyBkaXZpZGVyXCIsXHJcbiAgICAgICAgICAgICAgICBcImNhcmRcIixcclxuICAgICAgICAgICAgICAgIFwidWkgY2FyZFwiLFxyXG4gICAgICAgICAgICAgICAgXCJ1aSBjYXJkc1wiLFxyXG4gICAgICAgICAgICAgICAgXCJleHRyYSBjb250ZW50XCIsXHJcbiAgICAgICAgICAgICAgICBcImNvbnRlbnRcIixcclxuICAgICAgICAgICAgICAgIFwidWkgZGl2aWRlclwiLFxyXG4gICAgICAgICAgICAgICAgXCJpdGVtXCIsXHJcbiAgICAgICAgICAgICAgICBcInVpIG1lbnVcIixcclxuICAgICAgICAgICAgICAgIFwidWkgdmVydGljYWwgbWVudVwiLFxyXG4gICAgICAgICAgICAgICAgXCJ1aSBlcXVhbCB3aWR0aCBncmlkXCIsXHJcbiAgICAgICAgICAgICAgICBcInVpIGNvbnRhaW5lclwiLFxyXG4gICAgICAgICAgICAgICAgXCJ1aSBidXR0b25cIixcclxuICAgICAgICAgICAgICAgIFwidWkgYWN0aXZlIGJ1dHRvblwiLFxyXG4gICAgICAgICAgICAgICAgXCJ1aSBiYXNpYyBidXR0b25cIixcclxuICAgICAgICAgICAgICAgIFwidWkgYmFzaWMgYWN0aXZlIGJ1dHRvblwiLFxyXG4gICAgICAgICAgICAgICAgXCJ1aSBwYWdpbmF0aW9uIG1lbnVcIixcclxuICAgICAgICAgICAgICAgIFwiYWN0aXZlIGl0ZW1cIlxyXG5cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBjbGFzc05hbWUgaW4gY2xhc3NOYW1lcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgQnVpbGRlci5SZWdpc3RlcihjbGFzc05hbWUuUmVwbGFjZShcIiBcIiwgXCJfXCIpLCAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5XaW5kb3dzLkZyYW1ld29ya0VsZW1lbnQ+KSgoKSA9PiBDcmVhdGVFbGVtZW50KFwiZGl2XCIsIGNsYXNzTmFtZSkpKTtcclxuICAgICAgICAgICAgICAgIEJ1aWxkZXIuUmVnaXN0ZXIoY2xhc3NOYW1lLlJlcGxhY2UoXCIgXCIsIFwiLlwiKSwgKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uV2luZG93cy5GcmFtZXdvcmtFbGVtZW50PikoKCkgPT4gQ3JlYXRlRWxlbWVudChcImRpdlwiLCBjbGFzc05hbWUpKSk7XHJcbiAgICAgICAgICAgICAgICBCdWlsZGVyLlJlZ2lzdGVyKGNsYXNzTmFtZS5SZXBsYWNlKFwiIFwiLCBcIi1cIiksIChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLldpbmRvd3MuRnJhbWV3b3JrRWxlbWVudD4pKCgpID0+IENyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgY2xhc3NOYW1lKSkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBCdWlsZGVyLlJlZ2lzdGVyKFwidWktaW1hZ2VcIiwgKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uV2luZG93cy5GcmFtZXdvcmtFbGVtZW50PikoKCkgPT4gQ3JlYXRlRWxlbWVudChcImltZ1wiLCBcInVpIGltYWdlXCIpKSk7XHJcbiAgICAgICAgICAgIEJ1aWxkZXIuUmVnaXN0ZXIoXCJ1aS5pbWFnZVwiLCAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5XaW5kb3dzLkZyYW1ld29ya0VsZW1lbnQ+KSgoKSA9PiBDcmVhdGVFbGVtZW50KFwiaW1nXCIsIFwidWkgaW1hZ2VcIikpKTtcclxuXHJcblxyXG4gICAgICAgICAgICBCdWlsZGVyLlJlZ2lzdGVyKFwiaGVhZGVyXCIsIChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLldpbmRvd3MuRnJhbWV3b3JrRWxlbWVudD4pKCgpID0+IENyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJoZWFkZXJcIikpKTtcclxuICAgICAgICAgICAgQnVpbGRlci5SZWdpc3RlcihcInVpLmhlYWRlci4xXCIsIChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLldpbmRvd3MuRnJhbWV3b3JrRWxlbWVudD4pKCgpID0+IENyZWF0ZUVsZW1lbnQoXCJoMVwiLCBcInVpIGhlYWRlclwiKSkpO1xyXG4gICAgICAgICAgICBCdWlsZGVyLlJlZ2lzdGVyKFwidWkuaGVhZGVyLjJcIiwgKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uV2luZG93cy5GcmFtZXdvcmtFbGVtZW50PikoKCkgPT4gQ3JlYXRlRWxlbWVudChcImgyXCIsIFwidWkgaGVhZGVyXCIpKSk7XHJcbiAgICAgICAgICAgIEJ1aWxkZXIuUmVnaXN0ZXIoXCJ1aS5oZWFkZXIuM1wiLCAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5XaW5kb3dzLkZyYW1ld29ya0VsZW1lbnQ+KSgoKSA9PiBDcmVhdGVFbGVtZW50KFwiaDNcIiwgXCJ1aSBoZWFkZXJcIikpKTtcclxuXHJcblxyXG4gICAgICAgICAgICBCdWlsZGVyLlJlZ2lzdGVyKFwidWkuaGVhZGVyLjNcIiwgKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uV2luZG93cy5GcmFtZXdvcmtFbGVtZW50PikoKCkgPT4gQ3JlYXRlRWxlbWVudChcImlcIiwgXCJ1aSBoZWFkZXJcIikpKTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBpY29uVHlwZSBpbiBJY29uVHlwZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIEJ1aWxkZXIuUmVnaXN0ZXIoXCJpY29uLVwiKyBpY29uVHlwZSwgKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uV2luZG93cy5GcmFtZXdvcmtFbGVtZW50PikoKCkgPT4gQ3JlYXRlRWxlbWVudChcImlcIiwgaWNvblR5cGUgKyBcIiBpY29uXCIpKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIEJ1aWxkZXIuUmVnaXN0ZXIoXCJ1aS1jZWxsZWQtdGFibGVcIiwgKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uV2luZG93cy5GcmFtZXdvcmtFbGVtZW50PikoKCkgPT4gQ3JlYXRlRWxlbWVudChcInRhYmxlXCIsIFwidWkgY2VsbGVkIHRhYmxlXCIpKSk7XHJcbiAgICAgICAgICAgIEJ1aWxkZXIuUmVnaXN0ZXIoXCJ0aGVhZFwiLCAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5XaW5kb3dzLkZyYW1ld29ya0VsZW1lbnQ+KSgoKSA9PiBDcmVhdGVFbGVtZW50KFwidGhlYWRcIikpKTtcclxuICAgICAgICAgICAgQnVpbGRlci5SZWdpc3RlcihcInRyXCIsIChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLldpbmRvd3MuRnJhbWV3b3JrRWxlbWVudD4pKCgpID0+IENyZWF0ZUVsZW1lbnQoXCJ0clwiKSkpO1xyXG4gICAgICAgICAgICBCdWlsZGVyLlJlZ2lzdGVyKFwidGhcIiwgKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uV2luZG93cy5GcmFtZXdvcmtFbGVtZW50PikoKCkgPT4gQ3JlYXRlRWxlbWVudChcInRoXCIpKSk7XHJcbiAgICAgICAgICAgIEJ1aWxkZXIuUmVnaXN0ZXIoXCJ0Ym9keVwiLCAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5XaW5kb3dzLkZyYW1ld29ya0VsZW1lbnQ+KSgoKSA9PiBDcmVhdGVFbGVtZW50KFwidGJvZHlcIikpKTtcclxuICAgICAgICAgICAgQnVpbGRlci5SZWdpc3RlcihcInRkXCIsIChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLldpbmRvd3MuRnJhbWV3b3JrRWxlbWVudD4pKCgpID0+IENyZWF0ZUVsZW1lbnQoXCJ0ZFwiKSkpO1xyXG5cclxuXHJcbiAgICAgICAgICAgIEJ1aWxkZXIuUmVnaXN0ZXIoXCJJdGVtc0NvbnRyb2xcIiwgKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uV2luZG93cy5GcmFtZXdvcmtFbGVtZW50PilCdWlsZGVyLkNyZWF0ZTxJdGVtc0NvbnRyb2w+KTtcclxuICAgICAgICAgICAgQnVpbGRlci5SZWdpc3RlcihcIkRhdGFHcmlkXCIsIChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLldpbmRvd3MuRnJhbWV3b3JrRWxlbWVudD4pQnVpbGRlci5DcmVhdGUgPERhdGFHcmlkPik7XHJcbiAgICAgICAgICAgIEJ1aWxkZXIuUmVnaXN0ZXIoXCJEYXRhR3JpZENvbHVtblwiLCAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5XaW5kb3dzLkZyYW1ld29ya0VsZW1lbnQ+KUJ1aWxkZXIuQ3JlYXRlPERhdGFHcmlkQ29sdW1uPik7IFxyXG4gICAgICAgICAgICBCdWlsZGVyLlJlZ2lzdGVyKFwiTGlzdEJveFwiLCAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5XaW5kb3dzLkZyYW1ld29ya0VsZW1lbnQ+KUJ1aWxkZXIuQ3JlYXRlIDxMaXN0Qm94Pik7XHJcblxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgXHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgIHN0YXRpYyByZWFkb25seSBzdHJpbmdbXSBJY29uVHlwZXMgPSBuZXcgc3RyaW5nW11cclxuICAgICAgICB7XHJcblxyXG5cImNvbnRlbnRcIixcclxuXCJlZGl0XCIsXHJcblwiYnVnXCIsXHJcblwiYWx0ZXJuYXRlIGdpdGh1YlwiLFxyXG5cIm11c2ljXCIsXHJcblwid29ybGRcIixcclxuXCJzZWFyY2hcIixcclxuXCJncmVlbiBjaGVja1wiLFxyXG5cImxhcmdlIHJlZCBkZWxldGUgbGlua1wiLFxyXG5cImRpc2FibGVkIHdhcm5pbmcgc2lnblwiLFxyXG5cImFkZCB0byBjYWxlbmRhclwiLFxyXG5cImFkZHJlc3MgYm9va1wiLFxyXG5cImFkZHJlc3MgYm9vayBvdXRsaW5lXCIsXHJcblwiYWRkcmVzcyBjYXJkXCIsXHJcblwiYWRkcmVzcyBjYXJkIG91dGxpbmVcIixcclxuXCJhbGFybVwiLFxyXG5cImFsYXJtIG11dGVcIixcclxuXCJhbGFybSBtdXRlIG91dGxpbmVcIixcclxuXCJhbGFybSBvdXRsaW5lXCIsXHJcblwiYXRcIixcclxuXCJicm93c2VyXCIsXHJcblwiY2FsZW5kYXJcIixcclxuXCJjYWxlbmRhciBvdXRsaW5lXCIsXHJcblwiY2hlY2tlZCBjYWxlbmRhclwiLFxyXG5cImNsb3VkXCIsXHJcblwiY29kZVwiLFxyXG5cImNvbW1lbnRcIixcclxuXCJjb21tZW50IG91dGxpbmVcIixcclxuXCJjb21tZW50c1wiLFxyXG5cImNvbW1lbnRzIG91dGxpbmVcIixcclxuXCJjb3B5cmlnaHRcIixcclxuXCJjcmVhdGl2ZSBjb21tb25zXCIsXHJcblwiZGFzaGJvYXJkXCIsXHJcblwiZGVsZXRlIGNhbGVuZGFyXCIsXHJcblwiZXh0ZXJuYWxcIixcclxuXCJleHRlcm5hbCBzcXVhcmVcIixcclxuXCJleWVkcm9wcGVyXCIsXHJcblwiZmVlZFwiLFxyXG5cImZpbmRcIixcclxuXCJoYW5kIHBvaW50ZXJcIixcclxuXCJoYW5kc2hha2VcIixcclxuXCJoYXNodGFnXCIsXHJcblwiaGVhcnRiZWF0XCIsXHJcblwiaGlzdG9yeVwiLFxyXG5cImhvbWVcIixcclxuXCJob3VyZ2xhc3MgZW1wdHlcIixcclxuXCJob3VyZ2xhc3MgZW5kXCIsXHJcblwiaG91cmdsYXNzIGZ1bGxcIixcclxuXCJob3VyZ2xhc3MgaGFsZlwiLFxyXG5cImhvdXJnbGFzcyBzdGFydFwiLFxyXG5cImlkIGJhZGdlXCIsXHJcblwiaWQgY2FyZFwiLFxyXG5cImlkIGNhcmQgb3V0bGluZVwiLFxyXG5cImlkZWFcIixcclxuXCJpbWFnZVwiLFxyXG5cImluYm94XCIsXHJcblwiaW5kdXN0cnlcIixcclxuXCJsYWJcIixcclxuXCJtYWlsXCIsXHJcblwibWFpbCBvdXRsaW5lXCIsXHJcblwibWFpbCBzcXVhcmVcIixcclxuXCJtb3VzZSBwb2ludGVyXCIsXHJcblwib3BlbiBlbnZlbG9wZVwiLFxyXG5cIm9wZW4gZW52ZWxvcGUgb3V0bGluZVwiLFxyXG5cIm9wdGlvbnNcIixcclxuXCJwYWludCBicnVzaFwiLFxyXG5cInBheW1lbnRcIixcclxuXCJwZXJjZW50XCIsXHJcblwicG9kY2FzdFwiLFxyXG5cInByaXZhY3lcIixcclxuXCJwcm90ZWN0XCIsXHJcblwicmVnaXN0ZXJlZFwiLFxyXG5cInJlbW92ZSBmcm9tIGNhbGVuZGFyXCIsXHJcblwic2V0dGluZ1wiLFxyXG5cInNldHRpbmdzXCIsXHJcblwic2hvcFwiLFxyXG5cInNob3BwaW5nIGJhZ1wiLFxyXG5cInNob3BwaW5nIGJhc2tldFwiLFxyXG5cInNpZGViYXJcIixcclxuXCJzaWduYWxcIixcclxuXCJzaXRlbWFwXCIsXHJcblwidGFnXCIsXHJcblwidGFnc1wiLFxyXG5cInRhc2tzXCIsXHJcblwidGVybWluYWxcIixcclxuXCJ0ZXh0IHRlbGVwaG9uZVwiLFxyXG5cInRpY2tldFwiLFxyXG5cInRyYWRlbWFya1wiLFxyXG5cInRyb3BoeVwiLFxyXG5cIndpbmRvdyBjbG9zZVwiLFxyXG5cIndpbmRvdyBjbG9zZSBvdXRsaW5lXCIsXHJcblwid2luZG93IG1heGltaXplXCIsXHJcblwid2luZG93IG1pbmltaXplXCIsXHJcblwid2luZG93IHJlc3RvcmVcIixcclxuXCJhZGQgdG8gY2FydFwiLFxyXG5cImFkZCB1c2VyXCIsXHJcblwiYWRqdXN0XCIsXHJcblwiYXJjaGl2ZVwiLFxyXG5cImJhblwiLFxyXG5cImJvb2ttYXJrXCIsXHJcblwiY2FsbFwiLFxyXG5cImNhbGwgc3F1YXJlXCIsXHJcblwiY2xvbmVcIixcclxuXCJjbG91ZCBkb3dubG9hZFwiLFxyXG5cImNsb3VkIHVwbG9hZFwiLFxyXG5cInRhbGtcIixcclxuXCJ0YWxrIG91dGxpbmVcIixcclxuXCJjb21wcmVzc1wiLFxyXG5cImNvbmZpZ3VyZVwiLFxyXG5cImRvd25sb2FkXCIsXHJcblwiZXJhc2VcIixcclxuXCJleGNoYW5nZVwiLFxyXG5cImV4cGFuZFwiLFxyXG5cImV4dGVybmFsIHNoYXJlXCIsXHJcblwiZmlsdGVyXCIsXHJcblwiaGlkZVwiLFxyXG5cImluIGNhcnRcIixcclxuXCJMb2NrXCIsXHJcblwibWFpbCBmb3J3YXJkXCIsXHJcblwiZ3JvdXAgb2JqZWN0XCIsXHJcblwidW5ncm91cCBvYmplY3RcIixcclxuXCJwaW5cIixcclxuXCJwcmludFwiLFxyXG5cInJhbmRvbVwiLFxyXG5cInJlY3ljbGVcIixcclxuXCJyZWZyZXNoXCIsXHJcblwicmVtb3ZlIGJvb2ttYXJrXCIsXHJcblwicmVtb3ZlIHVzZXJcIixcclxuXCJyZXBlYXRcIixcclxuXCJyZXBseSBhbGxcIixcclxuXCJyZXBseVwiLFxyXG5cInJldHdlZXRcIixcclxuXCJzZW5kXCIsXHJcblwic2VuZCBvdXRsaW5lXCIsXHJcblwic2hhcmUgYWx0ZXJuYXRlXCIsXHJcblwic2hhcmUgYWx0ZXJuYXRlIHNxdWFyZVwiLFxyXG5cInNoYXJlXCIsXHJcblwic2hhcmUgc3F1YXJlXCIsXHJcblwic2lnbiBpblwiLFxyXG5cInNpZ24gb3V0XCIsXHJcblwidGhlbWVcIixcclxuXCJ0cmFuc2xhdGVcIixcclxuXCJ1bmRvXCIsXHJcblwidW5oaWRlXCIsXHJcblwidW5sb2NrIGFsdGVybmF0ZVwiLFxyXG5cInVubG9ja1wiLFxyXG5cInVwbG9hZFwiLFxyXG5cIndhaXRcIixcclxuXCJ3aXphcmRcIixcclxuXCJ3cml0ZVwiLFxyXG5cIndyaXRlIHNxdWFyZVwiLFxyXG5cIm9iamVjdCBncm91cFwiLFxyXG5cIm9iamVjdCB1bmdyb3VwXCIsXHJcblwiYW5ub3VuY2VtZW50XCIsXHJcblwiYmlydGhkYXlcIixcclxuXCJoZWxwIGNpcmNsZVwiLFxyXG5cImhlbHAgY2lyY2xlIG91dGxpbmVcIixcclxuXCJoZWxwXCIsXHJcblwiaW5mbyBjaXJjbGVcIixcclxuXCJpbmZvXCIsXHJcblwid2FybmluZyBjaXJjbGVcIixcclxuXCJ3YXJuaW5nXCIsXHJcblwid2FybmluZyBzaWduXCIsXHJcblwiY2hpbGRcIixcclxuXCJkb2N0b3JcIixcclxuXCJoYW5kaWNhcFwiLFxyXG5cInNweVwiLFxyXG5cInN0dWRlbnRcIixcclxuXCJ1c2VyXCIsXHJcblwidXNlciBjaXJjbGVcIixcclxuXCJ1c2VyIGNpcmNsZSBvdXRsaW5lXCIsXHJcblwidXNlciBvdXRsaW5lXCIsXHJcblwidXNlcnNcIixcclxuXCJmZW1hbGVcIixcclxuXCJnYXlcIixcclxuXCJnZW5kZXJsZXNzXCIsXHJcblwiaGV0ZXJvc2V4dWFsXCIsXHJcblwiaW50ZXJnZW5kZXJcIixcclxuXCJsZXNiaWFuXCIsXHJcblwibWFsZVwiLFxyXG5cIm1hblwiLFxyXG5cIm5ldXRlclwiLFxyXG5cIm5vbiBiaW5hcnkgdHJhbnNnZW5kZXJcIixcclxuXCJvdGhlciBnZW5kZXIgaG9yaXpvbnRhbFwiLFxyXG5cIm90aGVyIGdlbmRlclwiLFxyXG5cIm90aGVyIGdlbmRlciB2ZXJ0aWNhbFwiLFxyXG5cInRyYW5zZ2VuZGVyXCIsXHJcblwid29tYW5cIixcclxuXCJibG9jayBsYXlvdXRcIixcclxuXCJjcm9wXCIsXHJcblwiZ3JpZCBsYXlvdXRcIixcclxuXCJsaXN0IGxheW91dFwiLFxyXG5cIm1heGltaXplXCIsXHJcblwicmVzaXplIGhvcml6b250YWxcIixcclxuXCJyZXNpemUgdmVydGljYWxcIixcclxuXCJ6b29tXCIsXHJcblwiem9vbSBvdXRcIixcclxuXCJhbmNob3JcIixcclxuXCJiYXJcIixcclxuXCJiYXRodHViXCIsXHJcblwiYm9tYlwiLFxyXG5cImJvb2tcIixcclxuXCJidWxsc2V5ZVwiLFxyXG5cImNhbGN1bGF0b3JcIixcclxuXCJjb2NrdGFpbFwiLFxyXG5cImRpYW1vbmRcIixcclxuXCJmYXhcIixcclxuXCJmaXJlIGV4dGluZ3Vpc2hlclwiLFxyXG5cImZpcmVcIixcclxuXCJmbGFnIGNoZWNrZXJlZFwiLFxyXG5cImZsYWdcIixcclxuXCJmbGFnIG91dGxpbmVcIixcclxuXCJnaWZ0XCIsXHJcblwiaGFuZCBsaXphcmRcIixcclxuXCJoYW5kIHBlYWNlXCIsXHJcblwiaGFuZCBwYXBlclwiLFxyXG5cImhhbmQgcm9ja1wiLFxyXG5cImhhbmQgc2Npc3NvcnNcIixcclxuXCJoYW5kIHNwb2NrXCIsXHJcblwibGF3XCIsXHJcblwibGVhZlwiLFxyXG5cImxlZ2FsXCIsXHJcblwibGVtb25cIixcclxuXCJsaWZlIHJpbmdcIixcclxuXCJsaWdodG5pbmdcIixcclxuXCJtYWduZXRcIixcclxuXCJtb25leVwiLFxyXG5cIm1vb25cIixcclxuXCJwbGFuZVwiLFxyXG5cInB1enpsZVwiLFxyXG5cInJvYWRcIixcclxuXCJyb2NrZXRcIixcclxuXCJzaGlwcGluZ1wiLFxyXG5cInNob3dlclwiLFxyXG5cInNub3dmbGFrZVwiLFxyXG5cInNvY2NlclwiLFxyXG5cInN0aWNreSBub3RlXCIsXHJcblwic3RpY2t5IG5vdGUgb3V0bGluZVwiLFxyXG5cInN1aXRjYXNlXCIsXHJcblwic3VuXCIsXHJcblwidGhlcm1vbWV0ZXIgZW1wdHlcIixcclxuXCJ0aGVybW9tZXRlciBxdWFydGVyXCIsXHJcblwidGhlcm1vbWV0ZXIgaGFsZlwiLFxyXG5cInRoZXJtb21ldGVyIHRocmVlIHF1YXJ0ZXJzXCIsXHJcblwidGhlcm1vbWV0ZXIgZnVsbFwiLFxyXG5cInRyYXZlbFwiLFxyXG5cInRyZWF0bWVudFwiLFxyXG5cInR2XCIsXHJcblwidW1icmVsbGFcIixcclxuXCJhc3Rlcmlza1wiLFxyXG5cImNlcnRpZmljYXRlXCIsXHJcblwiY2lyY2xlXCIsXHJcblwiY2lyY2xlIG5vdGNoZWRcIixcclxuXCJjaXJjbGUgdGhpblwiLFxyXG5cImNyb3NzaGFpcnNcIixcclxuXCJjdWJlXCIsXHJcblwiY3ViZXNcIixcclxuXCJlbGxpcHNpcyBob3Jpem9udGFsXCIsXHJcblwiZWxsaXBzaXMgdmVydGljYWxcIixcclxuXCJxdW90ZSBsZWZ0XCIsXHJcblwicXVvdGUgcmlnaHRcIixcclxuXCJzcGlubmVyXCIsXHJcblwic3F1YXJlXCIsXHJcblwic3F1YXJlIG91dGxpbmVcIixcclxuXCJhZGQgY2lyY2xlXCIsXHJcblwiYWRkIHNxdWFyZVwiLFxyXG5cImNoZWNrIGNpcmNsZVwiLFxyXG5cImNoZWNrIGNpcmNsZSBvdXRsaW5lXCIsXHJcblwiY2hlY2sgc3F1YXJlXCIsXHJcblwiY2hlY2ttYXJrIGJveFwiLFxyXG5cImNoZWNrbWFya1wiLFxyXG5cIm1pbnVzIGNpcmNsZVwiLFxyXG5cIm1pbnVzXCIsXHJcblwibWludXMgc3F1YXJlXCIsXHJcblwibWludXMgc3F1YXJlIG91dGxpbmVcIixcclxuXCJtb3ZlXCIsXHJcblwicGx1c1wiLFxyXG5cInBsdXMgc3F1YXJlIG91dGxpbmVcIixcclxuXCJyYWRpb1wiLFxyXG5cInJlbW92ZSBjaXJjbGVcIixcclxuXCJyZW1vdmUgY2lyY2xlIG91dGxpbmVcIixcclxuXCJyZW1vdmVcIixcclxuXCJzZWxlY3RlZCByYWRpb1wiLFxyXG5cInRvZ2dsZSBvZmZcIixcclxuXCJ0b2dnbGUgb25cIixcclxuXCJhcmVhIGNoYXJ0XCIsXHJcblwiYmFyIGNoYXJ0XCIsXHJcblwiY2FtZXJhIHJldHJvXCIsXHJcblwibmV3c3BhcGVyXCIsXHJcblwiZmlsbVwiLFxyXG5cImxpbmUgY2hhcnRcIixcclxuXCJwaG90b1wiLFxyXG5cInBpZSBjaGFydFwiLFxyXG5cInNvdW5kXCIsXHJcblwiYW5nbGUgZG91YmxlIGRvd25cIixcclxuXCJhbmdsZSBkb3VibGUgbGVmdFwiLFxyXG5cImFuZ2xlIGRvdWJsZSByaWdodFwiLFxyXG5cImFuZ2xlIGRvdWJsZSB1cFwiLFxyXG5cImFuZ2xlIGRvd25cIixcclxuXCJhbmdsZSBsZWZ0XCIsXHJcblwiYW5nbGUgcmlnaHRcIixcclxuXCJhbmdsZSB1cFwiLFxyXG5cImFycm93IGNpcmNsZSBkb3duXCIsXHJcblwiYXJyb3cgY2lyY2xlIGxlZnRcIixcclxuXCJhcnJvdyBjaXJjbGUgb3V0bGluZSBkb3duXCIsXHJcblwiYXJyb3cgY2lyY2xlIG91dGxpbmUgbGVmdFwiLFxyXG5cImFycm93IGNpcmNsZSBvdXRsaW5lIHJpZ2h0XCIsXHJcblwiYXJyb3cgY2lyY2xlIG91dGxpbmUgdXBcIixcclxuXCJhcnJvdyBjaXJjbGUgcmlnaHRcIixcclxuXCJhcnJvdyBjaXJjbGUgdXBcIixcclxuXCJhcnJvdyBkb3duXCIsXHJcblwiYXJyb3cgbGVmdFwiLFxyXG5cImFycm93IHJpZ2h0XCIsXHJcblwiYXJyb3cgdXBcIixcclxuXCJjYXJldCBkb3duXCIsXHJcblwiY2FyZXQgbGVmdFwiLFxyXG5cImNhcmV0IHJpZ2h0XCIsXHJcblwiY2FyZXQgdXBcIixcclxuXCJjaGV2cm9uIGNpcmNsZSBkb3duXCIsXHJcblwiY2hldnJvbiBjaXJjbGUgbGVmdFwiLFxyXG5cImNoZXZyb24gY2lyY2xlIHJpZ2h0XCIsXHJcblwiY2hldnJvbiBjaXJjbGUgdXBcIixcclxuXCJjaGV2cm9uIGRvd25cIixcclxuXCJjaGV2cm9uIGxlZnRcIixcclxuXCJjaGV2cm9uIHJpZ2h0XCIsXHJcblwiY2hldnJvbiB1cFwiLFxyXG5cImxvbmcgYXJyb3cgZG93blwiLFxyXG5cImxvbmcgYXJyb3cgbGVmdFwiLFxyXG5cImxvbmcgYXJyb3cgcmlnaHRcIixcclxuXCJsb25nIGFycm93IHVwXCIsXHJcblwicG9pbnRpbmcgZG93blwiLFxyXG5cInBvaW50aW5nIGxlZnRcIixcclxuXCJwb2ludGluZyByaWdodFwiLFxyXG5cInBvaW50aW5nIHVwXCIsXHJcblwidG9nZ2xlIGRvd25cIixcclxuXCJ0b2dnbGUgbGVmdFwiLFxyXG5cInRvZ2dsZSByaWdodFwiLFxyXG5cInRvZ2dsZSB1cFwiLFxyXG5cIm1vYmlsZVwiLFxyXG5cInRhYmxldFwiLFxyXG5cImJhdHRlcnkgZW1wdHlcIixcclxuXCJiYXR0ZXJ5IGxvd1wiLFxyXG5cImJhdHRlcnkgbWVkaXVtXCIsXHJcblwiYmF0dGVyeSBoaWdoXCIsXHJcblwiYmF0dGVyeSBmdWxsXCIsXHJcblwiZGVza3RvcFwiLFxyXG5cImRpc2sgb3V0bGluZVwiLFxyXG5cImdhbWVcIixcclxuXCJrZXlib2FyZFwiLFxyXG5cImxhcHRvcFwiLFxyXG5cInBsdWdcIixcclxuXCJwb3dlclwiLFxyXG5cImZpbGUgYXJjaGl2ZSBvdXRsaW5lXCIsXHJcblwiZmlsZSBhdWRpbyBvdXRsaW5lXCIsXHJcblwiZmlsZSBjb2RlIG91dGxpbmVcIixcclxuXCJmaWxlIGV4Y2VsIG91dGxpbmVcIixcclxuXCJmaWxlXCIsXHJcblwiZmlsZSBpbWFnZSBvdXRsaW5lXCIsXHJcblwiZmlsZSBvdXRsaW5lXCIsXHJcblwiZmlsZSBwZGYgb3V0bGluZVwiLFxyXG5cImZpbGUgcG93ZXJwb2ludCBvdXRsaW5lXCIsXHJcblwiZmlsZSB0ZXh0XCIsXHJcblwiZmlsZSB0ZXh0IG91dGxpbmVcIixcclxuXCJmaWxlIHZpZGVvIG91dGxpbmVcIixcclxuXCJmaWxlIHdvcmQgb3V0bGluZVwiLFxyXG5cImZvbGRlclwiLFxyXG5cImZvbGRlciBvcGVuXCIsXHJcblwiZm9sZGVyIG9wZW4gb3V0bGluZVwiLFxyXG5cImZvbGRlciBvdXRsaW5lXCIsXHJcblwibGV2ZWwgZG93blwiLFxyXG5cImxldmVsIHVwXCIsXHJcblwidHJhc2hcIixcclxuXCJ0cmFzaCBvdXRsaW5lXCIsXHJcblwiYmFyY29kZVwiLFxyXG5cImJsdWV0b290aCBhbHRlcm5hdGl2ZVwiLFxyXG5cImJsdWV0b290aFwiLFxyXG5cImNzczNcIixcclxuXCJkYXRhYmFzZVwiLFxyXG5cImZvcmtcIixcclxuXCJodG1sNVwiLFxyXG5cIm1pY3JvY2hpcFwiLFxyXG5cIm9wZW5pZFwiLFxyXG5cInFyY29kZVwiLFxyXG5cInJzc1wiLFxyXG5cInJzcyBzcXVhcmVcIixcclxuXCJzZXJ2ZXJcIixcclxuXCJ1c2JcIixcclxuXCJlbXB0eSBoZWFydFwiLFxyXG5cImVtcHR5IHN0YXJcIixcclxuXCJmcm93blwiLFxyXG5cImhlYXJ0XCIsXHJcblwibWVoXCIsXHJcblwic21pbGVcIixcclxuXCJzdGFyIGhhbGYgZW1wdHlcIixcclxuXCJzdGFyIGhhbGZcIixcclxuXCJzdGFyXCIsXHJcblwidGh1bWJzIGRvd25cIixcclxuXCJ0aHVtYnMgb3V0bGluZSBkb3duXCIsXHJcblwidGh1bWJzIG91dGxpbmUgdXBcIixcclxuXCJ0aHVtYnMgdXBcIixcclxuXCJiYWNrd2FyZFwiLFxyXG5cImNsb3NlZCBjYXB0aW9uaW5nXCIsXHJcblwiZWplY3RcIixcclxuXCJmYXN0IGJhY2t3YXJkXCIsXHJcblwiZmFzdCBmb3J3YXJkXCIsXHJcblwiZm9yd2FyZFwiLFxyXG5cIm11dGVcIixcclxuXCJwYXVzZSBjaXJjbGVcIixcclxuXCJwYXVzZSBjaXJjbGUgb3V0bGluZVwiLFxyXG5cInBhdXNlXCIsXHJcblwicGxheVwiLFxyXG5cInJlY29yZFwiLFxyXG5cInN0ZXAgYmFja3dhcmRcIixcclxuXCJzdGVwIGZvcndhcmRcIixcclxuXCJzdG9wIGNpcmNsZVwiLFxyXG5cInN0b3AgY2lyY2xlIG91dGxpbmVcIixcclxuXCJzdG9wXCIsXHJcblwidW5tdXRlXCIsXHJcblwidmlkZW8gcGxheVwiLFxyXG5cInZpZGVvIHBsYXkgb3V0bGluZVwiLFxyXG5cInZvbHVtZSBkb3duXCIsXHJcblwidm9sdW1lIG9mZlwiLFxyXG5cInZvbHVtZSB1cFwiLFxyXG5cImJpY3ljbGVcIixcclxuXCJidWlsZGluZ1wiLFxyXG5cImJ1aWxkaW5nIG91dGxpbmVcIixcclxuXCJidXNcIixcclxuXCJjYXJcIixcclxuXCJjb2ZmZWVcIixcclxuXCJjb21wYXNzXCIsXHJcblwiZW1lcmdlbmN5XCIsXHJcblwiZmlyc3QgYWlkXCIsXHJcblwiZm9vZFwiLFxyXG5cImhcIixcclxuXCJob3NwaXRhbFwiLFxyXG5cImhvdGVsXCIsXHJcblwibG9jYXRpb24gYXJyb3dcIixcclxuXCJtYXBcIixcclxuXCJtYXAgb3V0bGluZVwiLFxyXG5cIm1hcCBwaW5cIixcclxuXCJtYXAgc2lnbnNcIixcclxuXCJtYXJrZXJcIixcclxuXCJtaWxpdGFyeVwiLFxyXG5cIm1vdG9yY3ljbGVcIixcclxuXCJwYXdcIixcclxuXCJzaGlwXCIsXHJcblwic3BhY2Ugc2h1dHRsZVwiLFxyXG5cInNwb29uXCIsXHJcblwic3RyZWV0IHZpZXdcIixcclxuXCJzdWJ3YXlcIixcclxuXCJ0YXhpXCIsXHJcblwidHJhaW5cIixcclxuXCJ0cmVlXCIsXHJcblwidW5pdmVyc2l0eVwiLFxyXG5cInRlbGV2aXNpb25cIixcclxuXCJjb2x1bW5zXCIsXHJcblwic29ydCBhbHBoYWJldCBhc2NlbmRpbmdcIixcclxuXCJzb3J0IGFscGhhYmV0IGRlc2NlbmRpbmdcIixcclxuXCJzb3J0IGFzY2VuZGluZ1wiLFxyXG5cInNvcnQgY29udGVudCBhc2NlbmRpbmdcIixcclxuXCJzb3J0IGNvbnRlbnQgZGVzY2VuZGluZ1wiLFxyXG5cInNvcnQgZGVzY2VuZGluZ1wiLFxyXG5cInNvcnRcIixcclxuXCJzb3J0IG51bWVyaWMgYXNjZW5kaW5nXCIsXHJcblwic29ydCBudW1lcmljIGRlc2NlbmRpbmdcIixcclxuXCJ0YWJsZVwiLFxyXG5cImFsaWduIGNlbnRlclwiLFxyXG5cImFsaWduIGp1c3RpZnlcIixcclxuXCJhbGlnbiBsZWZ0XCIsXHJcblwiYWxpZ24gcmlnaHRcIixcclxuXCJhdHRhY2hcIixcclxuXCJib2xkXCIsXHJcblwiY29weVwiLFxyXG5cImN1dFwiLFxyXG5cImZvbnRcIixcclxuXCJoZWFkZXJcIixcclxuXCJpbmRlbnRcIixcclxuXCJpdGFsaWNcIixcclxuXCJsaW5raWZ5XCIsXHJcblwibGlzdFwiLFxyXG5cIm9yZGVyZWQgbGlzdFwiLFxyXG5cIm91dGRlbnRcIixcclxuXCJwYXJhZ3JhcGhcIixcclxuXCJwYXN0ZVwiLFxyXG5cInNhdmVcIixcclxuXCJzdHJpa2V0aHJvdWdoXCIsXHJcblwic3Vic2NyaXB0XCIsXHJcblwic3VwZXJzY3JpcHRcIixcclxuXCJ0ZXh0IGN1cnNvclwiLFxyXG5cInRleHQgaGVpZ2h0XCIsXHJcblwidGV4dCB3aWR0aFwiLFxyXG5cInVuZGVybGluZVwiLFxyXG5cInVubGlua2lmeVwiLFxyXG5cInVub3JkZXJlZCBsaXN0XCIsXHJcblwiYml0Y29pblwiLFxyXG5cImRvbGxhclwiLFxyXG5cImV1cm9cIixcclxuXCJsaXJhXCIsXHJcblwicG91bmRcIixcclxuXCJydWJsZVwiLFxyXG5cInJ1cGVlXCIsXHJcblwic2hla2VsXCIsXHJcblwid29uXCIsXHJcblwieWVuXCIsXHJcblwiYW1lcmljYW4gZXhwcmVzc1wiLFxyXG5cImNyZWRpdCBjYXJkIGFsdGVybmF0aXZlXCIsXHJcblwiZGluZXJzIGNsdWJcIixcclxuXCJkaXNjb3ZlclwiLFxyXG5cImdvb2dsZSB3YWxsZXRcIixcclxuXCJqYXBhbiBjcmVkaXQgYnVyZWF1XCIsXHJcblwibWFzdGVyY2FyZFwiLFxyXG5cInBheXBhbCBjYXJkXCIsXHJcblwicGF5cGFsXCIsXHJcblwic3RyaXBlXCIsXHJcblwidmlzYVwiLFxyXG5cIndoZWVsY2hhaXJcIixcclxuXCJhc2wgaW50ZXJwcmV0aW5nXCIsXHJcblwiYXNzaXN0aXZlIGxpc3RlbmluZyBzeXN0ZW1zXCIsXHJcblwiYXVkaW8gZGVzY3JpcHRpb25cIixcclxuXCJibGluZFwiLFxyXG5cImJyYWlsbGVcIixcclxuXCJkZWFmbmVzc1wiLFxyXG5cImxvdyB2aXNpb25cIixcclxuXCJzaWduIGxhbmd1YWdlXCIsXHJcblwidW5pdmVyc2FsIGFjY2Vzc1wiLFxyXG5cInZvbHVtZSBjb250cm9sIHBob25lXCIsXHJcblwiYWRuXCIsXHJcblwiYW1hem9uXCIsXHJcblwiYW5kcm9pZFwiLFxyXG5cImFuZ2VsbGlzdFwiLFxyXG5cImFwcGxlXCIsXHJcblwiYmFuZGNhbXBcIixcclxuXCJiZWhhbmNlXCIsXHJcblwiYmVoYW5jZSBzcXVhcmVcIixcclxuXCJiaXRidWNrZXRcIixcclxuXCJiaXRidWNrZXQgc3F1YXJlXCIsXHJcblwiYmxhY2sgdGllXCIsXHJcblwiYnV5c2VsbGFkc1wiLFxyXG5cImNocm9tZVwiLFxyXG5cImNvZGVwZW5cIixcclxuXCJjb2RpZXBpZVwiLFxyXG5cImNvbm5lY3RkZXZlbG9wXCIsXHJcblwiY29udGFvXCIsXHJcblwiZGFzaGN1YmVcIixcclxuXCJkZWxpY2lvdXNcIixcclxuXCJkZXZpYW50YXJ0XCIsXHJcblwiZGlnZ1wiLFxyXG5cImRyaWJibGVcIixcclxuXCJkcm9wYm94XCIsXHJcblwiZHJ1cGFsXCIsXHJcblwiZWVyY2FzdFwiLFxyXG5cImVtcGlyZVwiLFxyXG5cImVudmlyYSBnYWxsZXJ5XCIsXHJcblwiZXRzeVwiLFxyXG5cImV4cGVkaXRlZHNzbFwiLFxyXG5cImZhY2Vib29rIGZcIixcclxuXCJmYWNlYm9va1wiLFxyXG5cImZhY2Vib29rIHNxdWFyZVwiLFxyXG5cImZpcmVmb3hcIixcclxuXCJmaXJzdCBvcmRlclwiLFxyXG5cImZsaWNrclwiLFxyXG5cImZvbnQgYXdlc29tZVwiLFxyXG5cImZvbnRpY29uc1wiLFxyXG5cImZvcnQgYXdlc29tZVwiLFxyXG5cImZvcnVtYmVlXCIsXHJcblwiZm91cnNxdWFyZVwiLFxyXG5cImZyZWUgY29kZSBjYW1wXCIsXHJcblwiZ2cgY2lyY2xlXCIsXHJcblwiZ2dcIixcclxuXCJnaXRcIixcclxuXCJnaXQgc3F1YXJlXCIsXHJcblwiZ2l0aHViIGFsdGVybmF0ZVwiLFxyXG5cImdpdGh1YlwiLFxyXG5cImdpdGh1YiBzcXVhcmVcIixcclxuXCJnaXRsYWJcIixcclxuXCJnaXR0aXBcIixcclxuXCJnbGlkZSBnXCIsXHJcblwiZ2xpZGVcIixcclxuXCJnb29nbGVcIixcclxuXCJnb29nbGUgcGx1cyBjaXJjbGVcIixcclxuXCJnb29nbGUgcGx1c1wiLFxyXG5cImdvb2dsZSBwbHVzIHNxdWFyZVwiLFxyXG5cImdyYXZcIixcclxuXCJoYWNrZXIgbmV3c1wiLFxyXG5cImhvdXp6XCIsXHJcblwiaW1kYlwiLFxyXG5cImluc3RhZ3JhbVwiLFxyXG5cImludGVybmV0IGV4cGxvcmVyXCIsXHJcblwiaW94aG9zdFwiLFxyXG5cImpvb21sYVwiLFxyXG5cImpzZmlkZGxlXCIsXHJcblwibGFzdGZtXCIsXHJcblwibGFzdGZtIHNxdWFyZVwiLFxyXG5cImxlYW5wdWJcIixcclxuXCJsaW5rZWRpblwiLFxyXG5cImxpbmtlZGluIHNxdWFyZVwiLFxyXG5cImxpbm9kZVwiLFxyXG5cImxpbnV4XCIsXHJcblwibWF4Y2RuXCIsXHJcblwibWVhbnBhdGhcIixcclxuXCJtZWRpdW1cIixcclxuXCJtZWV0dXBcIixcclxuXCJtaWNyb3NvZnQgZWRnZVwiLFxyXG5cIm1peGNsb3VkXCIsXHJcblwibW9keFwiLFxyXG5cIm9kbm9rbGFzc25pa2lcIixcclxuXCJvZG5va2xhc3NuaWtpIHNxdWFyZVwiLFxyXG5cIm9wZW5jYXJ0XCIsXHJcblwib3BlcmFcIixcclxuXCJvcHRpbm1vbnN0ZXJcIixcclxuXCJwYWdlbGluZXNcIixcclxuXCJwaWVkIHBpcGVyIGFsdGVybmF0ZVwiLFxyXG5cInBpZWQgcGlwZXIgaGF0XCIsXHJcblwicGllZCBwaXBlclwiLFxyXG5cInBpbnRlcmVzdFwiLFxyXG5cInBpbnRlcmVzdCBzcXVhcmVcIixcclxuXCJwb2NrZXRcIixcclxuXCJwcm9kdWN0IGh1bnRcIixcclxuXCJxcVwiLFxyXG5cInF1b3JhXCIsXHJcblwicmF2ZWxyeVwiLFxyXG5cInJlYmVsXCIsXHJcblwicmVkZGl0IGFsaWVuXCIsXHJcblwicmVkZGl0XCIsXHJcblwicmVkZGl0IHNxdWFyZVwiLFxyXG5cInJlbnJlblwiLFxyXG5cInNhZmFyaVwiLFxyXG5cInNjcmliZFwiLFxyXG5cInNlbGxzeVwiLFxyXG5cInNoaXJ0c2luYnVsa1wiLFxyXG5cInNpbXBseWJ1aWx0XCIsXHJcblwic2t5YXRsYXNcIixcclxuXCJza3lwZVwiLFxyXG5cInNsYWNrXCIsXHJcblwic2xpZGVzaGFyZVwiLFxyXG5cInNuYXBjaGF0IGdob3N0XCIsXHJcblwic25hcGNoYXRcIixcclxuXCJzbmFwY2hhdCBzcXVhcmVcIixcclxuXCJzb3VuZGNsb3VkXCIsXHJcblwic3BvdGlmeVwiLFxyXG5cInN0YWNrIGV4Y2hhbmdlXCIsXHJcblwic3RhY2sgb3ZlcmZsb3dcIixcclxuXCJzdGVhbVwiLFxyXG5cInN0ZWFtIHNxdWFyZVwiLFxyXG5cInN0dW1ibGV1cG9uIGNpcmNsZVwiLFxyXG5cInN0dW1ibGV1cG9uXCIsXHJcblwic3VwZXJwb3dlcnNcIixcclxuXCJ0ZWxlZ3JhbVwiLFxyXG5cInRlbmNlbnQgd2VpYm9cIixcclxuXCJ0aGVtZWlzbGVcIixcclxuXCJ0cmVsbG9cIixcclxuXCJ0cmlwYWR2aXNvclwiLFxyXG5cInR1bWJsclwiLFxyXG5cInR1bWJsciBzcXVhcmVcIixcclxuXCJ0d2l0Y2hcIixcclxuXCJ0d2l0dGVyXCIsXHJcblwidHdpdHRlciBzcXVhcmVcIixcclxuXCJ2aWFjb2luXCIsXHJcblwidmlhZGVvXCIsXHJcblwidmlhZGVvIHNxdWFyZVwiLFxyXG5cInZpbWVvXCIsXHJcblwidmltZW8gc3F1YXJlXCIsXHJcblwidmluZVwiLFxyXG5cInZrXCIsXHJcblwid2VjaGF0XCIsXHJcblwid2VpYm9cIixcclxuXCJ3aGF0c2FwcFwiLFxyXG5cIndpa2lwZWRpYVwiLFxyXG5cIndpbmRvd3NcIixcclxuXCJ3b3JkcHJlc3NcIixcclxuXCJ3cGJlZ2lubmVyXCIsXHJcblwid3BleHBsb3JlclwiLFxyXG5cIndwZm9ybXNcIixcclxuXCJ4aW5nXCIsXHJcblwieGluZyBzcXVhcmVcIixcclxuXCJ5IGNvbWJpbmF0b3JcIixcclxuXCJ5YWhvb1wiLFxyXG5cInllbHBcIixcclxuXCJ5b2FzdFwiLFxyXG5cInlvdXR1YmVcIixcclxuXCJ5b3V0dWJlIHBsYXlcIixcclxuXCJ5b3V0dWJlIHNxdWFyZVwiLFxyXG5cImRyaWJiYmxlXCIsXHJcblwiZGlzYWJsZWQgdXNlcnNcIixcclxuXCJzcGlubmVyIGxvYWRpbmdcIixcclxuXCJub3RjaGVkIGNpcmNsZSBsb2FkaW5nXCIsXHJcblwiYXN0ZXJpc2sgbG9hZGluZ1wiLFxyXG5cImZpdHRlZCBoZWxwXCIsXHJcblwibWluaSBob21lXCIsXHJcblwidGlueSBob21lXCIsXHJcblwic21hbGwgaG9tZVwiLFxyXG5cImxhcmdlIGhvbWVcIixcclxuXCJiaWcgaG9tZVwiLFxyXG5cImh1Z2UgaG9tZVwiLFxyXG5cIm1hc3NpdmUgaG9tZVwiLFxyXG5cImNsb3NlIGxpbmtcIixcclxuXCJoZWxwIGxpbmtcIixcclxuXCJob3Jpem9udGFsbHkgZmxpcHBlZCBjbG91ZFwiLFxyXG5cInZlcnRpY2FsbHkgZmxpcHBlZCBjbG91ZFwiLFxyXG5cImNsb2Nrd2lzZSByb3RhdGVkIGNsb3VkXCIsXHJcblwiY291bnRlcmNsb2Nrd2lzZSByb3RhdGVkIGNsb3VkXCIsXHJcblwiY2lyY3VsYXIgdXNlcnNcIixcclxuXCJjaXJjdWxhciB0ZWFsIHVzZXJzXCIsXHJcblwiY2lyY3VsYXIgaW52ZXJ0ZWQgdXNlcnNcIixcclxuXCJjaXJjdWxhciBpbnZlcnRlZCB0ZWFsIHVzZXJzXCIsXHJcblwiYm9yZGVyZWQgdXNlcnNcIixcclxuXCJib3JkZXJlZCB0ZWFsIHVzZXJzXCIsXHJcblwiYm9yZGVyZWQgaW52ZXJ0ZWQgYmxhY2sgdXNlcnNcIixcclxuXCJib3JkZXJlZCBpbnZlcnRlZCB0ZWFsIHVzZXJzXCIsXHJcblwicmVkIHVzZXJzXCIsXHJcblwib3JhbmdlIHVzZXJzXCIsXHJcblwieWVsbG93IHVzZXJzXCIsXHJcblwib2xpdmUgdXNlcnNcIixcclxuXCJncmVlbiB1c2Vyc1wiLFxyXG5cInRlYWwgdXNlcnNcIixcclxuXCJibHVlIHVzZXJzXCIsXHJcblwidmlvbGV0IHVzZXJzXCIsXHJcblwicHVycGxlIHVzZXJzXCIsXHJcblwicGluayB1c2Vyc1wiLFxyXG5cImJyb3duIHVzZXJzXCIsXHJcblwiZ3JleSB1c2Vyc1wiLFxyXG5cImJsYWNrIHVzZXJzXCIsXHJcblwiaW52ZXJ0ZWQgdXNlcnNcIixcclxuXCJpbnZlcnRlZCByZWQgdXNlcnNcIixcclxuXCJpbnZlcnRlZCBvcmFuZ2UgdXNlcnNcIixcclxuXCJpbnZlcnRlZCB5ZWxsb3cgdXNlcnNcIixcclxuXCJpbnZlcnRlZCBvbGl2ZSB1c2Vyc1wiLFxyXG5cImludmVydGVkIGdyZWVuIHVzZXJzXCIsXHJcblwiaW52ZXJ0ZWQgdGVhbCB1c2Vyc1wiLFxyXG5cImludmVydGVkIGJsdWUgdXNlcnNcIixcclxuXCJpbnZlcnRlZCB2aW9sZXQgdXNlcnNcIixcclxuXCJpbnZlcnRlZCBwdXJwbGUgdXNlcnNcIixcclxuXCJpbnZlcnRlZCBwaW5rIHVzZXJzXCIsXHJcblwiaW52ZXJ0ZWQgYnJvd24gdXNlcnNcIixcclxuXCJpbnZlcnRlZCBncmV5IHVzZXJzXCIsXHJcblwiYmlnIHRoaW4gY2lyY2xlXCIsXHJcblwiYmlnIHJlZCBkb250XCIsXHJcblwiYmxhY2sgdXNlclwiLFxyXG5cImJpZyBsb2FkaW5nIHN1blwiLFxyXG5cImNvcm5lciBhZGRcIixcclxuXCJ0b3AgbGVmdCBjb3JuZXIgYWRkXCIsXHJcblwidG9wIHJpZ2h0IGNvcm5lciBhZGRcIixcclxuXCJib3R0b20gbGVmdCBjb3JuZXIgYWRkXCIsXHJcblwiYm90dG9tIHJpZ2h0IGNvcm5lciBhZGRcIixcclxuXCJpbnZlcnRlZCBjb3JuZXIgYWRkXCIsXHJcblwiY2xvc2VcIixcclxuXCJxdWVzdGlvblwiXHJcblxyXG5cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59IiwibmFtZXNwYWNlIEJyaWRnZS5DdXN0b21VSU1hcmt1cC5MaWJyYXJpZXMuU2VtYW50aWNVSVxyXG57XHJcbiAgICBzdGF0aWMgY2xhc3MgTnVtYmVyVG9Xb3JkXHJcbiAgICB7XHJcbiAgICAgICAgI3JlZ2lvbiBTdGF0aWMgRmllbGRzXHJcbiAgICAgICAgc3RhdGljIHJlYWRvbmx5IHN0cmluZ1tdIHVuaXRzTWFwID0ge1wiemVyb1wiLCBcIm9uZVwiLCBcInR3b1wiLCBcInRocmVlXCIsIFwiZm91clwiLCBcImZpdmVcIiwgXCJzaXhcIiwgXCJzZXZlblwiLCBcImVpZ2h0XCIsIFwibmluZVwiLCBcInRlblwiLCBcImVsZXZlblwiLCBcInR3ZWx2ZVwiLCBcInRoaXJ0ZWVuXCIsIFwiZm91cnRlZW5cIiwgXCJmaWZ0ZWVuXCIsIFwic2l4dGVlblwiLCBcInNldmVudGVlblwiLCBcImVpZ2h0ZWVuXCIsIFwibmluZXRlZW5cIn07XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIFB1YmxpYyBNZXRob2RzXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgVG9Xb3JkKHRoaXMgaW50IHZhbHVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVuaXRzTWFwW3ZhbHVlXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG4gICAgfVxyXG59IiwidXNpbmcgQnJpZGdlLkN1c3RvbVVJTWFya3VwLlVJO1xyXG5cclxubmFtZXNwYWNlIEJyaWRnZS5DdXN0b21VSU1hcmt1cC5MaWJyYXJpZXMuc3BsaXRfanNcclxue1xyXG4gICAgcHVibGljICBzdGF0aWMgY2xhc3MgRWxlbWVudHNcclxuICAgIHtcclxuICAgICAgICAjcmVnaW9uIFB1YmxpYyBNZXRob2RzXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIFJlZ2lzdGVyVG9CdWlsZGVyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEJ1aWxkZXIuUmVnaXN0ZXIoXCJTcGxpdFBhbmVsXCIsIChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLldpbmRvd3MuRnJhbWV3b3JrRWxlbWVudD4pQnVpbGRlci5DcmVhdGU8U3BsaXRQYW5lbD4pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcbiAgICB9XHJcbn0iLCJ1c2luZyBCcmlkZ2UuQ3VzdG9tVUlNYXJrdXAuVUk7XHJcblxyXG5uYW1lc3BhY2UgQnJpZGdlLkN1c3RvbVVJTWFya3VwLkxpYnJhcmllcy5Td2lwZXJcclxue1xyXG4gICAgc3RhdGljIGNsYXNzIEVsZW1lbnRzXHJcbiAgICB7XHJcbiAgICAgICAgI3JlZ2lvbiBQdWJsaWMgTWV0aG9kc1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBSZWdpc3RlclRvQnVpbGRlcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBCdWlsZGVyLlJlZ2lzdGVyKFwic3dpcGVyLnNsaWRlclwiLCAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5XaW5kb3dzLkZyYW1ld29ya0VsZW1lbnQ+KUJ1aWxkZXIuQ3JlYXRlPFNsaWRlcj4pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcbiAgICB9XHJcbn0iLCJ1c2luZyBCcmlkZ2UuQ3VzdG9tVUlNYXJrdXAuVUk7XHJcblxyXG5uYW1lc3BhY2UgQnJpZGdlLkN1c3RvbVVJTWFya3VwLkxpYnJhcmllcy52aWV3ZXJqc1xyXG57XHJcbiAgICBzdGF0aWMgY2xhc3MgRWxlbWVudHNcclxuICAgIHtcclxuICAgICAgICAjcmVnaW9uIFB1YmxpYyBNZXRob2RzXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIFJlZ2lzdGVyVG9CdWlsZGVyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEJ1aWxkZXIuUmVnaXN0ZXIoXCJJbWFnZUdhbGVyeVwiLCAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5XaW5kb3dzLkZyYW1ld29ya0VsZW1lbnQ+KUJ1aWxkZXIuQ3JlYXRlPFZpZXdlcj4pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcbiAgICB9XHJcbn0iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcblxyXG5uYW1lc3BhY2UgQnJpZGdlLkN1c3RvbVVJTWFya3VwXHJcbntcclxuICAgIHN0YXRpYyBjbGFzcyBSZXNvdXJjZXNcclxuICAgIHtcclxuICAgICAgICAvLyBSZVNoYXJwZXIgZGlzYWJsZSBvbmNlIFVudXNlZFBhcmFtZXRlci5HbG9iYWxcclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBHZXRYbWxGaWxlQ29udGVudChzdHJpbmcga2V5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFNjcmlwdC5Xcml0ZTxzdHJpbmc+KFwiQnJpZGdlLkN1c3RvbVVJTWFya3VwLlJlc291cmNlcy4kWG1sRmlsZUNvbnRlbnRzW2tleV1cIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dC5SZWd1bGFyRXhwcmVzc2lvbnM7XHJcblxyXG5uYW1lc3BhY2UgQnJpZGdlLkN1c3RvbVVJTWFya3VwLlRva2VuaXplcnNcclxue1xyXG4gICAgaW50ZXJuYWwgZW51bSBUb2tlblR5cGVcclxuICAgIHtcclxuICAgICAgICBCaW5kaW5nLFxyXG4gICAgICAgIE1vZGUsXHJcbiAgICAgICAgQ29udmVydGVyLFxyXG4gICAgICAgIFR3b1dheSxcclxuICAgICAgICBMZWZ0QnJhY2tldCxcclxuICAgICAgICBSaWdodEJyYWNrZXQsXHJcbiAgICAgICAgT3BlblBhcmVudGhlc2lzLFxyXG4gICAgICAgIENsb3NlUGFyZW50aGVzaXMsXHJcbiAgICAgICAgSWRlbnRpZmllcixcclxuICAgICAgICBDb21tYSxcclxuICAgICAgICBEb3QsXHJcbiAgICAgICAgRXF1YWxzLFxyXG4gICAgICAgIFRoaXMsXHJcbiAgICAgICAgTm90RXF1YWxzLFxyXG4gICAgICAgIFN0cmluZ1ZhbHVlLFxyXG4gICAgICAgIFNlcXVlbmNlVGVybWluYXRvcixcclxuICAgICAgICBOdW1iZXJWYWx1ZVxyXG4gICAgfVxyXG5cclxuICAgIGNsYXNzIFRva2VuRGVmaW5pdGlvblxyXG4gICAge1xyXG4gICAgICAgICNyZWdpb24gRmllbGRzXHJcbiAgICAgICAgcmVhZG9ubHkgaW50IF9wcmVjZWRlbmNlO1xyXG4gICAgICAgIHJlYWRvbmx5IFJlZ2V4IF9yZWdleDtcclxuICAgICAgICByZWFkb25seSBUb2tlblR5cGUgX3Rva2VuVHlwZTtcclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gQ29uc3RydWN0b3JzXHJcbiAgICAgICAgcHVibGljIFRva2VuRGVmaW5pdGlvbihUb2tlblR5cGUgdG9rZW5UeXBlLCBzdHJpbmcgcmVnZXhQYXR0ZXJuLCBpbnQgcHJlY2VkZW5jZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9yZWdleCA9IG5ldyBSZWdleChyZWdleFBhdHRlcm4sIFJlZ2V4T3B0aW9ucy5JZ25vcmVDYXNlIC8qfCBSZWdleE9wdGlvbnMuQ29tcGlsZWQqLyk7XHJcbiAgICAgICAgICAgIF90b2tlblR5cGUgPSB0b2tlblR5cGU7XHJcbiAgICAgICAgICAgIF9wcmVjZWRlbmNlID0gcHJlY2VkZW5jZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIFB1YmxpYyBNZXRob2RzXHJcbiAgICAgICAgcHVibGljIElFbnVtZXJhYmxlPFRva2VuTWF0Y2g+IEZpbmRNYXRjaGVzKHN0cmluZyBpbnB1dFN0cmluZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBtYXRjaGVzID0gX3JlZ2V4Lk1hdGNoZXMoaW5wdXRTdHJpbmcpO1xyXG4gICAgICAgICAgICB2YXIgbGVuID0gbWF0Y2hlcy5Db3VudDtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1hdGNoID0gbWF0Y2hlc1tpXTtcclxuXHJcbiAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gbmV3IFRva2VuTWF0Y2hcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBTdGFydEluZGV4ID0gbWF0Y2guSW5kZXgsXHJcbiAgICAgICAgICAgICAgICAgICAgRW5kSW5kZXggPSBtYXRjaC5JbmRleCArIG1hdGNoLkxlbmd0aCxcclxuICAgICAgICAgICAgICAgICAgICBUb2tlblR5cGUgPSBfdG9rZW5UeXBlLFxyXG4gICAgICAgICAgICAgICAgICAgIFZhbHVlID0gbWF0Y2guVmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgUHJlY2VkZW5jZSA9IF9wcmVjZWRlbmNlXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuICAgIH1cclxuXHJcbiAgICBjbGFzcyBUb2tlbk1hdGNoXHJcbiAgICB7XHJcbiAgICAgICAgI3JlZ2lvbiBQdWJsaWMgUHJvcGVydGllc1xyXG4gICAgICAgIHB1YmxpYyBpbnQgRW5kSW5kZXggeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgUHJlY2VkZW5jZSB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGludCBTdGFydEluZGV4IHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgVG9rZW5UeXBlIFRva2VuVHlwZSB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIHN0cmluZyBWYWx1ZSB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG4gICAgfVxyXG5cclxuICAgIGNsYXNzIFRva2VuXHJcbiAgICB7XHJcbiAgICAgICAgI3JlZ2lvbiBDb25zdHJ1Y3RvcnNcclxuICAgICAgICBwdWJsaWMgVG9rZW4oVG9rZW5UeXBlIHRva2VuVHlwZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFRva2VuVHlwZSA9IHRva2VuVHlwZTtcclxuICAgICAgICAgICAgVmFsdWUgPSBzdHJpbmcuRW1wdHk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVG9rZW4oVG9rZW5UeXBlIHRva2VuVHlwZSwgc3RyaW5nIHZhbHVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgVG9rZW5UeXBlID0gdG9rZW5UeXBlO1xyXG4gICAgICAgICAgICBWYWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gUHVibGljIFByb3BlcnRpZXNcclxuICAgICAgICBwdWJsaWMgVG9rZW5UeXBlIFRva2VuVHlwZSB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIHN0cmluZyBWYWx1ZSB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIFB1YmxpYyBNZXRob2RzXHJcbiAgICAgICAgcHVibGljIFRva2VuIENsb25lKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVG9rZW4oVG9rZW5UeXBlLCBWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgc3RyaW5nIFRvU3RyaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIntcIiArIFRva2VuVHlwZSArIFwiOlwiICsgVmFsdWUgKyBcIn1cIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG4gICAgfVxyXG5cclxuICAgIGNsYXNzIEJpbmRpbmdFeHByZXNzaW9uVG9rZW5EZWZpbml0aW9uc1xyXG4gICAge1xyXG4gICAgICAgICNyZWdpb24gUHVibGljIFByb3BlcnRpZXNcclxuICAgICAgICBwdWJsaWMgc3RhdGljIElSZWFkT25seUxpc3Q8VG9rZW5EZWZpbml0aW9uPiBWYWx1ZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBnbG9iYWw6OkJyaWRnZS5TY3JpcHQuQ2FsbEZvcihuZXcgTGlzdDxUb2tlbkRlZmluaXRpb24+KCksKF9vMSk9PntfbzEuQWRkKG5ldyBUb2tlbkRlZmluaXRpb24oVG9rZW5UeXBlLkxlZnRCcmFja2V0LCBcIlxcXFx7XCIsIDEpKTtfbzEuQWRkKG5ldyBUb2tlbkRlZmluaXRpb24oVG9rZW5UeXBlLlJpZ2h0QnJhY2tldCwgXCJcXFxcfVwiLCAxKSk7X28xLkFkZChuZXcgVG9rZW5EZWZpbml0aW9uKFRva2VuVHlwZS5PcGVuUGFyZW50aGVzaXMsIFwiXFxcXChcIiwgMSkpO19vMS5BZGQobmV3IFRva2VuRGVmaW5pdGlvbihUb2tlblR5cGUuQ2xvc2VQYXJlbnRoZXNpcywgXCJcXFxcKVwiLCAxKSk7X28xLkFkZChuZXcgVG9rZW5EZWZpbml0aW9uKFRva2VuVHlwZS5FcXVhbHMsIFwiPVwiLCAxKSk7X28xLkFkZChuZXcgVG9rZW5EZWZpbml0aW9uKFRva2VuVHlwZS5UaGlzLCBcInRoaXNcIiwgMSkpO19vMS5BZGQobmV3IFRva2VuRGVmaW5pdGlvbihUb2tlblR5cGUuTm90RXF1YWxzLCBcIiE9XCIsIDEpKTtfbzEuQWRkKG5ldyBUb2tlbkRlZmluaXRpb24oVG9rZW5UeXBlLklkZW50aWZpZXIsIFwiW2EtekEtWl8kXVthLXpBLVowLTlfJF0qXCIsIDEpKTtfbzEuQWRkKG5ldyBUb2tlbkRlZmluaXRpb24oVG9rZW5UeXBlLk51bWJlclZhbHVlLCBcIlxcXFxkK1wiLCAxKSk7X28xLkFkZChuZXcgVG9rZW5EZWZpbml0aW9uKFRva2VuVHlwZS5Db21tYSwgXCIsXCIsIDEpKTtfbzEuQWRkKG5ldyBUb2tlbkRlZmluaXRpb24oVG9rZW5UeXBlLkRvdCwgXCIuXCIsIDEpKTtyZXR1cm4gX28xO30pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuICAgIH1cclxuXHJcbiAgICBjbGFzcyBJbnZvY2F0aW9uRXhwcmVzc2lvblRva2VuRGVmaW5pdGlvbnNcclxuICAgIHtcclxuICAgICAgICAjcmVnaW9uIFB1YmxpYyBQcm9wZXJ0aWVzXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJUmVhZE9ubHlMaXN0PFRva2VuRGVmaW5pdGlvbj4gVmFsdWVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2xvYmFsOjpCcmlkZ2UuU2NyaXB0LkNhbGxGb3IobmV3IExpc3Q8VG9rZW5EZWZpbml0aW9uPigpLChfbzEpPT57X28xLkFkZChuZXcgVG9rZW5EZWZpbml0aW9uKFRva2VuVHlwZS5CaW5kaW5nLCBcInRoaXNcIiwgMSkpO19vMS5BZGQobmV3IFRva2VuRGVmaW5pdGlvbihUb2tlblR5cGUuT3BlblBhcmVudGhlc2lzLCBcIlxcXFwoXCIsIDEpKTtfbzEuQWRkKG5ldyBUb2tlbkRlZmluaXRpb24oVG9rZW5UeXBlLkNsb3NlUGFyZW50aGVzaXMsIFwiXFxcXClcIiwgMSkpO19vMS5BZGQobmV3IFRva2VuRGVmaW5pdGlvbihUb2tlblR5cGUuSWRlbnRpZmllciwgXCJbYS16QS1aXyRdW2EtekEtWjAtOV8kXSpcIiwgMSkpO19vMS5BZGQobmV3IFRva2VuRGVmaW5pdGlvbihUb2tlblR5cGUuQ29tbWEsIFwiLFwiLCAxKSk7X28xLkFkZChuZXcgVG9rZW5EZWZpbml0aW9uKFRva2VuVHlwZS5Eb3QsIFwiLlwiLCAxKSk7cmV0dXJuIF9vMTt9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcbiAgICB9XHJcblxyXG4gICAgY2xhc3MgVG9rZW5pemVyXHJcbiAgICB7XHJcbiAgICAgICAgI3JlZ2lvbiBQdWJsaWMgUHJvcGVydGllc1xyXG4gICAgICAgIHB1YmxpYyBJUmVhZE9ubHlMaXN0PFRva2VuRGVmaW5pdGlvbj4gVG9rZW5EZWZpbml0aW9ucyB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIFB1YmxpYyBNZXRob2RzXHJcbiAgICAgICAgcHVibGljIElSZWFkT25seUxpc3Q8VG9rZW4+IFRva2VuaXplKHN0cmluZyBkYXRhKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHRva2VuRGVmaW5pdGlvbnMgPSBUb2tlbkRlZmluaXRpb25zO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRva2VuRGVmaW5pdGlvbnMgPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uKFwiVG9rZW5EZWZpbml0aW9uc1wiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIHRva2VuTWF0Y2hlcyA9IG5ldyBMaXN0PFRva2VuTWF0Y2g+KCk7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdG9rZW5EZWZpbml0aW9uIGluIHRva2VuRGVmaW5pdGlvbnMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRva2VuTWF0Y2hlcy5BZGRSYW5nZShTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OkJyaWRnZS5DdXN0b21VSU1hcmt1cC5Ub2tlbml6ZXJzLlRva2VuTWF0Y2g+KHRva2VuRGVmaW5pdGlvbi5GaW5kTWF0Y2hlcyhkYXRhKSkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgaXRlbXMgPSBuZXcgTGlzdDxUb2tlbj4oKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBncm91cGVkQnlJbmRleCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuR3JvdXBCeTxnbG9iYWw6OkJyaWRnZS5DdXN0b21VSU1hcmt1cC5Ub2tlbml6ZXJzLlRva2VuTWF0Y2gsaW50Pih0b2tlbk1hdGNoZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpCcmlkZ2UuQ3VzdG9tVUlNYXJrdXAuVG9rZW5pemVycy5Ub2tlbk1hdGNoLCBpbnQ+KSh4ID0+IHguU3RhcnRJbmRleCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5PcmRlckJ5PGludD4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uTGlucS5Hcm91cGluZzxpbnQsIGdsb2JhbDo6QnJpZGdlLkN1c3RvbVVJTWFya3VwLlRva2VuaXplcnMuVG9rZW5NYXRjaD4sIGludD4pKHggPT4geC5LZXkpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICBUb2tlbk1hdGNoIGxhc3RNYXRjaCA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICB2YXIgbGVuID0gZ3JvdXBlZEJ5SW5kZXguQ291bnQ7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBiZXN0TWF0Y2ggPSBncm91cGVkQnlJbmRleFtpXS5PcmRlckJ5PGludD4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpCcmlkZ2UuQ3VzdG9tVUlNYXJrdXAuVG9rZW5pemVycy5Ub2tlbk1hdGNoLCBpbnQ+KSh4ID0+IHguUHJlY2VkZW5jZSkpLkZpcnN0KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobGFzdE1hdGNoICE9IG51bGwgJiYgYmVzdE1hdGNoLlN0YXJ0SW5kZXggPCBsYXN0TWF0Y2guRW5kSW5kZXgpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaXRlbXMuQWRkKG5ldyBUb2tlbihiZXN0TWF0Y2guVG9rZW5UeXBlLCBiZXN0TWF0Y2guVmFsdWUpKTtcclxuXHJcbiAgICAgICAgICAgICAgICBsYXN0TWF0Y2ggPSBiZXN0TWF0Y2g7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBpdGVtcztcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG4gICAgfVxyXG59IiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkNvbXBvbmVudE1vZGVsO1xyXG51c2luZyBTeXN0ZW0uR2xvYmFsaXphdGlvbjtcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5XaW5kb3dzO1xyXG51c2luZyBTeXN0ZW0uV2luZG93cy5Db250cm9scztcclxudXNpbmcgU3lzdGVtLldpbmRvd3MuRGF0YTtcclxudXNpbmcgU3lzdGVtLlhtbDtcclxudXNpbmcgQnJpZGdlLkN1c3RvbVVJTWFya3VwLkNvbW1vbjtcclxudXNpbmcgQnJpZGdlLkN1c3RvbVVJTWFya3VwLlRva2VuaXplcnM7XHJcbnVzaW5nIEJyaWRnZS5IdG1sNTtcclxuXHJcbm5hbWVzcGFjZSBCcmlkZ2UuQ3VzdG9tVUlNYXJrdXAuVUlcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEJ1aWxkZXJcclxuICAgIHtcclxuICAgICAgICAjcmVnaW9uIFN0YXRpYyBGaWVsZHNcclxuICAgICAgICBzdGF0aWMgcmVhZG9ubHkgRGljdGlvbmFyeTxzdHJpbmcsIEZ1bmM8RnJhbWV3b3JrRWxlbWVudD4+IF9lbGVtZW50Q3JlYXRvcnMgPSBnbG9iYWw6OkJyaWRnZS5TY3JpcHQuQ2FsbEZvcihuZXcgRGljdGlvbmFyeTxzdHJpbmcsIEZ1bmM8RnJhbWV3b3JrRWxlbWVudD4+KCksKF9vMSk9PntfbzEuQWRkKFwiRElWXCIsKCkgPT4gbmV3IEh0bWxFbGVtZW50KFwiZGl2XCIpKTtyZXR1cm4gX28xO30pO1xyXG5cclxuICAgICAgICBzdGF0aWMgcmVhZG9ubHkgVG9rZW5pemVyIEludm9jYXRpb25FeHByZXNzaW9uVG9rZW5pemVyID0gbmV3IFRva2VuaXplclxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgVG9rZW5EZWZpbml0aW9ucyA9IEludm9jYXRpb25FeHByZXNzaW9uVG9rZW5EZWZpbml0aW9ucy5WYWx1ZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIEZpZWxkc1xyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgWG1sU3RyaW5nO1xyXG5cclxuICAgICAgICBpbnRlcm5hbCBYbWxOb2RlIF9yb290Tm9kZTtcclxuXHJcbiAgICAgICAgb2JqZWN0IF9jdXJyZW50SW5zdGFuY2U7XHJcblxyXG4gICAgICAgIGJvb2wgX2lzQnVpbGRpbmdUZW1wbGF0ZTtcclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gRXZlbnRzXHJcbiAgICAgICAgZXZlbnQgQWN0aW9uPGludCwgRnJhbWV3b3JrRWxlbWVudD4gRWxlbWVudENyZWF0ZWRBdExpbmU7XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIFB1YmxpYyBQcm9wZXJ0aWVzXHJcbiAgICAgICAgcHVibGljIG9iamVjdCBDYWxsZXIgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBvYmplY3QgRGF0YUNvbnRleHQgeyBnZXQ7IHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc0Rlc2lnbk1vZGUgeyBnZXQ7IHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVHlwZUZpbmRlciBUeXBlRmluZGVyIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gUHVibGljIE1ldGhvZHNcclxuICAgICAgICBwdWJsaWMgc3RhdGljIFQgQ3JlYXRlPFQ+KCkgd2hlcmUgVCA6IENvbnRyb2wsIG5ldygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgY29udHJvbCA9IG5ldyBUKCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gQXBwbHlUZW1wbGF0ZTxUPihjb250cm9sKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBSZWdpc3RlcihzdHJpbmcgdGFnLCBGdW5jPEZyYW1ld29ya0VsZW1lbnQ+IGZ1bmMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfZWxlbWVudENyZWF0b3JzW3RhZy5Ub1VwcGVyKCldID0gZnVuYztcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIE1ldGhvZHNcclxuICAgICAgICBwdWJsaWMgc3RhdGljIFQgQXBwbHlUZW1wbGF0ZTxUPihUIGNvbnRyb2wpIHdoZXJlIFQgOiBDb250cm9sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb250cm9sIT1udWxsP2dsb2JhbDo6QnJpZGdlLlNjcmlwdC5Gcm9tTGFtYmRhKCgpPT5jb250cm9sLkFwcGx5VGVtcGxhdGUoKSk6bnVsbDtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjb250cm9sO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgc3RhdGljIHZvaWQgQnVpbGRDb250cm9sVGVtcGxhdGUoVGVtcGxhdGUgeG1sVGVtcGxhdGUsIEZyYW1ld29ya0VsZW1lbnQgY29udHJvbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBidWlsZGVyID0gbmV3IEJ1aWxkZXJcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX3Jvb3ROb2RlID0geG1sVGVtcGxhdGUuUm9vdCxcclxuICAgICAgICAgICAgICAgIERhdGFDb250ZXh0ID0gY29udHJvbCxcclxuICAgICAgICAgICAgICAgIENhbGxlciA9IGNvbnRyb2wsXHJcbiAgICAgICAgICAgICAgICBfaXNCdWlsZGluZ1RlbXBsYXRlID0gdHJ1ZVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdmFyIHN1YkNvbnRyb2wgPSBidWlsZGVyLkJ1aWxkTm9kZShidWlsZGVyLl9yb290Tm9kZSwgY29udHJvbCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgc3ViQ29udHJvbEFzRnJhbWV3b3JrRWxlbWVudCA9IHN1YkNvbnRyb2wgYXMgRnJhbWV3b3JrRWxlbWVudDtcclxuICAgICAgICAgICAgaWYgKHN1YkNvbnRyb2xBc0ZyYW1ld29ya0VsZW1lbnQgPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FeGNlcHRpb24oXCJUZW1wbGF0ZUNvbnRyb2xGaXJzdEl0ZW1NdXN0QmVIVE1MRWxlbWVudFwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29udHJvbC5fcm9vdCA9IHN1YkNvbnRyb2xBc0ZyYW1ld29ya0VsZW1lbnQuX3Jvb3Q7XHJcbiAgICAgICAgICAgIGNvbnRyb2wuQWRkVmlzdWFsQ2hpbGQoc3ViQ29udHJvbEFzRnJhbWV3b3JrRWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgTG9hZENvbXBvbmVudChGcmFtZXdvcmtFbGVtZW50IGNvbnRyb2wsIHN0cmluZyB4bWwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBMb2FkQ29tcG9uZW50KGNvbnRyb2wsIFhtbEhlbHBlci5HZXRSb290Tm9kZSh4bWwpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHN0YXRpYyB2b2lkIExvYWRDb21wb25lbnQoRnJhbWV3b3JrRWxlbWVudCBjb250cm9sLCBYbWxOb2RlIG5vZGUsIGJvb2wgSXNEZXNpZ25Nb2RlID0gZmFsc2UsIEFjdGlvbjxpbnQsIEZyYW1ld29ya0VsZW1lbnQ+IEVsZW1lbnRDcmVhdGVkQXRMaW5lID0gbnVsbCwgc3RyaW5nIHhtbCA9IG51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgYnVpbGRlciA9IG5ldyBCdWlsZGVyXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF9yb290Tm9kZSA9IG5vZGUsXHJcbiAgICAgICAgICAgICAgICBEYXRhQ29udGV4dCA9IGNvbnRyb2wsXHJcbiAgICAgICAgICAgICAgICBDYWxsZXIgPSBjb250cm9sLFxyXG4gICAgICAgICAgICAgICAgSXNEZXNpZ25Nb2RlID0gSXNEZXNpZ25Nb2RlLFxyXG4gICAgICAgICAgICAgICAgWG1sU3RyaW5nID0geG1sXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBpZiAoRWxlbWVudENyZWF0ZWRBdExpbmUgIT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYnVpbGRlci5FbGVtZW50Q3JlYXRlZEF0TGluZSArPSBFbGVtZW50Q3JlYXRlZEF0TGluZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIHN1YkNvbnRyb2wgPSBidWlsZGVyLkJ1aWxkTm9kZShidWlsZGVyLl9yb290Tm9kZSwgY29udHJvbCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgc3ViQ29udHJvbEFzRnJhbWV3b3JrRWxlbWVudCA9IHN1YkNvbnRyb2wgYXMgRnJhbWV3b3JrRWxlbWVudDtcclxuICAgICAgICAgICAgaWYgKHN1YkNvbnRyb2xBc0ZyYW1ld29ya0VsZW1lbnQgPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FeGNlcHRpb24oXCJDb250cm9sRmlyc3RJdGVtTXVzdEJlSFRNTEVsZW1lbnRcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIEluaXRET00oY29udHJvbCk7XHJcbiAgICAgICAgICAgIGNvbnRyb2wuQWRkTG9naWNhbENoaWxkKHN1YkNvbnRyb2xBc0ZyYW1ld29ya0VsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIFhtbE5vZGUgR2V0Rmlyc3ROb2RlU2tpcENvbW1lbnRBbmRUZXh0KFhtbE5vZGVMaXN0IHhtbE5vZGVMaXN0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGxlbiA9IHhtbE5vZGVMaXN0LkNvdW50O1xyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5vZGUgPSB4bWxOb2RlTGlzdFtpXTtcclxuICAgICAgICAgICAgICAgIHZhciBub2RlVHlwZSA9IG5vZGUuTm9kZVR5cGU7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG5vZGVUeXBlID09IE5vZGVUeXBlLkNvbW1lbnQgfHxcclxuICAgICAgICAgICAgICAgICAgICBub2RlVHlwZSA9PSBOb2RlVHlwZS5UZXh0KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBub2RlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk5vZGVDYW5ub3RCZUVtcHR5LlwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyB2b2lkIEluaXRET00oRnJhbWV3b3JrRWxlbWVudCBpbnN0YW5jZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChpbnN0YW5jZS5fcm9vdCA9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5Jbml0RE9NKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBib29sIElzVXNlckRlZmluZWRUYWcoc3RyaW5nIHRhZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvbnRhaW5zPGNoYXI+KHRhZywnLicpIHx8IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ29udGFpbnM8Y2hhcj4odGFnLCctJykgfHwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db250YWluczxjaGFyPih0YWcsJzonKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG9iamVjdCBCdWlsZE5vZGUoWG1sTm9kZSB4bWxOb2RlLCBGcmFtZXdvcmtFbGVtZW50IHBhcmVudEluc3RhbmNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHhtbE5vZGUuTm9kZVR5cGUgPT0gTm9kZVR5cGUuQ29tbWVudClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh4bWxOb2RlLk5vZGVUeXBlID09IE5vZGVUeXBlLlRleHQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBCdWlsZFRleHROb2RlKHhtbE5vZGUsIHBhcmVudEluc3RhbmNlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgaWYgKFRyeVRvSW5pdFBhcmVudFByb3BlcnR5KHhtbE5vZGUpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGluc3RhbmNlID0gQ3JlYXRlSW5zdGFuY2UoeG1sTm9kZSk7XHJcblxyXG4gICAgICAgICAgICBcclxuXHJcbiAgICAgICAgICAgIF9jdXJyZW50SW5zdGFuY2UgPSBpbnN0YW5jZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChJc0Rlc2lnbk1vZGUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBsaW5lTnVtYmVyID0geG1sTm9kZS5HZXRPcmlnaW5hbExpbmVOdW1iZXIoX3Jvb3ROb2RlLCBYbWxTdHJpbmcpO1xyXG5cclxuICAgICAgICAgICAgICAgIEVsZW1lbnRDcmVhdGVkQXRMaW5lIT1udWxsP2dsb2JhbDo6QnJpZGdlLlNjcmlwdC5Gcm9tTGFtYmRhKCgpPT5FbGVtZW50Q3JlYXRlZEF0TGluZS5JbnZva2UobGluZU51bWJlciwgaW5zdGFuY2UpKTpudWxsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBJbml0aWFsaXplRGF0YUNvbnRleHQoeG1sTm9kZSwgaW5zdGFuY2UsIHBhcmVudEluc3RhbmNlKTtcclxuXHJcbiAgICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgUHJvY2Vzc0F0dHJpYnV0ZXMoeG1sTm9kZSwgaW5zdGFuY2UpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNoaWxkTm9kZXMgPSB4bWxOb2RlLkNoaWxkTm9kZXM7XHJcblxyXG4gICAgICAgICAgICB2YXIgbGVuID0gY2hpbGROb2Rlcy5Db3VudDtcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBjaGlsZE5vZGUgPSBjaGlsZE5vZGVzW2ldO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBzdWJJdGVtID0gQnVpbGROb2RlKGNoaWxkTm9kZSwgaW5zdGFuY2UpO1xyXG5cclxuICAgICAgICAgICAgICAgIENvbm5lY3QoaW5zdGFuY2UsIHN1Ykl0ZW0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gaW5zdGFuY2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIFByb2Nlc3NBdHRyaWJ1dGVzKFhtbE5vZGUgeG1sTm9kZSwgRnJhbWV3b3JrRWxlbWVudCBpbnN0YW5jZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBhdHRyaWJ1dGVzID0geG1sTm9kZS5BdHRyaWJ1dGVzO1xyXG5cclxuICAgICAgICAgICAgdmFyIGxlbiA9IGF0dHJpYnV0ZXMuQ291bnQ7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBub2RlQXR0cmlidXRlID0gYXR0cmlidXRlc1tpXTtcclxuXHJcbiAgICAgICAgICAgICAgICBQcm9jZXNzQXR0cmlidXRlKGluc3RhbmNlLCBub2RlQXR0cmlidXRlLk5hbWUsIG5vZGVBdHRyaWJ1dGUuVmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBvYmplY3QgQnVpbGRUZXh0Tm9kZShYbWxOb2RlIHhtbE5vZGUsIEZyYW1ld29ya0VsZW1lbnQgcGFyZW50SW5zdGFuY2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAvLyBza2lwIGVtcHR5IHNwYWNlc1xyXG4gICAgICAgICAgICB2YXIgaHRtbCA9IHhtbE5vZGUuR2V0SW5uZXJUZXh0KCk7XHJcbiAgICAgICAgICAgIGlmIChzdHJpbmcuSXNOdWxsT3JXaGl0ZVNwYWNlKGh0bWwpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gbWF5YmUgPGRpdj4ge0xhc3ROYW1lfSA8L2Rpdj5cclxuICAgICAgICAgICAgdmFyIGJpbmRpbmdJbmZvID0gQmluZGluZ0luZm8uVHJ5UGFyc2VFeHByZXNzaW9uKGh0bWwpO1xyXG4gICAgICAgICAgICBpZiAoYmluZGluZ0luZm8gIT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYmluZGluZ0luZm8uQmluZGluZ01vZGUgPSBCaW5kaW5nTW9kZS5PbmVXYXk7XHJcblxyXG4gICAgICAgICAgICAgICAgYmluZGluZ0luZm8uU291cmNlID0gcGFyZW50SW5zdGFuY2U7XHJcbiAgICAgICAgICAgICAgICBiaW5kaW5nSW5mby5Tb3VyY2VQYXRoID0gXCJEYXRhQ29udGV4dC5cIiArIGJpbmRpbmdJbmZvLlNvdXJjZVBhdGguUGF0aDtcclxuXHJcbiAgICAgICAgICAgICAgICBiaW5kaW5nSW5mby5UYXJnZXQgPSBwYXJlbnRJbnN0YW5jZTtcclxuICAgICAgICAgICAgICAgIGJpbmRpbmdJbmZvLlRhcmdldFBhdGggPSBcIklubmVySFRNTFwiO1xyXG5cclxuICAgICAgICAgICAgICAgIGJpbmRpbmdJbmZvLkNvbm5lY3QoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgaW5zdGFuY2VBc0NvbnRlbnRDb250cm9sID0gcGFyZW50SW5zdGFuY2UgYXMgQ29udGVudENvbnRyb2w7XHJcbiAgICAgICAgICAgIGlmIChpbnN0YW5jZUFzQ29udGVudENvbnRyb2wgIT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2VBc0NvbnRlbnRDb250cm9sLkNvbnRlbnQgPSBodG1sO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHBhcmVudEluc3RhbmNlLl9yb290LkFwcGVuZChodG1sKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBDb25uZWN0KG9iamVjdCBwYXJlbnQsIG9iamVjdCBzdWJJdGVtKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHN1Ykl0ZW0gPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgc3ViSXRlbUFzRnJhbWV3b3JrRWxlbWVudCA9IHN1Ykl0ZW0gYXMgRnJhbWV3b3JrRWxlbWVudDtcclxuICAgICAgICAgICAgaWYgKHN1Ykl0ZW1Bc0ZyYW1ld29ya0VsZW1lbnQgPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBwYXJlbnQuQXM8RnJhbWV3b3JrRWxlbWVudD4oKS5BZGRMb2dpY2FsQ2hpbGQoc3ViSXRlbUFzRnJhbWV3b3JrRWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBGcmFtZXdvcmtFbGVtZW50IENyZWF0ZUluc3RhbmNlSW50ZXJuYWwoWG1sTm9kZSB4bWxOb2RlKVxyXG4gICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgIHZhciB0YWcgPSB4bWxOb2RlLk5hbWUuVG9VcHBlcigpO1xyXG5cclxuICAgICAgICAgICAgRnVuYzxGcmFtZXdvcmtFbGVtZW50PiBjcmVhdG9yRnVuYyA9IG51bGw7XHJcbiAgICAgICAgICAgIF9lbGVtZW50Q3JlYXRvcnMuVHJ5R2V0VmFsdWUodGFnLlRvVXBwZXIoKSwgb3V0IGNyZWF0b3JGdW5jKTtcclxuICAgICAgICAgICAgaWYgKGNyZWF0b3JGdW5jICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdG9yRnVuYygpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgY29udHJvbFR5cGUgPSBnbG9iYWw6OkJyaWRnZS5TY3JpcHQuVG9UZW1wKFwia2V5MVwiLFR5cGVGaW5kZXIpIT1udWxsP2dsb2JhbDo6QnJpZGdlLlNjcmlwdC5Gcm9tVGVtcDxUeXBlRmluZGVyPihcImtleTFcIikuRmluZFR5cGUodGFnKTooVHlwZSludWxsO1xyXG5cclxuICAgICAgICAgICAgaWYgKGNvbnRyb2xUeXBlID09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChJc1VzZXJEZWZpbmVkVGFnKHhtbE5vZGUuTmFtZSkgPT0gZmFsc2UpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBIdG1sRWxlbWVudCh4bWxOb2RlLk5hbWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudEV4Y2VwdGlvbihcIk5vdFJlY29nbml6ZWRUYWc6XCIgKyB0YWcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gKEZyYW1ld29ya0VsZW1lbnQpQWN0aXZhdG9yLkNyZWF0ZUluc3RhbmNlKGNvbnRyb2xUeXBlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIEZyYW1ld29ya0VsZW1lbnQgQ3JlYXRlSW5zdGFuY2UoWG1sTm9kZSB4bWxOb2RlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGluc3RhbmNlID0gQ3JlYXRlSW5zdGFuY2VJbnRlcm5hbCh4bWxOb2RlKTtcclxuICAgICAgICAgICAgSW5pdERPTShpbnN0YW5jZSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gaW5zdGFuY2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIEluaXRpYWxpemVEYXRhQ29udGV4dChYbWxOb2RlIHhtbE5vZGUsIEZyYW1ld29ya0VsZW1lbnQgaW5zdGFuY2UsIEZyYW1ld29ya0VsZW1lbnQgcGFyZW50SW5zdGFuY2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoX2lzQnVpbGRpbmdUZW1wbGF0ZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2UuRGF0YUNvbnRleHQgPSBEYXRhQ29udGV4dDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBzdWJDb250cm9sRGF0YUNvbnRleHRBdHRyaWJ1dGUgPSB4bWxOb2RlLkF0dHJpYnV0ZXNbXCJEYXRhQ29udGV4dFwiXTtcclxuICAgICAgICAgICAgICAgIGlmIChzdWJDb250cm9sRGF0YUNvbnRleHRBdHRyaWJ1dGUgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYmluZGluZ0luZm8gPSBuZXcgQmluZGluZ0luZm9cclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEJpbmRpbmdNb2RlID0gQmluZGluZ01vZGUuT25lV2F5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBTb3VyY2UgPSBwYXJlbnRJbnN0YW5jZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgU291cmNlUGF0aCA9IFwiRGF0YUNvbnRleHRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgVGFyZ2V0ID0gaW5zdGFuY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFRhcmdldFBhdGggPSBcIkRhdGFDb250ZXh0XCJcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIGJpbmRpbmdJbmZvLkNvbm5lY3QoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYmkgPSBCaW5kaW5nSW5mby5UcnlQYXJzZUV4cHJlc3Npb24oc3ViQ29udHJvbERhdGFDb250ZXh0QXR0cmlidXRlLlZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYmkgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXhjZXB0aW9uKFwiSW52YWxpZEJpbmRpbmdFeHByZXNzaW9uOlwiICsgc3ViQ29udHJvbERhdGFDb250ZXh0QXR0cmlidXRlLlZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGJpLkJpbmRpbmdNb2RlID0gQmluZGluZ01vZGUuT25lV2F5O1xyXG4gICAgICAgICAgICAgICAgICAgIGJpLlNvdXJjZSA9IHBhcmVudEluc3RhbmNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJpLlNvdXJjZVBhdGggPSBcIkRhdGFDb250ZXh0LlwiICsgYmkuU291cmNlUGF0aC5QYXRoO1xyXG4gICAgICAgICAgICAgICAgICAgIGJpLlRhcmdldCA9IGluc3RhbmNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJpLlRhcmdldFBhdGggPSBcIkRhdGFDb250ZXh0XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgYmkuQ29ubmVjdCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBcclxuXHJcbiAgICAgICAgdm9pZCBQcm9jZXNzQXR0cmlidXRlKG9iamVjdCBpbnN0YW5jZSwgc3RyaW5nIG5hbWUsIHN0cmluZyB2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChuYW1lID09IFwiRGF0YUNvbnRleHRcIilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgbmFtZVVwcGVyQ2FzZSA9IG5hbWUuVG9VcHBlckNhc2UoKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChuYW1lID09IFwiY2xhc3NcIilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbmFtZSA9IFwiQ2xhc3NcIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIHRhcmdldFByb3BlcnR5ID0gUmVmbGVjdGlvbkhlbHBlci5GaW5kUHJvcGVydHkoaW5zdGFuY2UsIG5hbWUpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGJpID0gQmluZGluZ0luZm8uVHJ5UGFyc2VFeHByZXNzaW9uKHZhbHVlKTtcclxuICAgICAgICAgICAgaWYgKGJpICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBldmVudEluZm8gPSBSZWZsZWN0aW9uSGVscGVyLkZpbmRFdmVudChpbnN0YW5jZSwgbmFtZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnRJbmZvICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1ldGhvZEluZm8gPSBSZWZsZWN0aW9uSGVscGVyLkdldE1ldGhvZEluZm8oRGF0YUNvbnRleHQsIGJpLlNvdXJjZVBhdGguUGF0aCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBoYW5kbGVyID0gRGVsZWdhdGUuQ3JlYXRlRGVsZWdhdGUoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5GaXJzdDxnbG9iYWw6OlN5c3RlbS5UeXBlPihldmVudEluZm8uQWRkTWV0aG9kLlBhcmFtZXRlclR5cGVzKSwgRGF0YUNvbnRleHQsIG1ldGhvZEluZm8pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBldmVudEluZm8uQWRkRXZlbnRIYW5kbGVyKGluc3RhbmNlLCBoYW5kbGVyKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChuYW1lLkNvbnRhaW5zKFwiLlwiKSA9PSBmYWxzZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0UHJvcGVydHkgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBodG1sQmluZGluZ0luZm8gPSBuZXcgSFRNTEJpbmRpbmdJbmZvXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNvdXJjZSA9IGluc3RhbmNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgU291cmNlUGF0aCA9IG5ldyBQcm9wZXJ0eVBhdGgoXCJEYXRhQ29udGV4dC5cIiArIGJpLlNvdXJjZVBhdGguUGF0aCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUYXJnZXQgPSBpbnN0YW5jZS5BczxGcmFtZXdvcmtFbGVtZW50PigpLl9yb290LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgVGFyZ2V0UGF0aCA9IG5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBCaW5kaW5nTW9kZSA9IEJpbmRpbmdNb2RlLk9uZVdheVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEhUTUxCaW5kaW5nSW5mby5UYXJnZXRDYW5VcGRhdGVTb3VyY2UoaHRtbEJpbmRpbmdJbmZvLlRhcmdldCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxCaW5kaW5nSW5mby5CaW5kaW5nTW9kZSA9IEJpbmRpbmdNb2RlLlR3b1dheTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxCaW5kaW5nSW5mby5Db25uZWN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGJpLlNvdXJjZVBhdGggPSBuZXcgUHJvcGVydHlQYXRoKFwiRGF0YUNvbnRleHQuXCIgKyBiaS5Tb3VyY2VQYXRoLlBhdGgpO1xyXG4gICAgICAgICAgICAgICAgYmkuU291cmNlID0gaW5zdGFuY2U7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gYmkuU291cmNlID0gRGF0YUNvbnRleHQ7XHJcbiAgICAgICAgICAgICAgICBiaS5UYXJnZXQgPSBpbnN0YW5jZTtcclxuICAgICAgICAgICAgICAgIGJpLlRhcmdldFBhdGggPSBuYW1lO1xyXG5cclxuICAgICAgICAgICAgICAgIGJpLkNvbm5lY3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0YXJnZXRQcm9wZXJ0eSAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0UHJvcGVydHkuUHJvcGVydHlUeXBlLklzRW51bSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBSZWZsZWN0aW9uSGVscGVyLlNldFByb3BlcnR5VmFsdWUoaW5zdGFuY2UsIG5hbWUsIEVudW0uUGFyc2UodGFyZ2V0UHJvcGVydHkuUHJvcGVydHlUeXBlLCB2YWx1ZSwgdHJ1ZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgY29udmVydGVyQXR0cmlidXRlcyA9IHRhcmdldFByb3BlcnR5LkdldEN1c3RvbUF0dHJpYnV0ZXModHlwZW9mKFR5cGVDb252ZXJ0ZXJBdHRyaWJ1dGUpKTtcclxuICAgICAgICAgICAgICAgIHZhciBmaXJzdENvbnZlcnRlckF0cmlidXRlID0gY29udmVydGVyQXR0cmlidXRlcyE9bnVsbD9jb252ZXJ0ZXJBdHRyaWJ1dGVzLkZpcnN0T3JEZWZhdWx0KCk6KG9iamVjdCludWxsO1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpcnN0Q29udmVydGVyQXRyaWJ1dGUgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY29udmVydGVyID0gKFR5cGVDb252ZXJ0ZXJBdHRyaWJ1dGUpIGZpcnN0Q29udmVydGVyQXRyaWJ1dGU7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlQ29udmVydGVyID0gKElWYWx1ZUNvbnZlcnRlcikgQWN0aXZhdG9yLkNyZWF0ZUluc3RhbmNlKGNvbnZlcnRlci5fdHlwZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnZlcnRlZFZhbHVlID0gdmFsdWVDb252ZXJ0ZXIuQ29udmVydCh2YWx1ZSwgaW5zdGFuY2UuR2V0VHlwZSgpLkdldFByb3BlcnR5KG5hbWUpLlByb3BlcnR5VHlwZSwgbnVsbCwgQ3VsdHVyZUluZm8uQ3VycmVudEN1bHR1cmUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBSZWZsZWN0aW9uSGVscGVyLlNldFByb3BlcnR5VmFsdWUoaW5zdGFuY2UsIG5hbWUsIGNvbnZlcnRlZFZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgUmVmbGVjdGlvbkhlbHBlci5TZXRQcm9wZXJ0eVZhbHVlKGluc3RhbmNlLCBuYW1lLCB2YWx1ZS5DaGFuZ2VUeXBlKHRhcmdldFByb3BlcnR5LlByb3BlcnR5VHlwZSkpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAobmFtZS5TdGFydHNXaXRoKFwib24uXCIpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZXZlbnROYW1lID0gbmFtZS5SZW1vdmVGcm9tU3RhcnQoXCJvbi5cIik7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gc3VwcG9ydCB0aGlzIGZvcm1hdDogdGhpcy5Ob3RpZnkoT25Db250YWN0Q2xpY2tlZClcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5TdGFydHNXaXRoKFwidGhpcy5cIikpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRva2VucyA9IEludm9jYXRpb25FeHByZXNzaW9uVG9rZW5pemVyLlRva2VuaXplKHZhbHVlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGkrKzsgLy8gc2tpcCB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgaSsrOyAvLyBza2lwIC5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgbWV0aG9kTmFtZSA9IHRva2Vuc1tpXS5WYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBpKys7IC8vIHNraXAgbWV0aG9kTmFtZVxyXG4gICAgICAgICAgICAgICAgICAgIGkrKzsgLy8gc2tpcCAoXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZpcnN0UGFyYW1ldGVyID0gdG9rZW5zW2ldLlZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgbWkgPSBDYWxsZXIuR2V0VHlwZSgpLkdldE1ldGhvZChtZXRob2ROYW1lKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UuQXM8RnJhbWV3b3JrRWxlbWVudD4oKS5PbihldmVudE5hbWUsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IHsgbWkuSW52b2tlKENhbGxlciwgZmlyc3RQYXJhbWV0ZXIpOyB9KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBtZXRob2RJbmZvID0gQ2FsbGVyLkdldFR5cGUoKS5HZXRNZXRob2QodmFsdWUsIFJlZmxlY3Rpb25IZWxwZXIuQWxsQmluZGluZ3MpO1xyXG5cclxuICAgICAgICAgICAgICAgIGluc3RhbmNlLkFzPEZyYW1ld29ya0VsZW1lbnQ+KCkuT24oZXZlbnROYW1lLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiB7IG1ldGhvZEluZm8uSW52b2tlKENhbGxlcik7IH0pKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKG5hbWVVcHBlckNhc2UuU3RhcnRzV2l0aChcIkNTUy5cIikpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBzdHlsZUF0dHJpYnV0ZU5hbWUgPSBuYW1lLlN1YnN0cmluZyg0KTtcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlLkFzPEZyYW1ld29ya0VsZW1lbnQ+KCkuX3Jvb3QuQ3NzKHN0eWxlQXR0cmlidXRlTmFtZSwgdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBjc3MuUHNldWRvLmJhY2tncm91bmRJbWFnZVxyXG4gICAgICAgICAgICBpZiAobmFtZVVwcGVyQ2FzZS5TdGFydHNXaXRoKFwiQ1NTLlBTRVVETy5cIikpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudEV4Y2VwdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgLy8gdmFyIHBzZXVkb0F0dHJpYnV0ZU5hbWUgPSBuYW1lLlN1YnN0cmluZygxMSk7XHJcbiAgICAgICAgICAgICAgICAvLyBET00uaGVhZC5BcHBlbmQoXCI8c3R5bGU+I1wiICsgaW5zdGFuY2UuSWQgKyBcIjo6XCIgKyBwc2V1ZG9BdHRyaWJ1dGVOYW1lICsgXCJ7IGNvbnRlbnQ6J2JhcicgfTwvc3R5bGU+XCIpO1xyXG4gICAgICAgICAgICAgICAgLy8gcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAobmFtZSA9PSBcInguTmFtZVwiKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBSZWZsZWN0aW9uSGVscGVyLlNldE5vblN0YXRpY0ZpZWxkKENhbGxlciwgdmFsdWUsIGluc3RhbmNlKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGluc3RhbmNlLkFzPEZyYW1ld29ya0VsZW1lbnQ+KCkuX3Jvb3QuQXR0cihuYW1lLCB2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBib29sIFRyeVRvSW5pdFBhcmVudFByb3BlcnR5KFhtbE5vZGUgeG1sTm9kZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBwYXJlbnROb2RlTmFtZSA9IHhtbE5vZGUuUGFyZW50Tm9kZS5OYW1lO1xyXG4gICAgICAgICAgICB2YXIgbm9kZU5hbWUgPSB4bWxOb2RlLk5hbWU7XHJcblxyXG5cclxuICAgICAgICAgICAgLy8gPEl0ZW1zQ29udHJvbC5JdGVtVGVtcGxhdGU+XHJcblxyXG4gICAgICAgICAgICBpZiAoIW5vZGVOYW1lLlN0YXJ0c1dpdGgocGFyZW50Tm9kZU5hbWUgKyBcIi5cIikpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIHByb3BlcnR5TmFtZSA9IG5vZGVOYW1lLlJlbW92ZUZyb21TdGFydChwYXJlbnROb2RlTmFtZSArIFwiLlwiKTtcclxuICAgICAgICAgICAgaWYgKHByb3BlcnR5TmFtZSA9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBwcm9wZXJ0eUluZm8gPSBfY3VycmVudEluc3RhbmNlLkdldFR5cGUoKS5HZXRQcm9wZXJ0eShwcm9wZXJ0eU5hbWUpO1xyXG4gICAgICAgICAgICBpZiAocHJvcGVydHlJbmZvID09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgIHZhciBwcm9wZXJ0eVR5cGUgPSBwcm9wZXJ0eUluZm8uUHJvcGVydHlUeXBlO1xyXG4gICAgICAgICAgICBpZiAocHJvcGVydHlUeXBlID09IHR5cGVvZihUZW1wbGF0ZSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBwcm9wZXJ0eVZhbHVlID0gVGVtcGxhdGUuQ3JlYXRlRnJvbShHZXRGaXJzdE5vZGVTa2lwQ29tbWVudEFuZFRleHQoeG1sTm9kZS5DaGlsZE5vZGVzKSk7XHJcbiAgICAgICAgICAgICAgICBSZWZsZWN0aW9uSGVscGVyLlNldFByb3BlcnR5VmFsdWUoX2N1cnJlbnRJbnN0YW5jZSwgcHJvcGVydHlOYW1lLCBwcm9wZXJ0eVZhbHVlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAocHJvcGVydHlUeXBlLklzTnVtZXJpYygpIHx8IHByb3BlcnR5VHlwZSA9PSB0eXBlb2Yoc3RyaW5nKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGlubmVySFRNTCA9ICh4bWxOb2RlLkdldElubmVyVGV4dCgpICsgXCJcIikuVHJpbSgpO1xyXG5cclxuICAgICAgICAgICAgICAgIFByb2Nlc3NBdHRyaWJ1dGUoIF9jdXJyZW50SW5zdGFuY2UsIHByb3BlcnR5TmFtZSwgaW5uZXJIVE1MKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEYXRhR3JpZC5Db2x1bW5zPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RGF0YUdyaWRDb2x1bW4gTmFtZT0nRnVsbE5hbWUnIExhYmVsPSdBZMSxIFNveUFkxLEnIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9EYXRhR3JpZC5Db2x1bW5zPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgaWYgKHByb3BlcnR5SW5mby5TZXRNZXRob2QgPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbGxlY3Rpb24gPSBwcm9wZXJ0eUluZm8uR2V0VmFsdWUoX2N1cnJlbnRJbnN0YW5jZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGFkZE1ldGhvZCA9IGNvbGxlY3Rpb24uR2V0VHlwZSgpLkdldE1ldGhvZChcIkFkZFwiKTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkTm9kZXMgPSB4bWxOb2RlLkNoaWxkTm9kZXM7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGxlbiA9IGNoaWxkTm9kZXMuQ291bnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGROb2RlID0gY2hpbGROb2Rlc1tpXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoaWxkTm9kZS5Ob2RlVHlwZSAhPSBOb2RlVHlwZS5FbGVtZW50KVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgc3ViSXRlbSA9IENyZWF0ZUluc3RhbmNlKGNoaWxkTm9kZSk7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICBJbml0aWFsaXplRGF0YUNvbnRleHQoY2hpbGROb2RlLCBzdWJJdGVtLCBfY3VycmVudEluc3RhbmNlLkFzPEZyYW1ld29ya0VsZW1lbnQ+KCkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBQcm9jZXNzQXR0cmlidXRlcyhjaGlsZE5vZGUsc3ViSXRlbSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGFkZE1ldGhvZC5JbnZva2UoY29sbGVjdGlvbiwgc3ViSXRlbSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgTm90SW1wbGVtZW50ZWRFeGNlcHRpb24obm9kZU5hbWUpO1xyXG5cclxuICAgICAgICB9XHJcblxuICAgICAgICAjZW5kcmVnaW9uXHJcbiAgICBcbnByaXZhdGUgVHlwZUZpbmRlciBfX1Byb3BlcnR5X19Jbml0aWFsaXplcl9fVHlwZUZpbmRlcj1uZXcgVHlwZUZpbmRlcigpO31cclxufSIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLldpbmRvd3M7XHJcbnVzaW5nIFN5c3RlbS5YbWw7XHJcbnVzaW5nIEJyaWRnZS5IdG1sNTtcclxuXHJcbm5hbWVzcGFjZSBCcmlkZ2UuQ3VzdG9tVUlNYXJrdXAuVUlcclxue1xyXG4gICAgc3RhdGljIGNsYXNzIEV4dGVuc2lvbnNcclxuICAgIHtcclxuICAgICAgICAjcmVnaW9uIFB1YmxpYyBNZXRob2RzXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgR2V0SW5uZXJUZXh0KHRoaXMgWG1sTm9kZSB4bWxOb2RlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHhtbE5vZGUuTm9kZVR5cGUgPT0gTm9kZVR5cGUuVGV4dClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHhtbE5vZGVbXCJ0ZXh0Q29udGVudFwiXS5BczxzdHJpbmc+KCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB4bWxOb2RlW1wiaW5uZXJIVE1MXCJdLkFzPHN0cmluZz4oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgVCBMb2FkQ29tcG9uZW50PFQ+KHRoaXMgVCBlbGVtZW50LCBzdHJpbmcgeG1sKSB3aGVyZSBUIDogRnJhbWV3b3JrRWxlbWVudFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQnVpbGRlci5Mb2FkQ29tcG9uZW50KGVsZW1lbnQsIHhtbCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG4gICAgfVxyXG59IiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgQnJpZGdlLkN1c3RvbVVJTWFya3VwLkNvbW1vbjtcclxudXNpbmcgQnJpZGdlLkN1c3RvbVVJTWFya3VwLkxpYnJhcmllcy5Db2RlTWlycm9yO1xyXG51c2luZyBCcmlkZ2UuQ3VzdG9tVUlNYXJrdXAuTGlicmFyaWVzLlNlbWFudGljVUk7XHJcbnVzaW5nIEJyaWRnZS5DdXN0b21VSU1hcmt1cC5MaWJyYXJpZXMuU3dpcGVyO1xyXG51c2luZyBCcmlkZ2UuQ3VzdG9tVUlNYXJrdXAuTGlicmFyaWVzLnZpZXdlcmpzO1xyXG5cclxubmFtZXNwYWNlIEJyaWRnZS5DdXN0b21VSU1hcmt1cC5VSVxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgVHlwZUZpbmRlclxyXG4gICAge1xyXG4gICAgICAgICNyZWdpb24gU3RhdGljIEZpZWxkc1xyXG4gICAgICAgIHN0YXRpYyByZWFkb25seSBMaXN0PFhtbEludGVsbGlzZW5zZUluZm8+IF90YWdzID0gbmV3IExpc3Q8WG1sSW50ZWxsaXNlbnNlSW5mbz5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIC8vIG5ldyBYbWxJbnRlbGxpc2Vuc2VJbmZvKFwidWlfcmF0aW5nXCIsIHR5cGVvZih1aV9yYXRpbmcpKSxcclxuICAgICAgICAgICAgLy8gbmV3IFhtbEludGVsbGlzZW5zZUluZm8oXCJSYXRpbmdcIiwgdHlwZW9mKHVpX3JhdGluZykpLFxyXG4gICAgICAgICAgICAvLyBuZXcgWG1sSW50ZWxsaXNlbnNlSW5mbyhcImNvbW1lbnRcIiwgdHlwZW9mKGNvbW1lbnQpKSxcclxuICAgICAgICAgICAgLy8gbmV3IFhtbEludGVsbGlzZW5zZUluZm8oXCJ1aV9jb21tZW50c1wiLCB0eXBlb2YodWlfY29tbWVudHMpKSxcclxuICAgICAgICAgICAgLy8gbmV3IFhtbEludGVsbGlzZW5zZUluZm8oXCJDb250ZW50UHJlc2VudGVyXCIsIHR5cGVvZihDb250ZW50UHJlc2VudGVyKSksXHJcbiAgICAgICAgICAgIFxyXG5cclxuXHJcblxyXG5cclxuICAgICAgICAgICAgLy8gbmV3IFhtbEludGVsbGlzZW5zZUluZm8oXCJJbWFnZUdhbGVyeVwiLCB0eXBlb2YoVmlld2VyKSksXHJcbiAgICAgICAgICAgIC8vIG5ldyBYbWxJbnRlbGxpc2Vuc2VJbmZvKFwic3dpcGVyLnNsaWRlclwiLCB0eXBlb2YoU2xpZGVyKSksXHJcbiAgICAgICAgICAgIC8vIG5ldyBYbWxJbnRlbGxpc2Vuc2VJbmZvKFwiZGl2XCIsIHR5cGVvZihGcmFtZXdvcmtFbGVtZW50X2RpdikpLFxyXG4gICAgICAgICAgICAvLyBuZXcgWG1sSW50ZWxsaXNlbnNlSW5mbyhcImFcIiwgdHlwZW9mKEZyYW1ld29ya0VsZW1lbnRfYSkpLFxyXG4gICAgICAgICAgICAvLyBuZXcgWG1sSW50ZWxsaXNlbnNlSW5mbyhcImltZ1wiLCB0eXBlb2YoRnJhbWV3b3JrRWxlbWVudF9pbWcpKSxcclxuLy8gICAgICAgICAgICBuZXcgWG1sSW50ZWxsaXNlbnNlSW5mbyhcIlNwbGl0UGFuZWxcIiwgdHlwZW9mKFNwbGl0UGFuZWwpKSxcclxuICAgICAgICAgICAgLy8gbmV3IFhtbEludGVsbGlzZW5zZUluZm8oXCJTcGxpdFBhbmVsXCIsIHR5cGVvZihCcmlkZ2UuQ3VzdG9tVUlNYXJrdXAuTGlicmFyaWVzLnNwbGl0X2pzLlNwbGl0UGFuZWwpKSxcclxuICAgICAgICAgICAgXHJcblxyXG4gICAgICAgICAgICAvL25ldyBYbWxJbnRlbGxpc2Vuc2VJbmZvKFwidWkucGFnZS5ncmlkXCIsIHR5cGVvZih1aV9wYWdlX2dyaWQpKSxcclxuICAgICAgICAgICAgLy9uZXcgWG1sSW50ZWxsaXNlbnNlSW5mbyhcImxlZnQubWVudVwiLCB0eXBlb2YobGVmdF9tZW51KSksXHJcbiAgICAgICAgICAgIC8vbmV3IFhtbEludGVsbGlzZW5zZUluZm8oXCJ1aS50ZXh0Lm1lbnUubmF2YmFyXCIsIHR5cGVvZih1aV90ZXh0X21lbnVfbmF2YmFyKSksXHJcblxyXG4gICAgICAgICAgICAvL25ldyBYbWxJbnRlbGxpc2Vuc2VJbmZvKFwidWlfdG9wX2F0dGFjaGVkX3RhYnVsYXJfbWVudVwiLCB0eXBlb2YodWlfdG9wX2F0dGFjaGVkX3RhYnVsYXJfbWVudSkpLFxyXG4gICAgICAgICAgICAvL25ldyBYbWxJbnRlbGxpc2Vuc2VJbmZvKFwiVGFiXCIsIHR5cGVvZihUYWJJdGVtKSksXHJcblxyXG4gICAgICAgICAgICAvL25ldyBYbWxJbnRlbGxpc2Vuc2VJbmZvKFwidGV4dElucHV0XCIsIHR5cGVvZihJbnB1dFRleHQpKSxcclxuICAgICAgICAgICAgLy9uZXcgWG1sSW50ZWxsaXNlbnNlSW5mbyhcInRleHRCb3hcIiwgdHlwZW9mKElucHV0VGV4dCkpLFxyXG4gICAgICAgICAgICAvLyBuZXcgWG1sSW50ZWxsaXNlbnNlSW5mbyhcImNvbWJvXCIsIHR5cGVvZihDb21ibykpLFxyXG4gICAgICAgICAgICAvL25ldyBYbWxJbnRlbGxpc2Vuc2VJbmZvKFwiY29tYm9Cb3hcIiwgdHlwZW9mKENvbWJvKSksXHJcbiAgICAgICAgICAgIC8vbmV3IFhtbEludGVsbGlzZW5zZUluZm8oXCJ1aS5zZWxlY3Rpb24uZHJvcGRvd25cIiwgdHlwZW9mKENvbWJvKSksXHJcbiAgICAgICAgICAgIC8vIG5ldyBYbWxJbnRlbGxpc2Vuc2VJbmZvKFwidGV4dEFyZWFcIiwgdHlwZW9mKFRleHRBcmVhKSksXHJcbiAgICAgICAgICAgIC8vbmV3IFhtbEludGVsbGlzZW5zZUluZm8oXCJmaWVsZFwiLCB0eXBlb2YoRmllbGQpKSxcclxuICAgICAgICAgICAgLy9uZXcgWG1sSW50ZWxsaXNlbnNlSW5mbyhcInVpLmZvcm1cIiwgdHlwZW9mKHVpX2Zvcm0pKSxcclxuXHJcbiAgICAgICAgICAgIC8vbmV3IFhtbEludGVsbGlzZW5zZUluZm8oXCJ1aS5oZWFkZXIuMVwiLCB0eXBlb2YodWlfaGVhZGVyXzEpKSxcclxuICAgICAgICAgICAgLy9uZXcgWG1sSW50ZWxsaXNlbnNlSW5mbyhcInVpLmhlYWRlci4yXCIsIHR5cGVvZih1aV9oZWFkZXJfMikpLFxyXG4gICAgICAgICAgICAvL25ldyBYbWxJbnRlbGxpc2Vuc2VJbmZvKFwidWkuaGVhZGVyLjNcIiwgdHlwZW9mKHVpX2hlYWRlcl8zKSksXHJcbiAgICAgICAgICAgIC8vbmV3IFhtbEludGVsbGlzZW5zZUluZm8oXCJoZWFkZXJcIiwgdHlwZW9mKGhlYWRlcikpLFxyXG4gICAgICAgICAgICAvLyBuZXcgWG1sSW50ZWxsaXNlbnNlSW5mbyhcInVpLmltYWdlXCIsIHR5cGVvZih1aV9pbWFnZSkpLFxyXG4gICAgICAgICAgICAvLyBuZXcgWG1sSW50ZWxsaXNlbnNlSW5mbyhcImljb25cIiwgdHlwZW9mKEljb24pKSxcclxuICAgICAgICAgICAgLy8gbmV3IFhtbEludGVsbGlzZW5zZUluZm8oXCJ1aS5zZWdtZW50XCIsIHR5cGVvZih1aV9zZWdtZW50KSksXHJcbiAgICAgICAgICAgIC8vIG5ldyBYbWxJbnRlbGxpc2Vuc2VJbmZvKFwidGV4dEJsb2NrXCIsIHR5cGVvZihUZXh0QmxvY2spKSxcclxuICAgICAgICAgICAgLy8gbmV3IFhtbEludGVsbGlzZW5zZUluZm8oXCJ4bWxFZGl0b3JcIiwgdHlwZW9mKFhtbEVkaXRvcikpLFxyXG4gICAgICAgICAgICAvLyBuZXcgWG1sSW50ZWxsaXNlbnNlSW5mbyhcInVpRWRpdG9yXCIsIHR5cGVvZihVSUVkaXRvcikpXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgc3RhdGljIERpY3Rpb25hcnk8c3RyaW5nLCBUeXBlPiBfdGFnVHlwZU1hcDtcclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gUHJvcGVydGllc1xyXG4gICAgICAgIGludGVybmFsIHN0YXRpYyBJUmVhZE9ubHlDb2xsZWN0aW9uPFhtbEludGVsbGlzZW5zZUluZm8+IFRhZ3Mge2dldHtyZXR1cm4gX3RhZ3M7fX1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBEaWN0aW9uYXJ5PHN0cmluZywgVHlwZT4gVGFnVHlwZU1hcFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChfdGFnVHlwZU1hcCA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIF90YWdUeXBlTWFwID0gbmV3IERpY3Rpb25hcnk8c3RyaW5nLCBUeXBlPigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBpbnRlbGxpc2Vuc2VJbmZvIGluIF90YWdzKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RhZ1R5cGVNYXBbaW50ZWxsaXNlbnNlSW5mby5UYWdOYW1lLlRvVXBwZXIoKV0gPSBpbnRlbGxpc2Vuc2VJbmZvLlR5cGU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGFnVHlwZU1hcDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgIFxyXG4gICAgICAgICNyZWdpb24gUHVibGljIE1ldGhvZHNcclxuICAgICAgICBwdWJsaWMgdmlydHVhbCBUeXBlIEZpbmRUeXBlKHN0cmluZyB0YWcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoVGFnVHlwZU1hcC5Db250YWluc0tleSh0YWcpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gVGFnVHlwZU1hcFt0YWddO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIE1ldGhvZHNcclxuICAgICAgICBwcm90ZWN0ZWQgc3RhdGljIHZvaWQgUmVnaXN0ZXJUYWcoc3RyaW5nIHRhZ05hbWUsIFR5cGUgdHlwZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF90YWdzLkFkZChuZXcgWG1sSW50ZWxsaXNlbnNlSW5mbyh0YWdOYW1lLCB0eXBlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuICAgIH1cclxufSIsInVzaW5nIFN5c3RlbS5XaW5kb3dzO1xyXG51c2luZyBCcmlkZ2UuQ3VzdG9tVUlNYXJrdXAuVUk7XHJcbnVzaW5nIEJyaWRnZS5qUXVlcnkyO1xyXG5cclxubmFtZXNwYWNlIEJyaWRnZS5DdXN0b21VSU1hcmt1cF9EZXNpZ25lclNhbXBsZXNcclxue1xyXG5cclxuXHJcbiAgICBjbGFzcyBBcHBDb250YWluZXI6SHRtbEVsZW1lbnRcclxuICAgIHtcclxuICAgICAgICBzdGF0aWMgc3RyaW5nIFRlc3RVSSB7Z2V0e3JldHVybiBAXCJcclxuXHJcbjxkaXYgY2xhc3M9J3VpIHR3byByb3cgZ3JpZCcgSGVpZ2h0UGVyY2VudCA9ICcxMDAnIFdpZHRoUGVyY2VudCA9ICcxMDAnID5cclxuICAgIDxyb3c+XHJcbiAgICAgICAgPGNvbHVtbiBBbGlnbj0nQ2VudGVyJz5cclxuICAgICAgICAgICAgIDxDb21ib0JveCBcclxuICAgICAgICAgICAgICAgIEl0ZW1zU291cmNlID0gJ3tCaW5kaW5nIEV4YW1wbGVzfScgXHJcbiAgICAgICAgICAgICAgICBEaXNwbGF5TWVtYmVyUGF0aCA9ICdOYW1lJ1xyXG4gICAgICAgICAgICAgICAgU2VsZWN0ZWRWYWx1ZVBhdGggPSAnWG1sVGVtcGxhdGUnIFxyXG5cdFx0ICAgICAgICBTZWxlY3RlZFZhbHVlID0gJ3tCaW5kaW5nIEN1cnJlbnRUZW1wbGF0ZX0nIC8+XHJcbiAgICAgICAgPC9jb2x1bW4+XHJcbiAgICA8L3Jvdz5cclxuICAgIFxyXG4gICAgPHJvdyBIZWlnaHRQZXJjZW50ID0gJzEwMCc+XHJcbiAgICAgICAgPFVJRWRpdG9yIFNvdXJjZURhdGFDb250ZXh0PSd7SW5uZXJ9JyAgIFNvdXJjZVRleHQgPSAne0N1cnJlbnRUZW1wbGF0ZX0nLz5cclxuICAgIDwvcm93PlxyXG4gICAgICAgIFxyXG48L2Rpdj5cclxuXHJcblxyXG5cIjt9fVxyXG4gICAgICAgIHB1YmxpYyAgQXBwQ29udGFpbmVyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBCdWlsZGVyLkxvYWRDb21wb25lbnQodGhpcyxUZXN0VUkpO1xyXG4gICAgICAgICAgICBIZWlnaHRQZXJjZW50ID0gMTAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgQXBwXHJcbiAgICB7XHJcbiAgICAgICAgI3JlZ2lvbiBQcm9wZXJ0aWVzXHJcbiAgICAgXHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIFB1YmxpYyBNZXRob2RzXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIEluaXQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQnJpZGdlLkN1c3RvbVVJTWFya3VwLkxpYnJhcmllcy5TZW1hbnRpY1VJLkVsZW1lbnRzLlJlZ2lzdGVyVG9CdWlsZGVyKCk7XHJcbiAgICAgICAgICAgIEJyaWRnZS5DdXN0b21VSU1hcmt1cC5MaWJyYXJpZXMuc3BsaXRfanMuRWxlbWVudHMuUmVnaXN0ZXJUb0J1aWxkZXIoKTtcclxuICAgICAgICAgICAgQnJpZGdlLkN1c3RvbVVJTWFya3VwLkxpYnJhcmllcy5Db2RlTWlycm9yLkVsZW1lbnRzLlJlZ2lzdGVyVG9CdWlsZGVyKCk7XHJcbiAgICAgICAgICAgIEJyaWRnZS5DdXN0b21VSU1hcmt1cC5MaWJyYXJpZXMudmlld2VyanMuRWxlbWVudHMuUmVnaXN0ZXJUb0J1aWxkZXIoKTtcclxuICAgICAgICAgICAgQnJpZGdlLkN1c3RvbVVJTWFya3VwLkxpYnJhcmllcy5Td2lwZXIuRWxlbWVudHMuUmVnaXN0ZXJUb0J1aWxkZXIoKTtcclxuXHJcbiAgICAgICAgICAgIGpRdWVyeS5SZWFkeSgoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKVJlbmRlclVJRWRpdG9yKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIE1ldGhvZHNcclxuICAgICAgICBcclxuICAgICAgICBzdGF0aWMgdm9pZCBSZW5kZXJVSUVkaXRvcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgYXBwQ29udGFpbmVyID0gbmV3IEFwcENvbnRhaW5lclxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBEYXRhQ29udGV4dCA9IG5ldyBFeGFtcGxlRGF0YUNvbnRleHRcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBDdXJyZW50VGVtcGxhdGUgPSBcIldyaXRlIHhtbCBjb2RlIGhlcmUuXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgSW5uZXIgPSBuZXcgRXhhbXBsZURhdGFDb250ZXh0IHsgQ3VycmVudFRlbXBsYXRlID0gXCJXcml0ZSB4bWwgY29kZSBoZXJlXCIgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgYXBwQ29udGFpbmVyLkRhdGFDb250ZXh0ID0gbmV3IEV4YW1wbGVEYXRhQ29udGV4dFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBDdXJyZW50VGVtcGxhdGUgPSBcIldyaXRlIHhtbCBjb2RlIGhlcmUuXCIsXHJcbiAgICAgICAgICAgICAgICBJbm5lciA9IG5ldyBFeGFtcGxlRGF0YUNvbnRleHRcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBDdXJyZW50VGVtcGxhdGUgPSBcIldyaXRlIHhtbCBjb2RlIGhlcmVcIlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgYXBwQ29udGFpbmVyLlJlbmRlckluQm9keSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcbiAgICB9XHJcbn0iLCJuYW1lc3BhY2UgQnJpZGdlLkh0bWw1XHJcbntcclxuICAgIC8vLyA8c3VtbWFyeT5cclxuICAgIC8vLyAgICAgVGhlIGV4dGVuc2lvbnNcclxuICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEV4dGVuc2lvbnNcclxuICAgIHtcclxuICAgICAgICAjcmVnaW9uIFB1YmxpYyBNZXRob2RzXHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyAgICAgQXNlcyB0aGUgSFRNTCBzdHJpbmcuXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBBc0h0bWxTdHJpbmcodGhpcyBFbGVtZW50IGVsZW1lbnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZGl2ID0gRG9jdW1lbnQuQ3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuXHJcbiAgICAgICAgICAgIGRpdi5BcHBlbmRDaGlsZChlbGVtZW50LkNsb25lTm9kZSh0cnVlKSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZGl2LklubmVySFRNTC5SZXBsYWNlKFwiXFxcIlwiLFwiJ1wiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG4gICAgfVxyXG59IiwidXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcblxyXG5uYW1lc3BhY2UgQnJpZGdlLmpRdWVyeTJcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBFeHRlbnNpb25zXHJcbiAgICB7XHJcblxyXG4gICAgICAgIFxyXG5cclxuICAgICAgICAjcmVnaW9uIFB1YmxpYyBNZXRob2RzXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBqUXVlcnkgQXBwZW5kVG8odGhpcyBqUXVlcnkgcXVlcnksIElDb2xsZWN0aW9uPGpRdWVyeT4gbGlzdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxpc3QuQWRkKHF1ZXJ5KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBxdWVyeTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgalF1ZXJ5IENzc19kaXNwbGF5X0lubGluZV9CbG9jayh0aGlzIGpRdWVyeSBxdWVyeSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHF1ZXJ5LkNzcyhcImRpc3BsYXlcIiwgXCJpbmxpbmUtYmxvY2tcIik7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcXVlcnk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGpRdWVyeSBDc3NfZmxvYXRfTGVmdCh0aGlzIGpRdWVyeSBxdWVyeSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHF1ZXJ5LkNzcyhcImZsb2F0XCIsIFwibGVmdFwiKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBxdWVyeTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgalF1ZXJ5IENzc19oZWlnaHRfbWF4KHRoaXMgalF1ZXJ5IHF1ZXJ5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcXVlcnkuQ3NzKFwiaGVpZ2h0XCIsIFwiMTAwJVwiKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBxdWVyeTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgalF1ZXJ5IENzc193aWR0aCh0aGlzIGpRdWVyeSBxdWVyeSwgc3RyaW5nIHZhbHVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcXVlcnkuQ3NzKFwid2lkdGhcIiwgdmFsdWUpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHF1ZXJ5O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBqUXVlcnkgQ3NzX3dpZHRoX21heCh0aGlzIGpRdWVyeSBxdWVyeSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHF1ZXJ5LkNzcyhcIndpZHRoXCIsIFwiMTAwJVwiKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBxdWVyeTtcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG4gICAgfVxyXG59IiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG5cclxubmFtZXNwYWNlIFN5c3RlbVxyXG57XHJcbiAgICAvL3B1YmxpYyBjbGFzcyBOb3RTdXBwb3J0ZWRFeGNlcHRpb24gOiBTeXN0ZW1FeGNlcHRpb25cclxuICAgIC8ve1xyXG4gICAgLy8gICAgI3JlZ2lvbiBDb25zdHJ1Y3RvcnNcclxuICAgIC8vICAgIHB1YmxpYyBOb3RTdXBwb3J0ZWRFeGNlcHRpb24oc3RyaW5nIG1lc3NhZ2UgPSBudWxsLCBFeGNlcHRpb24gaW5uZXJFeGNlcHRpb24gPSBudWxsKSA6IGJhc2UobWVzc2FnZSwgaW5uZXJFeGNlcHRpb24pXHJcbiAgICAvLyAgICB7XHJcblxyXG4gICAgLy8gICAgfVxyXG4gICAgLy8gICAgI2VuZHJlZ2lvblxyXG4gICAgLy99XHJcbiAgICBwdWJsaWMgY2xhc3MgQXJyYXlUeXBlTWlzbWF0Y2hFeGNlcHRpb24gOiBTeXN0ZW1FeGNlcHRpb25cclxuICAgIHtcclxuICAgICAgICAjcmVnaW9uIENvbnN0cnVjdG9yc1xyXG4gICAgICAgIHB1YmxpYyBBcnJheVR5cGVNaXNtYXRjaEV4Y2VwdGlvbihzdHJpbmcgbWVzc2FnZSA9IG51bGwsIEV4Y2VwdGlvbiBpbm5lckV4Y2VwdGlvbiA9IG51bGwpIDogYmFzZShtZXNzYWdlLCBpbm5lckV4Y2VwdGlvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuICAgIH1cclxuICAgIFxyXG4gICBcclxuICAgIHB1YmxpYyBjbGFzcyBPYmplY3REaXNwb3NlZEV4Y2VwdGlvbiA6IFN5c3RlbUV4Y2VwdGlvblxyXG4gICAge1xyXG4gICAgICAgIHJlYWRvbmx5IHN0cmluZyBvYmplY3ROYW1lO1xyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgT2JqZWN0TmFtZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm9iamVjdE5hbWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgI3JlZ2lvbiBDb25zdHJ1Y3RvcnNcclxuICAgICAgICBwdWJsaWMgT2JqZWN0RGlzcG9zZWRFeGNlcHRpb24oc3RyaW5nIG1lc3NhZ2UgPSBudWxsLCBFeGNlcHRpb24gaW5uZXJFeGNlcHRpb24gPSBudWxsKSA6IGJhc2UobWVzc2FnZSwgaW5uZXJFeGNlcHRpb24pXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgT2JqZWN0RGlzcG9zZWRFeGNlcHRpb24oc3RyaW5nIG9iamVjdE5hbWUsIHN0cmluZyBtZXNzYWdlKSA6IGJhc2UobWVzc2FnZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMub2JqZWN0TmFtZSA9IG9iamVjdE5hbWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgVW5hdXRob3JpemVkQWNjZXNzRXhjZXB0aW9uIDogU3lzdGVtRXhjZXB0aW9uXHJcbiAgICB7XHJcbiAgICAgICAgI3JlZ2lvbiBDb25zdHJ1Y3RvcnNcclxuICAgICAgICBwdWJsaWMgVW5hdXRob3JpemVkQWNjZXNzRXhjZXB0aW9uKHN0cmluZyBtZXNzYWdlID0gbnVsbCwgRXhjZXB0aW9uIGlubmVyRXhjZXB0aW9uID0gbnVsbCkgOiBiYXNlKG1lc3NhZ2UsIGlubmVyRXhjZXB0aW9uKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBuYW1lc3BhY2UgU2VjdXJpdHlcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgY2xhc3MgU2VjdXJpdHlFeGNlcHRpb24gOiBTeXN0ZW1FeGNlcHRpb25cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgICNyZWdpb24gQ29uc3RydWN0b3JzXHJcbiAgICAgICAgICAgIHB1YmxpYyBTZWN1cml0eUV4Y2VwdGlvbihzdHJpbmcgbWVzc2FnZSA9IG51bGwsIEV4Y2VwdGlvbiBpbm5lckV4Y2VwdGlvbiA9IG51bGwpIDogYmFzZShtZXNzYWdlLCBpbm5lckV4Y2VwdGlvbilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICNlbmRyZWdpb25cclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIG5hbWVzcGFjZSBSdW50aW1lLlNlcmlhbGl6YXRpb25cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgY2xhc3MgU2VyaWFsaXphdGlvbkV4Y2VwdGlvbiA6IFN5c3RlbUV4Y2VwdGlvblxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgI3JlZ2lvbiBDb25zdHJ1Y3RvcnNcclxuICAgICAgICAgICAgcHVibGljIFNlcmlhbGl6YXRpb25FeGNlcHRpb24oc3RyaW5nIG1lc3NhZ2UgPSBudWxsLCBFeGNlcHRpb24gaW5uZXJFeGNlcHRpb24gPSBudWxsKSA6IGJhc2UobWVzc2FnZSwgaW5uZXJFeGNlcHRpb24pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAjZW5kcmVnaW9uXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbS5HbG9iYWxpemF0aW9uO1xyXG51c2luZyBCcmlkZ2U7XHJcblxyXG5uYW1lc3BhY2UgU3lzdGVtXHJcbntcclxuICAgIC8vLyA8c3VtbWFyeT5cclxuICAgIC8vLyAgICAgVXRpbGl0eSBtZXRob2RzIGZvciBjYXN0aW5nIG9wZXJhdGlvbnNcclxuICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIENhc3RcclxuICAgIHtcclxuICAgICAgICAjcmVnaW9uIFB1YmxpYyBNZXRob2RzXHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyAgICAgVG8gdGhlIHNwZWNpZmllZCB2YWx1ZS5cclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIC8vIFJlU2hhcnBlciBkaXNhYmxlIG9uY2UgVW51c2VkUGFyYW1ldGVyLkdsb2JhbFxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgb2JqZWN0IFRvKG9iamVjdCB2YWx1ZSwgVHlwZSB0YXJnZXRUeXBlLCBJRm9ybWF0UHJvdmlkZXIgcHJvdmlkZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAodGFyZ2V0VHlwZSA9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnROdWxsRXhjZXB0aW9uKFwidGFyZ2V0VHlwZVwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHZhbHVlID09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXRUeXBlLkdldERlZmF1bHRWYWx1ZSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKCB0YXJnZXRUeXBlLklzR2VuZXJpY1R5cGUgJiYgIHRhcmdldFR5cGUuR2V0R2VuZXJpY1R5cGVEZWZpbml0aW9uKCkgPT0gdHlwZW9mKE51bGxhYmxlPD4pKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gVG8odmFsdWUsdGFyZ2V0VHlwZS5HZXRHZW5lcmljQXJndW1lbnRzKClbMF0scHJvdmlkZXIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgdmFyIHZhbHVlVHlwZSA9IHZhbHVlLkdldFR5cGUoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh2YWx1ZVR5cGUgPT0gdGFyZ2V0VHlwZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGFyZ2V0VHlwZSA9PSB0eXBlb2Yob2JqZWN0KSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgLy8gUmVTaGFycGVyIGRpc2FibGUgb25jZSBVbnVzZWRWYXJpYWJsZVxyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0VHlwZU5hbWUgPSB0YXJnZXRUeXBlLk5hbWU7XHJcblxyXG4gICAgICAgICAgICAvLyB0cnkgdG8gY29udmVydCBmcm9tIHByZWRlZmluZWQgY29udmVydCBmdW5jdGlvbnNcclxuICAgICAgICAgICAgU2NyaXB0LldyaXRlKFxyXG4gICAgICAgICAgICAgICAgQFwidmFyIGZuID0gU3lzdGVtLkNvbnZlcnRbJ3RvJyt0YXJnZXRUeXBlTmFtZV07IFxyXG5pZihmbilcclxue1xyXG4gICAgcmV0dXJuIGZuKHZhbHVlLHByb3ZpZGVyKTsgICAgXHJcbn1cclxuXCIpO1xyXG5cclxuICAgICAgICAgICBcclxuXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAodmFsdWVUeXBlLklzQXNzaWduYWJsZUZyb20odGFyZ2V0VHlwZSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRDYXN0RXhjZXB0aW9uKFwiQHZhbHVlOlwiICsgdmFsdWUgKyBcIm5vdCBjb252ZXJ0aWJsZSB0byBcIiArIHRhcmdldFR5cGUuRnVsbE5hbWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyAgICAgQ2FzdHMgdmFsdWUgdG8gJ1RUYXJnZXRUeXBlJ1xyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBUVGFyZ2V0VHlwZSBUbzxUVGFyZ2V0VHlwZT4ob2JqZWN0IHZhbHVlLCBJRm9ybWF0UHJvdmlkZXIgcHJvdmlkZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gKFRUYXJnZXRUeXBlKSBUbyh2YWx1ZSwgdHlwZW9mKFRUYXJnZXRUeXBlKSwgcHJvdmlkZXIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyAgICAgQ2FzdHMgdmFsdWUgdG8gJ1RUYXJnZXRUeXBlJ1xyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBUVGFyZ2V0VHlwZSBUbzxUVGFyZ2V0VHlwZT4ob2JqZWN0IHZhbHVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFRvPFRUYXJnZXRUeXBlPih2YWx1ZSwgQ3VsdHVyZUluZm8uSW52YXJpYW50Q3VsdHVyZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuICAgIH1cclxufSIsIm5hbWVzcGFjZSBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpY1xyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEV4dGVuc2lvbnNcclxuICAgIHtcclxuICAgICAgICAjcmVnaW9uIFB1YmxpYyBNZXRob2RzXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBUVmFsdWUgVHJ5R2V0VmFsdWU8VEtleSwgVFZhbHVlPih0aGlzIERpY3Rpb25hcnk8VEtleSwgVFZhbHVlPiBkaWN0aW9uYXJ5LCBUS2V5IGtleSwgVFZhbHVlIGRlZmF1bHRWYWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGRlZmF1bHQoVFZhbHVlKTtcclxuICAgICAgICAgICAgaWYgKGRpY3Rpb25hcnkuVHJ5R2V0VmFsdWUoa2V5LCBvdXQgdmFsdWUpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBkZWZhdWx0VmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuICAgIH1cclxufSIsIm5hbWVzcGFjZSBTeXN0ZW0uQ29sbGVjdGlvbnMuT2JqZWN0TW9kZWxcclxue1xyXG4gICAgdXNpbmcgU3lzdGVtO1xyXG4gICAgdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zO1xyXG4gICAgdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbiAgICB1c2luZyBTeXN0ZW0uRGlhZ25vc3RpY3M7XHJcbiAgICB1c2luZyBTeXN0ZW0uUnVudGltZTtcclxuXHJcbiAgICBbU2VyaWFsaXphYmxlXVxyXG4gICAgcHVibGljIGNsYXNzIENvbGxlY3Rpb248VD4gOiBJTGlzdDxUPiwgSUxpc3QsIElSZWFkT25seUxpc3Q8VD5cclxuICAgIHtcclxuICAgICAgICBJTGlzdDxUPiBpdGVtcztcclxuICAgICAgICBbTm9uU2VyaWFsaXplZF1cclxuICAgICAgICBwcml2YXRlIE9iamVjdCBfc3luY1Jvb3Q7XHJcblxyXG4gICAgICAgIHB1YmxpYyBDb2xsZWN0aW9uKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGl0ZW1zID0gbmV3IExpc3Q8VD4oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBDb2xsZWN0aW9uKElMaXN0PFQ+IGxpc3QpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAobGlzdCA9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBUaHJvd0hlbHBlci5UaHJvd0FyZ3VtZW50TnVsbEV4Y2VwdGlvbihFeGNlcHRpb25Bcmd1bWVudC5saXN0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpdGVtcyA9IGxpc3Q7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaW50IENvdW50XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gaXRlbXMuQ291bnQ7IH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBJTGlzdDxUPiBJdGVtc1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIGl0ZW1zOyB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVCB0aGlzW2ludCBpbmRleF1cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBpdGVtc1tpbmRleF07IH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChpdGVtcy5Jc1JlYWRPbmx5KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFRocm93SGVscGVyLlRocm93Tm90U3VwcG9ydGVkRXhjZXB0aW9uKEV4Y2VwdGlvblJlc291cmNlLk5vdFN1cHBvcnRlZF9SZWFkT25seUNvbGxlY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChpbmRleCA8IDAgfHwgaW5kZXggPj0gaXRlbXMuQ291bnQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgVGhyb3dIZWxwZXIuVGhyb3dBcmd1bWVudE91dE9mUmFuZ2VFeGNlcHRpb24oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBTZXRJdGVtKGluZGV4LCB2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEFkZChUIGl0ZW0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoaXRlbXMuSXNSZWFkT25seSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVGhyb3dIZWxwZXIuVGhyb3dOb3RTdXBwb3J0ZWRFeGNlcHRpb24oRXhjZXB0aW9uUmVzb3VyY2UuTm90U3VwcG9ydGVkX1JlYWRPbmx5Q29sbGVjdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGludCBpbmRleCA9IGl0ZW1zLkNvdW50O1xyXG4gICAgICAgICAgICBJbnNlcnRJdGVtKGluZGV4LCBpdGVtKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIENsZWFyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChpdGVtcy5Jc1JlYWRPbmx5KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBUaHJvd0hlbHBlci5UaHJvd05vdFN1cHBvcnRlZEV4Y2VwdGlvbihFeGNlcHRpb25SZXNvdXJjZS5Ob3RTdXBwb3J0ZWRfUmVhZE9ubHlDb2xsZWN0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgQ2xlYXJJdGVtcygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgQ29weVRvKFRbXSBhcnJheSwgaW50IGluZGV4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaXRlbXMuQ29weVRvKGFycmF5LCBpbmRleCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBDb250YWlucyhUIGl0ZW0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gaXRlbXMuQ29udGFpbnMoaXRlbSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgSUVudW1lcmF0b3I8VD4gR2V0RW51bWVyYXRvcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gaXRlbXMuR2V0RW51bWVyYXRvcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGludCBJbmRleE9mKFQgaXRlbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBpdGVtcy5JbmRleE9mKGl0ZW0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgSW5zZXJ0KGludCBpbmRleCwgVCBpdGVtKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGl0ZW1zLklzUmVhZE9ubHkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFRocm93SGVscGVyLlRocm93Tm90U3VwcG9ydGVkRXhjZXB0aW9uKEV4Y2VwdGlvblJlc291cmNlLk5vdFN1cHBvcnRlZF9SZWFkT25seUNvbGxlY3Rpb24pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoaW5kZXggPCAwIHx8IGluZGV4ID4gaXRlbXMuQ291bnQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFRocm93SGVscGVyLlRocm93QXJndW1lbnRPdXRPZlJhbmdlRXhjZXB0aW9uKEV4Y2VwdGlvbkFyZ3VtZW50LmluZGV4LCBFeGNlcHRpb25SZXNvdXJjZS5Bcmd1bWVudE91dE9mUmFuZ2VfTGlzdEluc2VydCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIEluc2VydEl0ZW0oaW5kZXgsIGl0ZW0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgUmVtb3ZlKFQgaXRlbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChpdGVtcy5Jc1JlYWRPbmx5KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBUaHJvd0hlbHBlci5UaHJvd05vdFN1cHBvcnRlZEV4Y2VwdGlvbihFeGNlcHRpb25SZXNvdXJjZS5Ob3RTdXBwb3J0ZWRfUmVhZE9ubHlDb2xsZWN0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaW50IGluZGV4ID0gaXRlbXMuSW5kZXhPZihpdGVtKTtcclxuICAgICAgICAgICAgaWYgKGluZGV4IDwgMCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICBSZW1vdmVJdGVtKGluZGV4KTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBSZW1vdmVBdChpbnQgaW5kZXgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoaXRlbXMuSXNSZWFkT25seSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVGhyb3dIZWxwZXIuVGhyb3dOb3RTdXBwb3J0ZWRFeGNlcHRpb24oRXhjZXB0aW9uUmVzb3VyY2UuTm90U3VwcG9ydGVkX1JlYWRPbmx5Q29sbGVjdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChpbmRleCA8IDAgfHwgaW5kZXggPj0gaXRlbXMuQ291bnQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFRocm93SGVscGVyLlRocm93QXJndW1lbnRPdXRPZlJhbmdlRXhjZXB0aW9uKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIFJlbW92ZUl0ZW0oaW5kZXgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHZpcnR1YWwgdm9pZCBDbGVhckl0ZW1zKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGl0ZW1zLkNsZWFyKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgdmlydHVhbCB2b2lkIEluc2VydEl0ZW0oaW50IGluZGV4LCBUIGl0ZW0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpdGVtcy5JbnNlcnQoaW5kZXgsIGl0ZW0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHZpcnR1YWwgdm9pZCBSZW1vdmVJdGVtKGludCBpbmRleClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGl0ZW1zLlJlbW92ZUF0KGluZGV4KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCB2aXJ0dWFsIHZvaWQgU2V0SXRlbShpbnQgaW5kZXgsIFQgaXRlbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGl0ZW1zW2luZGV4XSA9IGl0ZW07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBib29sIElDb2xsZWN0aW9uPFQ+LklzUmVhZE9ubHlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbXMuSXNSZWFkT25seTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgSUVudW1lcmF0b3IgSUVudW1lcmFibGUuR2V0RW51bWVyYXRvcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gKChJRW51bWVyYWJsZSlpdGVtcykuR2V0RW51bWVyYXRvcigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvKlxyXG4gICAgICAgIGJvb2wgSUNvbGxlY3Rpb24uSXNTeW5jaHJvbml6ZWRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBmYWxzZTsgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgb2JqZWN0IElDb2xsZWN0aW9uLlN5bmNSb290XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKF9zeW5jUm9vdCA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIElDb2xsZWN0aW9uIGMgPSBpdGVtcyBhcyBJQ29sbGVjdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYyAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3N5bmNSb290ID0gYy5TeW5jUm9vdDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgU3lzdGVtLlRocmVhZGluZy5JbnRlcmxvY2tlZC5Db21wYXJlRXhjaGFuZ2U8T2JqZWN0PihyZWYgX3N5bmNSb290LCBuZXcgT2JqZWN0KCksIG51bGwpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBfc3luY1Jvb3Q7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9Ki9cclxuXHJcbiAgICAgICAgdm9pZCBJQ29sbGVjdGlvbi5Db3B5VG8oQXJyYXkgYXJyYXksIGludCBpbmRleClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChhcnJheSA9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBUaHJvd0hlbHBlci5UaHJvd0FyZ3VtZW50TnVsbEV4Y2VwdGlvbihFeGNlcHRpb25Bcmd1bWVudC5hcnJheSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChhcnJheS5SYW5rICE9IDEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFRocm93SGVscGVyLlRocm93QXJndW1lbnRFeGNlcHRpb24oRXhjZXB0aW9uUmVzb3VyY2UuQXJnX1JhbmtNdWx0aURpbU5vdFN1cHBvcnRlZCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChhcnJheS5HZXRMb3dlckJvdW5kKDApICE9IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFRocm93SGVscGVyLlRocm93QXJndW1lbnRFeGNlcHRpb24oRXhjZXB0aW9uUmVzb3VyY2UuQXJnX05vblplcm9Mb3dlckJvdW5kKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGluZGV4IDwgMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVGhyb3dIZWxwZXIuVGhyb3dBcmd1bWVudE91dE9mUmFuZ2VFeGNlcHRpb24oRXhjZXB0aW9uQXJndW1lbnQuaW5kZXgsIEV4Y2VwdGlvblJlc291cmNlLkFyZ3VtZW50T3V0T2ZSYW5nZV9OZWVkTm9uTmVnTnVtKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGFycmF5Lkxlbmd0aCAtIGluZGV4IDwgQ291bnQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFRocm93SGVscGVyLlRocm93QXJndW1lbnRFeGNlcHRpb24oRXhjZXB0aW9uUmVzb3VyY2UuQXJnX0FycmF5UGx1c09mZlRvb1NtYWxsKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgVFtdIHRBcnJheSA9IGFycmF5IGFzIFRbXTtcclxuICAgICAgICAgICAgaWYgKHRBcnJheSAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpdGVtcy5Db3B5VG8odEFycmF5LCBpbmRleCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAgICAgLy8gQ2F0Y2ggdGhlIG9idmlvdXMgY2FzZSBhc3NpZ25tZW50IHdpbGwgZmFpbC5cclxuICAgICAgICAgICAgICAgIC8vIFdlIGNhbiBmb3VuZCBhbGwgcG9zc2libGUgcHJvYmxlbXMgYnkgZG9pbmcgdGhlIGNoZWNrIHRob3VnaC5cclxuICAgICAgICAgICAgICAgIC8vIEZvciBleGFtcGxlLCBpZiB0aGUgZWxlbWVudCB0eXBlIG9mIHRoZSBBcnJheSBpcyBkZXJpdmVkIGZyb20gVCxcclxuICAgICAgICAgICAgICAgIC8vIHdlIGNhbid0IGZpZ3VyZSBvdXQgaWYgd2UgY2FuIHN1Y2Nlc3NmdWxseSBjb3B5IHRoZSBlbGVtZW50IGJlZm9yZWhhbmQuXHJcbiAgICAgICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAgICAgVHlwZSB0YXJnZXRUeXBlID0gYXJyYXkuR2V0VHlwZSgpLkdldEVsZW1lbnRUeXBlKCk7XHJcbiAgICAgICAgICAgICAgICBUeXBlIHNvdXJjZVR5cGUgPSB0eXBlb2YoVCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoISh0YXJnZXRUeXBlLklzQXNzaWduYWJsZUZyb20oc291cmNlVHlwZSkgfHwgc291cmNlVHlwZS5Jc0Fzc2lnbmFibGVGcm9tKHRhcmdldFR5cGUpKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBUaHJvd0hlbHBlci5UaHJvd0FyZ3VtZW50RXhjZXB0aW9uKEV4Y2VwdGlvblJlc291cmNlLkFyZ3VtZW50X0ludmFsaWRBcnJheVR5cGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgICAgICAvLyBXZSBjYW4ndCBjYXN0IGFycmF5IG9mIHZhbHVlIHR5cGUgdG8gb2JqZWN0W10sIHNvIHdlIGRvbid0IHN1cHBvcnQgXHJcbiAgICAgICAgICAgICAgICAvLyB3aWRlbmluZyBvZiBwcmltaXRpdmUgdHlwZXMgaGVyZS5cclxuICAgICAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgICAgICBvYmplY3RbXSBvYmplY3RzID0gYXJyYXkgYXMgb2JqZWN0W107XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0cyA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFRocm93SGVscGVyLlRocm93QXJndW1lbnRFeGNlcHRpb24oRXhjZXB0aW9uUmVzb3VyY2UuQXJndW1lbnRfSW52YWxpZEFycmF5VHlwZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaW50IGNvdW50ID0gaXRlbXMuQ291bnQ7XHJcbiAgICAgICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmplY3RzW2luZGV4KytdID0gaXRlbXNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKEFycmF5VHlwZU1pc21hdGNoRXhjZXB0aW9uKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFRocm93SGVscGVyLlRocm93QXJndW1lbnRFeGNlcHRpb24oRXhjZXB0aW9uUmVzb3VyY2UuQXJndW1lbnRfSW52YWxpZEFycmF5VHlwZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG9iamVjdCBJTGlzdC50aGlzW2ludCBpbmRleF1cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBpdGVtc1tpbmRleF07IH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFRocm93SGVscGVyLklmTnVsbEFuZE51bGxzQXJlSWxsZWdhbFRoZW5UaHJvdzxUPih2YWx1ZSwgRXhjZXB0aW9uQXJndW1lbnQudmFsdWUpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXNbaW5kZXhdID0gKFQpdmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoSW52YWxpZENhc3RFeGNlcHRpb24pXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgVGhyb3dIZWxwZXIuVGhyb3dXcm9uZ1ZhbHVlVHlwZUFyZ3VtZW50RXhjZXB0aW9uKHZhbHVlLCB0eXBlb2YoVCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYm9vbCBJTGlzdC5Jc1JlYWRPbmx5XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW1zLklzUmVhZE9ubHk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qYm9vbCBJTGlzdC5Jc0ZpeGVkU2l6ZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIC8vIFRoZXJlIGlzIG5vIElMaXN0PFQ+LklzRml4ZWRTaXplLCBzbyB3ZSBtdXN0IGFzc3VtZSB0aGF0IG9ubHlcclxuICAgICAgICAgICAgICAgIC8vIHJlYWRvbmx5IGNvbGxlY3Rpb25zIGFyZSBmaXhlZCBzaXplLCBpZiBvdXIgaW50ZXJuYWwgaXRlbSBcclxuICAgICAgICAgICAgICAgIC8vIGNvbGxlY3Rpb24gZG9lcyBub3QgaW1wbGVtZW50IElMaXN0LiAgTm90ZSB0aGF0IEFycmF5IGltcGxlbWVudHNcclxuICAgICAgICAgICAgICAgIC8vIElMaXN0LCBhbmQgdGhlcmVmb3JlIFRbXSBhbmQgVVtdIHdpbGwgYmUgZml4ZWQtc2l6ZS5cclxuICAgICAgICAgICAgICAgIElMaXN0IGxpc3QgPSBpdGVtcyBhcyBJTGlzdDtcclxuICAgICAgICAgICAgICAgIGlmIChsaXN0ICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxpc3QuSXNGaXhlZFNpemU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbXMuSXNSZWFkT25seTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0qL1xyXG5cclxuICAgICAgICBpbnQgSUxpc3QuQWRkKG9iamVjdCB2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChpdGVtcy5Jc1JlYWRPbmx5KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBUaHJvd0hlbHBlci5UaHJvd05vdFN1cHBvcnRlZEV4Y2VwdGlvbihFeGNlcHRpb25SZXNvdXJjZS5Ob3RTdXBwb3J0ZWRfUmVhZE9ubHlDb2xsZWN0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBUaHJvd0hlbHBlci5JZk51bGxBbmROdWxsc0FyZUlsbGVnYWxUaGVuVGhyb3c8VD4odmFsdWUsIEV4Y2VwdGlvbkFyZ3VtZW50LnZhbHVlKTtcclxuXHJcbiAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBBZGQoKFQpdmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChJbnZhbGlkQ2FzdEV4Y2VwdGlvbilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVGhyb3dIZWxwZXIuVGhyb3dXcm9uZ1ZhbHVlVHlwZUFyZ3VtZW50RXhjZXB0aW9uKHZhbHVlLCB0eXBlb2YoVCkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5Db3VudCAtIDE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBib29sIElMaXN0LkNvbnRhaW5zKG9iamVjdCB2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChJc0NvbXBhdGlibGVPYmplY3QodmFsdWUpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gQ29udGFpbnMoKFQpdmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludCBJTGlzdC5JbmRleE9mKG9iamVjdCB2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChJc0NvbXBhdGlibGVPYmplY3QodmFsdWUpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gSW5kZXhPZigoVCl2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBJTGlzdC5JbnNlcnQoaW50IGluZGV4LCBvYmplY3QgdmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoaXRlbXMuSXNSZWFkT25seSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVGhyb3dIZWxwZXIuVGhyb3dOb3RTdXBwb3J0ZWRFeGNlcHRpb24oRXhjZXB0aW9uUmVzb3VyY2UuTm90U3VwcG9ydGVkX1JlYWRPbmx5Q29sbGVjdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgVGhyb3dIZWxwZXIuSWZOdWxsQW5kTnVsbHNBcmVJbGxlZ2FsVGhlblRocm93PFQ+KHZhbHVlLCBFeGNlcHRpb25Bcmd1bWVudC52YWx1ZSk7XHJcblxyXG4gICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgSW5zZXJ0KGluZGV4LCAoVCl2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKEludmFsaWRDYXN0RXhjZXB0aW9uKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBUaHJvd0hlbHBlci5UaHJvd1dyb25nVmFsdWVUeXBlQXJndW1lbnRFeGNlcHRpb24odmFsdWUsIHR5cGVvZihUKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIElMaXN0LlJlbW92ZShvYmplY3QgdmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoaXRlbXMuSXNSZWFkT25seSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVGhyb3dIZWxwZXIuVGhyb3dOb3RTdXBwb3J0ZWRFeGNlcHRpb24oRXhjZXB0aW9uUmVzb3VyY2UuTm90U3VwcG9ydGVkX1JlYWRPbmx5Q29sbGVjdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChJc0NvbXBhdGlibGVPYmplY3QodmFsdWUpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBSZW1vdmUoKFQpdmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBib29sIElzQ29tcGF0aWJsZU9iamVjdChvYmplY3QgdmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAvLyBOb24tbnVsbCB2YWx1ZXMgYXJlIGZpbmUuICBPbmx5IGFjY2VwdCBudWxscyBpZiBUIGlzIGEgY2xhc3Mgb3IgTnVsbGFibGU8VT4uXHJcbiAgICAgICAgICAgIC8vIE5vdGUgdGhhdCBkZWZhdWx0KFQpIGlzIG5vdCBlcXVhbCB0byBudWxsIGZvciB2YWx1ZSB0eXBlcyBleGNlcHQgd2hlbiBUIGlzIE51bGxhYmxlPFU+LiBcclxuICAgICAgICAgICAgcmV0dXJuICgodmFsdWUgaXMgVCkgfHwgKHZhbHVlID09IG51bGwgJiYgZGVmYXVsdChUKSA9PSBudWxsKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuLy9cclxuLy8gPGNvcHlyaWdodCBmaWxlPVwiT2JzZXJ2YWJsZUNvbGxlY3Rpb24uY3NcIiBjb21wYW55PVwiTWljcm9zb2Z0XCI+XHJcbi8vICAgIENvcHlyaWdodCAoQykgMjAwMyBieSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uICBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4vLyA8L2NvcHlyaWdodD5cclxuLy9cclxuLy9cclxuLy8gRGVzY3JpcHRpb246IEltcGxlbWVudGF0aW9uIG9mIGFuIENvbGxlY3Rpb248VD4gaW1wbGVtZW50aW5nIElOb3RpZnlDb2xsZWN0aW9uQ2hhbmdlZFxyXG4vLyAgICAgICAgICAgICAgdG8gbm90aWZ5IGxpc3RlbmVycyBvZiBkeW5hbWljIGNoYW5nZXMgb2YgdGhlIGxpc3QuXHJcbi8vXHJcbi8vIFNlZSBzcGVjIGF0IGh0dHA6Ly9hdmFsb24vY29ubmVjdGVkZGF0YS9TcGVjcy9Db2xsZWN0aW9uJTIwSW50ZXJmYWNlcy5taHRcclxuLy9cclxuLy8gSGlzdG9yeTpcclxuLy8gIDExLzIyLzIwMDQgOiBNaWNyb3NvZnQgLSBjcmVhdGVkXHJcbi8vXHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucztcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5TcGVjaWFsaXplZDtcclxudXNpbmcgU3lzdGVtLkNvbXBvbmVudE1vZGVsO1xyXG51c2luZyBTeXN0ZW0uUnVudGltZS5Db21waWxlclNlcnZpY2VzO1xyXG5cclxubmFtZXNwYWNlIFN5c3RlbS5Db2xsZWN0aW9ucy5PYmplY3RNb2RlbFxyXG57XHJcbiAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAvLy8gSW1wbGVtZW50YXRpb24gb2YgYSBkeW5hbWljIGRhdGEgY29sbGVjdGlvbiBiYXNlZCBvbiBnZW5lcmljIENvbGxlY3Rpb24mbHQ7VCZndDssXHJcbiAgICAvLy8gaW1wbGVtZW50aW5nIElOb3RpZnlDb2xsZWN0aW9uQ2hhbmdlZCB0byBub3RpZnkgbGlzdGVuZXJzXHJcbiAgICAvLy8gd2hlbiBpdGVtcyBnZXQgYWRkZWQsIHJlbW92ZWQgb3IgdGhlIHdob2xlIGxpc3QgaXMgcmVmcmVzaGVkLlxyXG4gICAgLy8vIDwvc3VtbWFyeT5cclxuICAgIFtTZXJpYWxpemFibGUoKV1cclxuICAgIHB1YmxpYyBjbGFzcyBPYnNlcnZhYmxlQ29sbGVjdGlvbjxUPiA6IENvbGxlY3Rpb248VD4sIElOb3RpZnlDb2xsZWN0aW9uQ2hhbmdlZCwgSU5vdGlmeVByb3BlcnR5Q2hhbmdlZFxyXG4gICAge1xyXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyAgQ29uc3RydWN0b3JzXHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgICAgICAjcmVnaW9uIENvbnN0cnVjdG9yc1xyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gSW5pdGlhbGl6ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgT2JzZXJ2YWJsZUNvbGxlY3Rpb24gdGhhdCBpcyBlbXB0eSBhbmQgaGFzIGRlZmF1bHQgaW5pdGlhbCBjYXBhY2l0eS5cclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIHB1YmxpYyBPYnNlcnZhYmxlQ29sbGVjdGlvbigpIDogYmFzZSgpIHsgfVxyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vIEluaXRpYWxpemVzIGEgbmV3IGluc3RhbmNlIG9mIHRoZSBPYnNlcnZhYmxlQ29sbGVjdGlvbiBjbGFzc1xyXG4gICAgICAgIC8vLyB0aGF0IGNvbnRhaW5zIGVsZW1lbnRzIGNvcGllZCBmcm9tIHRoZSBzcGVjaWZpZWQgbGlzdFxyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwibGlzdFwiPlRoZSBsaXN0IHdob3NlIGVsZW1lbnRzIGFyZSBjb3BpZWQgdG8gdGhlIG5ldyBsaXN0LjwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxyZW1hcmtzPlxyXG4gICAgICAgIC8vLyBUaGUgZWxlbWVudHMgYXJlIGNvcGllZCBvbnRvIHRoZSBPYnNlcnZhYmxlQ29sbGVjdGlvbiBpbiB0aGVcclxuICAgICAgICAvLy8gc2FtZSBvcmRlciB0aGV5IGFyZSByZWFkIGJ5IHRoZSBlbnVtZXJhdG9yIG9mIHRoZSBsaXN0LlxyXG4gICAgICAgIC8vLyA8L3JlbWFya3M+XHJcbiAgICAgICAgLy8vIDxleGNlcHRpb24gY3JlZj1cIkFyZ3VtZW50TnVsbEV4Y2VwdGlvblwiPiBsaXN0IGlzIGEgbnVsbCByZWZlcmVuY2UgPC9leGNlcHRpb24+XHJcbiAgICAgICAgcHVibGljIE9ic2VydmFibGVDb2xsZWN0aW9uKExpc3Q8VD4gbGlzdClcclxuICAgICAgICAgICAgOiBiYXNlKChsaXN0ICE9IG51bGwpID8gbmV3IExpc3Q8VD4obGlzdC5Db3VudCkgOiBsaXN0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgLy8gV29ya2Fyb3VuZCBmb3IgVlNXaGlkYmV5IGJ1ZyA1NjI2ODEgKHRyYWNrZWQgYnkgV2luZG93cyBidWcgMTM2OTMzOSkuXHJcbiAgICAgICAgICAgIC8vIFdlIHNob3VsZCBiZSBhYmxlIHRvIHNpbXBseSBjYWxsIHRoZSBiYXNlKGxpc3QpIGN0b3IuICBCdXQgQ29sbGVjdGlvbjxUPlxyXG4gICAgICAgICAgICAvLyBkb2Vzbid0IGNvcHkgdGhlIGxpc3QgKGNvbnRyYXJ5IHRvIHRoZSBkb2N1bWVudGF0aW9uKSAtIGl0IHVzZXMgdGhlXHJcbiAgICAgICAgICAgIC8vIGxpc3QgZGlyZWN0bHkgYXMgaXRzIHN0b3JhZ2UuICBTbyB3ZSBkbyB0aGUgY29weWluZyBoZXJlLlxyXG4gICAgICAgICAgICAvLyBcclxuICAgICAgICAgICAgQ29weUZyb20obGlzdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vIEluaXRpYWxpemVzIGEgbmV3IGluc3RhbmNlIG9mIHRoZSBPYnNlcnZhYmxlQ29sbGVjdGlvbiBjbGFzcyB0aGF0IGNvbnRhaW5zXHJcbiAgICAgICAgLy8vIGVsZW1lbnRzIGNvcGllZCBmcm9tIHRoZSBzcGVjaWZpZWQgY29sbGVjdGlvbiBhbmQgaGFzIHN1ZmZpY2llbnQgY2FwYWNpdHlcclxuICAgICAgICAvLy8gdG8gYWNjb21tb2RhdGUgdGhlIG51bWJlciBvZiBlbGVtZW50cyBjb3BpZWQuXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJjb2xsZWN0aW9uXCI+VGhlIGNvbGxlY3Rpb24gd2hvc2UgZWxlbWVudHMgYXJlIGNvcGllZCB0byB0aGUgbmV3IGxpc3QuPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHJlbWFya3M+XHJcbiAgICAgICAgLy8vIFRoZSBlbGVtZW50cyBhcmUgY29waWVkIG9udG8gdGhlIE9ic2VydmFibGVDb2xsZWN0aW9uIGluIHRoZVxyXG4gICAgICAgIC8vLyBzYW1lIG9yZGVyIHRoZXkgYXJlIHJlYWQgYnkgdGhlIGVudW1lcmF0b3Igb2YgdGhlIGNvbGxlY3Rpb24uXHJcbiAgICAgICAgLy8vIDwvcmVtYXJrcz5cclxuICAgICAgICAvLy8gPGV4Y2VwdGlvbiBjcmVmPVwiQXJndW1lbnROdWxsRXhjZXB0aW9uXCI+IGNvbGxlY3Rpb24gaXMgYSBudWxsIHJlZmVyZW5jZSA8L2V4Y2VwdGlvbj5cclxuICAgICAgICBwdWJsaWMgT2JzZXJ2YWJsZUNvbGxlY3Rpb24oSUVudW1lcmFibGU8VD4gY29sbGVjdGlvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChjb2xsZWN0aW9uID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnROdWxsRXhjZXB0aW9uKFwiY29sbGVjdGlvblwiKTtcclxuXHJcbiAgICAgICAgICAgIENvcHlGcm9tKGNvbGxlY3Rpb24pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSB2b2lkIENvcHlGcm9tKElFbnVtZXJhYmxlPFQ+IGNvbGxlY3Rpb24pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBJTGlzdDxUPiBpdGVtcyA9IEl0ZW1zO1xyXG4gICAgICAgICAgICBpZiAoY29sbGVjdGlvbiAhPSBudWxsICYmIGl0ZW1zICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHVzaW5nIChJRW51bWVyYXRvcjxUPiBlbnVtZXJhdG9yID0gY29sbGVjdGlvbi5HZXRFbnVtZXJhdG9yKCkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGVudW1lcmF0b3IuTW92ZU5leHQoKSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zLkFkZChlbnVtZXJhdG9yLkN1cnJlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgI2VuZHJlZ2lvbiBDb25zdHJ1Y3RvcnNcclxuXHJcblxyXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyAgUHVibGljIE1ldGhvZHNcclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgICAgICNyZWdpb24gUHVibGljIE1ldGhvZHNcclxuXHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyBNb3ZlIGl0ZW0gYXQgb2xkSW5kZXggdG8gbmV3SW5kZXguXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICBwdWJsaWMgdm9pZCBNb3ZlKGludCBvbGRJbmRleCwgaW50IG5ld0luZGV4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTW92ZUl0ZW0ob2xkSW5kZXgsIG5ld0luZGV4KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICNlbmRyZWdpb24gUHVibGljIE1ldGhvZHNcclxuXHJcblxyXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyAgUHVibGljIEV2ZW50c1xyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBQdWJsaWMgRXZlbnRzXHJcblxyXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAgI3JlZ2lvbiBJTm90aWZ5UHJvcGVydHlDaGFuZ2VkIGltcGxlbWVudGF0aW9uXHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyBQcm9wZXJ0eUNoYW5nZWQgZXZlbnQgKHBlciA8c2VlIGNyZWY9XCJJTm90aWZ5UHJvcGVydHlDaGFuZ2VkXCIgLz4pLlxyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgZXZlbnQgUHJvcGVydHlDaGFuZ2VkRXZlbnRIYW5kbGVyIElOb3RpZnlQcm9wZXJ0eUNoYW5nZWQuUHJvcGVydHlDaGFuZ2VkXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBhZGRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgUHJvcGVydHlDaGFuZ2VkICs9IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJlbW92ZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBQcm9wZXJ0eUNoYW5nZWQgLT0gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvbiBJTm90aWZ5UHJvcGVydHlDaGFuZ2VkIGltcGxlbWVudGF0aW9uXHJcblxyXG5cclxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gT2NjdXJzIHdoZW4gdGhlIGNvbGxlY3Rpb24gY2hhbmdlcywgZWl0aGVyIGJ5IGFkZGluZyBvciByZW1vdmluZyBhbiBpdGVtLlxyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxyZW1hcmtzPlxyXG4gICAgICAgIC8vLyBzZWUgPHNlZWFsc28gY3JlZj1cIklOb3RpZnlDb2xsZWN0aW9uQ2hhbmdlZFwiLz5cclxuICAgICAgICAvLy8gPC9yZW1hcmtzPlxyXG4jaWYgIUZFQVRVUkVfTkVUQ09SRVxyXG4gICAgICAgIFtmaWVsZDogTm9uU2VyaWFsaXplZEF0dHJpYnV0ZSgpXVxyXG4jZW5kaWZcclxuICAgICAgICBwdWJsaWMgdmlydHVhbCBldmVudCBOb3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEV2ZW50SGFuZGxlciBDb2xsZWN0aW9uQ2hhbmdlZDtcclxuXHJcbiAgICAgICAgI2VuZHJlZ2lvbiBQdWJsaWMgRXZlbnRzXHJcblxyXG5cclxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gIFByb3RlY3RlZCBNZXRob2RzXHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgICAgICAjcmVnaW9uIFByb3RlY3RlZCBNZXRob2RzXHJcblxyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gQ2FsbGVkIGJ5IGJhc2UgY2xhc3MgQ29sbGVjdGlvbiZsdDtUJmd0OyB3aGVuIHRoZSBsaXN0IGlzIGJlaW5nIGNsZWFyZWQ7XHJcbiAgICAgICAgLy8vIHJhaXNlcyBhIENvbGxlY3Rpb25DaGFuZ2VkIGV2ZW50IHRvIGFueSBsaXN0ZW5lcnMuXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBDbGVhckl0ZW1zKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIENoZWNrUmVlbnRyYW5jeSgpO1xyXG4gICAgICAgICAgICBiYXNlLkNsZWFySXRlbXMoKTtcclxuICAgICAgICAgICAgT25Qcm9wZXJ0eUNoYW5nZWQoQ291bnRTdHJpbmcpO1xyXG4gICAgICAgICAgICBPblByb3BlcnR5Q2hhbmdlZChJbmRleGVyTmFtZSk7XHJcbiAgICAgICAgICAgIE9uQ29sbGVjdGlvblJlc2V0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vIENhbGxlZCBieSBiYXNlIGNsYXNzIENvbGxlY3Rpb24mbHQ7VCZndDsgd2hlbiBhbiBpdGVtIGlzIHJlbW92ZWQgZnJvbSBsaXN0O1xyXG4gICAgICAgIC8vLyByYWlzZXMgYSBDb2xsZWN0aW9uQ2hhbmdlZCBldmVudCB0byBhbnkgbGlzdGVuZXJzLlxyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgUmVtb3ZlSXRlbShpbnQgaW5kZXgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBDaGVja1JlZW50cmFuY3koKTtcclxuICAgICAgICAgICAgVCByZW1vdmVkSXRlbSA9IHRoaXNbaW5kZXhdO1xyXG5cclxuICAgICAgICAgICAgYmFzZS5SZW1vdmVJdGVtKGluZGV4KTtcclxuXHJcbiAgICAgICAgICAgIE9uUHJvcGVydHlDaGFuZ2VkKENvdW50U3RyaW5nKTtcclxuICAgICAgICAgICAgT25Qcm9wZXJ0eUNoYW5nZWQoSW5kZXhlck5hbWUpO1xyXG4gICAgICAgICAgICBPbkNvbGxlY3Rpb25DaGFuZ2VkKE5vdGlmeUNvbGxlY3Rpb25DaGFuZ2VkQWN0aW9uLlJlbW92ZSwgcmVtb3ZlZEl0ZW0sIGluZGV4KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gQ2FsbGVkIGJ5IGJhc2UgY2xhc3MgQ29sbGVjdGlvbiZsdDtUJmd0OyB3aGVuIGFuIGl0ZW0gaXMgYWRkZWQgdG8gbGlzdDtcclxuICAgICAgICAvLy8gcmFpc2VzIGEgQ29sbGVjdGlvbkNoYW5nZWQgZXZlbnQgdG8gYW55IGxpc3RlbmVycy5cclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSB2b2lkIEluc2VydEl0ZW0oaW50IGluZGV4LCBUIGl0ZW0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBDaGVja1JlZW50cmFuY3koKTtcclxuICAgICAgICAgICAgYmFzZS5JbnNlcnRJdGVtKGluZGV4LCBpdGVtKTtcclxuXHJcbiAgICAgICAgICAgIE9uUHJvcGVydHlDaGFuZ2VkKENvdW50U3RyaW5nKTtcclxuICAgICAgICAgICAgT25Qcm9wZXJ0eUNoYW5nZWQoSW5kZXhlck5hbWUpO1xyXG4gICAgICAgICAgICBPbkNvbGxlY3Rpb25DaGFuZ2VkKE5vdGlmeUNvbGxlY3Rpb25DaGFuZ2VkQWN0aW9uLkFkZCwgaXRlbSwgaW5kZXgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyBDYWxsZWQgYnkgYmFzZSBjbGFzcyBDb2xsZWN0aW9uJmx0O1QmZ3Q7IHdoZW4gYW4gaXRlbSBpcyBzZXQgaW4gbGlzdDtcclxuICAgICAgICAvLy8gcmFpc2VzIGEgQ29sbGVjdGlvbkNoYW5nZWQgZXZlbnQgdG8gYW55IGxpc3RlbmVycy5cclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSB2b2lkIFNldEl0ZW0oaW50IGluZGV4LCBUIGl0ZW0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBDaGVja1JlZW50cmFuY3koKTtcclxuICAgICAgICAgICAgVCBvcmlnaW5hbEl0ZW0gPSB0aGlzW2luZGV4XTtcclxuICAgICAgICAgICAgYmFzZS5TZXRJdGVtKGluZGV4LCBpdGVtKTtcclxuXHJcbiAgICAgICAgICAgIE9uUHJvcGVydHlDaGFuZ2VkKEluZGV4ZXJOYW1lKTtcclxuICAgICAgICAgICAgT25Db2xsZWN0aW9uQ2hhbmdlZChOb3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEFjdGlvbi5SZXBsYWNlLCBvcmlnaW5hbEl0ZW0sIGl0ZW0sIGluZGV4KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gQ2FsbGVkIGJ5IGJhc2UgY2xhc3MgT2JzZXJ2YWJsZUNvbGxlY3Rpb24mbHQ7VCZndDsgd2hlbiBhbiBpdGVtIGlzIHRvIGJlIG1vdmVkIHdpdGhpbiB0aGUgbGlzdDtcclxuICAgICAgICAvLy8gcmFpc2VzIGEgQ29sbGVjdGlvbkNoYW5nZWQgZXZlbnQgdG8gYW55IGxpc3RlbmVycy5cclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIHByb3RlY3RlZCB2aXJ0dWFsIHZvaWQgTW92ZUl0ZW0oaW50IG9sZEluZGV4LCBpbnQgbmV3SW5kZXgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBDaGVja1JlZW50cmFuY3koKTtcclxuXHJcbiAgICAgICAgICAgIFQgcmVtb3ZlZEl0ZW0gPSB0aGlzW29sZEluZGV4XTtcclxuXHJcbiAgICAgICAgICAgIGJhc2UuUmVtb3ZlSXRlbShvbGRJbmRleCk7XHJcbiAgICAgICAgICAgIGJhc2UuSW5zZXJ0SXRlbShuZXdJbmRleCwgcmVtb3ZlZEl0ZW0pO1xyXG5cclxuICAgICAgICAgICAgT25Qcm9wZXJ0eUNoYW5nZWQoSW5kZXhlck5hbWUpO1xyXG4gICAgICAgICAgICBPbkNvbGxlY3Rpb25DaGFuZ2VkKE5vdGlmeUNvbGxlY3Rpb25DaGFuZ2VkQWN0aW9uLk1vdmUsIHJlbW92ZWRJdGVtLCBuZXdJbmRleCwgb2xkSW5kZXgpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gUmFpc2VzIGEgUHJvcGVydHlDaGFuZ2VkIGV2ZW50IChwZXIgPHNlZSBjcmVmPVwiSU5vdGlmeVByb3BlcnR5Q2hhbmdlZFwiIC8+KS5cclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIHByb3RlY3RlZCB2aXJ0dWFsIHZvaWQgT25Qcm9wZXJ0eUNoYW5nZWQoUHJvcGVydHlDaGFuZ2VkRXZlbnRBcmdzIGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoUHJvcGVydHlDaGFuZ2VkICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFByb3BlcnR5Q2hhbmdlZCh0aGlzLCBlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyBQcm9wZXJ0eUNoYW5nZWQgZXZlbnQgKHBlciA8c2VlIGNyZWY9XCJJTm90aWZ5UHJvcGVydHlDaGFuZ2VkXCIgLz4pLlxyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiNpZiAhRkVBVFVSRV9ORVRDT1JFXHJcbiAgICAgICAgW2ZpZWxkOiBOb25TZXJpYWxpemVkQXR0cmlidXRlKCldXHJcbiNlbmRpZlxyXG4gICAgICAgIHByb3RlY3RlZCB2aXJ0dWFsIGV2ZW50IFByb3BlcnR5Q2hhbmdlZEV2ZW50SGFuZGxlciBQcm9wZXJ0eUNoYW5nZWQ7XHJcblxyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gUmFpc2UgQ29sbGVjdGlvbkNoYW5nZWQgZXZlbnQgdG8gYW55IGxpc3RlbmVycy5cclxuICAgICAgICAvLy8gUHJvcGVydGllcy9tZXRob2RzIG1vZGlmeWluZyB0aGlzIE9ic2VydmFibGVDb2xsZWN0aW9uIHdpbGwgcmFpc2VcclxuICAgICAgICAvLy8gYSBjb2xsZWN0aW9uIGNoYW5nZWQgZXZlbnQgdGhyb3VnaCB0aGlzIHZpcnR1YWwgbWV0aG9kLlxyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxyZW1hcmtzPlxyXG4gICAgICAgIC8vLyBXaGVuIG92ZXJyaWRpbmcgdGhpcyBtZXRob2QsIGVpdGhlciBjYWxsIGl0cyBiYXNlIGltcGxlbWVudGF0aW9uXHJcbiAgICAgICAgLy8vIG9yIGNhbGwgPHNlZSBjcmVmPVwiQmxvY2tSZWVudHJhbmN5XCIvPiB0byBndWFyZCBhZ2FpbnN0IHJlZW50cmFudCBjb2xsZWN0aW9uIGNoYW5nZXMuXHJcbiAgICAgICAgLy8vIDwvcmVtYXJrcz5cclxuICAgICAgICBwcm90ZWN0ZWQgdmlydHVhbCB2b2lkIE9uQ29sbGVjdGlvbkNoYW5nZWQoTm90aWZ5Q29sbGVjdGlvbkNoYW5nZWRFdmVudEFyZ3MgZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChDb2xsZWN0aW9uQ2hhbmdlZCAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB1c2luZyAoQmxvY2tSZWVudHJhbmN5KCkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgQ29sbGVjdGlvbkNoYW5nZWQodGhpcywgZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gRGlzYWxsb3cgcmVlbnRyYW50IGF0dGVtcHRzIHRvIGNoYW5nZSB0aGlzIGNvbGxlY3Rpb24uIEUuZy4gYSBldmVudCBoYW5kbGVyXHJcbiAgICAgICAgLy8vIG9mIHRoZSBDb2xsZWN0aW9uQ2hhbmdlZCBldmVudCBpcyBub3QgYWxsb3dlZCB0byBtYWtlIGNoYW5nZXMgdG8gdGhpcyBjb2xsZWN0aW9uLlxyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxyZW1hcmtzPlxyXG4gICAgICAgIC8vLyB0eXBpY2FsIHVzYWdlIGlzIHRvIHdyYXAgZS5nLiBhIE9uQ29sbGVjdGlvbkNoYW5nZWQgY2FsbCB3aXRoIGEgdXNpbmcoKSBzY29wZTpcclxuICAgICAgICAvLy8gPGNvZGU+XHJcbiAgICAgICAgLy8vICAgICAgICAgdXNpbmcgKEJsb2NrUmVlbnRyYW5jeSgpKVxyXG4gICAgICAgIC8vLyAgICAgICAgIHtcclxuICAgICAgICAvLy8gICAgICAgICAgICAgQ29sbGVjdGlvbkNoYW5nZWQodGhpcywgbmV3IE5vdGlmeUNvbGxlY3Rpb25DaGFuZ2VkRXZlbnRBcmdzKGFjdGlvbiwgaXRlbSwgaW5kZXgpKTtcclxuICAgICAgICAvLy8gICAgICAgICB9XHJcbiAgICAgICAgLy8vIDwvY29kZT5cclxuICAgICAgICAvLy8gPC9yZW1hcmtzPlxyXG4gICAgICAgIHByb3RlY3RlZCBJRGlzcG9zYWJsZSBCbG9ja1JlZW50cmFuY3koKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX21vbml0b3IuRW50ZXIoKTtcclxuICAgICAgICAgICAgcmV0dXJuIF9tb25pdG9yO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PiBDaGVjayBhbmQgYXNzZXJ0IGZvciByZWVudHJhbnQgYXR0ZW1wdHMgdG8gY2hhbmdlIHRoaXMgY29sbGVjdGlvbi4gPC9zdW1tYXJ5PlxyXG4gICAgICAgIC8vLyA8ZXhjZXB0aW9uIGNyZWY9XCJJbnZhbGlkT3BlcmF0aW9uRXhjZXB0aW9uXCI+IHJhaXNlZCB3aGVuIGNoYW5naW5nIHRoZSBjb2xsZWN0aW9uXHJcbiAgICAgICAgLy8vIHdoaWxlIGFub3RoZXIgY29sbGVjdGlvbiBjaGFuZ2UgaXMgc3RpbGwgYmVpbmcgbm90aWZpZWQgdG8gb3RoZXIgbGlzdGVuZXJzIDwvZXhjZXB0aW9uPlxyXG4gICAgICAgIHByb3RlY3RlZCB2b2lkIENoZWNrUmVlbnRyYW5jeSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoX21vbml0b3IuQnVzeSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgLy8gd2UgY2FuIGFsbG93IGNoYW5nZXMgaWYgdGhlcmUncyBvbmx5IG9uZSBsaXN0ZW5lciAtIHRoZSBwcm9ibGVtXHJcbiAgICAgICAgICAgICAgICAvLyBvbmx5IGFyaXNlcyBpZiByZWVudHJhbnQgY2hhbmdlcyBtYWtlIHRoZSBvcmlnaW5hbCBldmVudCBhcmdzXHJcbiAgICAgICAgICAgICAgICAvLyBpbnZhbGlkIGZvciBsYXRlciBsaXN0ZW5lcnMuICBUaGlzIGtlZXBzIGV4aXN0aW5nIGNvZGUgd29ya2luZ1xyXG4gICAgICAgICAgICAgICAgLy8gKGUuZy4gU2VsZWN0b3IuU2VsZWN0ZWRJdGVtcykuXHJcbiAgICAgICAgICAgICAgICBpZiAoKENvbGxlY3Rpb25DaGFuZ2VkICE9IG51bGwpICYmIChDb2xsZWN0aW9uQ2hhbmdlZC5HZXRJbnZvY2F0aW9uTGlzdCgpLkxlbmd0aCA+IDEpKVxyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXhjZXB0aW9uKFNSLkdldFN0cmluZyhTUi5PYnNlcnZhYmxlQ29sbGVjdGlvblJlZW50cmFuY3lOb3RBbGxvd2VkKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICNlbmRyZWdpb24gUHJvdGVjdGVkIE1ldGhvZHNcclxuXHJcblxyXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyAgUHJpdmF0ZSBNZXRob2RzXHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgICAgICAjcmVnaW9uIFByaXZhdGUgTWV0aG9kc1xyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gSGVscGVyIHRvIHJhaXNlIGEgUHJvcGVydHlDaGFuZ2VkIGV2ZW50ICAvPikuXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICBwcml2YXRlIHZvaWQgT25Qcm9wZXJ0eUNoYW5nZWQoc3RyaW5nIHByb3BlcnR5TmFtZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIE9uUHJvcGVydHlDaGFuZ2VkKG5ldyBQcm9wZXJ0eUNoYW5nZWRFdmVudEFyZ3MocHJvcGVydHlOYW1lKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vIEhlbHBlciB0byByYWlzZSBDb2xsZWN0aW9uQ2hhbmdlZCBldmVudCB0byBhbnkgbGlzdGVuZXJzXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICBwcml2YXRlIHZvaWQgT25Db2xsZWN0aW9uQ2hhbmdlZChOb3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEFjdGlvbiBhY3Rpb24sIG9iamVjdCBpdGVtLCBpbnQgaW5kZXgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBPbkNvbGxlY3Rpb25DaGFuZ2VkKG5ldyBOb3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEV2ZW50QXJncyhhY3Rpb24sIGl0ZW0sIGluZGV4KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vIEhlbHBlciB0byByYWlzZSBDb2xsZWN0aW9uQ2hhbmdlZCBldmVudCB0byBhbnkgbGlzdGVuZXJzXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICBwcml2YXRlIHZvaWQgT25Db2xsZWN0aW9uQ2hhbmdlZChOb3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEFjdGlvbiBhY3Rpb24sIG9iamVjdCBpdGVtLCBpbnQgaW5kZXgsIGludCBvbGRJbmRleClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIE9uQ29sbGVjdGlvbkNoYW5nZWQobmV3IE5vdGlmeUNvbGxlY3Rpb25DaGFuZ2VkRXZlbnRBcmdzKGFjdGlvbiwgaXRlbSwgaW5kZXgsIG9sZEluZGV4KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vIEhlbHBlciB0byByYWlzZSBDb2xsZWN0aW9uQ2hhbmdlZCBldmVudCB0byBhbnkgbGlzdGVuZXJzXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICBwcml2YXRlIHZvaWQgT25Db2xsZWN0aW9uQ2hhbmdlZChOb3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEFjdGlvbiBhY3Rpb24sIG9iamVjdCBvbGRJdGVtLCBvYmplY3QgbmV3SXRlbSwgaW50IGluZGV4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgT25Db2xsZWN0aW9uQ2hhbmdlZChuZXcgTm90aWZ5Q29sbGVjdGlvbkNoYW5nZWRFdmVudEFyZ3MoYWN0aW9uLCBuZXdJdGVtLCBvbGRJdGVtLCBpbmRleCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyBIZWxwZXIgdG8gcmFpc2UgQ29sbGVjdGlvbkNoYW5nZWQgZXZlbnQgd2l0aCBhY3Rpb24gPT0gUmVzZXQgdG8gYW55IGxpc3RlbmVyc1xyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgcHJpdmF0ZSB2b2lkIE9uQ29sbGVjdGlvblJlc2V0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIE9uQ29sbGVjdGlvbkNoYW5nZWQobmV3IE5vdGlmeUNvbGxlY3Rpb25DaGFuZ2VkRXZlbnRBcmdzKE5vdGlmeUNvbGxlY3Rpb25DaGFuZ2VkQWN0aW9uLlJlc2V0KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb24gUHJpdmF0ZSBNZXRob2RzXHJcblxyXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyAgUHJpdmF0ZSBUeXBlc1xyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBQcml2YXRlIFR5cGVzXHJcblxyXG4gICAgICAgIC8vIHRoaXMgY2xhc3MgaGVscHMgcHJldmVudCByZWVudHJhbnQgY2FsbHNcclxuI2lmICFGRUFUVVJFX05FVENPUkVcclxuICAgICAgICBbU2VyaWFsaXphYmxlKCldXHJcbiNlbmRpZlxyXG4gICAgICAgIHByaXZhdGUgY2xhc3MgU2ltcGxlTW9uaXRvciA6IElEaXNwb3NhYmxlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBwdWJsaWMgdm9pZCBFbnRlcigpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICsrX2J1c3lDb3VudDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcHVibGljIHZvaWQgRGlzcG9zZSgpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIC0tX2J1c3lDb3VudDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcHVibGljIGJvb2wgQnVzeSB7IGdldCB7IHJldHVybiBfYnVzeUNvdW50ID4gMDsgfSB9XHJcblxyXG4gICAgICAgICAgICBpbnQgX2J1c3lDb3VudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICNlbmRyZWdpb24gUHJpdmF0ZSBUeXBlc1xyXG5cclxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gIFByaXZhdGUgRmllbGRzXHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgICAgICAjcmVnaW9uIFByaXZhdGUgRmllbGRzXHJcblxyXG4gICAgICAgIHByaXZhdGUgY29uc3Qgc3RyaW5nIENvdW50U3RyaW5nID0gXCJDb3VudFwiO1xyXG5cclxuICAgICAgICAvLyBUaGlzIG11c3QgYWdyZWUgd2l0aCBCaW5kaW5nLkluZGV4ZXJOYW1lLiAgSXQgaXMgZGVjbGFyZWQgc2VwYXJhdGVseVxyXG4gICAgICAgIC8vIGhlcmUgc28gYXMgdG8gYXZvaWQgYSBkZXBlbmRlbmN5IG9uIFByZXNlbnRhdGlvbkZyYW1ld29yay5kbGwuXHJcbiAgICAgICAgcHJpdmF0ZSBjb25zdCBzdHJpbmcgSW5kZXhlck5hbWUgPSBcIkl0ZW1bXVwiO1xyXG5cclxuICAgICAgICBwcml2YXRlIFNpbXBsZU1vbml0b3IgX21vbml0b3IgPSBuZXcgU2ltcGxlTW9uaXRvcigpO1xyXG5cclxuICAgICAgICAjZW5kcmVnaW9uIFByaXZhdGUgRmllbGRzXHJcbiAgICB9XHJcbn0iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5SdW50aW1lLkNvbXBpbGVyU2VydmljZXM7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuT2JqZWN0TW9kZWw7XHJcbnVzaW5nIFN5c3RlbS5SdW50aW1lLkNvbXBpbGVyU2VydmljZXM7XHJcblxyXG5uYW1lc3BhY2UgU3lzdGVtLkNvbGxlY3Rpb25zLlNwZWNpYWxpemVkXHJcbntcclxuICAgIHB1YmxpYyBkZWxlZ2F0ZSB2b2lkIE5vdGlmeUNvbGxlY3Rpb25DaGFuZ2VkRXZlbnRIYW5kbGVyKG9iamVjdCBzZW5kZXIsIE5vdGlmeUNvbGxlY3Rpb25DaGFuZ2VkRXZlbnRBcmdzIGUpO1xyXG4gICAgcHVibGljIGludGVyZmFjZSBJTm90aWZ5Q29sbGVjdGlvbkNoYW5nZWRcclxuICAgIHtcclxuICAgICAgICBldmVudCBOb3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEV2ZW50SGFuZGxlciBDb2xsZWN0aW9uQ2hhbmdlZDtcclxuICAgIH1cclxufVxyXG5cclxuXHJcblxyXG5cclxubmFtZXNwYWNlIFN5c3RlbS5Db2xsZWN0aW9ucy5TcGVjaWFsaXplZFxyXG57XHJcbiAgICBwdWJsaWMgZW51bSBOb3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEFjdGlvblxyXG4gICAge1xyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5PbmUgb3IgbW9yZSBpdGVtcyB3ZXJlIGFkZGVkIHRvIHRoZSBjb2xsZWN0aW9uLjwvc3VtbWFyeT5cclxuICAgICAgICBBZGQsXHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5Pk9uZSBvciBtb3JlIGl0ZW1zIHdlcmUgcmVtb3ZlZCBmcm9tIHRoZSBjb2xsZWN0aW9uLjwvc3VtbWFyeT5cclxuICAgICAgICBSZW1vdmUsXHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5Pk9uZSBvciBtb3JlIGl0ZW1zIHdlcmUgcmVwbGFjZWQgaW4gdGhlIGNvbGxlY3Rpb24uPC9zdW1tYXJ5PlxyXG4gICAgICAgIFJlcGxhY2UsXHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5Pk9uZSBvciBtb3JlIGl0ZW1zIHdlcmUgbW92ZWQgd2l0aGluIHRoZSBjb2xsZWN0aW9uLjwvc3VtbWFyeT5cclxuICAgICAgICBNb3ZlLFxyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5UaGUgY29udGVudCBvZiB0aGUgY29sbGVjdGlvbiBjaGFuZ2VkIGRyYW1hdGljYWxseS48L3N1bW1hcnk+XHJcbiAgICAgICAgUmVzZXRcclxuICAgIH1cclxuXHJcbiAgICAvLy8gPHN1bW1hcnk+UHJvdmlkZXMgZGF0YSBmb3IgdGhlIDxzZWUgY3JlZj1cIkU6U3lzdGVtLkNvbGxlY3Rpb25zLlNwZWNpYWxpemVkLklOb3RpZnlDb2xsZWN0aW9uQ2hhbmdlZC5Db2xsZWN0aW9uQ2hhbmdlZFwiIC8+IGV2ZW50Ljwvc3VtbWFyeT5cclxuICAgIC8vIFtfX0R5bmFtaWNhbGx5SW52b2thYmxlXVxyXG4gICAgLy8gW1R5cGVGb3J3YXJkZWRGcm9tKFwiV2luZG93c0Jhc2UsIFZlcnNpb249My4wLjAuMCwgQ3VsdHVyZT1OZXV0cmFsLCBQdWJsaWNLZXlUb2tlbj0zMWJmMzg1NmFkMzY0ZTM1XCIpXVxyXG4gICAgcHVibGljIGNsYXNzIE5vdGlmeUNvbGxlY3Rpb25DaGFuZ2VkRXZlbnRBcmdzIDogRXZlbnRBcmdzXHJcbiAgICB7XHJcbiAgICAgICAgcHJpdmF0ZSBOb3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEFjdGlvbiBfYWN0aW9uO1xyXG5cclxuICAgICAgICBwcml2YXRlIElMaXN0IF9uZXdJdGVtcztcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBJTGlzdCBfb2xkSXRlbXM7XHJcblxyXG4gICAgICAgIHByaXZhdGUgaW50IF9uZXdTdGFydGluZ0luZGV4ID0gLTE7XHJcblxyXG4gICAgICAgIHByaXZhdGUgaW50IF9vbGRTdGFydGluZ0luZGV4ID0gLTE7XHJcblxyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5HZXRzIHRoZSBhY3Rpb24gdGhhdCBjYXVzZWQgdGhlIGV2ZW50LiA8L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxyZXR1cm5zPkEgPHNlZSBjcmVmPVwiVDpTeXN0ZW0uQ29sbGVjdGlvbnMuU3BlY2lhbGl6ZWQuTm90aWZ5Q29sbGVjdGlvbkNoYW5nZWRBY3Rpb25cIiAvPiB2YWx1ZSB0aGF0IGRlc2NyaWJlcyB0aGUgYWN0aW9uIHRoYXQgY2F1c2VkIHRoZSBldmVudC48L3JldHVybnM+XHJcbiAgICAgICAgLy8gW19fRHluYW1pY2FsbHlJbnZva2FibGVdXHJcbiAgICAgICAgcHVibGljIE5vdGlmeUNvbGxlY3Rpb25DaGFuZ2VkQWN0aW9uIEFjdGlvblxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgLy8gW19fRHluYW1pY2FsbHlJbnZva2FibGVdXHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fYWN0aW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+R2V0cyB0aGUgbGlzdCBvZiBuZXcgaXRlbXMgaW52b2x2ZWQgaW4gdGhlIGNoYW5nZS48L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxyZXR1cm5zPlRoZSBsaXN0IG9mIG5ldyBpdGVtcyBpbnZvbHZlZCBpbiB0aGUgY2hhbmdlLjwvcmV0dXJucz5cclxuICAgICAgICAvLyBbX19EeW5hbWljYWxseUludm9rYWJsZV1cclxuICAgICAgICBwdWJsaWMgSUxpc3QgTmV3SXRlbXNcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIC8vIFtfX0R5bmFtaWNhbGx5SW52b2thYmxlXVxyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX25ld0l0ZW1zO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+R2V0cyB0aGUgaW5kZXggYXQgd2hpY2ggdGhlIGNoYW5nZSBvY2N1cnJlZC48L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxyZXR1cm5zPlRoZSB6ZXJvLWJhc2VkIGluZGV4IGF0IHdoaWNoIHRoZSBjaGFuZ2Ugb2NjdXJyZWQuPC9yZXR1cm5zPlxyXG4gICAgICAgIC8vIFtfX0R5bmFtaWNhbGx5SW52b2thYmxlXVxyXG4gICAgICAgIHB1YmxpYyBpbnQgTmV3U3RhcnRpbmdJbmRleFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgLy8gW19fRHluYW1pY2FsbHlJbnZva2FibGVdXHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fbmV3U3RhcnRpbmdJbmRleDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PkdldHMgdGhlIGxpc3Qgb2YgaXRlbXMgYWZmZWN0ZWQgYnkgYSA8c2VlIGNyZWY9XCJGOlN5c3RlbS5Db2xsZWN0aW9ucy5TcGVjaWFsaXplZC5Ob3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEFjdGlvbi5SZXBsYWNlXCIgLz4sIFJlbW92ZSwgb3IgTW92ZSBhY3Rpb24uPC9zdW1tYXJ5PlxyXG4gICAgICAgIC8vLyA8cmV0dXJucz5UaGUgbGlzdCBvZiBpdGVtcyBhZmZlY3RlZCBieSBhIDxzZWUgY3JlZj1cIkY6U3lzdGVtLkNvbGxlY3Rpb25zLlNwZWNpYWxpemVkLk5vdGlmeUNvbGxlY3Rpb25DaGFuZ2VkQWN0aW9uLlJlcGxhY2VcIiAvPiwgUmVtb3ZlLCBvciBNb3ZlIGFjdGlvbi48L3JldHVybnM+XHJcbiAgICAgICAgLy8gW19fRHluYW1pY2FsbHlJbnZva2FibGVdXHJcbiAgICAgICAgcHVibGljIElMaXN0IE9sZEl0ZW1zXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAvLyBbX19EeW5hbWljYWxseUludm9rYWJsZV1cclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9vbGRJdGVtcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PkdldHMgdGhlIGluZGV4IGF0IHdoaWNoIGEgPHNlZSBjcmVmPVwiRjpTeXN0ZW0uQ29sbGVjdGlvbnMuU3BlY2lhbGl6ZWQuTm90aWZ5Q29sbGVjdGlvbkNoYW5nZWRBY3Rpb24uTW92ZVwiIC8+LCBSZW1vdmUsIG9yIFJlcGxhY2UgYWN0aW9uIG9jY3VycmVkLjwvc3VtbWFyeT5cclxuICAgICAgICAvLy8gPHJldHVybnM+VGhlIHplcm8tYmFzZWQgaW5kZXggYXQgd2hpY2ggYSA8c2VlIGNyZWY9XCJGOlN5c3RlbS5Db2xsZWN0aW9ucy5TcGVjaWFsaXplZC5Ob3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEFjdGlvbi5Nb3ZlXCIgLz4sIFJlbW92ZSwgb3IgUmVwbGFjZSBhY3Rpb24gb2NjdXJyZWQuPC9yZXR1cm5zPlxyXG4gICAgICAgIC8vIFtfX0R5bmFtaWNhbGx5SW52b2thYmxlXVxyXG4gICAgICAgIHB1YmxpYyBpbnQgT2xkU3RhcnRpbmdJbmRleFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgLy8gW19fRHluYW1pY2FsbHlJbnZva2FibGVdXHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fb2xkU3RhcnRpbmdJbmRleDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PkluaXRpYWxpemVzIGEgbmV3IGluc3RhbmNlIG9mIHRoZSA8c2VlIGNyZWY9XCJUOlN5c3RlbS5Db2xsZWN0aW9ucy5TcGVjaWFsaXplZC5Ob3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEV2ZW50QXJnc1wiIC8+IGNsYXNzIHRoYXQgZGVzY3JpYmVzIGEgPHNlZSBjcmVmPVwiRjpTeXN0ZW0uQ29sbGVjdGlvbnMuU3BlY2lhbGl6ZWQuTm90aWZ5Q29sbGVjdGlvbkNoYW5nZWRBY3Rpb24uUmVzZXRcIiAvPiBjaGFuZ2UuPC9zdW1tYXJ5PlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cImFjdGlvblwiPlRoZSBhY3Rpb24gdGhhdCBjYXVzZWQgdGhlIGV2ZW50LiBUaGlzIG11c3QgYmUgc2V0IHRvIDxzZWUgY3JlZj1cIkY6U3lzdGVtLkNvbGxlY3Rpb25zLlNwZWNpYWxpemVkLk5vdGlmeUNvbGxlY3Rpb25DaGFuZ2VkQWN0aW9uLlJlc2V0XCIgLz4uPC9wYXJhbT5cclxuICAgICAgICAvLyBbX19EeW5hbWljYWxseUludm9rYWJsZV1cclxuICAgICAgICBwdWJsaWMgTm90aWZ5Q29sbGVjdGlvbkNoYW5nZWRFdmVudEFyZ3MoTm90aWZ5Q29sbGVjdGlvbkNoYW5nZWRBY3Rpb24gYWN0aW9uKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGFjdGlvbiAhPSBOb3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEFjdGlvbi5SZXNldClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uKFwiV3JvbmdBY3Rpb25Gb3JDdG9yXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuSW5pdGlhbGl6ZUFkZChhY3Rpb24sIG51bGwsIC0xKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5Jbml0aWFsaXplcyBhIG5ldyBpbnN0YW5jZSBvZiB0aGUgPHNlZSBjcmVmPVwiVDpTeXN0ZW0uQ29sbGVjdGlvbnMuU3BlY2lhbGl6ZWQuTm90aWZ5Q29sbGVjdGlvbkNoYW5nZWRFdmVudEFyZ3NcIiAvPiBjbGFzcyB0aGF0IGRlc2NyaWJlcyBhIG9uZS1pdGVtIGNoYW5nZS48L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwiYWN0aW9uXCI+VGhlIGFjdGlvbiB0aGF0IGNhdXNlZCB0aGUgZXZlbnQuIFRoaXMgY2FuIGJlIHNldCB0byA8c2VlIGNyZWY9XCJGOlN5c3RlbS5Db2xsZWN0aW9ucy5TcGVjaWFsaXplZC5Ob3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEFjdGlvbi5SZXNldFwiIC8+LCA8c2VlIGNyZWY9XCJGOlN5c3RlbS5Db2xsZWN0aW9ucy5TcGVjaWFsaXplZC5Ob3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEFjdGlvbi5BZGRcIiAvPiwgb3IgPHNlZSBjcmVmPVwiRjpTeXN0ZW0uQ29sbGVjdGlvbnMuU3BlY2lhbGl6ZWQuTm90aWZ5Q29sbGVjdGlvbkNoYW5nZWRBY3Rpb24uUmVtb3ZlXCIgLz4uPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJjaGFuZ2VkSXRlbVwiPlRoZSBpdGVtIHRoYXQgaXMgYWZmZWN0ZWQgYnkgdGhlIGNoYW5nZS48L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8ZXhjZXB0aW9uIGNyZWY9XCJUOlN5c3RlbS5Bcmd1bWVudEV4Y2VwdGlvblwiPklmIDxwYXJhbXJlZiBuYW1lPVwiYWN0aW9uXCIgLz4gaXMgbm90IFJlc2V0LCBBZGQsIG9yIFJlbW92ZSwgb3IgaWYgPHBhcmFtcmVmIG5hbWU9XCJhY3Rpb25cIiAvPiBpcyBSZXNldCBhbmQgPHBhcmFtcmVmIG5hbWU9XCJjaGFuZ2VkSXRlbVwiIC8+IGlzIG5vdCBudWxsLjwvZXhjZXB0aW9uPlxyXG4gICAgICAgIC8vIFtfX0R5bmFtaWNhbGx5SW52b2thYmxlXVxyXG4gICAgICAgIHB1YmxpYyBOb3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEV2ZW50QXJncyhOb3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEFjdGlvbiBhY3Rpb24sIG9iamVjdCBjaGFuZ2VkSXRlbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChhY3Rpb24gIT0gTm90aWZ5Q29sbGVjdGlvbkNoYW5nZWRBY3Rpb24uQWRkICYmIGFjdGlvbiAhPSBOb3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEFjdGlvbi5SZW1vdmUgJiYgYWN0aW9uICE9IE5vdGlmeUNvbGxlY3Rpb25DaGFuZ2VkQWN0aW9uLlJlc2V0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnRFeGNlcHRpb24oXCJNdXN0QmVSZXNldEFkZE9yUmVtb3ZlQWN0aW9uRm9yQ3RvclwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoYWN0aW9uICE9IE5vdGlmeUNvbGxlY3Rpb25DaGFuZ2VkQWN0aW9uLlJlc2V0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkluaXRpYWxpemVBZGRPclJlbW92ZShhY3Rpb24sIChJTGlzdCkobmV3IG9iamVjdFtdIHsgY2hhbmdlZEl0ZW0gfSksIC0xKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY2hhbmdlZEl0ZW0gIT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uKFwiUmVzZXRBY3Rpb25SZXF1aXJlc051bGxJdGVtXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuSW5pdGlhbGl6ZUFkZChhY3Rpb24sIG51bGwsIC0xKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5Jbml0aWFsaXplcyBhIG5ldyBpbnN0YW5jZSBvZiB0aGUgPHNlZSBjcmVmPVwiVDpTeXN0ZW0uQ29sbGVjdGlvbnMuU3BlY2lhbGl6ZWQuTm90aWZ5Q29sbGVjdGlvbkNoYW5nZWRFdmVudEFyZ3NcIiAvPiBjbGFzcyB0aGF0IGRlc2NyaWJlcyBhIG9uZS1pdGVtIGNoYW5nZS48L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwiYWN0aW9uXCI+VGhlIGFjdGlvbiB0aGF0IGNhdXNlZCB0aGUgZXZlbnQuIFRoaXMgY2FuIGJlIHNldCB0byA8c2VlIGNyZWY9XCJGOlN5c3RlbS5Db2xsZWN0aW9ucy5TcGVjaWFsaXplZC5Ob3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEFjdGlvbi5SZXNldFwiIC8+LCA8c2VlIGNyZWY9XCJGOlN5c3RlbS5Db2xsZWN0aW9ucy5TcGVjaWFsaXplZC5Ob3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEFjdGlvbi5BZGRcIiAvPiwgb3IgPHNlZSBjcmVmPVwiRjpTeXN0ZW0uQ29sbGVjdGlvbnMuU3BlY2lhbGl6ZWQuTm90aWZ5Q29sbGVjdGlvbkNoYW5nZWRBY3Rpb24uUmVtb3ZlXCIgLz4uPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJjaGFuZ2VkSXRlbVwiPlRoZSBpdGVtIHRoYXQgaXMgYWZmZWN0ZWQgYnkgdGhlIGNoYW5nZS48L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cImluZGV4XCI+VGhlIGluZGV4IHdoZXJlIHRoZSBjaGFuZ2Ugb2NjdXJyZWQuPC9wYXJhbT5cclxuICAgICAgICAvLy8gPGV4Y2VwdGlvbiBjcmVmPVwiVDpTeXN0ZW0uQXJndW1lbnRFeGNlcHRpb25cIj5JZiA8cGFyYW1yZWYgbmFtZT1cImFjdGlvblwiIC8+IGlzIG5vdCBSZXNldCwgQWRkLCBvciBSZW1vdmUsIG9yIGlmIDxwYXJhbXJlZiBuYW1lPVwiYWN0aW9uXCIgLz4gaXMgUmVzZXQgYW5kIGVpdGhlciA8cGFyYW1yZWYgbmFtZT1cImNoYW5nZWRJdGVtc1wiIC8+IGlzIG5vdCBudWxsIG9yIDxwYXJhbXJlZiBuYW1lPVwiaW5kZXhcIiAvPiBpcyBub3QgLTEuPC9leGNlcHRpb24+XHJcbiAgICAgICAgLy8gW19fRHluYW1pY2FsbHlJbnZva2FibGVdXHJcbiAgICAgICAgcHVibGljIE5vdGlmeUNvbGxlY3Rpb25DaGFuZ2VkRXZlbnRBcmdzKE5vdGlmeUNvbGxlY3Rpb25DaGFuZ2VkQWN0aW9uIGFjdGlvbiwgb2JqZWN0IGNoYW5nZWRJdGVtLCBpbnQgaW5kZXgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoYWN0aW9uICE9IE5vdGlmeUNvbGxlY3Rpb25DaGFuZ2VkQWN0aW9uLkFkZCAmJiBhY3Rpb24gIT0gTm90aWZ5Q29sbGVjdGlvbkNoYW5nZWRBY3Rpb24uUmVtb3ZlICYmIGFjdGlvbiAhPSBOb3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEFjdGlvbi5SZXNldClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uKFwiTXVzdEJlUmVzZXRBZGRPclJlbW92ZUFjdGlvbkZvckN0b3JcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGFjdGlvbiAhPSBOb3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEFjdGlvbi5SZXNldClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5Jbml0aWFsaXplQWRkT3JSZW1vdmUoYWN0aW9uLCAoSUxpc3QpKG5ldyBvYmplY3RbXSB7IGNoYW5nZWRJdGVtIH0pLCBpbmRleCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNoYW5nZWRJdGVtICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudEV4Y2VwdGlvbihcIlJlc2V0QWN0aW9uUmVxdWlyZXNOdWxsSXRlbVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaW5kZXggIT0gLTEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudEV4Y2VwdGlvbihcIlJlc2V0QWN0aW9uUmVxdWlyZXNJbmRleE1pbnVzMVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLkluaXRpYWxpemVBZGQoYWN0aW9uLCBudWxsLCAtMSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+SW5pdGlhbGl6ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIDxzZWUgY3JlZj1cIlQ6U3lzdGVtLkNvbGxlY3Rpb25zLlNwZWNpYWxpemVkLk5vdGlmeUNvbGxlY3Rpb25DaGFuZ2VkRXZlbnRBcmdzXCIgLz4gY2xhc3MgdGhhdCBkZXNjcmliZXMgYSBtdWx0aS1pdGVtIGNoYW5nZS48L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwiYWN0aW9uXCI+VGhlIGFjdGlvbiB0aGF0IGNhdXNlZCB0aGUgZXZlbnQuIFRoaXMgY2FuIGJlIHNldCB0byA8c2VlIGNyZWY9XCJGOlN5c3RlbS5Db2xsZWN0aW9ucy5TcGVjaWFsaXplZC5Ob3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEFjdGlvbi5SZXNldFwiIC8+LCA8c2VlIGNyZWY9XCJGOlN5c3RlbS5Db2xsZWN0aW9ucy5TcGVjaWFsaXplZC5Ob3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEFjdGlvbi5BZGRcIiAvPiwgb3IgPHNlZSBjcmVmPVwiRjpTeXN0ZW0uQ29sbGVjdGlvbnMuU3BlY2lhbGl6ZWQuTm90aWZ5Q29sbGVjdGlvbkNoYW5nZWRBY3Rpb24uUmVtb3ZlXCIgLz4uPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJjaGFuZ2VkSXRlbXNcIj5UaGUgaXRlbXMgdGhhdCBhcmUgYWZmZWN0ZWQgYnkgdGhlIGNoYW5nZS48L3BhcmFtPlxyXG4gICAgICAgIC8vIFtfX0R5bmFtaWNhbGx5SW52b2thYmxlXVxyXG4gICAgICAgIHB1YmxpYyBOb3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEV2ZW50QXJncyhOb3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEFjdGlvbiBhY3Rpb24sIElMaXN0IGNoYW5nZWRJdGVtcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChhY3Rpb24gIT0gTm90aWZ5Q29sbGVjdGlvbkNoYW5nZWRBY3Rpb24uQWRkICYmIGFjdGlvbiAhPSBOb3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEFjdGlvbi5SZW1vdmUgJiYgYWN0aW9uICE9IE5vdGlmeUNvbGxlY3Rpb25DaGFuZ2VkQWN0aW9uLlJlc2V0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnRFeGNlcHRpb24oXCJNdXN0QmVSZXNldEFkZE9yUmVtb3ZlQWN0aW9uRm9yQ3RvclwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoYWN0aW9uICE9IE5vdGlmeUNvbGxlY3Rpb25DaGFuZ2VkQWN0aW9uLlJlc2V0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2hhbmdlZEl0ZW1zID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEV4Y2VwdGlvbihcImNoYW5nZWRJdGVtc1wiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuSW5pdGlhbGl6ZUFkZE9yUmVtb3ZlKGFjdGlvbiwgY2hhbmdlZEl0ZW1zLCAtMSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNoYW5nZWRJdGVtcyAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnRFeGNlcHRpb24oXCJSZXNldEFjdGlvblJlcXVpcmVzTnVsbEl0ZW1cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5Jbml0aWFsaXplQWRkKGFjdGlvbiwgbnVsbCwgLTEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PkluaXRpYWxpemVzIGEgbmV3IGluc3RhbmNlIG9mIHRoZSA8c2VlIGNyZWY9XCJUOlN5c3RlbS5Db2xsZWN0aW9ucy5TcGVjaWFsaXplZC5Ob3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEV2ZW50QXJnc1wiIC8+IGNsYXNzIHRoYXQgZGVzY3JpYmVzIGEgbXVsdGktaXRlbSBjaGFuZ2Ugb3IgYSA8c2VlIGNyZWY9XCJGOlN5c3RlbS5Db2xsZWN0aW9ucy5TcGVjaWFsaXplZC5Ob3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEFjdGlvbi5SZXNldFwiIC8+IGNoYW5nZS48L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwiYWN0aW9uXCI+VGhlIGFjdGlvbiB0aGF0IGNhdXNlZCB0aGUgZXZlbnQuIFRoaXMgY2FuIGJlIHNldCB0byA8c2VlIGNyZWY9XCJGOlN5c3RlbS5Db2xsZWN0aW9ucy5TcGVjaWFsaXplZC5Ob3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEFjdGlvbi5SZXNldFwiIC8+LCA8c2VlIGNyZWY9XCJGOlN5c3RlbS5Db2xsZWN0aW9ucy5TcGVjaWFsaXplZC5Ob3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEFjdGlvbi5BZGRcIiAvPiwgb3IgPHNlZSBjcmVmPVwiRjpTeXN0ZW0uQ29sbGVjdGlvbnMuU3BlY2lhbGl6ZWQuTm90aWZ5Q29sbGVjdGlvbkNoYW5nZWRBY3Rpb24uUmVtb3ZlXCIgLz4uPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJjaGFuZ2VkSXRlbXNcIj5UaGUgaXRlbXMgYWZmZWN0ZWQgYnkgdGhlIGNoYW5nZS48L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInN0YXJ0aW5nSW5kZXhcIj5UaGUgaW5kZXggd2hlcmUgdGhlIGNoYW5nZSBvY2N1cnJlZC48L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8ZXhjZXB0aW9uIGNyZWY9XCJUOlN5c3RlbS5Bcmd1bWVudEV4Y2VwdGlvblwiPklmIDxwYXJhbXJlZiBuYW1lPVwiYWN0aW9uXCIgLz4gaXMgbm90IFJlc2V0LCBBZGQsIG9yIFJlbW92ZSwgaWYgPHBhcmFtcmVmIG5hbWU9XCJhY3Rpb25cIiAvPiBpcyBSZXNldCBhbmQgZWl0aGVyIDxwYXJhbXJlZiBuYW1lPVwiY2hhbmdlZEl0ZW1zXCIgLz4gaXMgbm90IG51bGwgb3IgPHBhcmFtcmVmIG5hbWU9XCJzdGFydGluZ0luZGV4XCIgLz4gaXMgbm90IC0xLCBvciBpZiBhY3Rpb24gaXMgQWRkIG9yIFJlbW92ZSBhbmQgPHBhcmFtcmVmIG5hbWU9XCJzdGFydGluZ0luZGV4XCIgLz4gaXMgbGVzcyB0aGFuIC0xLjwvZXhjZXB0aW9uPlxyXG4gICAgICAgIC8vLyA8ZXhjZXB0aW9uIGNyZWY9XCJUOlN5c3RlbS5Bcmd1bWVudE51bGxFeGNlcHRpb25cIj5JZiA8cGFyYW1yZWYgbmFtZT1cImFjdGlvblwiIC8+IGlzIEFkZCBvciBSZW1vdmUgYW5kIDxwYXJhbXJlZiBuYW1lPVwiY2hhbmdlZEl0ZW1zXCIgLz4gaXMgbnVsbC48L2V4Y2VwdGlvbj5cclxuICAgICAgICAvLyBbX19EeW5hbWljYWxseUludm9rYWJsZV1cclxuICAgICAgICBwdWJsaWMgTm90aWZ5Q29sbGVjdGlvbkNoYW5nZWRFdmVudEFyZ3MoTm90aWZ5Q29sbGVjdGlvbkNoYW5nZWRBY3Rpb24gYWN0aW9uLCBJTGlzdCBjaGFuZ2VkSXRlbXMsIGludCBzdGFydGluZ0luZGV4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGFjdGlvbiAhPSBOb3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEFjdGlvbi5BZGQgJiYgYWN0aW9uICE9IE5vdGlmeUNvbGxlY3Rpb25DaGFuZ2VkQWN0aW9uLlJlbW92ZSAmJiBhY3Rpb24gIT0gTm90aWZ5Q29sbGVjdGlvbkNoYW5nZWRBY3Rpb24uUmVzZXQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudEV4Y2VwdGlvbihcIk11c3RCZVJlc2V0QWRkT3JSZW1vdmVBY3Rpb25Gb3JDdG9yXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChhY3Rpb24gIT0gTm90aWZ5Q29sbGVjdGlvbkNoYW5nZWRBY3Rpb24uUmVzZXQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChjaGFuZ2VkSXRlbXMgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnROdWxsRXhjZXB0aW9uKFwiY2hhbmdlZEl0ZW1zXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHN0YXJ0aW5nSW5kZXggPCAtMSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnRFeGNlcHRpb24oXCJJbmRleENhbm5vdEJlTmVnYXRpdmU6c3RhcnRpbmdJbmRleFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuSW5pdGlhbGl6ZUFkZE9yUmVtb3ZlKGFjdGlvbiwgY2hhbmdlZEl0ZW1zLCBzdGFydGluZ0luZGV4KTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY2hhbmdlZEl0ZW1zICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudEV4Y2VwdGlvbihcIlJlc2V0QWN0aW9uUmVxdWlyZXNOdWxsSXRlbVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoc3RhcnRpbmdJbmRleCAhPSAtMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uKFwiUmVzZXRBY3Rpb25SZXF1aXJlc0luZGV4TWludXMxXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuSW5pdGlhbGl6ZUFkZChhY3Rpb24sIG51bGwsIC0xKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5Jbml0aWFsaXplcyBhIG5ldyBpbnN0YW5jZSBvZiB0aGUgPHNlZSBjcmVmPVwiVDpTeXN0ZW0uQ29sbGVjdGlvbnMuU3BlY2lhbGl6ZWQuTm90aWZ5Q29sbGVjdGlvbkNoYW5nZWRFdmVudEFyZ3NcIiAvPiBjbGFzcyB0aGF0IGRlc2NyaWJlcyBhIG9uZS1pdGVtIDxzZWUgY3JlZj1cIkY6U3lzdGVtLkNvbGxlY3Rpb25zLlNwZWNpYWxpemVkLk5vdGlmeUNvbGxlY3Rpb25DaGFuZ2VkQWN0aW9uLlJlcGxhY2VcIiAvPiBjaGFuZ2UuPC9zdW1tYXJ5PlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cImFjdGlvblwiPlRoZSBhY3Rpb24gdGhhdCBjYXVzZWQgdGhlIGV2ZW50LiBUaGlzIGNhbiBvbmx5IGJlIHNldCB0byA8c2VlIGNyZWY9XCJGOlN5c3RlbS5Db2xsZWN0aW9ucy5TcGVjaWFsaXplZC5Ob3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEFjdGlvbi5SZXBsYWNlXCIgLz4uPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJuZXdJdGVtXCI+VGhlIG5ldyBpdGVtIHRoYXQgaXMgcmVwbGFjaW5nIHRoZSBvcmlnaW5hbCBpdGVtLjwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwib2xkSXRlbVwiPlRoZSBvcmlnaW5hbCBpdGVtIHRoYXQgaXMgcmVwbGFjZWQuPC9wYXJhbT5cclxuICAgICAgICAvLy8gPGV4Y2VwdGlvbiBjcmVmPVwiVDpTeXN0ZW0uQXJndW1lbnRFeGNlcHRpb25cIj5JZiA8cGFyYW1yZWYgbmFtZT1cImFjdGlvblwiIC8+IGlzIG5vdCBSZXBsYWNlLjwvZXhjZXB0aW9uPlxyXG4gICAgICAgIC8vIFtfX0R5bmFtaWNhbGx5SW52b2thYmxlXVxyXG4gICAgICAgIHB1YmxpYyBOb3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEV2ZW50QXJncyhOb3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEFjdGlvbiBhY3Rpb24sIG9iamVjdCBuZXdJdGVtLCBvYmplY3Qgb2xkSXRlbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChhY3Rpb24gIT0gTm90aWZ5Q29sbGVjdGlvbkNoYW5nZWRBY3Rpb24uUmVwbGFjZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uKFwiV3JvbmdBY3Rpb25Gb3JDdG9yXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9iamVjdFtdIG9iakFycmF5ID0gbmV3IG9iamVjdFtdIHsgbmV3SXRlbSB9O1xyXG4gICAgICAgICAgICBvYmplY3RbXSBvYmpBcnJheTEgPSBuZXcgb2JqZWN0W10geyBvbGRJdGVtIH07XHJcbiAgICAgICAgICAgIHRoaXMuSW5pdGlhbGl6ZU1vdmVPclJlcGxhY2UoYWN0aW9uLCAoSUxpc3Qpb2JqQXJyYXksIChJTGlzdClvYmpBcnJheTEsIC0xLCAtMSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+SW5pdGlhbGl6ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIDxzZWUgY3JlZj1cIlQ6U3lzdGVtLkNvbGxlY3Rpb25zLlNwZWNpYWxpemVkLk5vdGlmeUNvbGxlY3Rpb25DaGFuZ2VkRXZlbnRBcmdzXCIgLz4gY2xhc3MgdGhhdCBkZXNjcmliZXMgYSBvbmUtaXRlbSA8c2VlIGNyZWY9XCJGOlN5c3RlbS5Db2xsZWN0aW9ucy5TcGVjaWFsaXplZC5Ob3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEFjdGlvbi5SZXBsYWNlXCIgLz4gY2hhbmdlLjwvc3VtbWFyeT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJhY3Rpb25cIj5UaGUgYWN0aW9uIHRoYXQgY2F1c2VkIHRoZSBldmVudC4gVGhpcyBjYW4gYmUgc2V0IHRvIDxzZWUgY3JlZj1cIkY6U3lzdGVtLkNvbGxlY3Rpb25zLlNwZWNpYWxpemVkLk5vdGlmeUNvbGxlY3Rpb25DaGFuZ2VkQWN0aW9uLlJlcGxhY2VcIiAvPi48L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cIm5ld0l0ZW1cIj5UaGUgbmV3IGl0ZW0gdGhhdCBpcyByZXBsYWNpbmcgdGhlIG9yaWdpbmFsIGl0ZW0uPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJvbGRJdGVtXCI+VGhlIG9yaWdpbmFsIGl0ZW0gdGhhdCBpcyByZXBsYWNlZC48L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cImluZGV4XCI+VGhlIGluZGV4IG9mIHRoZSBpdGVtIGJlaW5nIHJlcGxhY2VkLjwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxleGNlcHRpb24gY3JlZj1cIlQ6U3lzdGVtLkFyZ3VtZW50RXhjZXB0aW9uXCI+SWYgPHBhcmFtcmVmIG5hbWU9XCJhY3Rpb25cIiAvPiBpcyBub3QgUmVwbGFjZS48L2V4Y2VwdGlvbj5cclxuICAgICAgICAvLyBbX19EeW5hbWljYWxseUludm9rYWJsZV1cclxuICAgICAgICBwdWJsaWMgTm90aWZ5Q29sbGVjdGlvbkNoYW5nZWRFdmVudEFyZ3MoTm90aWZ5Q29sbGVjdGlvbkNoYW5nZWRBY3Rpb24gYWN0aW9uLCBvYmplY3QgbmV3SXRlbSwgb2JqZWN0IG9sZEl0ZW0sIGludCBpbmRleClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChhY3Rpb24gIT0gTm90aWZ5Q29sbGVjdGlvbkNoYW5nZWRBY3Rpb24uUmVwbGFjZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uKFwiV3JvbmdBY3Rpb25Gb3JDdG9yXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGludCDEsW50MzIgPSBpbmRleDtcclxuICAgICAgICAgICAgb2JqZWN0W10gb2JqQXJyYXkgPSBuZXcgb2JqZWN0W10geyBuZXdJdGVtIH07XHJcbiAgICAgICAgICAgIG9iamVjdFtdIG9iakFycmF5MSA9IG5ldyBvYmplY3RbXSB7IG9sZEl0ZW0gfTtcclxuICAgICAgICAgICAgdGhpcy5Jbml0aWFsaXplTW92ZU9yUmVwbGFjZShhY3Rpb24sIChJTGlzdClvYmpBcnJheSwgKElMaXN0KW9iakFycmF5MSwgaW5kZXgsIMSxbnQzMik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+SW5pdGlhbGl6ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIDxzZWUgY3JlZj1cIlQ6U3lzdGVtLkNvbGxlY3Rpb25zLlNwZWNpYWxpemVkLk5vdGlmeUNvbGxlY3Rpb25DaGFuZ2VkRXZlbnRBcmdzXCIgLz4gY2xhc3MgdGhhdCBkZXNjcmliZXMgYSBtdWx0aS1pdGVtIDxzZWUgY3JlZj1cIkY6U3lzdGVtLkNvbGxlY3Rpb25zLlNwZWNpYWxpemVkLk5vdGlmeUNvbGxlY3Rpb25DaGFuZ2VkQWN0aW9uLlJlcGxhY2VcIiAvPiBjaGFuZ2UuPC9zdW1tYXJ5PlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cImFjdGlvblwiPlRoZSBhY3Rpb24gdGhhdCBjYXVzZWQgdGhlIGV2ZW50LiBUaGlzIGNhbiBvbmx5IGJlIHNldCB0byA8c2VlIGNyZWY9XCJGOlN5c3RlbS5Db2xsZWN0aW9ucy5TcGVjaWFsaXplZC5Ob3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEFjdGlvbi5SZXBsYWNlXCIgLz4uPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJuZXdJdGVtc1wiPlRoZSBuZXcgaXRlbXMgdGhhdCBhcmUgcmVwbGFjaW5nIHRoZSBvcmlnaW5hbCBpdGVtcy48L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cIm9sZEl0ZW1zXCI+VGhlIG9yaWdpbmFsIGl0ZW1zIHRoYXQgYXJlIHJlcGxhY2VkLjwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxleGNlcHRpb24gY3JlZj1cIlQ6U3lzdGVtLkFyZ3VtZW50RXhjZXB0aW9uXCI+SWYgPHBhcmFtcmVmIG5hbWU9XCJhY3Rpb25cIiAvPiBpcyBub3QgUmVwbGFjZS48L2V4Y2VwdGlvbj5cclxuICAgICAgICAvLy8gPGV4Y2VwdGlvbiBjcmVmPVwiVDpTeXN0ZW0uQXJndW1lbnROdWxsRXhjZXB0aW9uXCI+SWYgPHBhcmFtcmVmIG5hbWU9XCJvbGRJdGVtc1wiIC8+IG9yIDxwYXJhbXJlZiBuYW1lPVwibmV3SXRlbXNcIiAvPiBpcyBudWxsLjwvZXhjZXB0aW9uPlxyXG4gICAgICAgIC8vIFtfX0R5bmFtaWNhbGx5SW52b2thYmxlXVxyXG4gICAgICAgIHB1YmxpYyBOb3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEV2ZW50QXJncyhOb3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEFjdGlvbiBhY3Rpb24sIElMaXN0IG5ld0l0ZW1zLCBJTGlzdCBvbGRJdGVtcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChhY3Rpb24gIT0gTm90aWZ5Q29sbGVjdGlvbkNoYW5nZWRBY3Rpb24uUmVwbGFjZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uKFwiV3JvbmdBY3Rpb25Gb3JDdG9yXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChuZXdJdGVtcyA9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnROdWxsRXhjZXB0aW9uKFwibmV3SXRlbXNcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG9sZEl0ZW1zID09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudE51bGxFeGNlcHRpb24oXCJvbGRJdGVtc1wiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLkluaXRpYWxpemVNb3ZlT3JSZXBsYWNlKGFjdGlvbiwgbmV3SXRlbXMsIG9sZEl0ZW1zLCAtMSwgLTEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PkluaXRpYWxpemVzIGEgbmV3IGluc3RhbmNlIG9mIHRoZSA8c2VlIGNyZWY9XCJUOlN5c3RlbS5Db2xsZWN0aW9ucy5TcGVjaWFsaXplZC5Ob3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEV2ZW50QXJnc1wiIC8+IGNsYXNzIHRoYXQgZGVzY3JpYmVzIGEgbXVsdGktaXRlbSA8c2VlIGNyZWY9XCJGOlN5c3RlbS5Db2xsZWN0aW9ucy5TcGVjaWFsaXplZC5Ob3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEFjdGlvbi5SZXBsYWNlXCIgLz4gY2hhbmdlLjwvc3VtbWFyeT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJhY3Rpb25cIj5UaGUgYWN0aW9uIHRoYXQgY2F1c2VkIHRoZSBldmVudC4gVGhpcyBjYW4gb25seSBiZSBzZXQgdG8gPHNlZSBjcmVmPVwiRjpTeXN0ZW0uQ29sbGVjdGlvbnMuU3BlY2lhbGl6ZWQuTm90aWZ5Q29sbGVjdGlvbkNoYW5nZWRBY3Rpb24uUmVwbGFjZVwiIC8+LjwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwibmV3SXRlbXNcIj5UaGUgbmV3IGl0ZW1zIHRoYXQgYXJlIHJlcGxhY2luZyB0aGUgb3JpZ2luYWwgaXRlbXMuPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJvbGRJdGVtc1wiPlRoZSBvcmlnaW5hbCBpdGVtcyB0aGF0IGFyZSByZXBsYWNlZC48L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInN0YXJ0aW5nSW5kZXhcIj5UaGUgaW5kZXggb2YgdGhlIGZpcnN0IGl0ZW0gb2YgdGhlIGl0ZW1zIHRoYXQgYXJlIGJlaW5nIHJlcGxhY2VkLjwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxleGNlcHRpb24gY3JlZj1cIlQ6U3lzdGVtLkFyZ3VtZW50RXhjZXB0aW9uXCI+SWYgPHBhcmFtcmVmIG5hbWU9XCJhY3Rpb25cIiAvPiBpcyBub3QgUmVwbGFjZS48L2V4Y2VwdGlvbj5cclxuICAgICAgICAvLy8gPGV4Y2VwdGlvbiBjcmVmPVwiVDpTeXN0ZW0uQXJndW1lbnROdWxsRXhjZXB0aW9uXCI+SWYgPHBhcmFtcmVmIG5hbWU9XCJvbGRJdGVtc1wiIC8+IG9yIDxwYXJhbXJlZiBuYW1lPVwibmV3SXRlbXNcIiAvPiBpcyBudWxsLjwvZXhjZXB0aW9uPlxyXG4gICAgICAgIC8vIFtfX0R5bmFtaWNhbGx5SW52b2thYmxlXVxyXG4gICAgICAgIHB1YmxpYyBOb3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEV2ZW50QXJncyhOb3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEFjdGlvbiBhY3Rpb24sIElMaXN0IG5ld0l0ZW1zLCBJTGlzdCBvbGRJdGVtcywgaW50IHN0YXJ0aW5nSW5kZXgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoYWN0aW9uICE9IE5vdGlmeUNvbGxlY3Rpb25DaGFuZ2VkQWN0aW9uLlJlcGxhY2UpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudEV4Y2VwdGlvbihcIldyb25nQWN0aW9uRm9yQ3RvclwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobmV3SXRlbXMgPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEV4Y2VwdGlvbihcIm5ld0l0ZW1zXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChvbGRJdGVtcyA9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnROdWxsRXhjZXB0aW9uKFwib2xkSXRlbXNcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5Jbml0aWFsaXplTW92ZU9yUmVwbGFjZShhY3Rpb24sIG5ld0l0ZW1zLCBvbGRJdGVtcywgc3RhcnRpbmdJbmRleCwgc3RhcnRpbmdJbmRleCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+SW5pdGlhbGl6ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIDxzZWUgY3JlZj1cIlQ6U3lzdGVtLkNvbGxlY3Rpb25zLlNwZWNpYWxpemVkLk5vdGlmeUNvbGxlY3Rpb25DaGFuZ2VkRXZlbnRBcmdzXCIgLz4gY2xhc3MgdGhhdCBkZXNjcmliZXMgYSBvbmUtaXRlbSA8c2VlIGNyZWY9XCJGOlN5c3RlbS5Db2xsZWN0aW9ucy5TcGVjaWFsaXplZC5Ob3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEFjdGlvbi5Nb3ZlXCIgLz4gY2hhbmdlLjwvc3VtbWFyeT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJhY3Rpb25cIj5UaGUgYWN0aW9uIHRoYXQgY2F1c2VkIHRoZSBldmVudC4gVGhpcyBjYW4gb25seSBiZSBzZXQgdG8gPHNlZSBjcmVmPVwiRjpTeXN0ZW0uQ29sbGVjdGlvbnMuU3BlY2lhbGl6ZWQuTm90aWZ5Q29sbGVjdGlvbkNoYW5nZWRBY3Rpb24uTW92ZVwiIC8+LjwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwiY2hhbmdlZEl0ZW1cIj5UaGUgaXRlbSBhZmZlY3RlZCBieSB0aGUgY2hhbmdlLjwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwiaW5kZXhcIj5UaGUgbmV3IGluZGV4IGZvciB0aGUgY2hhbmdlZCBpdGVtLjwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwib2xkSW5kZXhcIj5UaGUgb2xkIGluZGV4IGZvciB0aGUgY2hhbmdlZCBpdGVtLjwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxleGNlcHRpb24gY3JlZj1cIlQ6U3lzdGVtLkFyZ3VtZW50RXhjZXB0aW9uXCI+SWYgPHBhcmFtcmVmIG5hbWU9XCJhY3Rpb25cIiAvPiBpcyBub3QgTW92ZSBvciA8cGFyYW1yZWYgbmFtZT1cImluZGV4XCIgLz4gaXMgbGVzcyB0aGFuIDAuPC9leGNlcHRpb24+XHJcbiAgICAgICAgLy8gW19fRHluYW1pY2FsbHlJbnZva2FibGVdXHJcbiAgICAgICAgcHVibGljIE5vdGlmeUNvbGxlY3Rpb25DaGFuZ2VkRXZlbnRBcmdzKE5vdGlmeUNvbGxlY3Rpb25DaGFuZ2VkQWN0aW9uIGFjdGlvbiwgb2JqZWN0IGNoYW5nZWRJdGVtLCBpbnQgaW5kZXgsIGludCBvbGRJbmRleClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChhY3Rpb24gIT0gTm90aWZ5Q29sbGVjdGlvbkNoYW5nZWRBY3Rpb24uTW92ZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uKFNSLkdldFN0cmluZyhcIldyb25nQWN0aW9uRm9yQ3RvclwiLCBuZXcgb2JqZWN0W10geyBOb3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEFjdGlvbi5Nb3ZlIH0pLCBcImFjdGlvblwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaW5kZXggPCAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnRFeGNlcHRpb24oU1IuR2V0U3RyaW5nKFwiSW5kZXhDYW5ub3RCZU5lZ2F0aXZlXCIpLCBcImluZGV4XCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9iamVjdFtdIG9iakFycmF5ID0gbmV3IG9iamVjdFtdIHsgY2hhbmdlZEl0ZW0gfTtcclxuICAgICAgICAgICAgdGhpcy5Jbml0aWFsaXplTW92ZU9yUmVwbGFjZShhY3Rpb24sIG9iakFycmF5LCBvYmpBcnJheSwgaW5kZXgsIG9sZEluZGV4KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5Jbml0aWFsaXplcyBhIG5ldyBpbnN0YW5jZSBvZiB0aGUgPHNlZSBjcmVmPVwiVDpTeXN0ZW0uQ29sbGVjdGlvbnMuU3BlY2lhbGl6ZWQuTm90aWZ5Q29sbGVjdGlvbkNoYW5nZWRFdmVudEFyZ3NcIiAvPiBjbGFzcyB0aGF0IGRlc2NyaWJlcyBhIG11bHRpLWl0ZW0gPHNlZSBjcmVmPVwiRjpTeXN0ZW0uQ29sbGVjdGlvbnMuU3BlY2lhbGl6ZWQuTm90aWZ5Q29sbGVjdGlvbkNoYW5nZWRBY3Rpb24uTW92ZVwiIC8+IGNoYW5nZS48L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwiYWN0aW9uXCI+VGhlIGFjdGlvbiB0aGF0IGNhdXNlZCB0aGUgZXZlbnQuIFRoaXMgY2FuIG9ubHkgYmUgc2V0IHRvIDxzZWUgY3JlZj1cIkY6U3lzdGVtLkNvbGxlY3Rpb25zLlNwZWNpYWxpemVkLk5vdGlmeUNvbGxlY3Rpb25DaGFuZ2VkQWN0aW9uLk1vdmVcIiAvPi48L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cImNoYW5nZWRJdGVtc1wiPlRoZSBpdGVtcyBhZmZlY3RlZCBieSB0aGUgY2hhbmdlLjwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwiaW5kZXhcIj5UaGUgbmV3IGluZGV4IGZvciB0aGUgY2hhbmdlZCBpdGVtcy48L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cIm9sZEluZGV4XCI+VGhlIG9sZCBpbmRleCBmb3IgdGhlIGNoYW5nZWQgaXRlbXMuPC9wYXJhbT5cclxuICAgICAgICAvLy8gPGV4Y2VwdGlvbiBjcmVmPVwiVDpTeXN0ZW0uQXJndW1lbnRFeGNlcHRpb25cIj5JZiA8cGFyYW1yZWYgbmFtZT1cImFjdGlvblwiIC8+IGlzIG5vdCBNb3ZlIG9yIDxwYXJhbXJlZiBuYW1lPVwiaW5kZXhcIiAvPiBpcyBsZXNzIHRoYW4gMC48L2V4Y2VwdGlvbj5cclxuICAgICAgICAvLyBbX19EeW5hbWljYWxseUludm9rYWJsZV1cclxuICAgICAgICBwdWJsaWMgTm90aWZ5Q29sbGVjdGlvbkNoYW5nZWRFdmVudEFyZ3MoTm90aWZ5Q29sbGVjdGlvbkNoYW5nZWRBY3Rpb24gYWN0aW9uLCBJTGlzdCBjaGFuZ2VkSXRlbXMsIGludCBpbmRleCwgaW50IG9sZEluZGV4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGFjdGlvbiAhPSBOb3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEFjdGlvbi5Nb3ZlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnRFeGNlcHRpb24oU1IuR2V0U3RyaW5nKFwiV3JvbmdBY3Rpb25Gb3JDdG9yXCIsIG5ldyBvYmplY3RbXSB7IE5vdGlmeUNvbGxlY3Rpb25DaGFuZ2VkQWN0aW9uLk1vdmUgfSksIFwiYWN0aW9uXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChpbmRleCA8IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudEV4Y2VwdGlvbihTUi5HZXRTdHJpbmcoXCJJbmRleENhbm5vdEJlTmVnYXRpdmVcIiksIFwiaW5kZXhcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5Jbml0aWFsaXplTW92ZU9yUmVwbGFjZShhY3Rpb24sIGNoYW5nZWRJdGVtcywgY2hhbmdlZEl0ZW1zLCBpbmRleCwgb2xkSW5kZXgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgTm90aWZ5Q29sbGVjdGlvbkNoYW5nZWRFdmVudEFyZ3MoTm90aWZ5Q29sbGVjdGlvbkNoYW5nZWRBY3Rpb24gYWN0aW9uLCBJTGlzdCBuZXdJdGVtcywgSUxpc3Qgb2xkSXRlbXMsIGludCBuZXdJbmRleCwgaW50IG9sZEluZGV4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgSUxpc3QgbGlzdHM7XHJcbiAgICAgICAgICAgIElMaXN0IGxpc3RzMTtcclxuICAgICAgICAgICAgdGhpcy5fYWN0aW9uID0gYWN0aW9uO1xyXG4gICAgICAgICAgICBpZiAobmV3SXRlbXMgPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbGlzdHMgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbGlzdHMgPSBBcnJheUxpc3RfUmVhZE9ubHkobmV3SXRlbXMpO1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9uZXdJdGVtcyA9IGxpc3RzO1xyXG4gICAgICAgICAgICBpZiAob2xkSXRlbXMgPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbGlzdHMxID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxpc3RzMSA9IEFycmF5TGlzdF9SZWFkT25seShvbGRJdGVtcyk7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX29sZEl0ZW1zID0gbGlzdHMxO1xyXG4gICAgICAgICAgICB0aGlzLl9uZXdTdGFydGluZ0luZGV4ID0gbmV3SW5kZXg7XHJcbiAgICAgICAgICAgIHRoaXMuX29sZFN0YXJ0aW5nSW5kZXggPSBvbGRJbmRleDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgdm9pZCBJbml0aWFsaXplQWRkKE5vdGlmeUNvbGxlY3Rpb25DaGFuZ2VkQWN0aW9uIGFjdGlvbiwgSUxpc3QgbmV3SXRlbXMsIGludCBuZXdTdGFydGluZ0luZGV4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgSUxpc3QgbGlzdHM7XHJcbiAgICAgICAgICAgIHRoaXMuX2FjdGlvbiA9IGFjdGlvbjtcclxuICAgICAgICAgICAgaWYgKG5ld0l0ZW1zID09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxpc3RzID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxpc3RzID0gQXJyYXlMaXN0X1JlYWRPbmx5KG5ld0l0ZW1zKTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5fbmV3SXRlbXMgPSBsaXN0cztcclxuICAgICAgICAgICAgdGhpcy5fbmV3U3RhcnRpbmdJbmRleCA9IG5ld1N0YXJ0aW5nSW5kZXg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHZvaWQgSW5pdGlhbGl6ZUFkZE9yUmVtb3ZlKE5vdGlmeUNvbGxlY3Rpb25DaGFuZ2VkQWN0aW9uIGFjdGlvbiwgSUxpc3QgY2hhbmdlZEl0ZW1zLCBpbnQgc3RhcnRpbmdJbmRleClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChhY3Rpb24gPT0gTm90aWZ5Q29sbGVjdGlvbkNoYW5nZWRBY3Rpb24uQWRkKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkluaXRpYWxpemVBZGQoYWN0aW9uLCBjaGFuZ2VkSXRlbXMsIHN0YXJ0aW5nSW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChhY3Rpb24gPT0gTm90aWZ5Q29sbGVjdGlvbkNoYW5nZWRBY3Rpb24uUmVtb3ZlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkluaXRpYWxpemVSZW1vdmUoYWN0aW9uLCBjaGFuZ2VkSXRlbXMsIHN0YXJ0aW5nSW5kZXgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHZvaWQgSW5pdGlhbGl6ZU1vdmVPclJlcGxhY2UoTm90aWZ5Q29sbGVjdGlvbkNoYW5nZWRBY3Rpb24gYWN0aW9uLCBJTGlzdCBuZXdJdGVtcywgSUxpc3Qgb2xkSXRlbXMsIGludCBzdGFydGluZ0luZGV4LCBpbnQgb2xkU3RhcnRpbmdJbmRleClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuSW5pdGlhbGl6ZUFkZChhY3Rpb24sIG5ld0l0ZW1zLCBzdGFydGluZ0luZGV4KTtcclxuICAgICAgICAgICAgdGhpcy5Jbml0aWFsaXplUmVtb3ZlKGFjdGlvbiwgb2xkSXRlbXMsIG9sZFN0YXJ0aW5nSW5kZXgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSB2b2lkIEluaXRpYWxpemVSZW1vdmUoTm90aWZ5Q29sbGVjdGlvbkNoYW5nZWRBY3Rpb24gYWN0aW9uLCBJTGlzdCBvbGRJdGVtcywgaW50IG9sZFN0YXJ0aW5nSW5kZXgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBJTGlzdCBsaXN0cztcclxuICAgICAgICAgICAgdGhpcy5fYWN0aW9uID0gYWN0aW9uO1xyXG4gICAgICAgICAgICBpZiAob2xkSXRlbXMgPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbGlzdHMgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbGlzdHMgPSBBcnJheUxpc3RfUmVhZE9ubHkob2xkSXRlbXMpO1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9vbGRJdGVtcyA9IGxpc3RzO1xyXG4gICAgICAgICAgICB0aGlzLl9vbGRTdGFydGluZ0luZGV4ID0gb2xkU3RhcnRpbmdJbmRleDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBJTGlzdCBBcnJheUxpc3RfUmVhZE9ubHkoSUxpc3QgbGlzdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIC8vIGZpeG1lOi5uZXQgb3ZlcnJpZGUgPyBcclxuICAgICAgICAgICAgcmV0dXJuIGxpc3Q7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwibmFtZXNwYWNlIFN5c3RlbS5Db21wb25lbnRNb2RlbFxyXG57XHJcbiAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAvLy8gICAgIFRoZSBiYWcgY2hhbmdlZCBldmVudCBhcmd1bWVudHNcclxuICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAvLy8gPHNlZWFsc28gY3JlZj1cIlN5c3RlbS5Db21wb25lbnRNb2RlbC5Qcm9wZXJ0eUNoYW5nZWRFdmVudEFyZ3NcIiAvPlxyXG4gICAgcHVibGljIGNsYXNzIEJhZ0NoYW5nZWRFdmVudEFyZ3MgOiBQcm9wZXJ0eUNoYW5nZWRFdmVudEFyZ3NcclxuICAgIHtcclxuICAgICAgICAjcmVnaW9uIENvbnN0cnVjdG9yc1xyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gICAgIEluaXRpYWxpemVzIGEgbmV3IGluc3RhbmNlIG9mIHRoZSA8c2VlIGNyZWY9XCJCYWdDaGFuZ2VkRXZlbnRBcmdzXCIgLz4gY2xhc3MuXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJwcm9wZXJ0eU5hbWVcIj5OYW1lIG9mIHRoZSBwcm9wZXJ0eS48L3BhcmFtPlxyXG4gICAgICAgIHB1YmxpYyBCYWdDaGFuZ2VkRXZlbnRBcmdzKHN0cmluZyBwcm9wZXJ0eU5hbWUpIDogYmFzZShwcm9wZXJ0eU5hbWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyAgICAgSW5pdGlhbGl6ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIDxzZWUgY3JlZj1cIkJhZ0NoYW5nZWRFdmVudEFyZ3NcIiAvPiBjbGFzcy5cclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInByb3BlcnR5TmFtZVwiPk5hbWUgb2YgdGhlIHByb3BlcnR5LjwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwibmV3VmFsdWVcIj5UaGUgbmV3IHZhbHVlLjwvcGFyYW0+XHJcbiAgICAgICAgcHVibGljIEJhZ0NoYW5nZWRFdmVudEFyZ3Moc3RyaW5nIHByb3BlcnR5TmFtZSwgb2JqZWN0IG5ld1ZhbHVlKSA6IGJhc2UocHJvcGVydHlOYW1lKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTmV3VmFsdWUgPSBuZXdWYWx1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gICAgIEluaXRpYWxpemVzIGEgbmV3IGluc3RhbmNlIG9mIHRoZSA8c2VlIGNyZWY9XCJCYWdDaGFuZ2VkRXZlbnRBcmdzXCIgLz4gY2xhc3MuXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJwcm9wZXJ0eU5hbWVcIj5OYW1lIG9mIHRoZSBwcm9wZXJ0eS48L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cIm5ld1ZhbHVlXCI+VGhlIG5ldyB2YWx1ZS48L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cIm9sZFZhbHVlXCI+VGhlIG9sZCB2YWx1ZS48L3BhcmFtPlxyXG4gICAgICAgIHB1YmxpYyBCYWdDaGFuZ2VkRXZlbnRBcmdzKHN0cmluZyBwcm9wZXJ0eU5hbWUsIG9iamVjdCBuZXdWYWx1ZSwgb2JqZWN0IG9sZFZhbHVlKSA6IGJhc2UocHJvcGVydHlOYW1lKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTmV3VmFsdWUgPSBuZXdWYWx1ZTtcclxuICAgICAgICAgICAgT2xkVmFsdWUgPSBvbGRWYWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIFB1YmxpYyBQcm9wZXJ0aWVzXHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyAgICAgR2V0cyB0aGUgbmV3IHZhbHVlLlxyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgcHVibGljIG5ldyBvYmplY3QgTmV3VmFsdWUgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcblxyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gICAgIEdldHMgdGhlIG9sZCB2YWx1ZS5cclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIHB1YmxpYyBuZXcgb2JqZWN0IE9sZFZhbHVlIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuICAgIH1cclxufSIsIm5hbWVzcGFjZSBTeXN0ZW0uQ29tcG9uZW50TW9kZWxcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBFeHRlbnNpb25zXHJcbiAgICB7XHJcbiAgICAgICAgI3JlZ2lvbiBQdWJsaWMgTWV0aG9kc1xyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gICAgIGludm9rZSBhY3Rpb24gd2hlbiBwcm9wZXJ0eU5hbWUgcmFpc2VkXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgT25Qcm9wZXJ0eUNoYW5nZWQodGhpcyBJTm90aWZ5UHJvcGVydHlDaGFuZ2VkIG5vdGlmeVByb3BlcnR5Q2hhbmdlZCwgc3RyaW5nIHByb3BlcnR5TmFtZSwgQWN0aW9uIGFjdGlvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChub3RpZnlQcm9wZXJ0eUNoYW5nZWQgPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEV4Y2VwdGlvbihcIm5vdGlmeVByb3BlcnR5Q2hhbmdlZFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBub3RpZnlQcm9wZXJ0eUNoYW5nZWQuUHJvcGVydHlDaGFuZ2VkICs9IChzLCBlKSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZS5Qcm9wZXJ0eU5hbWUgPT0gcHJvcGVydHlOYW1lKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcbiAgICB9XHJcbn0iLCJ1c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlJlZmxlY3Rpb247XHJcblxyXG5uYW1lc3BhY2UgU3lzdGVtLkNvbXBvbmVudE1vZGVsXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBSZWZsZWN0aW9uSGVscGVyXHJcbiAgICB7XHJcbiAgICAgICAgI3JlZ2lvbiBQdWJsaWMgUHJvcGVydGllc1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQmluZGluZ0ZsYWdzIEFsbEJpbmRpbmdzIHtnZXR7cmV0dXJuIEJpbmRpbmdGbGFncy5JZ25vcmVDYXNlIHwgQmluZGluZ0ZsYWdzLlB1YmxpYyB8IEJpbmRpbmdGbGFncy5Ob25QdWJsaWMgfCBCaW5kaW5nRmxhZ3MuSW5zdGFuY2UgfCBCaW5kaW5nRmxhZ3MuU3RhdGljO319XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIFB1YmxpYyBNZXRob2RzXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBFdmVudEluZm8gRmluZEV2ZW50KG9iamVjdCBpbnN0YW5jZSwgc3RyaW5nIGV2ZW50TmFtZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChpbnN0YW5jZSA9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnROdWxsRXhjZXB0aW9uKFwiaW5zdGFuY2VcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChldmVudE5hbWUgPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEV4Y2VwdGlvbihcImV2ZW50TmFtZVwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIHR5cGUgPSBpbnN0YW5jZS5HZXRUeXBlKCk7XHJcbiAgICAgICAgICAgIGlmICh0eXBlID09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudE51bGxFeGNlcHRpb24oXCJ0eXBlXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHlwZS5HZXRFdmVudChldmVudE5hbWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBNZXRob2RJbmZvIEZpbmRNZXRob2RJbmZvKG9iamVjdCBpbnN0YW5jZSwgc3RyaW5nIG1ldGhvZE5hbWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoaW5zdGFuY2UgPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEV4Y2VwdGlvbihcImluc3RhbmNlXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAobWV0aG9kTmFtZSA9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnROdWxsRXhjZXB0aW9uKFwibWV0aG9kTmFtZVwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIHR5cGUgPSBpbnN0YW5jZS5HZXRUeXBlKCk7XHJcbiAgICAgICAgICAgIGlmICh0eXBlID09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudE51bGxFeGNlcHRpb24oXCJ0eXBlXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHlwZS5HZXRNZXRob2QobWV0aG9kTmFtZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIE1ldGhvZEluZm8gRmluZE1ldGhvZEluZm8ob2JqZWN0IGluc3RhbmNlLCBzdHJpbmcgbWV0aG9kTmFtZSwgcGFyYW1zIFR5cGVbXSBwYXJhbWV0ZXJUeXBlcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChpbnN0YW5jZSA9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnROdWxsRXhjZXB0aW9uKFwiaW5zdGFuY2VcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChtZXRob2ROYW1lID09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudE51bGxFeGNlcHRpb24oXCJtZXRob2ROYW1lXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgdHlwZSA9IGluc3RhbmNlLkdldFR5cGUoKTtcclxuICAgICAgICAgICAgaWYgKHR5cGUgPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEV4Y2VwdGlvbihcInR5cGVcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0eXBlLkdldE1ldGhvZChtZXRob2ROYW1lLCBBbGxCaW5kaW5ncywgcGFyYW1ldGVyVHlwZXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBQcm9wZXJ0eUluZm8gRmluZFByb3BlcnR5KG9iamVjdCBpbnN0YW5jZSwgc3RyaW5nIHByb3BlcnR5TmFtZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChpbnN0YW5jZSA9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnROdWxsRXhjZXB0aW9uKFwiaW5zdGFuY2VcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChwcm9wZXJ0eU5hbWUgPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEV4Y2VwdGlvbihcInByb3BlcnR5TmFtZVwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIHR5cGUgPSBpbnN0YW5jZS5HZXRUeXBlKCk7XHJcbiAgICAgICAgICAgIGlmICh0eXBlID09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudE51bGxFeGNlcHRpb24oXCJ0eXBlXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHlwZS5HZXRQcm9wZXJ0eShwcm9wZXJ0eU5hbWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBNZXRob2RJbmZvIEdldE1ldGhvZEluZm8ob2JqZWN0IGluc3RhbmNlLCBzdHJpbmcgbWV0aG9kTmFtZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBtZXRob2RJbmZvID0gRmluZE1ldGhvZEluZm8oaW5zdGFuY2UsIG1ldGhvZE5hbWUpO1xyXG4gICAgICAgICAgICBpZiAobWV0aG9kSW5mbyA9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ01lbWJlckV4Y2VwdGlvbihcIk1ldGhvZE5vdEZvdW5kOiBcIiArIGluc3RhbmNlLkdldFR5cGUoKS5GdWxsTmFtZSArIFwiIC0+IFwiICsgbWV0aG9kTmFtZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBtZXRob2RJbmZvO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBvYmplY3QgR2V0UHJvcGVydHlWYWx1ZShvYmplY3QgaW5zdGFuY2UsIHN0cmluZyBwcm9wZXJ0eU5hbWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgcHJvcGVydHlJbmZvID0gRmluZFByb3BlcnR5KGluc3RhbmNlLCBwcm9wZXJ0eU5hbWUpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHByb3BlcnR5SW5mbyA9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYmFnID0gaW5zdGFuY2UgYXMgQmFnO1xyXG4gICAgICAgICAgICAgICAgaWYgKGJhZyAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBiYWcuR2V0VmFsdWUocHJvcGVydHlOYW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ01lbWJlckV4Y2VwdGlvbihpbnN0YW5jZS5HZXRUeXBlKCkuRnVsbE5hbWUgKyBcIi0+XCIgKyBwcm9wZXJ0eU5hbWUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcHJvcGVydHlJbmZvLkdldFZhbHVlKGluc3RhbmNlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgb2JqZWN0IEludm9rZShvYmplY3QgaW5zdGFuY2UsIHN0cmluZyBtZXRob2ROYW1lKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG1ldGhvZEluZm8gPSBGaW5kTWV0aG9kSW5mbyhpbnN0YW5jZSwgbWV0aG9kTmFtZSk7XHJcbiAgICAgICAgICAgIGlmIChtZXRob2RJbmZvID09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nTWVtYmVyRXhjZXB0aW9uKGluc3RhbmNlLkdldFR5cGUoKS5GdWxsTmFtZSArIFwiLT5cIiArIG1ldGhvZE5hbWUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbWV0aG9kSW5mby5JbnZva2UoaW5zdGFuY2UpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBvYmplY3QgSW52b2tlKG9iamVjdCBpbnN0YW5jZSwgc3RyaW5nIG1ldGhvZE5hbWUsIHBhcmFtcyBvYmplY3RbXSBwYXJhbWV0ZXJzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG1ldGhvZEluZm8gPSBGaW5kTWV0aG9kSW5mbyhpbnN0YW5jZSwgbWV0aG9kTmFtZSk7XHJcbiAgICAgICAgICAgIGlmIChtZXRob2RJbmZvID09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nTWVtYmVyRXhjZXB0aW9uKGluc3RhbmNlLkdldFR5cGUoKS5GdWxsTmFtZSArIFwiLT5cIiArIG1ldGhvZE5hbWUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbWV0aG9kSW5mby5JbnZva2UoaW5zdGFuY2UsIHBhcmFtZXRlcnMpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gICAgIEludm9rZXMgdGhlIHB1YmxpYyBub24gc3RhdGljIG1ldGhvZC5cclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgb2JqZWN0IEludm9rZVB1YmxpY05vblN0YXRpY01ldGhvZChvYmplY3QgaW5zdGFuY2UsIHN0cmluZyBtZXRob2ROYW1lKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGluc3RhbmNlID09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudE51bGxFeGNlcHRpb24oXCJpbnN0YW5jZVwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKG1ldGhvZE5hbWUgPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEV4Y2VwdGlvbihcIm1ldGhvZE5hbWVcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBtZXRob2RJbmZvID0gaW5zdGFuY2UuR2V0VHlwZSgpLkdldE1ldGhvZChtZXRob2ROYW1lKTtcclxuICAgICAgICAgICAgaWYgKG1ldGhvZEluZm8gPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdNZW1iZXJFeGNlcHRpb24oaW5zdGFuY2UuR2V0VHlwZSgpLkZ1bGxOYW1lK1wiOlwiKyBtZXRob2ROYW1lKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG1ldGhvZEluZm8uSW52b2tlKGluc3RhbmNlLCBudWxsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBTZXROb25TdGF0aWNGaWVsZChvYmplY3QgaW5zdGFuY2UsIHN0cmluZyBmaWVsZE5hbWUsIG9iamVjdCB2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFzc2VydFBhcmFtZXRlcnMoaW5zdGFuY2UsIGZpZWxkTmFtZSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgdHlwZSA9IGluc3RhbmNlLkdldFR5cGUoKTtcclxuICAgICAgICAgICAgaWYgKHR5cGUgPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEV4Y2VwdGlvbihcInR5cGVcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBmaWVsZEluZm8gPSB0eXBlLkdldEZpZWxkKGZpZWxkTmFtZSwgQWxsQmluZGluZ3MpO1xyXG4gICAgICAgICAgICBpZiAoZmllbGRJbmZvID09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nTWVtYmVyRXhjZXB0aW9uKFwiRmllbGROb3RGb3VuZDogXCIgKyBpbnN0YW5jZS5HZXRUeXBlKCkuRnVsbE5hbWUgKyBcIiAtPiBcIiArIGZpZWxkTmFtZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZpZWxkSW5mby5TZXRWYWx1ZShpbnN0YW5jZSwgdmFsdWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIFNldFByb3BlcnR5VmFsdWUob2JqZWN0IGluc3RhbmNlLCBzdHJpbmcgcHJvcGVydHlOYW1lLCBvYmplY3QgdmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBc3NlcnRQYXJhbWV0ZXJzKGluc3RhbmNlLCBwcm9wZXJ0eU5hbWUpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHR5cGUgPSBpbnN0YW5jZS5HZXRUeXBlKCk7XHJcbiAgICAgICAgICAgIGlmICh0eXBlID09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudE51bGxFeGNlcHRpb24oXCJ0eXBlXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgcHJvcGVydHlJbmZvID0gRmluZFByb3BlcnR5KGluc3RhbmNlLCBwcm9wZXJ0eU5hbWUpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHByb3BlcnR5SW5mbyA9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYmFnID0gaW5zdGFuY2UgYXMgQmFnO1xyXG4gICAgICAgICAgICAgICAgaWYgKGJhZyAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGJhZy5TZXRWYWx1ZShwcm9wZXJ0eU5hbWUsIHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdNZW1iZXJFeGNlcHRpb24odHlwZS5GdWxsTmFtZSArIFwiLT5cIiArIHByb3BlcnR5TmFtZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHByb3BlcnR5SW5mby5TZXRWYWx1ZShpbnN0YW5jZSwgdmFsdWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyAgICAgVHJpZXMgdGhlIGdldCB2YWx1ZS5cclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgb2JqZWN0IFRyeUdldFByb3BlcnR5VmFsdWUob2JqZWN0IGluc3RhbmNlLCBzdHJpbmcgcHJvcGVydHlOYW1lKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHByb3BlcnR5ID0gR2V0Rmlyc3ROYW1lZFByb3BlcnR5KGluc3RhbmNlLCBwcm9wZXJ0eU5hbWUpO1xyXG4gICAgICAgICAgICBpZiAocHJvcGVydHkgPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBwcm9wZXJ0eS5HZXRWYWx1ZShpbnN0YW5jZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBNZXRob2RzXHJcbiAgICAgICAgc3RhdGljIHZvaWQgQXNzZXJ0UGFyYW1ldGVycyhvYmplY3QgaW5zdGFuY2UsIHN0cmluZyBtZW1iZXJOYW1lKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGluc3RhbmNlID09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudE51bGxFeGNlcHRpb24oXCJpbnN0YW5jZVwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKG1lbWJlck5hbWUgPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEV4Y2VwdGlvbihcIm1lbWJlck5hbWVcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gICAgIEdldHMgdGhlIGZpcnN0IG5hbWVkIHByb3BlcnR5LlxyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgc3RhdGljIFByb3BlcnR5SW5mbyBHZXRGaXJzdE5hbWVkUHJvcGVydHkob2JqZWN0IGluc3RhbmNlLCBzdHJpbmcgcHJvcGVydHlOYW1lKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGluc3RhbmNlID09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5GaXJzdE9yRGVmYXVsdDxnbG9iYWw6OlN5c3RlbS5SZWZsZWN0aW9uLlByb3BlcnR5SW5mbz4oaW5zdGFuY2UuR2V0VHlwZSgpLkdldFByb3BlcnRpZXMoKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5SZWZsZWN0aW9uLlByb3BlcnR5SW5mbywgYm9vbD4pKHAgPT4gcC5OYW1lID09IHByb3BlcnR5TmFtZSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcbiAgICB9XHJcbn0iLCJ1c2luZyBTeXN0ZW0uR2xvYmFsaXphdGlvbjtcclxuXHJcbm5hbWVzcGFjZSBTeXN0ZW0uQ29tcG9uZW50TW9kZWxcclxue1xyXG4gICAgW0F0dHJpYnV0ZVVzYWdlKEF0dHJpYnV0ZVRhcmdldHMuQWxsKV1cclxuICAgIHB1YmxpYyBzZWFsZWQgY2xhc3MgVHlwZUNvbnZlcnRlckF0dHJpYnV0ZSA6IEF0dHJpYnV0ZVxyXG4gICAge1xyXG4gICAgICAgIGludGVybmFsIFR5cGUgX3R5cGU7XHJcbiAgICAgICAgI3JlZ2lvbiBTdGF0aWMgRmllbGRzXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyByZWFkb25seSBUeXBlQ29udmVydGVyQXR0cmlidXRlIERlZmF1bHQ7XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIEZpZWxkc1xyXG4gICAgICAgIHJlYWRvbmx5IHN0cmluZyB0eXBlTmFtZTtcclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gQ29uc3RydWN0b3JzXHJcbiAgICAgICAgc3RhdGljIFR5cGVDb252ZXJ0ZXJBdHRyaWJ1dGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgRGVmYXVsdCA9IG5ldyBUeXBlQ29udmVydGVyQXR0cmlidXRlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVHlwZUNvbnZlcnRlckF0dHJpYnV0ZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0eXBlTmFtZSA9IHN0cmluZy5FbXB0eTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBUeXBlQ29udmVydGVyQXR0cmlidXRlKFR5cGUgdHlwZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF90eXBlID0gdHlwZTtcclxuICAgICAgICAgICAgdHlwZU5hbWUgPSB0eXBlLkFzc2VtYmx5UXVhbGlmaWVkTmFtZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBUeXBlQ29udmVydGVyQXR0cmlidXRlKHN0cmluZyB0eXBlTmFtZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHR5cGVOYW1lLlRvVXBwZXIoQ3VsdHVyZUluZm8uSW52YXJpYW50Q3VsdHVyZSk7XHJcbiAgICAgICAgICAgIHRoaXMudHlwZU5hbWUgPSB0eXBlTmFtZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIFB1YmxpYyBQcm9wZXJ0aWVzXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBDb252ZXJ0ZXJUeXBlTmFtZSB7Z2V0e3JldHVybiB0eXBlTmFtZTt9fVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBQdWJsaWMgTWV0aG9kc1xyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBib29sIEVxdWFscyhvYmplY3Qgb2JqKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHR5cGVDb252ZXJ0ZXJBdHRyaWJ1dGUgPSBvYmogYXMgVHlwZUNvbnZlcnRlckF0dHJpYnV0ZTtcclxuICAgICAgICAgICAgaWYgKHR5cGVDb252ZXJ0ZXJBdHRyaWJ1dGUgPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0eXBlQ29udmVydGVyQXR0cmlidXRlLkNvbnZlcnRlclR5cGVOYW1lID09IHR5cGVOYW1lO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGludCBHZXRIYXNoQ29kZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gdHlwZU5hbWUuR2V0SGFzaENvZGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG4gICAgfVxyXG59IiwidXNpbmcgU3lzdGVtLkdsb2JhbGl6YXRpb247XHJcblxyXG5uYW1lc3BhY2UgU3lzdGVtXHJcbntcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEV4dGVuc2lvbnMyXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgVG9VcHBlcih0aGlzIHN0cmluZyB2YWx1ZSwgQ3VsdHVyZUluZm8gY3VsdHVyZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgICAgIC8vIFRPRE86IGVuZyBhbmQgdHVya2lzaFxyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWUuVG9VcHBlcigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHB1YmxpYyBjbGFzcyBNaXNzaW5nTWVtYmVyRXhjZXB0aW9uIDogU3lzdGVtRXhjZXB0aW9uXHJcbiAgICB7XHJcbiAgICAgICAgI3JlZ2lvbiBDb25zdHJ1Y3RvcnNcclxuICAgICAgICBwdWJsaWMgTWlzc2luZ01lbWJlckV4Y2VwdGlvbihzdHJpbmcgbWVzc2FnZT1udWxsLCBFeGNlcHRpb24gaW5uZXJFeGNlcHRpb24gPSBudWxsKSA6IGJhc2UobWVzc2FnZSwgaW5uZXJFeGNlcHRpb24pXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcbiAgICB9XHJcbiAgICBcclxuXHJcbiAgICBbU2VyaWFsaXphYmxlXVxyXG4gICAgc2VhbGVkIGNsYXNzIEVtcHR5XHJcbiAgICB7XHJcbiAgICAgICAgI3JlZ2lvbiBTdGF0aWMgRmllbGRzXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyByZWFkb25seSBFbXB0eSBWYWx1ZSA9IG5ldyBFbXB0eSgpO1xyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBDb25zdHJ1Y3RvcnNcclxuICAgICAgICBFbXB0eSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gUHVibGljIE1ldGhvZHNcclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgc3RyaW5nIFRvU3RyaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdHJpbmcuRW1wdHk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuICAgIH1cclxuXHJcbiAgICBbU2VyaWFsaXphYmxlXVxyXG4gICAgcHVibGljIHNlYWxlZCBjbGFzcyBEQk51bGxcclxuICAgIHtcclxuICAgICAgICAjcmVnaW9uIFN0YXRpYyBGaWVsZHNcclxuICAgICAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IERCTnVsbCBWYWx1ZSA9IG5ldyBEQk51bGwoKTtcclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gQ29uc3RydWN0b3JzXHJcbiAgICAgICAgREJOdWxsKClcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBQdWJsaWMgTWV0aG9kc1xyXG4gICAgICAgIHB1YmxpYyBUeXBlQ29kZSBHZXRUeXBlQ29kZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gVHlwZUNvZGUuREJOdWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHN0cmluZyBUb1N0cmluZygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nLkVtcHR5O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBUb1N0cmluZyhJRm9ybWF0UHJvdmlkZXIgcHJvdmlkZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nLkVtcHR5O1xyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcbiAgICB9XHJcbn1cclxuXHJcbm5hbWVzcGFjZSBTeXN0ZW1cclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBDb252ZXJ0MlxyXG4gICAge1xyXG4gICAgICAgICNyZWdpb24gU3RhdGljIEZpZWxkc1xyXG4gICAgICAgIHN0YXRpYyByZWFkb25seSBUeXBlW10gQ29udmVydFR5cGVzID0ge3R5cGVvZihFbXB0eSksIHR5cGVvZihvYmplY3QpLCB0eXBlb2YoREJOdWxsKSwgdHlwZW9mKGJvb2wpLCB0eXBlb2YoY2hhciksIHR5cGVvZihzYnl0ZSksIHR5cGVvZihieXRlKSwgdHlwZW9mKHNob3J0KSwgdHlwZW9mKHVzaG9ydCksIHR5cGVvZihpbnQpLCB0eXBlb2YodWludCksIHR5cGVvZihsb25nKSwgdHlwZW9mKHVsb25nKSwgdHlwZW9mKGZsb2F0KSwgdHlwZW9mKGRvdWJsZSksIHR5cGVvZihkZWNpbWFsKSwgdHlwZW9mKERhdGVUaW1lKSwgdHlwZW9mKG9iamVjdCksIHR5cGVvZihzdHJpbmcpfTtcclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gUHJvcGVydGllc1xyXG4gICAgICAgIHN0YXRpYyBDdWx0dXJlSW5mbyBUaHJlYWRfQ3VycmVudFRocmVhZF9DdXJyZW50Q3VsdHVyZSB7Z2V0e3JldHVybiBDdWx0dXJlSW5mby5DdXJyZW50Q3VsdHVyZTt9fVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBQdWJsaWMgTWV0aG9kc1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgb2JqZWN0IENoYW5nZVR5cGUob2JqZWN0IHZhbHVlLCBUeXBlQ29kZSB0eXBlQ29kZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBDaGFuZ2VUeXBlKHZhbHVlLCB0eXBlQ29kZSwgVGhyZWFkX0N1cnJlbnRUaHJlYWRfQ3VycmVudEN1bHR1cmUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBvYmplY3QgQ2hhbmdlVHlwZShvYmplY3QgdmFsdWUsIFR5cGVDb2RlIHR5cGVDb2RlLCBJRm9ybWF0UHJvdmlkZXIgcHJvdmlkZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAodmFsdWUgPT0gbnVsbCAmJiAodHlwZUNvZGUgPT0gVHlwZUNvZGUuRW1wdHkgfHwgdHlwZUNvZGUgPT0gVHlwZUNvZGUuU3RyaW5nIHx8IHR5cGVDb2RlID09IFR5cGVDb2RlLk9iamVjdCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGVDb2RlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFR5cGVDb2RlLkJvb2xlYW46XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIENvbnZlcnQuVG9Cb29sZWFuKHZhbHVlLCBwcm92aWRlcik7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFR5cGVDb2RlLkNoYXI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIENvbnZlcnQuVG9DaGFyKHZhbHVlLCBwcm92aWRlcik7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFR5cGVDb2RlLlNCeXRlOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBDb252ZXJ0LlRvU0J5dGUodmFsdWUsIHByb3ZpZGVyKTtcclxuICAgICAgICAgICAgICAgIGNhc2UgVHlwZUNvZGUuQnl0ZTpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gQ29udmVydC5Ub0J5dGUodmFsdWUsIHByb3ZpZGVyKTtcclxuICAgICAgICAgICAgICAgIGNhc2UgVHlwZUNvZGUuSW50MTY6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIENvbnZlcnQuVG9JbnQxNih2YWx1ZSwgcHJvdmlkZXIpO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBUeXBlQ29kZS5VSW50MTY6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIENvbnZlcnQuVG9VSW50MTYodmFsdWUsIHByb3ZpZGVyKTtcclxuICAgICAgICAgICAgICAgIGNhc2UgVHlwZUNvZGUuSW50MzI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIENvbnZlcnQuVG9JbnQzMih2YWx1ZSwgcHJvdmlkZXIpO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBUeXBlQ29kZS5VSW50MzI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIENvbnZlcnQuVG9VSW50MzIodmFsdWUsIHByb3ZpZGVyKTtcclxuICAgICAgICAgICAgICAgIGNhc2UgVHlwZUNvZGUuSW50NjQ6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIENvbnZlcnQuVG9JbnQ2NCh2YWx1ZSwgcHJvdmlkZXIpO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBUeXBlQ29kZS5VSW50NjQ6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIENvbnZlcnQuVG9VSW50NjQodmFsdWUsIHByb3ZpZGVyKTtcclxuICAgICAgICAgICAgICAgIGNhc2UgVHlwZUNvZGUuU2luZ2xlOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBDb252ZXJ0LlRvU2luZ2xlKHZhbHVlLCBwcm92aWRlcik7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFR5cGVDb2RlLkRvdWJsZTpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gQ29udmVydC5Ub0RvdWJsZSh2YWx1ZSwgcHJvdmlkZXIpO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBUeXBlQ29kZS5EZWNpbWFsOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBDb252ZXJ0LlRvRGVjaW1hbCh2YWx1ZSwgcHJvdmlkZXIpO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBUeXBlQ29kZS5EYXRlVGltZTpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gQ29udmVydC5Ub0RhdGVUaW1lKHZhbHVlLCBwcm92aWRlcik7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFR5cGVDb2RlLlN0cmluZzpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gQ29udmVydC5Ub1N0cmluZyh2YWx1ZSwgcHJvdmlkZXIpO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBUeXBlQ29kZS5PYmplY3Q6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBUeXBlQ29kZS5EQk51bGw6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRDYXN0RXhjZXB0aW9uKEVudmlyb25tZW50X0dldFJlc291cmNlU3RyaW5nKFwiSW52YWxpZENhc3RfREJOdWxsXCIpKTtcclxuICAgICAgICAgICAgICAgIGNhc2UgVHlwZUNvZGUuRW1wdHk6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRDYXN0RXhjZXB0aW9uKEVudmlyb25tZW50X0dldFJlc291cmNlU3RyaW5nKFwiSW52YWxpZENhc3RfRW1wdHlcIikpO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnRFeGNlcHRpb24oRW52aXJvbm1lbnRfR2V0UmVzb3VyY2VTdHJpbmcoXCJBcmdfVW5rbm93blR5cGVDb2RlXCIpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBvYmplY3QgQ2hhbmdlVHlwZShvYmplY3QgdmFsdWUsIFR5cGUgY29udmVyc2lvblR5cGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gQ2hhbmdlVHlwZSh2YWx1ZSwgY29udmVyc2lvblR5cGUsIFRocmVhZF9DdXJyZW50VGhyZWFkX0N1cnJlbnRDdWx0dXJlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgb2JqZWN0IENoYW5nZVR5cGUob2JqZWN0IHZhbHVlLCBUeXBlIGNvbnZlcnNpb25UeXBlLCBJRm9ybWF0UHJvdmlkZXIgcHJvdmlkZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoY29udmVyc2lvblR5cGUgPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEV4Y2VwdGlvbihcImNvbnZlcnNpb25UeXBlXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodmFsdWUgPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgLy9pZiAoY29udmVyc2lvblR5cGUuSXNWYWx1ZVR5cGUpXHJcbiAgICAgICAgICAgICAgICAvL3tcclxuICAgICAgICAgICAgICAgIC8vICAgIHRocm93IG5ldyBJbnZhbGlkQ2FzdEV4Y2VwdGlvbihFbnZpcm9ubWVudF9HZXRSZXNvdXJjZVN0cmluZyhcIkludmFsaWRDYXN0X0Nhbm5vdENhc3ROdWxsVG9WYWx1ZVR5cGVcIikpO1xyXG4gICAgICAgICAgICAgICAgLy99XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHZhbHVlLkdldFR5cGUoKSA9PSBjb252ZXJzaW9uVHlwZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgcnRDb252ZXJzaW9uVHlwZSA9IGNvbnZlcnNpb25UeXBlO1xyXG5cclxuICAgICAgICAgICAgaWYgKHJ0Q29udmVyc2lvblR5cGUgPT0gdHlwZW9mKGJvb2wpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIENvbnZlcnQuVG9Cb29sZWFuKHZhbHVlLCBwcm92aWRlcik7XHJcbiAgICAgICAgICAgIGlmIChydENvbnZlcnNpb25UeXBlID09IENvbnZlcnRUeXBlc1soaW50KSBUeXBlQ29kZS5DaGFyXSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBDb252ZXJ0LlRvQ2hhcih2YWx1ZSwgcHJvdmlkZXIpO1xyXG4gICAgICAgICAgICBpZiAocnRDb252ZXJzaW9uVHlwZSA9PSBDb252ZXJ0VHlwZXNbKGludCkgVHlwZUNvZGUuU0J5dGVdKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIENvbnZlcnQuVG9TQnl0ZSh2YWx1ZSwgcHJvdmlkZXIpO1xyXG4gICAgICAgICAgICBpZiAocnRDb252ZXJzaW9uVHlwZSA9PSBDb252ZXJ0VHlwZXNbKGludCkgVHlwZUNvZGUuQnl0ZV0pXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gQ29udmVydC5Ub0J5dGUodmFsdWUsIHByb3ZpZGVyKTtcclxuICAgICAgICAgICAgaWYgKHJ0Q29udmVyc2lvblR5cGUgPT0gQ29udmVydFR5cGVzWyhpbnQpIFR5cGVDb2RlLkludDE2XSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBDb252ZXJ0LlRvSW50MTYodmFsdWUsIHByb3ZpZGVyKTtcclxuICAgICAgICAgICAgaWYgKHJ0Q29udmVyc2lvblR5cGUgPT0gQ29udmVydFR5cGVzWyhpbnQpIFR5cGVDb2RlLlVJbnQxNl0pXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gQ29udmVydC5Ub1VJbnQxNih2YWx1ZSwgcHJvdmlkZXIpO1xyXG4gICAgICAgICAgICBpZiAocnRDb252ZXJzaW9uVHlwZSA9PSBDb252ZXJ0VHlwZXNbKGludCkgVHlwZUNvZGUuSW50MzJdKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIENvbnZlcnQuVG9JbnQzMih2YWx1ZSwgcHJvdmlkZXIpO1xyXG4gICAgICAgICAgICBpZiAocnRDb252ZXJzaW9uVHlwZSA9PSBDb252ZXJ0VHlwZXNbKGludCkgVHlwZUNvZGUuVUludDMyXSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBDb252ZXJ0LlRvVUludDMyKHZhbHVlLCBwcm92aWRlcik7XHJcbiAgICAgICAgICAgIGlmIChydENvbnZlcnNpb25UeXBlID09IENvbnZlcnRUeXBlc1soaW50KSBUeXBlQ29kZS5JbnQ2NF0pXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gQ29udmVydC5Ub0ludDY0KHZhbHVlLCBwcm92aWRlcik7XHJcbiAgICAgICAgICAgIGlmIChydENvbnZlcnNpb25UeXBlID09IENvbnZlcnRUeXBlc1soaW50KSBUeXBlQ29kZS5VSW50NjRdKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIENvbnZlcnQuVG9VSW50NjQodmFsdWUsIHByb3ZpZGVyKTtcclxuICAgICAgICAgICAgaWYgKHJ0Q29udmVyc2lvblR5cGUgPT0gQ29udmVydFR5cGVzWyhpbnQpIFR5cGVDb2RlLlNpbmdsZV0pXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gQ29udmVydC5Ub1NpbmdsZSh2YWx1ZSwgcHJvdmlkZXIpO1xyXG4gICAgICAgICAgICBpZiAocnRDb252ZXJzaW9uVHlwZSA9PSBDb252ZXJ0VHlwZXNbKGludCkgVHlwZUNvZGUuRG91YmxlXSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBDb252ZXJ0LlRvRG91YmxlKHZhbHVlLCBwcm92aWRlcik7XHJcbiAgICAgICAgICAgIGlmIChydENvbnZlcnNpb25UeXBlID09IENvbnZlcnRUeXBlc1soaW50KSBUeXBlQ29kZS5EZWNpbWFsXSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBDb252ZXJ0LlRvRGVjaW1hbCh2YWx1ZSwgcHJvdmlkZXIpO1xyXG4gICAgICAgICAgICBpZiAocnRDb252ZXJzaW9uVHlwZSA9PSBDb252ZXJ0VHlwZXNbKGludCkgVHlwZUNvZGUuRGF0ZVRpbWVdKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIENvbnZlcnQuVG9EYXRlVGltZSh2YWx1ZSwgcHJvdmlkZXIpO1xyXG4gICAgICAgICAgICBpZiAocnRDb252ZXJzaW9uVHlwZSA9PSBDb252ZXJ0VHlwZXNbKGludCkgVHlwZUNvZGUuU3RyaW5nXSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBDb252ZXJ0LlRvU3RyaW5nKHZhbHVlLCBwcm92aWRlcik7XHJcbiAgICAgICAgICAgIGlmIChydENvbnZlcnNpb25UeXBlID09IENvbnZlcnRUeXBlc1soaW50KSBUeXBlQ29kZS5PYmplY3RdKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG5cclxuICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEltcGxlbWVudGVkRXhjZXB0aW9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBNZXRob2RzXHJcbiAgICAgICAgc3RhdGljIHN0cmluZyBFbnZpcm9ubWVudF9HZXRSZXNvdXJjZVN0cmluZyhzdHJpbmcga2V5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIGtleTtcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG4gICAgfVxyXG59IiwidXNpbmcgU3lzdGVtLkdsb2JhbGl6YXRpb247XHJcblxyXG5uYW1lc3BhY2UgU3lzdGVtXHJcbntcclxuICAgIC8vLyA8c3VtbWFyeT5cclxuICAgIC8vLyAgICAgVGhlIGV4dGVuc2lvbnNcclxuICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEV4dGVuc2lvbnNcclxuICAgIHtcclxuICAgICAgICAjcmVnaW9uIFByb3BlcnRpZXNcclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vICAgICBHZXRzIHRoZSBkZWZhdWx0IGZvcm1hdCBwcm92aWRlci5cclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIHN0YXRpYyBJRm9ybWF0UHJvdmlkZXIgRGVmYXVsdEZvcm1hdFByb3ZpZGVyIHtnZXR7cmV0dXJuIEN1bHR1cmVJbmZvLkN1cnJlbnRDdWx0dXJlO319XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIFB1YmxpYyBNZXRob2RzXHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyAgICAgQ29tcGFyZXMgdGhlIHNwZWNpZmllZCByaWdodC5cclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IENvbXBhcmUodGhpcyBvYmplY3QgbGVmdCwgb2JqZWN0IHJpZ2h0LCBJRm9ybWF0UHJvdmlkZXIgZm9ybWF0UHJvdmlkZXIgPSBudWxsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKFJlZmVyZW5jZUVxdWFscyhsZWZ0LCBudWxsKSAmJiBSZWZlcmVuY2VFcXVhbHMocmlnaHQsIG51bGwpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCFsZWZ0LklzTnVtZXJpYygpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBWYWx1ZU11c3RiZU51bWVyaWMobGVmdCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghcmlnaHQuSXNOdW1lcmljKCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IFZhbHVlTXVzdGJlTnVtZXJpYyhyaWdodCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBDb252ZXJ0LlRvRGVjaW1hbChsZWZ0LCBmb3JtYXRQcm92aWRlcikuQ29tcGFyZVRvKENvbnZlcnQuVG9EZWNpbWFsKHJpZ2h0LCBmb3JtYXRQcm92aWRlcikpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyAgICAgR2V0cyBkZWZhdWx0IHZhbHVlIG9mIDxwYXJhbXJlZiBuYW1lPVwidHlwZVwiIC8+XHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIG9iamVjdCBHZXREZWZhdWx0VmFsdWUodGhpcyBUeXBlIHR5cGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAodHlwZS5Jc0NsYXNzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIEFjdGl2YXRvci5DcmVhdGVJbnN0YW5jZSh0eXBlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gICAgIERldGVybWluZXMgd2hldGhlciBbaXMgYmlnZ2VyIHRoYW5dIFt0aGUgc3BlY2lmaWVkIHJpZ2h0XS5cclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cImxlZnRcIj5UaGUgbGVmdC48L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInJpZ2h0XCI+VGhlIHJpZ2h0LjwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwiZm9ybWF0UHJvdmlkZXJcIj5UaGUgZm9ybWF0IHByb3ZpZGVyLjwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxyZXR1cm5zPlxyXG4gICAgICAgIC8vLyAgICAgPGM+dHJ1ZTwvYz4gaWYgW2lzIGJpZ2dlciB0aGFuXSBbdGhlIHNwZWNpZmllZCByaWdodF07IG90aGVyd2lzZSwgPGM+ZmFsc2U8L2M+LlxyXG4gICAgICAgIC8vLyA8L3JldHVybnM+XHJcbiAgICAgICAgLy8vIDxleGNlcHRpb24gY3JlZj1cIlN5c3RlbS5Bcmd1bWVudEV4Y2VwdGlvblwiPjwvZXhjZXB0aW9uPlxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBJc0JpZ2dlclRoYW4odGhpcyBvYmplY3QgbGVmdCwgb2JqZWN0IHJpZ2h0LCBJRm9ybWF0UHJvdmlkZXIgZm9ybWF0UHJvdmlkZXIgPSBudWxsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKFJlZmVyZW5jZUVxdWFscyhsZWZ0LCBudWxsKSB8fCBSZWZlcmVuY2VFcXVhbHMocmlnaHQsIG51bGwpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChsZWZ0LklzTnVtZXJpYygpICYmIHJpZ2h0LklzTnVtZXJpYygpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gQ29udmVydC5Ub0RlY2ltYWwobGVmdCwgZm9ybWF0UHJvdmlkZXIpID4gQ29udmVydC5Ub0RlY2ltYWwocmlnaHQsIGZvcm1hdFByb3ZpZGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnRFeGNlcHRpb24obGVmdC5Ub1N0cmluZygpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gICAgIERldGVybWluZXMgd2hldGhlciBbaXMgbm90IG51bGxdLlxyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwidmFsdWVcIj5UaGUgdmFsdWUuPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHJldHVybnM+XHJcbiAgICAgICAgLy8vICAgICA8Yz50cnVlPC9jPiBpZiBbaXMgbm90IG51bGxdIFt0aGUgc3BlY2lmaWVkIHZhbHVlXTsgb3RoZXJ3aXNlLCA8Yz5mYWxzZTwvYz4uXHJcbiAgICAgICAgLy8vIDwvcmV0dXJucz5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgSXNOb3ROdWxsKHRoaXMgb2JqZWN0IHZhbHVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuICFSZWZlcmVuY2VFcXVhbHModmFsdWUsIG51bGwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyAgICAgRGV0ZXJtaW5lcyB3aGV0aGVyIHRoaXMgaW5zdGFuY2UgaXMgbnVsbC5cclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInZhbHVlXCI+VGhlIHZhbHVlLjwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxyZXR1cm5zPlxyXG4gICAgICAgIC8vLyAgICAgPGM+dHJ1ZTwvYz4gaWYgdGhlIHNwZWNpZmllZCB2YWx1ZSBpcyBudWxsOyBvdGhlcndpc2UsIDxjPmZhbHNlPC9jPi5cclxuICAgICAgICAvLy8gPC9yZXR1cm5zPlxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBJc051bGwodGhpcyBvYmplY3QgdmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gUmVmZXJlbmNlRXF1YWxzKHZhbHVlLCBudWxsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gICAgIERldGVybWluZXMgd2hldGhlciB0aGlzIGluc3RhbmNlIGlzIG51bWVyaWMuXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgSXNOdW1lcmljKHRoaXMgb2JqZWN0IHZhbHVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKFJlZmVyZW5jZUVxdWFscyh2YWx1ZSwgbnVsbCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHZhbHVlIGlzIGJ5dGUgfHxcclxuICAgICAgICAgICAgICAgIHZhbHVlIGlzIHNieXRlIHx8XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSBpcyB1c2hvcnQgfHxcclxuICAgICAgICAgICAgICAgIHZhbHVlIGlzIHVpbnQgfHxcclxuICAgICAgICAgICAgICAgIHZhbHVlIGlzIHVsb25nIHx8XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSBpcyBzaG9ydCB8fFxyXG4gICAgICAgICAgICAgICAgdmFsdWUgaXMgaW50IHx8XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSBpcyBsb25nIHx8XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSBpcyBkZWNpbWFsIHx8XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSBpcyBkb3VibGUgfHxcclxuICAgICAgICAgICAgICAgIHZhbHVlIGlzIGZsb2F0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyAgICAgRGV0ZXJtaW5lcyB3aGV0aGVyIHRoaXMgaW5zdGFuY2UgaXMgbnVtZXJpYy5cclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBJc051bWVyaWModGhpcyBUeXBlIHR5cGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAodHlwZSA9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnROdWxsRXhjZXB0aW9uKFwidHlwZVwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHR5cGUgPT0gdHlwZW9mKGJ5dGUpIHx8XHJcbiAgICAgICAgICAgICAgICB0eXBlID09IHR5cGVvZihzYnl0ZSkgfHxcclxuICAgICAgICAgICAgICAgIHR5cGUgPT0gdHlwZW9mKHVzaG9ydCkgfHxcclxuICAgICAgICAgICAgICAgIHR5cGUgPT0gdHlwZW9mKHVpbnQpIHx8XHJcbiAgICAgICAgICAgICAgICB0eXBlID09IHR5cGVvZih1bG9uZykgfHxcclxuICAgICAgICAgICAgICAgIHR5cGUgPT0gdHlwZW9mKHNob3J0KSB8fFxyXG4gICAgICAgICAgICAgICAgdHlwZSA9PSB0eXBlb2YoaW50KSB8fFxyXG4gICAgICAgICAgICAgICAgdHlwZSA9PSB0eXBlb2YobG9uZykgfHxcclxuICAgICAgICAgICAgICAgIHR5cGUgPT0gdHlwZW9mKGRlY2ltYWwpIHx8XHJcbiAgICAgICAgICAgICAgICB0eXBlID09IHR5cGVvZihkb3VibGUpIHx8XHJcbiAgICAgICAgICAgICAgICB0eXBlID09IHR5cGVvZihmbG9hdCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vICAgICBEZXRlcm1pbmVzIHdoZXRoZXIgdGhlIHNwZWNpZmllZCByaWdodCBpcyBzYW1lLlxyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwibGVmdFwiPlRoZSBsZWZ0LjwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwicmlnaHRcIj5UaGUgcmlnaHQuPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJmb3JtYXRQcm92aWRlclwiPlRoZSBmb3JtYXQgcHJvdmlkZXIuPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHJldHVybnM+XHJcbiAgICAgICAgLy8vICAgICA8Yz50cnVlPC9jPiBpZiB0aGUgc3BlY2lmaWVkIHJpZ2h0IGlzIHNhbWU7IG90aGVyd2lzZSwgPGM+ZmFsc2U8L2M+LlxyXG4gICAgICAgIC8vLyA8L3JldHVybnM+XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIElzU2FtZSh0aGlzIG9iamVjdCBsZWZ0LCBvYmplY3QgcmlnaHQsIElGb3JtYXRQcm92aWRlciBmb3JtYXRQcm92aWRlciA9IG51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoUmVmZXJlbmNlRXF1YWxzKGxlZnQsIG51bGwpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUmVmZXJlbmNlRXF1YWxzKHJpZ2h0LCBudWxsKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGxlZnRBc1N0cmluZyA9IGxlZnQgYXMgc3RyaW5nO1xyXG4gICAgICAgICAgICBpZiAobGVmdEFzU3RyaW5nICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBsZWZ0QXNTdHJpbmcuRXF1YWxzKHJpZ2h0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocmlnaHQgaXMgc3RyaW5nKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChsZWZ0LklzTnVtZXJpYygpICYmIHJpZ2h0LklzTnVtZXJpYygpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gQ29udmVydC5Ub0RlY2ltYWwobGVmdCwgZm9ybWF0UHJvdmlkZXIpID09IENvbnZlcnQuVG9EZWNpbWFsKHJpZ2h0LCBmb3JtYXRQcm92aWRlcik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBsZWZ0LkVxdWFscyhyaWdodCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vICAgICBEZXRlcm1pbmVzIHdoZXRoZXIgdGhpcyBpbnN0YW5jZSBpcyBzdHJpbmcuXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJ2YWx1ZVwiPlRoZSB2YWx1ZS48L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cmV0dXJucz48L3JldHVybnM+XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sPyBJc1N0cmluZyh0aGlzIG9iamVjdCB2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZSBpcyBzdHJpbmc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vICAgICBSZW1vdmVzIHZhbHVlIGZyb20gZW5kIG9mIHN0clxyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgUmVtb3ZlRnJvbUVuZCh0aGlzIHN0cmluZyBkYXRhLCBzdHJpbmcgdmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5FbmRzV2l0aCh2YWx1ZSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLlN1YnN0cmluZygwLCBkYXRhLkxlbmd0aCAtIHZhbHVlLkxlbmd0aCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyAgICAgUmVtb3ZlcyB2YWx1ZSBmcm9tIHN0YXJ0IG9mIHN0clxyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgUmVtb3ZlRnJvbVN0YXJ0KHRoaXMgc3RyaW5nIGRhdGEsIHN0cmluZyB2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhID09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoZGF0YS5TdGFydHNXaXRoKHZhbHVlKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEuU3Vic3RyaW5nKHZhbHVlLkxlbmd0aCwgZGF0YS5MZW5ndGggLSB2YWx1ZS5MZW5ndGgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gICAgIFRvIHRoZSBib29sZWFuLlxyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwidmFsdWVcIj5UaGUgdmFsdWUuPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHJldHVybnM+PC9yZXR1cm5zPlxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBUb0Jvb2xlYW4odGhpcyBvYmplY3QgdmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gVG9Cb29sZWFuKHZhbHVlLCBEZWZhdWx0Rm9ybWF0UHJvdmlkZXIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyAgICAgVG8gdGhlIGJvb2xlYW4uXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJ2YWx1ZVwiPlRoZSB2YWx1ZS48L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cImZvcm1hdFByb3ZpZGVyXCI+VGhlIGZvcm1hdCBwcm92aWRlci48L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cmV0dXJucz48L3JldHVybnM+XHJcbiAgICAgICAgLy8vIDxleGNlcHRpb24gY3JlZj1cIlN5c3RlbS5Bcmd1bWVudE51bGxFeGNlcHRpb25cIj52YWx1ZTwvZXhjZXB0aW9uPlxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBUb0Jvb2xlYW4odGhpcyBvYmplY3QgdmFsdWUsIElGb3JtYXRQcm92aWRlciBmb3JtYXRQcm92aWRlcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZS5Jc051bGwoKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEV4Y2VwdGlvbihcInZhbHVlXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBDb252ZXJ0LlRvQm9vbGVhbih2YWx1ZSwgZm9ybWF0UHJvdmlkZXIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyAgICAgVG8gdGhlIGJvb2xlYW4gbnVsbGFibGUuXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJ2YWx1ZVwiPlRoZSB2YWx1ZS48L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cmV0dXJucz48L3JldHVybnM+XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sPyBUb0Jvb2xlYW5OdWxsYWJsZSh0aGlzIG9iamVjdCB2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBUb0Jvb2xlYW5OdWxsYWJsZSh2YWx1ZSwgRGVmYXVsdEZvcm1hdFByb3ZpZGVyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gICAgIFRvIHRoZSBib29sZWFuIG51bGxhYmxlLlxyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwidmFsdWVcIj5UaGUgdmFsdWUuPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJmb3JtYXRQcm92aWRlclwiPlRoZSBmb3JtYXQgcHJvdmlkZXIuPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHJldHVybnM+PC9yZXR1cm5zPlxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbD8gVG9Cb29sZWFuTnVsbGFibGUodGhpcyBvYmplY3QgdmFsdWUsIElGb3JtYXRQcm92aWRlciBmb3JtYXRQcm92aWRlcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZS5Jc051bGwoKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIENvbnZlcnQuVG9Cb29sZWFuKHZhbHVlLCBmb3JtYXRQcm92aWRlcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vICAgICBUbyB0aGUgZGVjaW1hbC5cclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInZhbHVlXCI+VGhlIHZhbHVlLjwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwiZm9ybWF0UHJvdmlkZXJcIj5UaGUgZm9ybWF0IHByb3ZpZGVyLjwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxyZXR1cm5zPjwvcmV0dXJucz5cclxuICAgICAgICAvLy8gPGV4Y2VwdGlvbiBjcmVmPVwiU3lzdGVtLkFyZ3VtZW50TnVsbEV4Y2VwdGlvblwiPnZhbHVlPC9leGNlcHRpb24+XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBkZWNpbWFsIFRvRGVjaW1hbCh0aGlzIG9iamVjdCB2YWx1ZSwgSUZvcm1hdFByb3ZpZGVyIGZvcm1hdFByb3ZpZGVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHZhbHVlLklzTnVsbCgpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnROdWxsRXhjZXB0aW9uKFwidmFsdWVcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIENvbnZlcnQuVG9EZWNpbWFsKHZhbHVlLCBmb3JtYXRQcm92aWRlcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vICAgICBUbyB0aGUgZGVjaW1hbC5cclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInZhbHVlXCI+VGhlIHZhbHVlLjwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxyZXR1cm5zPjwvcmV0dXJucz5cclxuICAgICAgICAvLy8gPGV4Y2VwdGlvbiBjcmVmPVwiU3lzdGVtLkFyZ3VtZW50TnVsbEV4Y2VwdGlvblwiPnZhbHVlPC9leGNlcHRpb24+XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBkZWNpbWFsIFRvRGVjaW1hbCh0aGlzIG9iamVjdCB2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZS5Jc051bGwoKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEV4Y2VwdGlvbihcInZhbHVlXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBUb0RlY2ltYWwodmFsdWUsIERlZmF1bHRGb3JtYXRQcm92aWRlcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vICAgICBUbyB0aGUgZGVjaW1hbCBudWxsYWJsZS5cclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInZhbHVlXCI+VGhlIHZhbHVlLjwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwiZm9ybWF0UHJvdmlkZXJcIj5UaGUgZm9ybWF0IHByb3ZpZGVyLjwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxyZXR1cm5zPjwvcmV0dXJucz5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGRlY2ltYWw/IFRvRGVjaW1hbE51bGxhYmxlKHRoaXMgb2JqZWN0IHZhbHVlLCBJRm9ybWF0UHJvdmlkZXIgZm9ybWF0UHJvdmlkZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAodmFsdWUuSXNOdWxsKCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBDb252ZXJ0LlRvRGVjaW1hbCh2YWx1ZSwgZm9ybWF0UHJvdmlkZXIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyAgICAgVG8gdGhlIGRlY2ltYWwgbnVsbGFibGUuXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJ2YWx1ZVwiPlRoZSB2YWx1ZS48L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cmV0dXJucz48L3JldHVybnM+XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBkZWNpbWFsPyBUb0RlY2ltYWxOdWxsYWJsZSh0aGlzIG9iamVjdCB2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBUb0RlY2ltYWxOdWxsYWJsZSh2YWx1ZSwgRGVmYXVsdEZvcm1hdFByb3ZpZGVyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gICAgIFRvIHRoZSBpbnQzMi5cclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInZhbHVlXCI+VGhlIHZhbHVlLjwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxyZXR1cm5zPjwvcmV0dXJucz5cclxuICAgICAgICAvLy8gPGV4Y2VwdGlvbiBjcmVmPVwiU3lzdGVtLkFyZ3VtZW50TnVsbEV4Y2VwdGlvblwiPnZhbHVlPC9leGNlcHRpb24+XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgVG9JbnQzMih0aGlzIG9iamVjdCB2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZS5Jc051bGwoKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEV4Y2VwdGlvbihcInZhbHVlXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBDb252ZXJ0LlRvSW50MzIodmFsdWUsIERlZmF1bHRGb3JtYXRQcm92aWRlcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vICAgICBUbyB0aGUgaW50MzIgbnVsbGFibGUuXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJ2YWx1ZVwiPlRoZSB2YWx1ZS48L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cImZvcm1hdFByb3ZpZGVyXCI+VGhlIGZvcm1hdCBwcm92aWRlci48L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cmV0dXJucz48L3JldHVybnM+XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQ/IFRvSW50MzJOdWxsYWJsZSh0aGlzIG9iamVjdCB2YWx1ZSwgSUZvcm1hdFByb3ZpZGVyIGZvcm1hdFByb3ZpZGVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHZhbHVlLklzTnVsbCgpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gQ29udmVydC5Ub0ludDMyKHZhbHVlLCBmb3JtYXRQcm92aWRlcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vICAgICBUbyB0aGUgaW50MzIgbnVsbGFibGUuXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludD8gVG9JbnQzMk51bGxhYmxlKHRoaXMgb2JqZWN0IHZhbHVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFRvSW50MzJOdWxsYWJsZSh2YWx1ZSwgQ3VsdHVyZUluZm8uQ3VycmVudEN1bHR1cmUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gTWV0aG9kc1xyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gICAgIFZhbHVlcyB0aGUgbXVzdGJlIG51bWVyaWMuXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJ2YWx1ZVwiPlRoZSB2YWx1ZS48L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cmV0dXJucz48L3JldHVybnM+XHJcbiAgICAgICAgc3RhdGljIEFyZ3VtZW50RXhjZXB0aW9uIFZhbHVlTXVzdGJlTnVtZXJpYyhvYmplY3QgdmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEFyZ3VtZW50RXhjZXB0aW9uKHZhbHVlLlRvU3RyaW5nKCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcbiAgICB9XHJcbn0iLCJ1c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBTeXN0ZW0uUmVmbGVjdGlvblxyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEV4dGVuc2lvbnNcclxuICAgIHtcclxuICAgICAgICAjcmVnaW9uIFB1YmxpYyBNZXRob2RzXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgR2V0UmVzb3VyY2UodGhpcyBBc3NlbWJseSBhc3NlbWJseSwgc3RyaW5nIG5hbWUsIGJvb2wgdGhyb3dPbkVycm9yKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHJlc291cmNlID0gYXNzZW1ibHkuR2V0TWFuaWZlc3RSZXNvdXJjZURhdGFBc0Jhc2U2NChuYW1lKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChyZXNvdXJjZSA9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhyb3dPbkVycm9yKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXhjZXB0aW9uKFwiUmVzb3VyY2VOb3RGb3VuZDpcIiArIG5hbWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gRW5jb2RpbmdIZWxwZXIuQmFzZTY0RGVjb2RlKHJlc291cmNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG4gICAgfVxyXG59IiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG5cclxubmFtZXNwYWNlIFN5c3RlbVxyXG57XHJcbiAgICBjbGFzcyBTUlxyXG4gICAge1xyXG4gICAgICAgIGludGVybmFsIGNvbnN0IHN0cmluZyBPYnNlcnZhYmxlQ29sbGVjdGlvblJlZW50cmFuY3lOb3RBbGxvd2VkID0gXCJPYnNlcnZhYmxlQ29sbGVjdGlvblJlZW50cmFuY3lOb3RBbGxvd2VkXCI7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgR2V0U3RyaW5nKHN0cmluZyBuYW1lLCBwYXJhbXMgb2JqZWN0W10gYXJncylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBuYW1lO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJuYW1lc3BhY2UgU3lzdGVtLlRleHRcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBFbmNvZGluZ0hlbHBlclxyXG4gICAge1xyXG4gICAgICAgICNyZWdpb24gUHVibGljIE1ldGhvZHNcclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBCYXNlNjREZWNvZGUoc3RyaW5nIGJhc2U2NEVuY29kZWREYXRhKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGJhc2U2NEVuY29kZWRCeXRlcyA9IENvbnZlcnQuRnJvbUJhc2U2NFN0cmluZyhiYXNlNjRFbmNvZGVkRGF0YSk7XHJcbiAgICAgICAgICAgIHJldHVybiBFbmNvZGluZy5VVEY4LkdldFN0cmluZyhiYXNlNjRFbmNvZGVkQnl0ZXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcbiAgICB9XHJcbn0iLCJ1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLlJ1bnRpbWUuU2VyaWFsaXphdGlvbjtcclxudXNpbmcgU3lzdGVtLlNlY3VyaXR5O1xyXG5cclxubmFtZXNwYWNlIFN5c3RlbVxyXG57XHJcblxyXG4gICAgaW50ZXJuYWwgZW51bSBFeGNlcHRpb25SZXNvdXJjZVxyXG4gICAge1xyXG4gICAgICAgIEFyZ3VtZW50X0ltcGxlbWVudElDb21wYXJhYmxlLFxyXG4gICAgICAgIEFyZ3VtZW50X0ludmFsaWRUeXBlLFxyXG4gICAgICAgIEFyZ3VtZW50X0ludmFsaWRBcmd1bWVudEZvckNvbXBhcmlzb24sXHJcbiAgICAgICAgQXJndW1lbnRfSW52YWxpZFJlZ2lzdHJ5S2V5UGVybWlzc2lvbkNoZWNrLFxyXG4gICAgICAgIEFyZ3VtZW50T3V0T2ZSYW5nZV9OZWVkTm9uTmVnTnVtLFxyXG4gICAgICAgIEFyZ19BcnJheVBsdXNPZmZUb29TbWFsbCxcclxuICAgICAgICBBcmdfTm9uWmVyb0xvd2VyQm91bmQsXHJcbiAgICAgICAgQXJnX1JhbmtNdWx0aURpbU5vdFN1cHBvcnRlZCxcclxuICAgICAgICBBcmdfUmVnS2V5RGVsSGl2ZSxcclxuICAgICAgICBBcmdfUmVnS2V5U3RyTGVuQnVnLFxyXG4gICAgICAgIEFyZ19SZWdTZXRTdHJBcnJOdWxsLFxyXG4gICAgICAgIEFyZ19SZWdTZXRNaXNtYXRjaGVkS2luZCxcclxuICAgICAgICBBcmdfUmVnU3ViS2V5QWJzZW50LFxyXG4gICAgICAgIEFyZ19SZWdTdWJLZXlWYWx1ZUFic2VudCxcclxuICAgICAgICBBcmd1bWVudF9BZGRpbmdEdXBsaWNhdGUsXHJcbiAgICAgICAgU2VyaWFsaXphdGlvbl9JbnZhbGlkT25EZXNlcixcclxuICAgICAgICBTZXJpYWxpemF0aW9uX01pc3NpbmdLZXlzLFxyXG4gICAgICAgIFNlcmlhbGl6YXRpb25fTnVsbEtleSxcclxuICAgICAgICBBcmd1bWVudF9JbnZhbGlkQXJyYXlUeXBlLFxyXG4gICAgICAgIE5vdFN1cHBvcnRlZF9LZXlDb2xsZWN0aW9uU2V0LFxyXG4gICAgICAgIE5vdFN1cHBvcnRlZF9WYWx1ZUNvbGxlY3Rpb25TZXQsXHJcbiAgICAgICAgQXJndW1lbnRPdXRPZlJhbmdlX1NtYWxsQ2FwYWNpdHksXHJcbiAgICAgICAgQXJndW1lbnRPdXRPZlJhbmdlX0luZGV4LFxyXG4gICAgICAgIEFyZ3VtZW50X0ludmFsaWRPZmZMZW4sXHJcbiAgICAgICAgQXJndW1lbnRfSXRlbU5vdEV4aXN0LFxyXG4gICAgICAgIEFyZ3VtZW50T3V0T2ZSYW5nZV9Db3VudCxcclxuICAgICAgICBBcmd1bWVudE91dE9mUmFuZ2VfSW52YWxpZFRocmVzaG9sZCxcclxuICAgICAgICBBcmd1bWVudE91dE9mUmFuZ2VfTGlzdEluc2VydCxcclxuICAgICAgICBOb3RTdXBwb3J0ZWRfUmVhZE9ubHlDb2xsZWN0aW9uLFxyXG4gICAgICAgIEludmFsaWRPcGVyYXRpb25fQ2Fubm90UmVtb3ZlRnJvbVN0YWNrT3JRdWV1ZSxcclxuICAgICAgICBJbnZhbGlkT3BlcmF0aW9uX0VtcHR5UXVldWUsXHJcbiAgICAgICAgSW52YWxpZE9wZXJhdGlvbl9FbnVtT3BDYW50SGFwcGVuLFxyXG4gICAgICAgIEludmFsaWRPcGVyYXRpb25fRW51bUZhaWxlZFZlcnNpb24sXHJcbiAgICAgICAgSW52YWxpZE9wZXJhdGlvbl9FbXB0eVN0YWNrLFxyXG4gICAgICAgIEFyZ3VtZW50T3V0T2ZSYW5nZV9CaWdnZXJUaGFuQ29sbGVjdGlvbixcclxuICAgICAgICBJbnZhbGlkT3BlcmF0aW9uX0VudW1Ob3RTdGFydGVkLFxyXG4gICAgICAgIEludmFsaWRPcGVyYXRpb25fRW51bUVuZGVkLFxyXG4gICAgICAgIE5vdFN1cHBvcnRlZF9Tb3J0ZWRMaXN0TmVzdGVkV3JpdGUsXHJcbiAgICAgICAgSW52YWxpZE9wZXJhdGlvbl9Ob1ZhbHVlLFxyXG4gICAgICAgIEludmFsaWRPcGVyYXRpb25fUmVnUmVtb3ZlU3ViS2V5LFxyXG4gICAgICAgIFNlY3VyaXR5X1JlZ2lzdHJ5UGVybWlzc2lvbixcclxuICAgICAgICBVbmF1dGhvcml6ZWRBY2Nlc3NfUmVnaXN0cnlOb1dyaXRlLFxyXG4gICAgICAgIE9iamVjdERpc3Bvc2VkX1JlZ0tleUNsb3NlZCxcclxuICAgICAgICBOb3RTdXBwb3J0ZWRfSW5Db21wYXJhYmxlVHlwZSxcclxuICAgICAgICBBcmd1bWVudF9JbnZhbGlkUmVnaXN0cnlPcHRpb25zQ2hlY2ssXHJcbiAgICAgICAgQXJndW1lbnRfSW52YWxpZFJlZ2lzdHJ5Vmlld0NoZWNrXHJcbiAgICB9XHJcblxyXG5cclxuICAgIGludGVybmFsIGVudW0gRXhjZXB0aW9uQXJndW1lbnRcclxuICAgIHtcclxuICAgICAgICBvYmosXHJcbiAgICAgICAgZGljdGlvbmFyeSxcclxuICAgICAgICBkaWN0aW9uYXJ5Q3JlYXRpb25UaHJlc2hvbGQsXHJcbiAgICAgICAgYXJyYXksXHJcbiAgICAgICAgaW5mbyxcclxuICAgICAgICBrZXksXHJcbiAgICAgICAgY29sbGVjdGlvbixcclxuICAgICAgICBsaXN0LFxyXG4gICAgICAgIG1hdGNoLFxyXG4gICAgICAgIGNvbnZlcnRlcixcclxuICAgICAgICBxdWV1ZSxcclxuICAgICAgICBzdGFjayxcclxuICAgICAgICBjYXBhY2l0eSxcclxuICAgICAgICBpbmRleCxcclxuICAgICAgICBzdGFydEluZGV4LFxyXG4gICAgICAgIEB2YWx1ZSxcclxuICAgICAgICBjb3VudCxcclxuICAgICAgICBhcnJheUluZGV4LFxyXG4gICAgICAgIG5hbWUsXHJcbiAgICAgICAgbW9kZSxcclxuICAgICAgICBpdGVtLFxyXG4gICAgICAgIG9wdGlvbnMsXHJcbiAgICAgICAgdmlldyxcclxuICAgICAgICBzb3VyY2VCeXRlc1RvQ29weVxyXG4gICAgfVxyXG4gICAgaW50ZXJuYWwgc3RhdGljIGNsYXNzIFRocm93SGVscGVyXHJcbiAgICB7XHJcbiAgICAgICAgY2xhc3MgRW52aXJvbm1lbnRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGludGVybmFsIHN0YXRpYyBzdHJpbmcgR2V0UmVzb3VyY2VTdHJpbmcoc3RyaW5nIGtleSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGtleTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgc3RhdGljIHN0cmluZyBHZXRBcmd1bWVudE5hbWUoRXhjZXB0aW9uQXJndW1lbnQgYXJndW1lbnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBzdHJpbmcgc3RyID0gbnVsbDtcclxuICAgICAgICAgICAgc3dpdGNoIChhcmd1bWVudClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBFeGNlcHRpb25Bcmd1bWVudC5vYmo6XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSBcIm9ialwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIEV4Y2VwdGlvbkFyZ3VtZW50LmRpY3Rpb25hcnk6XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSBcImRpY3Rpb25hcnlcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSBFeGNlcHRpb25Bcmd1bWVudC5kaWN0aW9uYXJ5Q3JlYXRpb25UaHJlc2hvbGQ6XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSBcImRpY3Rpb25hcnlDcmVhdGlvblRocmVzaG9sZFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIEV4Y2VwdGlvbkFyZ3VtZW50LmFycmF5OlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyID0gXCJhcnJheVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIEV4Y2VwdGlvbkFyZ3VtZW50LmluZm86XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSBcImluZm9cIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSBFeGNlcHRpb25Bcmd1bWVudC5rZXk6XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSBcImtleVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIEV4Y2VwdGlvbkFyZ3VtZW50LmNvbGxlY3Rpb246XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSBcImNvbGxlY3Rpb25cIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSBFeGNlcHRpb25Bcmd1bWVudC5saXN0OlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyID0gXCJsaXN0XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgRXhjZXB0aW9uQXJndW1lbnQubWF0Y2g6XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSBcIm1hdGNoXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgRXhjZXB0aW9uQXJndW1lbnQuY29udmVydGVyOlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyID0gXCJjb252ZXJ0ZXJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSBFeGNlcHRpb25Bcmd1bWVudC5xdWV1ZTpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9IFwicXVldWVcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSBFeGNlcHRpb25Bcmd1bWVudC5zdGFjazpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9IFwic3RhY2tcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSBFeGNlcHRpb25Bcmd1bWVudC5jYXBhY2l0eTpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9IFwiY2FwYWNpdHlcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSBFeGNlcHRpb25Bcmd1bWVudC5pbmRleDpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9IFwiaW5kZXhcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSBFeGNlcHRpb25Bcmd1bWVudC5zdGFydEluZGV4OlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyID0gXCJzdGFydEluZGV4XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgRXhjZXB0aW9uQXJndW1lbnQuQHZhbHVlOlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyID0gXCJ2YWx1ZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIEV4Y2VwdGlvbkFyZ3VtZW50LmNvdW50OlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyID0gXCJjb3VudFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIEV4Y2VwdGlvbkFyZ3VtZW50LmFycmF5SW5kZXg6XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSBcImFycmF5SW5kZXhcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSBFeGNlcHRpb25Bcmd1bWVudC5uYW1lOlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyID0gXCJuYW1lXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgRXhjZXB0aW9uQXJndW1lbnQubW9kZTpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9IFwibW9kZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIEV4Y2VwdGlvbkFyZ3VtZW50Lml0ZW06XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSBcIml0ZW1cIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSBFeGNlcHRpb25Bcmd1bWVudC5vcHRpb25zOlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyID0gXCJvcHRpb25zXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgRXhjZXB0aW9uQXJndW1lbnQudmlldzpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9IFwidmlld1wiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIEV4Y2VwdGlvbkFyZ3VtZW50LnNvdXJjZUJ5dGVzVG9Db3B5OlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyID0gXCJzb3VyY2VCeXRlc1RvQ29weVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5FbXB0eTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHN0cjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHN0YXRpYyBzdHJpbmcgR2V0UmVzb3VyY2VOYW1lKEV4Y2VwdGlvblJlc291cmNlIHJlc291cmNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgc3RyaW5nIHN0ciA9IG51bGw7XHJcbiAgICAgICAgICAgIHN3aXRjaCAocmVzb3VyY2UpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgRXhjZXB0aW9uUmVzb3VyY2UuQXJndW1lbnRfSW1wbGVtZW50SUNvbXBhcmFibGU6XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSBcIkFyZ3VtZW50X0ltcGxlbWVudElDb21wYXJhYmxlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgRXhjZXB0aW9uUmVzb3VyY2UuQXJndW1lbnRfSW52YWxpZFR5cGU6XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSBcIkFyZ3VtZW50X0ludmFsaWRUeXBlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgRXhjZXB0aW9uUmVzb3VyY2UuQXJndW1lbnRfSW52YWxpZEFyZ3VtZW50Rm9yQ29tcGFyaXNvbjpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9IFwiQXJndW1lbnRfSW52YWxpZEFyZ3VtZW50Rm9yQ29tcGFyaXNvblwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIEV4Y2VwdGlvblJlc291cmNlLkFyZ3VtZW50X0ludmFsaWRSZWdpc3RyeUtleVBlcm1pc3Npb25DaGVjazpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9IFwiQXJndW1lbnRfSW52YWxpZFJlZ2lzdHJ5S2V5UGVybWlzc2lvbkNoZWNrXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgRXhjZXB0aW9uUmVzb3VyY2UuQXJndW1lbnRPdXRPZlJhbmdlX05lZWROb25OZWdOdW06XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSBcIkFyZ3VtZW50T3V0T2ZSYW5nZV9OZWVkTm9uTmVnTnVtXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgRXhjZXB0aW9uUmVzb3VyY2UuQXJnX0FycmF5UGx1c09mZlRvb1NtYWxsOlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyID0gXCJBcmdfQXJyYXlQbHVzT2ZmVG9vU21hbGxcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSBFeGNlcHRpb25SZXNvdXJjZS5BcmdfTm9uWmVyb0xvd2VyQm91bmQ6XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSBcIkFyZ19Ob25aZXJvTG93ZXJCb3VuZFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIEV4Y2VwdGlvblJlc291cmNlLkFyZ19SYW5rTXVsdGlEaW1Ob3RTdXBwb3J0ZWQ6XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSBcIkFyZ19SYW5rTXVsdGlEaW1Ob3RTdXBwb3J0ZWRcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSBFeGNlcHRpb25SZXNvdXJjZS5BcmdfUmVnS2V5RGVsSGl2ZTpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9IFwiQXJnX1JlZ0tleURlbEhpdmVcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSBFeGNlcHRpb25SZXNvdXJjZS5BcmdfUmVnS2V5U3RyTGVuQnVnOlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyID0gXCJBcmdfUmVnS2V5U3RyTGVuQnVnXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgRXhjZXB0aW9uUmVzb3VyY2UuQXJnX1JlZ1NldFN0ckFyck51bGw6XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSBcIkFyZ19SZWdTZXRTdHJBcnJOdWxsXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgRXhjZXB0aW9uUmVzb3VyY2UuQXJnX1JlZ1NldE1pc21hdGNoZWRLaW5kOlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyID0gXCJBcmdfUmVnU2V0TWlzbWF0Y2hlZEtpbmRcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSBFeGNlcHRpb25SZXNvdXJjZS5BcmdfUmVnU3ViS2V5QWJzZW50OlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyID0gXCJBcmdfUmVnU3ViS2V5QWJzZW50XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgRXhjZXB0aW9uUmVzb3VyY2UuQXJnX1JlZ1N1YktleVZhbHVlQWJzZW50OlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyID0gXCJBcmdfUmVnU3ViS2V5VmFsdWVBYnNlbnRcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSBFeGNlcHRpb25SZXNvdXJjZS5Bcmd1bWVudF9BZGRpbmdEdXBsaWNhdGU6XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSBcIkFyZ3VtZW50X0FkZGluZ0R1cGxpY2F0ZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIEV4Y2VwdGlvblJlc291cmNlLlNlcmlhbGl6YXRpb25fSW52YWxpZE9uRGVzZXI6XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSBcIlNlcmlhbGl6YXRpb25fSW52YWxpZE9uRGVzZXJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSBFeGNlcHRpb25SZXNvdXJjZS5TZXJpYWxpemF0aW9uX01pc3NpbmdLZXlzOlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyID0gXCJTZXJpYWxpemF0aW9uX01pc3NpbmdLZXlzXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgRXhjZXB0aW9uUmVzb3VyY2UuU2VyaWFsaXphdGlvbl9OdWxsS2V5OlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyID0gXCJTZXJpYWxpemF0aW9uX051bGxLZXlcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSBFeGNlcHRpb25SZXNvdXJjZS5Bcmd1bWVudF9JbnZhbGlkQXJyYXlUeXBlOlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyID0gXCJBcmd1bWVudF9JbnZhbGlkQXJyYXlUeXBlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgRXhjZXB0aW9uUmVzb3VyY2UuTm90U3VwcG9ydGVkX0tleUNvbGxlY3Rpb25TZXQ6XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSBcIk5vdFN1cHBvcnRlZF9LZXlDb2xsZWN0aW9uU2V0XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgRXhjZXB0aW9uUmVzb3VyY2UuTm90U3VwcG9ydGVkX1ZhbHVlQ29sbGVjdGlvblNldDpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9IFwiTm90U3VwcG9ydGVkX1ZhbHVlQ29sbGVjdGlvblNldFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIEV4Y2VwdGlvblJlc291cmNlLkFyZ3VtZW50T3V0T2ZSYW5nZV9TbWFsbENhcGFjaXR5OlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyID0gXCJBcmd1bWVudE91dE9mUmFuZ2VfU21hbGxDYXBhY2l0eVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIEV4Y2VwdGlvblJlc291cmNlLkFyZ3VtZW50T3V0T2ZSYW5nZV9JbmRleDpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9IFwiQXJndW1lbnRPdXRPZlJhbmdlX0luZGV4XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgRXhjZXB0aW9uUmVzb3VyY2UuQXJndW1lbnRfSW52YWxpZE9mZkxlbjpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9IFwiQXJndW1lbnRfSW52YWxpZE9mZkxlblwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIEV4Y2VwdGlvblJlc291cmNlLkFyZ3VtZW50X0l0ZW1Ob3RFeGlzdDpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9IFwiQXJndW1lbnRfSXRlbU5vdEV4aXN0XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgRXhjZXB0aW9uUmVzb3VyY2UuQXJndW1lbnRPdXRPZlJhbmdlX0NvdW50OlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyID0gXCJBcmd1bWVudE91dE9mUmFuZ2VfQ291bnRcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSBFeGNlcHRpb25SZXNvdXJjZS5Bcmd1bWVudE91dE9mUmFuZ2VfSW52YWxpZFRocmVzaG9sZDpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9IFwiQXJndW1lbnRPdXRPZlJhbmdlX0ludmFsaWRUaHJlc2hvbGRcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSBFeGNlcHRpb25SZXNvdXJjZS5Bcmd1bWVudE91dE9mUmFuZ2VfTGlzdEluc2VydDpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9IFwiQXJndW1lbnRPdXRPZlJhbmdlX0xpc3RJbnNlcnRcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSBFeGNlcHRpb25SZXNvdXJjZS5Ob3RTdXBwb3J0ZWRfUmVhZE9ubHlDb2xsZWN0aW9uOlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyID0gXCJOb3RTdXBwb3J0ZWRfUmVhZE9ubHlDb2xsZWN0aW9uXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgRXhjZXB0aW9uUmVzb3VyY2UuSW52YWxpZE9wZXJhdGlvbl9DYW5ub3RSZW1vdmVGcm9tU3RhY2tPclF1ZXVlOlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyID0gXCJJbnZhbGlkT3BlcmF0aW9uX0Nhbm5vdFJlbW92ZUZyb21TdGFja09yUXVldWVcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSBFeGNlcHRpb25SZXNvdXJjZS5JbnZhbGlkT3BlcmF0aW9uX0VtcHR5UXVldWU6XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSBcIkludmFsaWRPcGVyYXRpb25fRW1wdHlRdWV1ZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIEV4Y2VwdGlvblJlc291cmNlLkludmFsaWRPcGVyYXRpb25fRW51bU9wQ2FudEhhcHBlbjpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9IFwiSW52YWxpZE9wZXJhdGlvbl9FbnVtT3BDYW50SGFwcGVuXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgRXhjZXB0aW9uUmVzb3VyY2UuSW52YWxpZE9wZXJhdGlvbl9FbnVtRmFpbGVkVmVyc2lvbjpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9IFwiSW52YWxpZE9wZXJhdGlvbl9FbnVtRmFpbGVkVmVyc2lvblwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIEV4Y2VwdGlvblJlc291cmNlLkludmFsaWRPcGVyYXRpb25fRW1wdHlTdGFjazpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9IFwiSW52YWxpZE9wZXJhdGlvbl9FbXB0eVN0YWNrXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgRXhjZXB0aW9uUmVzb3VyY2UuQXJndW1lbnRPdXRPZlJhbmdlX0JpZ2dlclRoYW5Db2xsZWN0aW9uOlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyID0gXCJBcmd1bWVudE91dE9mUmFuZ2VfQmlnZ2VyVGhhbkNvbGxlY3Rpb25cIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSBFeGNlcHRpb25SZXNvdXJjZS5JbnZhbGlkT3BlcmF0aW9uX0VudW1Ob3RTdGFydGVkOlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyID0gXCJJbnZhbGlkT3BlcmF0aW9uX0VudW1Ob3RTdGFydGVkXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgRXhjZXB0aW9uUmVzb3VyY2UuSW52YWxpZE9wZXJhdGlvbl9FbnVtRW5kZWQ6XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSBcIkludmFsaWRPcGVyYXRpb25fRW51bUVuZGVkXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgRXhjZXB0aW9uUmVzb3VyY2UuTm90U3VwcG9ydGVkX1NvcnRlZExpc3ROZXN0ZWRXcml0ZTpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9IFwiTm90U3VwcG9ydGVkX1NvcnRlZExpc3ROZXN0ZWRXcml0ZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIEV4Y2VwdGlvblJlc291cmNlLkludmFsaWRPcGVyYXRpb25fTm9WYWx1ZTpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9IFwiSW52YWxpZE9wZXJhdGlvbl9Ob1ZhbHVlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgRXhjZXB0aW9uUmVzb3VyY2UuSW52YWxpZE9wZXJhdGlvbl9SZWdSZW1vdmVTdWJLZXk6XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSBcIkludmFsaWRPcGVyYXRpb25fUmVnUmVtb3ZlU3ViS2V5XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgRXhjZXB0aW9uUmVzb3VyY2UuU2VjdXJpdHlfUmVnaXN0cnlQZXJtaXNzaW9uOlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyID0gXCJTZWN1cml0eV9SZWdpc3RyeVBlcm1pc3Npb25cIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSBFeGNlcHRpb25SZXNvdXJjZS5VbmF1dGhvcml6ZWRBY2Nlc3NfUmVnaXN0cnlOb1dyaXRlOlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyID0gXCJVbmF1dGhvcml6ZWRBY2Nlc3NfUmVnaXN0cnlOb1dyaXRlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgRXhjZXB0aW9uUmVzb3VyY2UuT2JqZWN0RGlzcG9zZWRfUmVnS2V5Q2xvc2VkOlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyID0gXCJPYmplY3REaXNwb3NlZF9SZWdLZXlDbG9zZWRcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSBFeGNlcHRpb25SZXNvdXJjZS5Ob3RTdXBwb3J0ZWRfSW5Db21wYXJhYmxlVHlwZTpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9IFwiTm90U3VwcG9ydGVkX0luQ29tcGFyYWJsZVR5cGVcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSBFeGNlcHRpb25SZXNvdXJjZS5Bcmd1bWVudF9JbnZhbGlkUmVnaXN0cnlPcHRpb25zQ2hlY2s6XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSBcIkFyZ3VtZW50X0ludmFsaWRSZWdpc3RyeU9wdGlvbnNDaGVja1wiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIEV4Y2VwdGlvblJlc291cmNlLkFyZ3VtZW50X0ludmFsaWRSZWdpc3RyeVZpZXdDaGVjazpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9IFwiQXJndW1lbnRfSW52YWxpZFJlZ2lzdHJ5Vmlld0NoZWNrXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RyaW5nLkVtcHR5O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gc3RyO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIGludGVybmFsIHN0YXRpYyB2b2lkIElmTnVsbEFuZE51bGxzQXJlSWxsZWdhbFRoZW5UaHJvdzxUPihvYmplY3QgdmFsdWUsIEV4Y2VwdGlvbkFyZ3VtZW50IGFyZ05hbWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAodmFsdWUgPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRlZmF1bHQoVCkgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBUaHJvd0hlbHBlci5UaHJvd0FyZ3VtZW50TnVsbEV4Y2VwdGlvbihhcmdOYW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIGludGVybmFsIHN0YXRpYyB2b2lkIFRocm93QXJndW1lbnRFeGNlcHRpb24oRXhjZXB0aW9uUmVzb3VyY2UgcmVzb3VyY2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnRFeGNlcHRpb24oRW52aXJvbm1lbnQuR2V0UmVzb3VyY2VTdHJpbmcoVGhyb3dIZWxwZXIuR2V0UmVzb3VyY2VOYW1lKHJlc291cmNlKSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgc3RhdGljIHZvaWQgVGhyb3dBcmd1bWVudEV4Y2VwdGlvbihFeGNlcHRpb25SZXNvdXJjZSByZXNvdXJjZSwgRXhjZXB0aW9uQXJndW1lbnQgYXJndW1lbnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnRFeGNlcHRpb24oRW52aXJvbm1lbnQuR2V0UmVzb3VyY2VTdHJpbmcoVGhyb3dIZWxwZXIuR2V0UmVzb3VyY2VOYW1lKHJlc291cmNlKSksIFRocm93SGVscGVyLkdldEFyZ3VtZW50TmFtZShhcmd1bWVudCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgc3RhdGljIHZvaWQgVGhyb3dBcmd1bWVudE51bGxFeGNlcHRpb24oRXhjZXB0aW9uQXJndW1lbnQgYXJndW1lbnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnROdWxsRXhjZXB0aW9uKFRocm93SGVscGVyLkdldEFyZ3VtZW50TmFtZShhcmd1bWVudCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgc3RhdGljIHZvaWQgVGhyb3dBcmd1bWVudE91dE9mUmFuZ2VFeGNlcHRpb24oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgVGhyb3dIZWxwZXIuVGhyb3dBcmd1bWVudE91dE9mUmFuZ2VFeGNlcHRpb24oRXhjZXB0aW9uQXJndW1lbnQuaW5kZXgsIEV4Y2VwdGlvblJlc291cmNlLkFyZ3VtZW50T3V0T2ZSYW5nZV9JbmRleCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCBzdGF0aWMgdm9pZCBUaHJvd0FyZ3VtZW50T3V0T2ZSYW5nZUV4Y2VwdGlvbihFeGNlcHRpb25Bcmd1bWVudCBhcmd1bWVudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudE91dE9mUmFuZ2VFeGNlcHRpb24oVGhyb3dIZWxwZXIuR2V0QXJndW1lbnROYW1lKGFyZ3VtZW50KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCBzdGF0aWMgdm9pZCBUaHJvd0FyZ3VtZW50T3V0T2ZSYW5nZUV4Y2VwdGlvbihFeGNlcHRpb25Bcmd1bWVudCBhcmd1bWVudCwgRXhjZXB0aW9uUmVzb3VyY2UgcmVzb3VyY2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAvL2lmICghQ29tcGF0aWJpbGl0eVN3aXRjaGVzLklzQXBwRWFybGllclRoYW5XaW5kb3dzUGhvbmU4KVxyXG4gICAgICAgICAgICAvL3tcclxuICAgICAgICAgICAgLy8gICAgdGhyb3cgbmV3IEFyZ3VtZW50T3V0T2ZSYW5nZUV4Y2VwdGlvbihUaHJvd0hlbHBlci5HZXRBcmd1bWVudE5hbWUoYXJndW1lbnQpLCBFbnZpcm9ubWVudC5HZXRSZXNvdXJjZVN0cmluZyhUaHJvd0hlbHBlci5HZXRSZXNvdXJjZU5hbWUocmVzb3VyY2UpKSk7XHJcbiAgICAgICAgICAgIC8vfVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnRPdXRPZlJhbmdlRXhjZXB0aW9uKFRocm93SGVscGVyLkdldEFyZ3VtZW50TmFtZShhcmd1bWVudCksIHN0cmluZy5FbXB0eSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCBzdGF0aWMgdm9pZCBUaHJvd0ludmFsaWRPcGVyYXRpb25FeGNlcHRpb24oRXhjZXB0aW9uUmVzb3VyY2UgcmVzb3VyY2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkV4Y2VwdGlvbihFbnZpcm9ubWVudC5HZXRSZXNvdXJjZVN0cmluZyhUaHJvd0hlbHBlci5HZXRSZXNvdXJjZU5hbWUocmVzb3VyY2UpKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCBzdGF0aWMgdm9pZCBUaHJvd0tleU5vdEZvdW5kRXhjZXB0aW9uKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBLZXlOb3RGb3VuZEV4Y2VwdGlvbigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgc3RhdGljIHZvaWQgVGhyb3dOb3RTdXBwb3J0ZWRFeGNlcHRpb24oRXhjZXB0aW9uUmVzb3VyY2UgcmVzb3VyY2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkV4Y2VwdGlvbihFbnZpcm9ubWVudC5HZXRSZXNvdXJjZVN0cmluZyhUaHJvd0hlbHBlci5HZXRSZXNvdXJjZU5hbWUocmVzb3VyY2UpKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCBzdGF0aWMgdm9pZCBUaHJvd09iamVjdERpc3Bvc2VkRXhjZXB0aW9uKHN0cmluZyBvYmplY3ROYW1lLCBFeGNlcHRpb25SZXNvdXJjZSByZXNvdXJjZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBPYmplY3REaXNwb3NlZEV4Y2VwdGlvbihvYmplY3ROYW1lLCBFbnZpcm9ubWVudC5HZXRSZXNvdXJjZVN0cmluZyhUaHJvd0hlbHBlci5HZXRSZXNvdXJjZU5hbWUocmVzb3VyY2UpKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCBzdGF0aWMgdm9pZCBUaHJvd1NlY3VyaXR5RXhjZXB0aW9uKEV4Y2VwdGlvblJlc291cmNlIHJlc291cmNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFNlY3VyaXR5RXhjZXB0aW9uKEVudmlyb25tZW50LkdldFJlc291cmNlU3RyaW5nKFRocm93SGVscGVyLkdldFJlc291cmNlTmFtZShyZXNvdXJjZSkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHN0YXRpYyB2b2lkIFRocm93U2VyaWFsaXphdGlvbkV4Y2VwdGlvbihFeGNlcHRpb25SZXNvdXJjZSByZXNvdXJjZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBTZXJpYWxpemF0aW9uRXhjZXB0aW9uKEVudmlyb25tZW50LkdldFJlc291cmNlU3RyaW5nKFRocm93SGVscGVyLkdldFJlc291cmNlTmFtZShyZXNvdXJjZSkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHN0YXRpYyB2b2lkIFRocm93VW5hdXRob3JpemVkQWNjZXNzRXhjZXB0aW9uKEV4Y2VwdGlvblJlc291cmNlIHJlc291cmNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFVuYXV0aG9yaXplZEFjY2Vzc0V4Y2VwdGlvbihFbnZpcm9ubWVudC5HZXRSZXNvdXJjZVN0cmluZyhUaHJvd0hlbHBlci5HZXRSZXNvdXJjZU5hbWUocmVzb3VyY2UpKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCBzdGF0aWMgdm9pZCBUaHJvd1dyb25nS2V5VHlwZUFyZ3VtZW50RXhjZXB0aW9uKG9iamVjdCBrZXksIFR5cGUgdGFyZ2V0VHlwZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudEV4Y2VwdGlvbihcIldyb25nS2V5VHlwZUFyZ3VtZW50RXhjZXB0aW9uLiBAa2V5OlwiICsga2V5ICsgXCIgQHRhcmdldFR5cGU6XCIgKyB0YXJnZXRUeXBlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHN0YXRpYyB2b2lkIFRocm93V3JvbmdWYWx1ZVR5cGVBcmd1bWVudEV4Y2VwdGlvbihvYmplY3QgdmFsdWUsIFR5cGUgdGFyZ2V0VHlwZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudEV4Y2VwdGlvbihcIldyb25nVmFsdWVUeXBlQXJndW1lbnRFeGNlcHRpb24uIEB2YWx1ZTpcIiArIHZhbHVlICsgXCIgQHRhcmdldFR5cGU6XCIgKyB0YXJnZXRUeXBlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59IiwidXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBCcmlkZ2UuQ3VzdG9tVUlNYXJrdXAuVG9rZW5pemVycztcclxudXNpbmcgQnJpZGdlLkh0bWw1O1xyXG5cclxubmFtZXNwYWNlIFN5c3RlbS5XaW5kb3dzLkRhdGFcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEJpbmRpbmdJbmZvXHJcbiAgICB7XHJcbiAgICAgICAgI3JlZ2lvbiBTdGF0aWMgRmllbGRzXHJcbiAgICAgICAgc3RhdGljIHJlYWRvbmx5IFRva2VuaXplciBCaW5kaW5nRXhwcmVzc2lvblRva2VuaXplciA9IG5ldyBUb2tlbml6ZXJcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFRva2VuRGVmaW5pdGlvbnMgPSBCaW5kaW5nRXhwcmVzc2lvblRva2VuRGVmaW5pdGlvbnMuVmFsdWVcclxuICAgICAgICB9O1xyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBQdWJsaWMgUHJvcGVydGllc1xyXG4gICAgICAgIHB1YmxpYyBCaW5kaW5nTW9kZSBCaW5kaW5nTW9kZSB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIElWYWx1ZUNvbnZlcnRlciBDb252ZXJ0ZXIgeyBnZXQ7IHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb2JqZWN0IFNvdXJjZSB7IGdldDsgc2V0OyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBQcm9wZXJ0eVBhdGggU291cmNlUGF0aCB7IGdldDsgc2V0OyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvYmplY3QgVGFyZ2V0IHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIFByb3BlcnR5UGF0aCBUYXJnZXRQYXRoIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gUHVibGljIE1ldGhvZHNcclxuICAgICAgICBwdWJsaWMgc3RhdGljIEJpbmRpbmdJbmZvIFRyeVBhcnNlRXhwcmVzc2lvbihzdHJpbmcgdmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAodmFsdWUgPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUuVHJpbSgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHZhbHVlLlN0YXJ0c1dpdGgoXCJ7XCIpID09IGZhbHNlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHZhbHVlLkVuZHNXaXRoKFwifVwiKSA9PSBmYWxzZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHN0cmluZyBzb3VyY2VQYXRoID0gbnVsbDtcclxuICAgICAgICAgICAgdmFyIGJpbmRpbmdNb2RlID0gQmluZGluZ01vZGUuVHdvV2F5O1xyXG4gICAgICAgICAgICBJVmFsdWVDb252ZXJ0ZXIgdmFsdWVDb252ZXJ0ZXIgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgdmFyIHRva2VucyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8Z2xvYmFsOjpCcmlkZ2UuQ3VzdG9tVUlNYXJrdXAuVG9rZW5pemVycy5Ub2tlbj4oQmluZGluZ0V4cHJlc3Npb25Ub2tlbml6ZXIuVG9rZW5pemUodmFsdWUpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QnJpZGdlLkN1c3RvbVVJTWFya3VwLlRva2VuaXplcnMuVG9rZW4sIGJvb2w+KSh0ID0+IHQuVmFsdWUgIT0gXCIgXCIpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgdmFyIGxlbiA9IHRva2Vucy5Db3VudDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBsZW47IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRva2VuID0gdG9rZW5zW2ldO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0b2tlbi5WYWx1ZS5Ub1VwcGVyQ2FzZSgpID09IFwiQklORElOR1wiIHx8IHRva2VuLlZhbHVlID09IFwiIFwiKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChzb3VyY2VQYXRoID09IG51bGwgJiYgdG9rZW4uVG9rZW5UeXBlID09IFRva2VuVHlwZS5JZGVudGlmaWVyKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZVBhdGggPSBSZWFkUGF0aCh0b2tlbnMsIHJlZiBpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRva2VuLlZhbHVlLlRvVXBwZXJDYXNlKCkgPT0gXCJNT0RFXCIpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaSsrOyAvLyBza2lwIG1vZGVcclxuICAgICAgICAgICAgICAgICAgICBpKys7IC8vIHNraXAgYXNzaW5nbWVudFxyXG5cclxuICAgICAgICAgICAgICAgICAgICBFbnVtLlRyeVBhcnNlPGdsb2JhbDo6U3lzdGVtLldpbmRvd3MuRGF0YS5CaW5kaW5nTW9kZT4odG9rZW5zW2ldLlZhbHVlLCBvdXQgYmluZGluZ01vZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0b2tlbi5WYWx1ZS5Ub1VwcGVyQ2FzZSgpID09IFwiQ09OVkVSVEVSXCIpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaSsrOyAvLyBza2lwIGNvbnZlcnRlclxyXG4gICAgICAgICAgICAgICAgICAgIGkrKzsgLy8gc2tpcCBhc3NpbmdtZW50XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb252ZXJ0ZXJUeXBlRnVsbE5hbWUgPSBSZWFkUGF0aCh0b2tlbnMsIHJlZiBpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnZlcnRlclR5cGUgPSBUeXBlLkdldFR5cGUoY29udmVydGVyVHlwZUZ1bGxOYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29udmVydGVyVHlwZSA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdNZW1iZXJFeGNlcHRpb24oY29udmVydGVyVHlwZUZ1bGxOYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlQ29udmVydGVyID0gKElWYWx1ZUNvbnZlcnRlcikgQWN0aXZhdG9yLkNyZWF0ZUluc3RhbmNlKGNvbnZlcnRlclR5cGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEJpbmRpbmdJbmZvXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFNvdXJjZVBhdGggPSBzb3VyY2VQYXRoLFxyXG4gICAgICAgICAgICAgICAgQmluZGluZ01vZGUgPSBiaW5kaW5nTW9kZSxcclxuICAgICAgICAgICAgICAgIENvbnZlcnRlciA9IHZhbHVlQ29udmVydGVyXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBDb25uZWN0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIENvbm5lY3RTb3VyY2VUb1RhcmdldCgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKEJpbmRpbmdNb2RlID09IEJpbmRpbmdNb2RlLlR3b1dheSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgQ29ubmVjdFRhcmdldFRvU291cmNlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBUYXJnZXRQYXRoLldhbGsoVGFyZ2V0KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgVXBkYXRlVGFyZ2V0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdmlydHVhbCB2b2lkIFVwZGF0ZVNvdXJjZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoU291cmNlUGF0aC5Jc05vdFJlYWR5VG9VcGRhdGUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgU291cmNlUGF0aC5TZXRQcm9wZXJ0eVZhbHVlKEdldFRhcmdldFZhbHVlKCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgdm9pZCBVcGRhdGVUYXJnZXQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKFRhcmdldFBhdGguSXNOb3RSZWFkeVRvVXBkYXRlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IFNvdXJjZVBhdGguR2V0UHJvcGVydHlWYWx1ZSgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKENvbnZlcnRlciAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IENvbnZlcnRlci5Db252ZXJ0KHZhbHVlLCBudWxsLCBudWxsLCBudWxsKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgVGFyZ2V0UGF0aC5TZXRQcm9wZXJ0eVZhbHVlKHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIE1ldGhvZHNcclxuICAgICAgICBwcm90ZWN0ZWQgdmlydHVhbCB2b2lkIENvbm5lY3RTb3VyY2VUb1RhcmdldCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBTb3VyY2VQYXRoLkxpc3RlbihTb3VyY2UsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pVXBkYXRlVGFyZ2V0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCB2aXJ0dWFsIHZvaWQgQ29ubmVjdFRhcmdldFRvU291cmNlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFRhcmdldFBhdGguTGlzdGVuKFRhcmdldCwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbilVcGRhdGVTb3VyY2UpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHZpcnR1YWwgb2JqZWN0IEdldFRhcmdldFZhbHVlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBUYXJnZXRQYXRoLkdldFByb3BlcnR5VmFsdWUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBzdHJpbmcgUmVhZFBhdGgoSVJlYWRPbmx5TGlzdDxUb2tlbj4gdG9rZW5zLCByZWYgaW50IGkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgcGF0aCA9IFwiXCI7XHJcbiAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdG9rZW4gPSB0b2tlbnNbaV07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRva2VuLlRva2VuVHlwZSA9PSBUb2tlblR5cGUuSWRlbnRpZmllciB8fFxyXG4gICAgICAgICAgICAgICAgICAgIHRva2VuLlRva2VuVHlwZSA9PSBUb2tlblR5cGUuRG90KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhdGggKz0gdG9rZW4uVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGktLTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHBhdGg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuICAgIH1cclxufSIsInVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG5cclxuXHJcbm5hbWVzcGFjZSBTeXN0ZW0uV2luZG93c1xyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgRGVwZW5kZW5jeVByb3BlcnR5XHJcbiAgICB7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSUxpc3Q8RGVwZW5kZW5jeVByb3BlcnR5PiBHZXRBbGxQcm9wZXJ0aWVzKFR5cGUgb3duZXJUeXBlLGJvb2wgYWRkQmFzZSA9IHRydWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKG93bmVyVHlwZSA9PSBudWxsIHx8IG93bmVyVHlwZSA9PSB0eXBlb2Yob2JqZWN0KSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBpdGVtcyA9IG5ldyBMaXN0PERlcGVuZGVuY3lQcm9wZXJ0eT4oKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBrZXkgPSBDcmVhdGVLZXkob3duZXJUeXBlLCBudWxsKTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGNhY2hlS2V5IGluIENhY2hlLktleXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChjYWNoZUtleS5TdGFydHNXaXRoKGtleSkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbXMuQWRkKENhY2hlW2NhY2hlS2V5XSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChhZGRCYXNlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYmFzZVZhbHVlcyA9IEdldEFsbFByb3BlcnRpZXMob3duZXJUeXBlLkJhc2VUeXBlKTtcclxuICAgICAgICAgICAgICAgIGlmIChiYXNlVmFsdWVzICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbXMuQWRkUmFuZ2UoYmFzZVZhbHVlcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBpdGVtcztcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBpbnRlcm5hbCBzdHJpbmcgS2V5IHtnZXR7cmV0dXJuIENyZWF0ZUtleShPd25lclR5cGUuRnVsbE5hbWUsIE5hbWUpO319XHJcblxyXG4gICAgICAgIHN0YXRpYyBzdHJpbmcgQ3JlYXRlS2V5KHN0cmluZyBvd25lclR5cGVGdWxsTmFtZSwgc3RyaW5nIHByb3BlcnR5TmFtZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBvd25lclR5cGVGdWxsTmFtZSArIFwiLT5cIiArIHByb3BlcnR5TmFtZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc3RhdGljIHN0cmluZyBDcmVhdGVLZXkoVHlwZSBvd25lclR5cGUsIHN0cmluZyBwcm9wZXJ0eU5hbWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAob3duZXJUeXBlID09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudE51bGxFeGNlcHRpb24oXCJvd25lclR5cGVcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcblxyXG4gICAgICAgICAgICByZXR1cm4gQ3JlYXRlS2V5KG93bmVyVHlwZS5GdWxsTmFtZSwgcHJvcGVydHlOYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc3RhdGljIERlcGVuZGVuY3lQcm9wZXJ0eSBUcnlGaW5kKFR5cGUgb3duZXJUeXBlLCBzdHJpbmcgcHJvcGVydHlOYW1lKVxyXG4gICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBrZXkgPSBDcmVhdGVLZXkob3duZXJUeXBlLCBwcm9wZXJ0eU5hbWUpO1xyXG4gICAgICAgICAgICBEZXBlbmRlbmN5UHJvcGVydHkgcHJvcGVydHkgPSBudWxsO1xyXG4gICAgICAgICAgICBDYWNoZS5UcnlHZXRWYWx1ZShrZXksIG91dCBwcm9wZXJ0eSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcHJvcGVydHk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgRGVwZW5kZW5jeVByb3BlcnR5IFNlYXJjaChUeXBlIG93bmVyVHlwZSwgc3RyaW5nIHByb3BlcnR5TmFtZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAob3duZXJUeXBlID09IG51bGwgfHwgb3duZXJUeXBlID09IHR5cGVvZihvYmplY3QpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBkZXBlbmRlbmN5UHJvcGVydHkgPSBUcnlGaW5kKG93bmVyVHlwZSwgcHJvcGVydHlOYW1lKTtcclxuICAgICAgICAgICAgICAgIGlmIChkZXBlbmRlbmN5UHJvcGVydHkgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVwZW5kZW5jeVByb3BlcnR5O1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIG93bmVyVHlwZSA9IG93bmVyVHlwZS5CYXNlVHlwZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBOYW1lIHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIFR5cGUgT3duZXJUeXBlIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVHlwZSBQcm9wZXJ0eVR5cGUgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBQcm9wZXJ0eU1ldGFkYXRhIFByb3BlcnR5TWV0YWRhdGEgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHN0YXRpYyB2b2lkIFRyeUludm9rZU9uUHJvcGVydHlDaGFuZ2UoRGVwZW5kZW5jeU9iamVjdCBpbnN0YW5jZSwgc3RyaW5nIG5hbWUsIG9iamVjdCBuZXdWYWx1ZSwgb2JqZWN0IG9sZFZhbHVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGRlcGVuZGVuY3lQcm9wZXJ0eSA9IFNlYXJjaChpbnN0YW5jZS5HZXRUeXBlKCksIG5hbWUpO1xyXG4gICAgICAgICAgICBpZiAoZGVwZW5kZW5jeVByb3BlcnR5ID09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoKGdsb2JhbDo6QnJpZGdlLlNjcmlwdC5Ub1RlbXAoXCJrZXkxXCIsZGVwZW5kZW5jeVByb3BlcnR5LlByb3BlcnR5TWV0YWRhdGEpIT1udWxsP2dsb2JhbDo6QnJpZGdlLlNjcmlwdC5Gcm9tVGVtcDxQcm9wZXJ0eU1ldGFkYXRhPihcImtleTFcIikuUHJvcGVydHlDaGFuZ2VkQ2FsbGJhY2s6KFByb3BlcnR5Q2hhbmdlZENhbGxiYWNrKW51bGwpID09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZ2xvYmFsOjpCcmlkZ2UuU2NyaXB0LlRvVGVtcChcImtleTJcIixkZXBlbmRlbmN5UHJvcGVydHkuUHJvcGVydHlNZXRhZGF0YSkhPW51bGw/Z2xvYmFsOjpCcmlkZ2UuU2NyaXB0LkZyb21MYW1iZGEoKCk9Pmdsb2JhbDo6QnJpZGdlLlNjcmlwdC5Gcm9tVGVtcDxQcm9wZXJ0eU1ldGFkYXRhPihcImtleTJcIikuUHJvcGVydHlDaGFuZ2VkQ2FsbGJhY2suSW52b2tlKGluc3RhbmNlLCBuZXcgRGVwZW5kZW5jeVByb3BlcnR5Q2hhbmdlZEV2ZW50QXJncyhuYW1lLCBuZXdWYWx1ZSwgb2xkVmFsdWUpKSk6bnVsbDtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBzdGF0aWMgcmVhZG9ubHkgRGljdGlvbmFyeTxzdHJpbmcsIERlcGVuZGVuY3lQcm9wZXJ0eT4gQ2FjaGUgPSBuZXcgRGljdGlvbmFyeTxzdHJpbmcsIERlcGVuZGVuY3lQcm9wZXJ0eT4oKTtcclxuXHJcbiAgICAgICAgc3RhdGljIHZvaWQgUmVnaXN0ZXIoRGVwZW5kZW5jeVByb3BlcnR5IGRlc2NyaXB0aW9uKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKENhY2hlLkNvbnRhaW5zS2V5KGRlc2NyaXB0aW9uLktleSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudEV4Y2VwdGlvbihkZXNjcmlwdGlvbi5LZXkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBDYWNoZVtkZXNjcmlwdGlvbi5LZXldID0gZGVzY3JpcHRpb247XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBEZXBlbmRlbmN5UHJvcGVydHkgUmVnaXN0ZXIoc3RyaW5nIG5hbWUsIFR5cGUgcHJvcGVydHlUeXBlLCBUeXBlIG93bmVyVHlwZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBkZXBlbmRlbmN5UHJvcGVydHkgPSBuZXcgRGVwZW5kZW5jeVByb3BlcnR5XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIE5hbWUgPSBuYW1lLFxyXG4gICAgICAgICAgICAgICAgUHJvcGVydHlUeXBlID0gcHJvcGVydHlUeXBlLFxyXG4gICAgICAgICAgICAgICAgT3duZXJUeXBlID0gb3duZXJUeXBlLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBSZWdpc3RlcihkZXBlbmRlbmN5UHJvcGVydHkpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGRlcGVuZGVuY3lQcm9wZXJ0eTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgRGVwZW5kZW5jeVByb3BlcnR5IFJlZ2lzdGVyKHN0cmluZyBuYW1lLCBUeXBlIHByb3BlcnR5VHlwZSwgVHlwZSBvd25lclR5cGUsIFByb3BlcnR5TWV0YWRhdGEgcHJvcGVydHlNZXRhZGF0YSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBkZXBlbmRlbmN5UHJvcGVydHkgPSBuZXcgRGVwZW5kZW5jeVByb3BlcnR5XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIE5hbWUgPSBuYW1lLFxyXG4gICAgICAgICAgICAgICAgUHJvcGVydHlUeXBlID0gcHJvcGVydHlUeXBlLFxyXG4gICAgICAgICAgICAgICAgT3duZXJUeXBlID0gb3duZXJUeXBlLFxyXG4gICAgICAgICAgICAgICAgUHJvcGVydHlNZXRhZGF0YSA9IHByb3BlcnR5TWV0YWRhdGFcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgUmVnaXN0ZXIoZGVwZW5kZW5jeVByb3BlcnR5KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBkZXBlbmRlbmN5UHJvcGVydHk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxufSIsInVzaW5nIEJyaWRnZS5IdG1sNTtcclxudXNpbmcgQnJpZGdlLmpRdWVyeTI7XHJcblxyXG5uYW1lc3BhY2UgU3lzdGVtLldpbmRvd3Ncclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBET01cclxuICAgIHtcclxuICAgICAgICAjcmVnaW9uIFB1YmxpYyBQcm9wZXJ0aWVzXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBqUXVlcnkgYm9keSB7Z2V0e3JldHVybiBuZXcgalF1ZXJ5KFwiYm9keVwiKTt9fVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgalF1ZXJ5IGhlYWQge2dldHtyZXR1cm4gbmV3IGpRdWVyeShcImhlYWRcIik7fX1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gUHVibGljIE1ldGhvZHNcclxuICAgICAgICBwdWJsaWMgc3RhdGljIGpRdWVyeSBhKHN0cmluZyBjbGFzc05hbWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gQ3JlYXRlRWxlbWVudChcImFcIiwgY2xhc3NOYW1lKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgalF1ZXJ5IGJ1dHRvbihzdHJpbmcgY2xhc3NOYW1lKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIENyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwgY2xhc3NOYW1lKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgalF1ZXJ5IEJ5SWQoc3RyaW5nIGlkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBqUXVlcnkoRG9jdW1lbnQuR2V0RWxlbWVudEJ5SWQoaWQpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgalF1ZXJ5IENyZWF0ZUVsZW1lbnQoc3RyaW5nIHRhZ05hbWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IGpRdWVyeShEb2N1bWVudC5DcmVhdGVFbGVtZW50KHRhZ05hbWUpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgalF1ZXJ5IENyZWF0ZUVsZW1lbnQoc3RyaW5nIHRhZ05hbWUsIHN0cmluZyBjbGFzc05hbWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IGpRdWVyeShEb2N1bWVudC5DcmVhdGVFbGVtZW50KHRhZ05hbWUpKS5BZGRDbGFzcyhjbGFzc05hbWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBqUXVlcnkgZGl2KHN0cmluZyBjbGFzc05hbWUgPSBudWxsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIENyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgY2xhc3NOYW1lKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgalF1ZXJ5IGgxKHN0cmluZyBjbGFzc05hbWUgPSBudWxsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIENyZWF0ZUVsZW1lbnQoXCJoMVwiLCBjbGFzc05hbWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBqUXVlcnkgaDIoc3RyaW5nIGNsYXNzTmFtZSA9IG51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gQ3JlYXRlRWxlbWVudChcImgyXCIsIGNsYXNzTmFtZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGpRdWVyeSBoMyhzdHJpbmcgY2xhc3NOYW1lID0gbnVsbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBDcmVhdGVFbGVtZW50KFwiaDNcIiwgY2xhc3NOYW1lKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgalF1ZXJ5IGkoc3RyaW5nIGNsYXNzTmFtZSA9IG51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gQ3JlYXRlRWxlbWVudChcImlcIiwgY2xhc3NOYW1lKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgalF1ZXJ5IGltZyhzdHJpbmcgY2xhc3NOYW1lID0gbnVsbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBDcmVhdGVFbGVtZW50KFwiaW1nXCIsIGNsYXNzTmFtZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGpRdWVyeSBpbnB1dChzdHJpbmcgdHlwZSwgc3RyaW5nIGNsYXNzTmFtZSA9IG51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gQ3JlYXRlRWxlbWVudChcImlucHV0XCIsIGNsYXNzTmFtZSkuQXR0cihcInR5cGVcIiwgdHlwZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGpRdWVyeSBsYWJlbChzdHJpbmcgY2xhc3NOYW1lID0gbnVsbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBDcmVhdGVFbGVtZW50KFwibGFiZWxcIiwgY2xhc3NOYW1lKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgalF1ZXJ5IGxpKHN0cmluZyBjbGFzc05hbWUgPSBudWxsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIENyZWF0ZUVsZW1lbnQoXCJsaVwiLCBjbGFzc05hbWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBqUXVlcnkgdGV4dGFyZWEoc3RyaW5nIGNsYXNzTmFtZSA9IG51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gQ3JlYXRlRWxlbWVudChcInRleHRhcmVhXCIsIGNsYXNzTmFtZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGpRdWVyeSB1bChzdHJpbmcgY2xhc3NOYW1lID0gbnVsbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBDcmVhdGVFbGVtZW50KFwidWxcIiwgY2xhc3NOYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG4gICAgfVxyXG59IiwidXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIEJyaWRnZS5DdXN0b21VSU1hcmt1cC5Db21tb247XHJcbnVzaW5nIEJyaWRnZS5IdG1sNTtcclxudXNpbmcgQnJpZGdlLmpRdWVyeTI7XHJcblxyXG5uYW1lc3BhY2UgU3lzdGVtLldpbmRvd3Ncclxue1xyXG4gICAgcHVibGljIGNsYXNzIEh0bWxCb2R5RWxlbWVudFxyXG4gICAge1xyXG4gICAgICAgIHN0YXRpYyBGcmFtZXdvcmtFbGVtZW50IF92YWx1ZTtcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBGcmFtZXdvcmtFbGVtZW50IFZhbHVlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKF92YWx1ZSA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIF92YWx1ZSA9IG5ldyBIdG1sRWxlbWVudFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3Jvb3QgPSBET00uYm9keVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF92YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEZyYW1ld29ya0VsZW1lbnRFeHRlbnNpb25zXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBUIEF0dHI8VD4odGhpcyBUIGVsZW1lbnQsc3RyaW5nIGF0dHJpYnV0ZU5hbWUsIHN0cmluZyB2YWx1ZSkgd2hlcmUgVDpGcmFtZXdvcmtFbGVtZW50XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBlbGVtZW50Ll9yb290LkF0dHIoYXR0cmlidXRlTmFtZSwgdmFsdWUpO1xyXG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgQXR0cjxUPih0aGlzIFQgZWxlbWVudCwgc3RyaW5nIGF0dHJpYnV0ZU5hbWUpIHdoZXJlIFQgOiBGcmFtZXdvcmtFbGVtZW50XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudC5fcm9vdC5BdHRyKGF0dHJpYnV0ZU5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBodG1sPFQ+KHRoaXMgVCBlbGVtZW50KSB3aGVyZSBUIDogRnJhbWV3b3JrRWxlbWVudFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQuX3Jvb3QuSHRtbCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgVmFsPFQ+KHRoaXMgVCBlbGVtZW50KSB3aGVyZSBUIDogRnJhbWV3b3JrRWxlbWVudFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQuX3Jvb3QuVmFsKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFQgVmFsPFQ+KHRoaXMgVCBlbGVtZW50LHN0cmluZyB2YWx1ZSkgd2hlcmUgVCA6IEZyYW1ld29ya0VsZW1lbnRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgICBlbGVtZW50Ll9yb290LlZhbCh2YWx1ZSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcGFydGlhbCBjbGFzcyBGcmFtZXdvcmtFbGVtZW50XHJcbiAgICB7XHJcbiAgICAgICAgaW50ZXJuYWwgRWxlbWVudCBfZWwge2dldHtyZXR1cm4gX3Jvb3QuR2V0KDApO319XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFJlbmRlckluQm9keSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBIdG1sQm9keUVsZW1lbnQuVmFsdWUuQWRkTG9naWNhbENoaWxkKHRoaXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBGaWVsZHNcclxuICAgICAgICBwcm90ZWN0ZWQgaW50ZXJuYWwgalF1ZXJ5IF9yb290O1xyXG4gICAgICAgIHByb3RlY3RlZCBGcmFtZXdvcmtFbGVtZW50IF9sb2dpY2FsUGFyZW50O1xyXG4gICAgICAgIHByb3RlY3RlZCBGcmFtZXdvcmtFbGVtZW50IF92aXNhdWxQYXJlbnQ7XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIEV2ZW50c1xyXG4gICAgICAgIHByb3RlY3RlZCBldmVudCBBY3Rpb24gQWZ0ZXJDb25uZWN0VG9Mb2dpY2FsUGFyZW50O1xyXG4gICAgICAgIHByb3RlY3RlZCBldmVudCBBY3Rpb24gQWZ0ZXJDb25uZWN0VG9WaXN1YWxQYXJlbnQ7XHJcbiAgICAgICAgcHJvdGVjdGVkIGV2ZW50IEFjdGlvbjxGcmFtZXdvcmtFbGVtZW50PiBBZnRlckxvZ2ljYWxDaGlsZEFkZDtcclxuICAgICAgICBwcm90ZWN0ZWQgZXZlbnQgQWN0aW9uPEZyYW1ld29ya0VsZW1lbnQ+IEJlZm9yZUxvZ2ljYWxDaGlsZEFkZDtcclxuICAgICAgICBwcm90ZWN0ZWQgZXZlbnQgQWN0aW9uPEZyYW1ld29ya0VsZW1lbnQ+IEFmdGVyVmlzdWFsQ2hpbGRBZGQ7XHJcbiAgICAgICAgcHJvdGVjdGVkIGV2ZW50IEFjdGlvbjxGcmFtZXdvcmtFbGVtZW50PiBCZWZvcmVDb25uZWN0VG9Mb2dpY2FsUGFyZW50O1xyXG4gICAgICAgIHByb3RlY3RlZCBldmVudCBBY3Rpb248RnJhbWV3b3JrRWxlbWVudD4gQmVmb3JlQ29ubmVjdFRvVmlzdWFsUGFyZW50O1xyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBQdWJsaWMgUHJvcGVydGllc1xyXG4gICAgICAgIHB1YmxpYyBGcmFtZXdvcmtFbGVtZW50IExvZ2ljYWxQYXJlbnQge2dldHtyZXR1cm4gX2xvZ2ljYWxQYXJlbnQ7fX1cclxuICAgICAgICBwdWJsaWMgRnJhbWV3b3JrRWxlbWVudCBWaXNhdWxQYXJlbnQge2dldHtyZXR1cm4gX3Zpc2F1bFBhcmVudDt9fVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBQdWJsaWMgTWV0aG9kc1xyXG4gICAgICAgIHB1YmxpYyB2b2lkIEFkZExvZ2ljYWxDaGlsZChGcmFtZXdvcmtFbGVtZW50IGNoaWxkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQmVmb3JlTG9naWNhbENoaWxkQWRkIT1udWxsP2dsb2JhbDo6QnJpZGdlLlNjcmlwdC5Gcm9tTGFtYmRhKCgpPT5CZWZvcmVMb2dpY2FsQ2hpbGRBZGQuSW52b2tlKGNoaWxkKSk6bnVsbDtcclxuXHJcbiAgICAgICAgICAgIGNoaWxkLkJlZm9yZUNvbm5lY3RUb0xvZ2ljYWxQYXJlbnQhPW51bGw/Z2xvYmFsOjpCcmlkZ2UuU2NyaXB0LkZyb21MYW1iZGEoKCk9PmNoaWxkLkJlZm9yZUNvbm5lY3RUb0xvZ2ljYWxQYXJlbnQuSW52b2tlKHRoaXMpKTpudWxsO1xyXG5cclxuICAgICAgICAgICAgR2V0TG9naWNhbENoaWxkZXJlbigpLkFkZChjaGlsZCk7XHJcblxyXG4gICAgICAgICAgICBjaGlsZC5fbG9naWNhbFBhcmVudCA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICBBZnRlckxvZ2ljYWxDaGlsZEFkZCE9bnVsbD9nbG9iYWw6OkJyaWRnZS5TY3JpcHQuRnJvbUxhbWJkYSgoKT0+QWZ0ZXJMb2dpY2FsQ2hpbGRBZGQuSW52b2tlKGNoaWxkKSk6bnVsbDtcclxuXHJcbiAgICAgICAgICAgIGNoaWxkLkFmdGVyQ29ubmVjdFRvTG9naWNhbFBhcmVudCE9bnVsbD9nbG9iYWw6OkJyaWRnZS5TY3JpcHQuRnJvbUxhbWJkYSgoKT0+Y2hpbGQuQWZ0ZXJDb25uZWN0VG9Mb2dpY2FsUGFyZW50Lkludm9rZSgpKTpudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgUmVtb3ZlTG9naWNhbENoaWxkKEZyYW1ld29ya0VsZW1lbnQgY2hpbGQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAgX2xvZ2ljYWxDaGlsZGVyZW4hPW51bGw/X2xvZ2ljYWxDaGlsZGVyZW4uUmVtb3ZlKGNoaWxkKTooYm9vbD8pbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFJlbW92ZVZpc3VhbENoaWxkKEZyYW1ld29ya0VsZW1lbnQgY2hpbGQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfdmlzdWFsQ2hpbGRlcmVuIT1udWxsP192aXN1YWxDaGlsZGVyZW4uUmVtb3ZlKGNoaWxkKTooYm9vbD8pbnVsbDtcclxuXHJcbiAgICAgICAgICAgIGNoaWxkLl9yb290LlJlbW92ZUZyb21QYXJlbnQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEFkZFZpc3VhbENoaWxkKEZyYW1ld29ya0VsZW1lbnQgY2hpbGQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjaGlsZC5CZWZvcmVDb25uZWN0VG9WaXN1YWxQYXJlbnQhPW51bGw/Z2xvYmFsOjpCcmlkZ2UuU2NyaXB0LkZyb21MYW1iZGEoKCk9PmNoaWxkLkJlZm9yZUNvbm5lY3RUb1Zpc3VhbFBhcmVudC5JbnZva2UodGhpcykpOm51bGw7XHJcblxyXG4gICAgICAgICAgICBjaGlsZC5fcm9vdC5BcHBlbmRUbyhfcm9vdCk7XHJcblxyXG4gICAgICAgICAgICBjaGlsZC5fdmlzYXVsUGFyZW50ID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgIEFmdGVyVmlzdWFsQ2hpbGRBZGQhPW51bGw/Z2xvYmFsOjpCcmlkZ2UuU2NyaXB0LkZyb21MYW1iZGEoKCk9PkFmdGVyVmlzdWFsQ2hpbGRBZGQuSW52b2tlKGNoaWxkKSk6bnVsbDtcclxuXHJcbiAgICAgICAgICAgIGNoaWxkLkFmdGVyQ29ubmVjdFRvVmlzdWFsUGFyZW50IT1udWxsP2dsb2JhbDo6QnJpZGdlLlNjcmlwdC5Gcm9tTGFtYmRhKCgpPT5jaGlsZC5BZnRlckNvbm5lY3RUb1Zpc3VhbFBhcmVudC5JbnZva2UoKSk6bnVsbDtcclxuXHJcbiAgICAgICAgICAgIEdldFZpc3VhbENoaWxkZXJlbigpLkFkZChjaGlsZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIENsZWFyVmlzdWFsQ2hpbGRzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9yb290LkVtcHR5KCk7XHJcbiAgICAgICAgICAgIF92aXN1YWxDaGlsZGVyZW4hPW51bGw/Z2xvYmFsOjpCcmlkZ2UuU2NyaXB0LkZyb21MYW1iZGEoKCk9Pl92aXN1YWxDaGlsZGVyZW4uQ2xlYXIoKSk6bnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIENsZWFyTG9naWNhbENoaWxkcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfbG9naWNhbENoaWxkZXJlbiE9bnVsbD9nbG9iYWw6OkJyaWRnZS5TY3JpcHQuRnJvbUxhbWJkYSgoKT0+X2xvZ2ljYWxDaGlsZGVyZW4uQ2xlYXIoKSk6bnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICNyZWdpb24gSVJlYWRPbmx5TGlzdDxGcmFtZXdvcmtFbGVtZW50PiBWaXN1YWxDaGlsZGVyZW5cclxuICAgICAgICBMaXN0PEZyYW1ld29ya0VsZW1lbnQ+IF92aXN1YWxDaGlsZGVyZW47XHJcblxyXG4gICAgICAgIHB1YmxpYyBGcmFtZXdvcmtFbGVtZW50IEdldFZpc3VhbENoaWxkQXQoaW50IGluZGV4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFZpc3VhbENoaWxkZXJlbltpbmRleF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCBGcmFtZXdvcmtFbGVtZW50IEdldFZpc3VhbENoaWxkQXQocGFyYW1zIGludFtdIGluZGV4ZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgY3VycmVudEVsZW1lbnQgPSB0aGlzO1xyXG4gICAgICAgICAgICB2YXIgbGVuID0gaW5kZXhlcy5MZW5ndGg7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IGluZGV4ZXNbaV07XHJcblxyXG4gICAgICAgICAgICAgICAgY3VycmVudEVsZW1lbnQgPSAgY3VycmVudEVsZW1lbnQuR2V0VmlzdWFsQ2hpbGRBdChpbmRleCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjdXJyZW50RWxlbWVudDtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgaW50ZXJuYWwgTGlzdDxGcmFtZXdvcmtFbGVtZW50PiBHZXRWaXN1YWxDaGlsZGVyZW4oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKF92aXN1YWxDaGlsZGVyZW4gPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX3Zpc3VhbENoaWxkZXJlbiA9IG5ldyBMaXN0PEZyYW1ld29ya0VsZW1lbnQ+KCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBfdmlzdWFsQ2hpbGRlcmVuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgSVJlYWRPbmx5TGlzdDxGcmFtZXdvcmtFbGVtZW50PiBWaXN1YWxDaGlsZGVyZW4ge2dldHtyZXR1cm4gR2V0VmlzdWFsQ2hpbGRlcmVuKCk7fX1cclxuXHJcbiAgICAgICAgcHVibGljIGludCBWaXN1YWxDaGlsZGVyZW5Db3VudCB7Z2V0e3JldHVybiAoX3Zpc3VhbENoaWxkZXJlbiE9bnVsbD9fdmlzdWFsQ2hpbGRlcmVuLkNvdW50OihpbnQ/KW51bGwpID8/IDA7fX1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gSVJlYWRPbmx5TGlzdDxGcmFtZXdvcmtFbGVtZW50PiBMb2dpY2FsQ2hpbGRlcmVuXHJcbiAgICAgICAgTGlzdDxGcmFtZXdvcmtFbGVtZW50PiBfbG9naWNhbENoaWxkZXJlbjtcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGludGVybmFsIExpc3Q8RnJhbWV3b3JrRWxlbWVudD4gR2V0TG9naWNhbENoaWxkZXJlbigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoX2xvZ2ljYWxDaGlsZGVyZW4gPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX2xvZ2ljYWxDaGlsZGVyZW4gPSBuZXcgTGlzdDxGcmFtZXdvcmtFbGVtZW50PigpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gX2xvZ2ljYWxDaGlsZGVyZW47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCBJUmVhZE9ubHlMaXN0PEZyYW1ld29ya0VsZW1lbnQ+IExvZ2ljYWxDaGlsZGVyZW4ge2dldHtyZXR1cm4gR2V0TG9naWNhbENoaWxkZXJlbigpO319XHJcblxyXG4gICAgICAgIHB1YmxpYyBGcmFtZXdvcmtFbGVtZW50IEdldExvZ2ljYWxDaGlsZEF0KGludCBpbmRleClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBMb2dpY2FsQ2hpbGRlcmVuW2luZGV4XTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgTG9naWNhbENoaWxkZXJlbkNvdW50IHtnZXR7cmV0dXJuIChfbG9naWNhbENoaWxkZXJlbiE9bnVsbD9fbG9naWNhbENoaWxkZXJlbi5Db3VudDooaW50PyludWxsKSA/PyAwO319XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG4gICAgfVxyXG59IiwidXNpbmcgU3lzdGVtLkNvbXBvbmVudE1vZGVsO1xyXG5cclxubmFtZXNwYWNlIFN5c3RlbS5XaW5kb3dzXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBQcm9wZXJ0eU1ldGFkYXRhXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIG9iamVjdCBEZWZhdWx0VmFsdWUgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIFByb3BlcnR5Q2hhbmdlZENhbGxiYWNrIFByb3BlcnR5Q2hhbmdlZENhbGxiYWNrIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBQcm9wZXJ0eU1ldGFkYXRhKFByb3BlcnR5Q2hhbmdlZENhbGxiYWNrIHByb3BlcnR5Q2hhbmdlZENhbGxiYWNrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgUHJvcGVydHlDaGFuZ2VkQ2FsbGJhY2sgPSBwcm9wZXJ0eUNoYW5nZWRDYWxsYmFjaztcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIFByb3BlcnR5TWV0YWRhdGEob2JqZWN0IGRlZmF1bHRWYWx1ZSAsUHJvcGVydHlDaGFuZ2VkQ2FsbGJhY2sgcHJvcGVydHlDaGFuZ2VkQ2FsbGJhY2spXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBEZWZhdWx0VmFsdWUgPSBkZWZhdWx0VmFsdWU7XHJcbiAgICAgICAgICAgIFByb3BlcnR5Q2hhbmdlZENhbGxiYWNrID0gcHJvcGVydHlDaGFuZ2VkQ2FsbGJhY2s7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBQcm9wZXJ0eU1ldGFkYXRhKG9iamVjdCBkZWZhdWx0VmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBEZWZhdWx0VmFsdWUgPSBkZWZhdWx0VmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkZWxlZ2F0ZSBib29sIFZhbGlkYXRlVmFsdWVDYWxsYmFjayhvYmplY3QgdmFsdWUpO1xyXG5cclxuICAgIHB1YmxpYyBkZWxlZ2F0ZSB2b2lkIFByb3BlcnR5Q2hhbmdlZENhbGxiYWNrKERlcGVuZGVuY3lPYmplY3QgZCwgRGVwZW5kZW5jeVByb3BlcnR5Q2hhbmdlZEV2ZW50QXJncyBlKTtcclxuICAgIHB1YmxpYyBjbGFzcyBEZXBlbmRlbmN5UHJvcGVydHlDaGFuZ2VkRXZlbnRBcmdzIDogQmFnQ2hhbmdlZEV2ZW50QXJnc1xyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBEZXBlbmRlbmN5UHJvcGVydHlDaGFuZ2VkRXZlbnRBcmdzKHN0cmluZyBwcm9wZXJ0eU5hbWUpIDogYmFzZShwcm9wZXJ0eU5hbWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgRGVwZW5kZW5jeVByb3BlcnR5Q2hhbmdlZEV2ZW50QXJncyhzdHJpbmcgcHJvcGVydHlOYW1lLCBvYmplY3QgbmV3VmFsdWUpIDogYmFzZShwcm9wZXJ0eU5hbWUsIG5ld1ZhbHVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIERlcGVuZGVuY3lQcm9wZXJ0eUNoYW5nZWRFdmVudEFyZ3Moc3RyaW5nIHByb3BlcnR5TmFtZSwgb2JqZWN0IG5ld1ZhbHVlLCBvYmplY3Qgb2xkVmFsdWUpIDogYmFzZShwcm9wZXJ0eU5hbWUsIG5ld1ZhbHVlLCBvbGRWYWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwidXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5Db21wb25lbnRNb2RlbDtcclxudXNpbmcgU3lzdGVtLkdsb2JhbGl6YXRpb247XHJcblxyXG5uYW1lc3BhY2UgU3lzdGVtLldpbmRvd3Ncclxue1xyXG4gICAgcHVibGljIGNsYXNzIFByb3BlcnR5UGF0aFxyXG4gICAge1xyXG4gICAgICAgICNyZWdpb24gRmllbGRzXHJcbiAgICAgICAgaW50ZXJuYWwgcmVhZG9ubHkgTGlzdDxUcmlnZ2VyPiBUcmlnZ2VycyA9IG5ldyBMaXN0PFRyaWdnZXI+KCk7XHJcblxyXG4gICAgICAgIGJvb2wgX3BhdGhMYXN0Tm9kZUlzUmVhY2hhYmxlID0gdHJ1ZTtcclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gQ29uc3RydWN0b3JzXHJcbiAgICAgICAgcHVibGljIFByb3BlcnR5UGF0aChzdHJpbmcgcGF0aClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFBhdGggPSBwYXRoO1xyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gUHVibGljIFByb3BlcnRpZXNcclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFBhdGggeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIFByb3BlcnRpZXNcclxuICAgICAgICBpbnRlcm5hbCBib29sIElzTm90UmVhZHlUb1VwZGF0ZSB7Z2V0e3JldHVybiAhX3BhdGhMYXN0Tm9kZUlzUmVhY2hhYmxlO319XHJcbiAgICAgICAgVHJpZ2dlciBMYXN0VHJpZ2dlciB7Z2V0e3JldHVybiBUcmlnZ2Vyc1tUcmlnZ2Vycy5Db3VudCAtIDFdO319XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIFB1YmxpYyBNZXRob2RzXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbXBsaWNpdCBvcGVyYXRvciBQcm9wZXJ0eVBhdGgoc3RyaW5nIHBhdGgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb3BlcnR5UGF0aChwYXRoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIENsZWFyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFRyaWdnZXJzLkZvckVhY2goKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxnbG9iYWw6OlN5c3RlbS5XaW5kb3dzLlByb3BlcnR5UGF0aC5UcmlnZ2VyPikodCA9PiB0LlN0b3BMaXN0ZW4oKSkpO1xyXG4gICAgICAgICAgICBUcmlnZ2Vycy5DbGVhcigpO1xyXG4gICAgICAgICAgICBfcGF0aExhc3ROb2RlSXNSZWFjaGFibGUgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG9iamVjdCBHZXRQcm9wZXJ0eVZhbHVlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChUcmlnZ2Vycy5Db3VudCA9PSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkV4Y2VwdGlvbihcIlByb3BlcnR5UGF0aFByb2JsZW06XCIgKyBQYXRoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGxhc3RUcmlnZ2VyID0gTGFzdFRyaWdnZXI7XHJcbiAgICAgICAgICAgIHZhciBpbnN0YW5jZSA9IGxhc3RUcmlnZ2VyLkluc3RhbmNlO1xyXG4gICAgICAgICAgICB2YXIgcHJvcGVydHlOYW1lID0gbGFzdFRyaWdnZXIuUHJvcGVydHlOYW1lO1xyXG5cclxuICAgICAgICAgICAgdmFyIHZhbHVlID0gUmVmbGVjdGlvbkhlbHBlci5HZXRQcm9wZXJ0eVZhbHVlKGluc3RhbmNlLCBwcm9wZXJ0eU5hbWUpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgTGlzdGVuKG9iamVjdCBpbnN0YW5jZSwgQWN0aW9uIG9uUHJvcGVydHlWYWx1ZUNoYW5nZWQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBXYWxrKGluc3RhbmNlKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBsZW4gPSBUcmlnZ2Vycy5Db3VudDtcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB0cmlnZ2VyID0gVHJpZ2dlcnNbaV07XHJcblxyXG4gICAgICAgICAgICAgICAgdHJpZ2dlci5PblByb3BlcnR5VmFsdWVDaGFuZ2VkID0gKCkgPT5cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBMaXN0ZW4oaW5zdGFuY2UsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pb25Qcm9wZXJ0eVZhbHVlQ2hhbmdlZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgb25Qcm9wZXJ0eVZhbHVlQ2hhbmdlZCgpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHRyaWdnZXIuTGlzdGVuKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFNldFByb3BlcnR5VmFsdWUob2JqZWN0IHZhbHVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGxhc3RUcmlnZ2VyID0gTGFzdFRyaWdnZXI7XHJcbiAgICAgICAgICAgIHZhciBpbnN0YW5jZSA9IGxhc3RUcmlnZ2VyLkluc3RhbmNlO1xyXG4gICAgICAgICAgICB2YXIgcHJvcGVydHlOYW1lID0gbGFzdFRyaWdnZXIuUHJvcGVydHlOYW1lO1xyXG5cclxuICAgICAgICAgICAgdmFyIHByb3BlcnR5VHlwZSA9IGdsb2JhbDo6QnJpZGdlLlNjcmlwdC5Ub1RlbXAoXCJrZXkxXCIsUmVmbGVjdGlvbkhlbHBlci5GaW5kUHJvcGVydHkoaW5zdGFuY2UsIHByb3BlcnR5TmFtZSkpIT1udWxsP2dsb2JhbDo6QnJpZGdlLlNjcmlwdC5Gcm9tVGVtcDxSZWZsZWN0aW9uLlByb3BlcnR5SW5mbz4oXCJrZXkxXCIpLlByb3BlcnR5VHlwZTooVHlwZSludWxsO1xyXG4gICAgICAgICAgICBpZiAocHJvcGVydHlUeXBlICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gQ2FzdC5Ubyh2YWx1ZSwgcHJvcGVydHlUeXBlLCBDdWx0dXJlSW5mby5DdXJyZW50Q3VsdHVyZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIFJlZmxlY3Rpb25IZWxwZXIuU2V0UHJvcGVydHlWYWx1ZShpbnN0YW5jZSwgcHJvcGVydHlOYW1lLCB2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBXYWxrKG9iamVjdCBpbnN0YW5jZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIENsZWFyKCk7XHJcblxyXG4gICAgICAgICAgICBQYXJzZVBhdGgoaW5zdGFuY2UsIFBhdGgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gTWV0aG9kc1xyXG4gICAgICAgIGludGVybmFsIHZvaWQgUGFyc2VQYXRoKG9iamVjdCBpbnN0YW5jZSwgc3RyaW5nIHBhdGgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGluc3RhbmNlID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3BhdGhMYXN0Tm9kZUlzUmVhY2hhYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBmaXJzdERhdCA9IHBhdGguSW5kZXhPZignLicpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChmaXJzdERhdCA8IDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgVHJpZ2dlcnMuQWRkKG5ldyBUcmlnZ2VyXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBJbnN0YW5jZSA9IGluc3RhbmNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBQcm9wZXJ0eU5hbWUgPSBwYXRoXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBwcm9wZXJ0eU5hbWUgPSBwYXRoLlN1YnN0cmluZygwLCBmaXJzdERhdCk7XHJcblxyXG4gICAgICAgICAgICAgICAgVHJpZ2dlcnMuQWRkKG5ldyBUcmlnZ2VyXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgSW5zdGFuY2UgPSBpbnN0YW5jZSxcclxuICAgICAgICAgICAgICAgICAgICBQcm9wZXJ0eU5hbWUgPSBwcm9wZXJ0eU5hbWVcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGluc3RhbmNlID0gUmVmbGVjdGlvbkhlbHBlci5HZXRQcm9wZXJ0eVZhbHVlKGluc3RhbmNlLCBwcm9wZXJ0eU5hbWUpO1xyXG5cclxuICAgICAgICAgICAgICAgIHBhdGggPSBwYXRoLlN1YnN0cmluZyhmaXJzdERhdCArIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgY2xhc3MgVHJpZ2dlclxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgI3JlZ2lvbiBGaWVsZHNcclxuICAgICAgICAgICAgcHVibGljIG9iamVjdCBJbnN0YW5jZTtcclxuXHJcbiAgICAgICAgICAgIHB1YmxpYyBBY3Rpb24gT25Qcm9wZXJ0eVZhbHVlQ2hhbmdlZDtcclxuICAgICAgICAgICAgcHVibGljIHN0cmluZyBQcm9wZXJ0eU5hbWU7XHJcbiAgICAgICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgICAgICNyZWdpb24gUHJvcGVydGllc1xyXG4gICAgICAgICAgICBJTm90aWZ5UHJvcGVydHlDaGFuZ2VkIEluc3RhbmNlQXNOb3RpZnlQcm9wZXJ0eUNoYW5nZWQge2dldHtyZXR1cm4gSW5zdGFuY2UgYXMgSU5vdGlmeVByb3BlcnR5Q2hhbmdlZDt9fVxyXG4gICAgICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICAgICAjcmVnaW9uIFB1YmxpYyBNZXRob2RzXHJcbiAgICAgICAgICAgIHB1YmxpYyB2b2lkIExpc3RlbigpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChJbnN0YW5jZUFzTm90aWZ5UHJvcGVydHlDaGFuZ2VkID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIEluc3RhbmNlQXNOb3RpZnlQcm9wZXJ0eUNoYW5nZWQuUHJvcGVydHlDaGFuZ2VkICs9IE9uQ2hhbmdlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgdm9pZCBTdG9wTGlzdGVuKClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKEluc3RhbmNlQXNOb3RpZnlQcm9wZXJ0eUNoYW5nZWQgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgSW5zdGFuY2VBc05vdGlmeVByb3BlcnR5Q2hhbmdlZC5Qcm9wZXJ0eUNoYW5nZWQgLT0gT25DaGFuZ2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHB1YmxpYyBvdmVycmlkZSBzdHJpbmcgVG9TdHJpbmcoKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gSW5zdGFuY2UgKyBcIi0+XCIgKyBQcm9wZXJ0eU5hbWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAgICAgI3JlZ2lvbiBNZXRob2RzXHJcbiAgICAgICAgICAgIHZvaWQgT25DaGFuZ2Uob2JqZWN0IHNlbmRlciwgUHJvcGVydHlDaGFuZ2VkRXZlbnRBcmdzIGUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChlLlByb3BlcnR5TmFtZSA9PSBQcm9wZXJ0eU5hbWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgT25Qcm9wZXJ0eVZhbHVlQ2hhbmdlZCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICNlbmRyZWdpb25cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJ1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLlhtbDtcclxudXNpbmcgQnJpZGdlLkN1c3RvbVVJTWFya3VwO1xyXG5cclxubmFtZXNwYWNlIFN5c3RlbS5XaW5kb3dzXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBUZW1wbGF0ZVxyXG4gICAge1xyXG4gICAgICAgIHN0cmluZyBfa2V5O1xyXG4gICAgICAgIHN0cmluZyBfeG1sVGVtcGxhdGU7XHJcbiAgICAgICAgWG1sTm9kZSBfcm9vdE5vZGU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBYbWxOb2RlIFJvb3Qge2dldHtyZXR1cm4gX3Jvb3ROb2RlO319XHJcblxyXG4gICAgICAgIHByaXZhdGUgVGVtcGxhdGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCBzdGF0aWMgcmVhZG9ubHkgRGljdGlvbmFyeTxzdHJpbmcsIFRlbXBsYXRlPiBDYWNoZSA9IG5ldyBEaWN0aW9uYXJ5PHN0cmluZywgVGVtcGxhdGU+KCk7XHJcblxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFRlbXBsYXRlIENyZWF0ZUZyb21YbWwoc3RyaW5nIHhtbFRlbXBsYXRlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHJvb3ROb2RlID0gWG1sSGVscGVyLkdldFJvb3ROb2RlKHhtbFRlbXBsYXRlKTtcclxuXHJcbiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZSA9IG5ldyBUZW1wbGF0ZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfeG1sVGVtcGxhdGUgPSB4bWxUZW1wbGF0ZSxcclxuICAgICAgICAgICAgICAgIF9yb290Tm9kZSA9IHJvb3ROb2RlXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGVtcGxhdGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFRlbXBsYXRlIENyZWF0ZUZyb20oWG1sTm9kZSAgeG1sTm9kZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFRlbXBsYXRlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF9yb290Tm9kZSA9IHhtbE5vZGVcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBSZWdpc3RlckFzWG1sKHN0cmluZyBrZXksIHN0cmluZyB4bWxUZW1wbGF0ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciByb290Tm9kZSA9IFhtbEhlbHBlci5HZXRSb290Tm9kZSh4bWxUZW1wbGF0ZSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgdGVtcGxhdGUgPSBuZXcgVGVtcGxhdGVcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX2tleSA9IGtleSxcclxuICAgICAgICAgICAgICAgIF94bWxUZW1wbGF0ZSA9IHhtbFRlbXBsYXRlLFxyXG4gICAgICAgICAgICAgICAgX3Jvb3ROb2RlID0gcm9vdE5vZGVcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIENhY2hlW2tleV0gPSB0ZW1wbGF0ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHN0YXRpYyBUZW1wbGF0ZSBHZXREZWZhdWx0VGVtcGxhdGUoVHlwZSB0eXBlIClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjYWNoZUtleSA9IHR5cGUuRnVsbE5hbWU7XHJcblxyXG4gICAgICAgICAgICBUZW1wbGF0ZSB0ZW1wbGF0ZSA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICBpZiAoQ2FjaGUuVHJ5R2V0VmFsdWUoY2FjaGVLZXksIG91dCB0ZW1wbGF0ZSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wbGF0ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdmFyIHRlbXBsYXRlQXNYbWxTdHJpbmcgPSBSZXNvdXJjZXMuR2V0WG1sRmlsZUNvbnRlbnQoR2V0UmVzb3VyY2VLZXkodHlwZSkpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRlbXBsYXRlQXNYbWxTdHJpbmcgPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgQ2FjaGVbY2FjaGVLZXldID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0ZW1wbGF0ZSA9IENyZWF0ZUZyb21YbWwodGVtcGxhdGVBc1htbFN0cmluZyk7XHJcblxyXG5cclxuICAgICAgICAgICAgQ2FjaGVbY2FjaGVLZXldID0gdGVtcGxhdGU7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGVtcGxhdGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgc3RyaW5nIEdldFJlc291cmNlS2V5KFR5cGUgdHlwZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlID09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudE51bGxFeGNlcHRpb24oXCJ0eXBlXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHlwZS5GdWxsTmFtZS5SZW1vdmVGcm9tU3RhcnQoXCJCcmlkZ2UuQ3VzdG9tVUlNYXJrdXAuXCIpLlJlcGxhY2UoXCIuXCIsIFwiL1wiKSArIFwiLlRlbXBsYXRlLnhtbFwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgUmVnaXN0ZXIoVHlwZSB0eXBlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHR5cGUgPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEV4Y2VwdGlvbihcInR5cGVcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciByZXNvdXJjZUtleSA9IEdldFJlc291cmNlS2V5KHR5cGUpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHRlbXBsYXRlWG1sID0gIFJlc291cmNlcy5HZXRYbWxGaWxlQ29udGVudChyZXNvdXJjZUtleSk7XHJcblxyXG4gICAgICAgICAgICBSZWdpc3RlckFzWG1sKHR5cGUuRnVsbE5hbWUsIHRlbXBsYXRlWG1sKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBSZWdpc3RlckFzWG1sKFR5cGUga2V5LCBzdHJpbmcgeG1sVGVtcGxhdGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBSZWdpc3RlckFzWG1sKGtleS5GdWxsTmFtZSx4bWxUZW1wbGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgVGVtcGxhdGUgR2V0KFR5cGUga2V5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEdldChrZXkuRnVsbE5hbWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBUZW1wbGF0ZSBGaW5kKFR5cGUga2V5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEZpbmQoa2V5LkZ1bGxOYW1lKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgVGVtcGxhdGUgRmluZChzdHJpbmcga2V5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgVGVtcGxhdGUgdGVtcGxhdGUgPSBudWxsO1xyXG4gICAgICAgICAgICBDYWNoZS5UcnlHZXRWYWx1ZShrZXksIG91dCB0ZW1wbGF0ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0ZW1wbGF0ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgVGVtcGxhdGUgR2V0KHN0cmluZyBrZXkpXHJcbiAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgVGVtcGxhdGUgdGVtcGxhdGUgPSBGaW5kKGtleSk7XHJcbiAgICAgICAgICAgIGlmICh0ZW1wbGF0ZSA9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkV4Y2VwdGlvbihcIlRlbXBsYXRlTm90Rm91bmQuIEtleTogXCIra2V5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdGVtcGxhdGU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwidXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgQnJpZGdlO1xyXG51c2luZyBCcmlkZ2UuSHRtbDU7XHJcblxyXG5uYW1lc3BhY2UgU3lzdGVtLlhtbFxyXG57XHJcblxyXG4gICAgcHVibGljIGNsYXNzIFhtbEV4Y2VwdGlvbiA6IFN5c3RlbUV4Y2VwdGlvblxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBYbWxFeGNlcHRpb24oc3RyaW5nIG1lc3NhZ2UsIEV4Y2VwdGlvbiBpbm5lckV4Y2VwdGlvbikgOiBiYXNlKG1lc3NhZ2UsIGlubmVyRXhjZXB0aW9uKSB7IH1cclxuICAgIH1cclxuICAgIFtJZ25vcmVDYXN0XVxyXG4gICAgW0V4dGVybmFsXVxyXG4gICAgcHVibGljIGNsYXNzIFhtbERvY3VtZW50XHJcbiAgICB7XHJcbiAgICAgICAgI3JlZ2lvbiBQdWJsaWMgUHJvcGVydGllc1xyXG4gICAgICAgIFtOYW1lKFwiZmlyc3RDaGlsZFwiKV1cclxuICAgICAgICBwdWJsaWMgWG1sTm9kZSBGaXJzdENoaWxkIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuICAgIH1cclxuXHJcbiAgICBbSWdub3JlQ2FzdF1cclxuICAgIFtFeHRlcm5hbF1cclxuICAgIHB1YmxpYyBjbGFzcyBYbWxOb2RlTGlzdCA6IElFbnVtZXJhYmxlPFhtbE5vZGU+XHJcbiAgICB7XHJcbiAgICAgICAgI3JlZ2lvbiBQdWJsaWMgUHJvcGVydGllc1xyXG4gICAgICAgIFtOYW1lKFwibGVuZ3RoXCIpXVxyXG4gICAgICAgIHB1YmxpYyBpbnQgQ291bnQgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcblxyXG4gICAgICAgIFtOYW1lKFwiZmlyc3RDaGlsZFwiKV1cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIEZpcnN0Q2hpbGQgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIFB1YmxpYyBJbmRleGVyc1xyXG4gICAgICAgIFtOYW1lKFwidGhpc1tpbmRleF1cIildXHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgWG1sTm9kZSB0aGlzW2ludCBpbmRleF1cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHRocm93IG5ldyBOb3RJbXBsZW1lbnRlZEV4Y2VwdGlvbigpOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBQdWJsaWMgTWV0aG9kc1xyXG4gICAgICAgIHB1YmxpYyBJRW51bWVyYXRvcjxYbWxOb2RlPiBHZXRFbnVtZXJhdG9yKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBOb3RJbXBsZW1lbnRlZEV4Y2VwdGlvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gRXhwbGljaXQgSW50ZXJmYWNlIE1ldGhvZHNcclxuICAgICAgICBJRW51bWVyYXRvciBJRW51bWVyYWJsZS5HZXRFbnVtZXJhdG9yKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBOb3RJbXBsZW1lbnRlZEV4Y2VwdGlvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcbiAgICB9XHJcblxyXG4gICAgW0lnbm9yZUNhc3RdXHJcbiAgICBbRXh0ZXJuYWxdXHJcbiAgICBwdWJsaWMgY2xhc3MgWG1sTm9kZVxyXG4gICAge1xyXG4gICAgICAgICNyZWdpb24gUHVibGljIFByb3BlcnRpZXNcclxuICAgICAgICBbTmFtZShcImF0dHJpYnV0ZXNcIildXHJcbiAgICAgICAgcHVibGljICBYbWxBdHRyaWJ1dGVDb2xsZWN0aW9uIEF0dHJpYnV0ZXMgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcblxyXG4gICAgICAgIFtOYW1lKFwiY2hpbGROb2Rlc1wiKV1cclxuICAgICAgICBwdWJsaWMgWG1sTm9kZUxpc3QgQ2hpbGROb2RlcyB7IGdldDsgc2V0OyB9XHJcblxyXG4gICAgICAgIFtOYW1lKFwibm9kZU5hbWVcIildXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBOYW1lIHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICBcclxuXHJcbiAgICAgICAgW05hbWUoXCJwYXJlbnROb2RlXCIpXVxyXG4gICAgICAgIHB1YmxpYyBYbWxOb2RlIFBhcmVudE5vZGUgeyBnZXQ7IHNldDsgfVxyXG5cclxuICAgICAgICBbTmFtZShcIm5vZGVUeXBlXCIpXVxyXG4gICAgICAgIHB1YmxpYyBOb2RlVHlwZSBOb2RlVHlwZSB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcbiAgICB9XHJcblxyXG4gICAgW0lnbm9yZUNhc3RdXHJcbiAgICBbRXh0ZXJuYWxdXHJcbiAgICBwdWJsaWMgY2xhc3MgWG1sQXR0cmlidXRlQ29sbGVjdGlvbjogSUVudW1lcmFibGU8WG1sQXR0cmlidXRlPlxyXG4gICAge1xyXG4gICAgICAgICNyZWdpb24gUHVibGljIFByb3BlcnRpZXNcclxuICAgICAgICBbTmFtZShcImxlbmd0aFwiKV1cclxuICAgICAgICBwdWJsaWMgaW50IENvdW50IHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBQdWJsaWMgSW5kZXhlcnNcclxuICAgICAgICBbTmFtZShcInRoaXNbaW5kZXhdXCIpXVxyXG4gICAgICAgIHB1YmxpYyBYbWxBdHRyaWJ1dGUgdGhpc1tpbnQgaW5kZXhdXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyB0aHJvdyBuZXcgTm90SW1wbGVtZW50ZWRFeGNlcHRpb24oKTsgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgW05hbWUoXCJ0aGlzW25hbWVdXCIpXVxyXG4gICAgICAgIHB1YmxpYyBuZXcgWG1sQXR0cmlidXRlIHRoaXNbc3RyaW5nIG5hbWVdXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyB0aHJvdyBuZXcgTm90SW1wbGVtZW50ZWRFeGNlcHRpb24oKTsgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuXHJcblxyXG4gICAgICAgICNyZWdpb24gUHVibGljIE1ldGhvZHNcclxuICAgICAgICBwdWJsaWMgSUVudW1lcmF0b3I8WG1sQXR0cmlidXRlPiBHZXRFbnVtZXJhdG9yKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBOb3RJbXBsZW1lbnRlZEV4Y2VwdGlvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gRXhwbGljaXQgSW50ZXJmYWNlIE1ldGhvZHNcclxuICAgICAgICBJRW51bWVyYXRvciBJRW51bWVyYWJsZS5HZXRFbnVtZXJhdG9yKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBOb3RJbXBsZW1lbnRlZEV4Y2VwdGlvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcbiAgICB9XHJcblxyXG4gICAgW0lnbm9yZUNhc3RdXHJcbiAgICBbRXh0ZXJuYWxdXHJcbiAgICBwdWJsaWMgY2xhc3MgWG1sQXR0cmlidXRlIDogWG1sTm9kZVxyXG4gICAge1xyXG4gICAgICAgICNyZWdpb24gUHVibGljIFByb3BlcnRpZXNcclxuICAgICAgICBbTmFtZShcIm5vZGVWYWx1ZVwiKV1cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFZhbHVlIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcbiAgICB9XHJcbn0iLCJ1c2luZyBCcmlkZ2UualF1ZXJ5MjtcclxuXHJcbm5hbWVzcGFjZSBTeXN0ZW0uWG1sXHJcbntcclxuICAgIHN0YXRpYyBjbGFzcyBYbWxIZWxwZXJcclxuICAgIHtcclxuICAgICAgICAjcmVnaW9uIFB1YmxpYyBNZXRob2RzXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBYbWxOb2RlIEdldFJvb3ROb2RlKHN0cmluZyB4bWxTdHJpbmcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gZ2xvYmFsOjpCcmlkZ2UuU2NyaXB0LlRvVGVtcChcImtleTFcIixQYXJzZSh4bWxTdHJpbmcpKSE9bnVsbD9nbG9iYWw6OkJyaWRnZS5TY3JpcHQuRnJvbVRlbXA8WG1sRG9jdW1lbnQ+KFwia2V5MVwiKS5GaXJzdENoaWxkOihYbWxOb2RlKW51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAgc3RhdGljIFhtbERvY3VtZW50IFBhcnNlKHN0cmluZyB4bWxTdHJpbmcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgeG1sU3RyaW5nID0geG1sU3RyaW5nLlJlcGxhY2UoXCJ4Ok5hbWU9XCIsIFwieC5OYW1lID0gXCIpLlJlcGxhY2UoXCJ4Ok5hbWUgPVwiLCBcInguTmFtZSA9IFwiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBqUXVlcnkuUGFyc2VYTUwoeG1sU3RyaW5nKS5BczxYbWxEb2N1bWVudD4oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoRXhjZXB0aW9uIGUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBYbWxFeGNlcHRpb24oXCJYbWxQYXJzZUVycm9yT2NjdXJlZC5cIiwgZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG4gICAgfVxyXG59IiwidXNpbmcgU3lzdGVtLkNvbXBvbmVudE1vZGVsO1xyXG5cclxubmFtZXNwYWNlIFN5c3RlbS5XaW5kb3dzXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBEZXBlbmRlbmN5T2JqZWN0IDogQmFnXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHZvaWQgU2V0VmFsdWUoRGVwZW5kZW5jeVByb3BlcnR5IGRwLCBvYmplY3QgdmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzW2RwLk5hbWVdID0gdmFsdWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb2JqZWN0IEdldFZhbHVlKERlcGVuZGVuY3lQcm9wZXJ0eSBkcClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRoaXNbZHAuTmFtZV07XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoKGdsb2JhbDo6QnJpZGdlLlNjcmlwdC5Ub1RlbXAoXCJrZXkxXCIsZHAuUHJvcGVydHlNZXRhZGF0YSkhPW51bGw/Z2xvYmFsOjpCcmlkZ2UuU2NyaXB0LkZyb21UZW1wPFByb3BlcnR5TWV0YWRhdGE+KFwia2V5MVwiKS5EZWZhdWx0VmFsdWU6KG9iamVjdCludWxsKSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkcC5Qcm9wZXJ0eU1ldGFkYXRhLkRlZmF1bHRWYWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZHAuUHJvcGVydHlUeXBlLklzRW51bSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRW51bS5QYXJzZShkcC5Qcm9wZXJ0eVR5cGUsIFwiMFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwidXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5Db21wb25lbnRNb2RlbDtcclxudXNpbmcgU3lzdGVtLldpbmRvd3M7XHJcblxyXG5uYW1lc3BhY2UgQnJpZGdlLkN1c3RvbVVJTWFya3VwX0Rlc2lnbmVyU2FtcGxlc1xyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgRXhhbXBsZURhdGFDb250ZXh0IDogQmFnXHJcbiAgICB7XHJcblxyXG4gICAgIFxyXG5cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBFeGFtcGxlRGF0YUNvbnRleHQgSW5uZXJcclxuICAgICAgICBFeGFtcGxlRGF0YUNvbnRleHQgX2lubmVyO1xyXG4gICAgICAgIHB1YmxpYyBFeGFtcGxlRGF0YUNvbnRleHQgSW5uZXJcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBfaW5uZXI7IH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChfaW5uZXIgIT0gdmFsdWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2lubmVyID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgT25Qcm9wZXJ0eUNoYW5nZWQoXCJJbm5lclwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG5cclxuXHJcblxyXG4gICAgICAgICNyZWdpb24gQ29uc3RydWN0b3JzXHJcbiAgICAgICAgcHVibGljIEV4YW1wbGVEYXRhQ29udGV4dCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBFeGFtcGxlcyA9IGdsb2JhbDo6QnJpZGdlLlNjcmlwdC5DYWxsRm9yKG5ldyBMaXN0PEV4YW1wbGVJbmZvPigpLChfbzEpPT57X28xLkFkZChuZXcgRXhhbXBsZUluZm9cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBOYW1lID0gXCJEYXRhR3JpZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFhtbFRlbXBsYXRlID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgQFwiXHJcblxyXG5cclxuPGRpdiBQYWRkaW5nPScxMSc+XHJcblx0PERhdGFHcmlkIEl0ZW1zU291cmNlPSd7RXhhbXBsZXN9Jz5cclxuXHRcdDxEYXRhR3JpZC5Db2x1bW5zPlxyXG5cdFx0XHQ8RGF0YUdyaWRDb2x1bW4gTGFiZWw9J0xhYmVsX0EnICAgIE5hbWUgPSAnTmFtZScgLz5cclxuXHRcdFx0PERhdGFHcmlkQ29sdW1uIExhYmVsPSd4eHh4JyAgICBOYW1lID0gJ05hbWUnIC8+XHJcblx0XHQ8L0RhdGFHcmlkLkNvbHVtbnM+XHJcblx0PC9EYXRhR3JpZD5cclxuPC9kaXY+IFxyXG5cclxuXCJcclxuICAgICAgICAgICAgICAgIH0pO19vMS5BZGQobmV3IEV4YW1wbGVJbmZvXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgTmFtZSA9IFwiQWRkIHJldmlld1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIFhtbFRlbXBsYXRlID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgQFwiXHJcblxyXG5cclxuPHVpLnNlZ21lbnQgTWFyZ2luPScxMSc+XHJcblx0PHVpLmZvcm0gPlxyXG5cdFx0PHVpLmhlYWRlci4yPkFkZCBhIHJldmlldzwvdWkuaGVhZGVyLjI+XHJcblxyXG5cdFx0PGZpZWxkIExhYmVsPSd5b3VyIFJhdGluZyc+XHJcblx0XHRcdDx1aV9yYXRpbmcgIE1heFJhdGU9JzUnICAvPlxyXG5cdFx0PC9maWVsZD5cclxuXHJcblx0XHQ8ZmllbGQgTGFiZWw9J05hbWUnID5cclxuXHRcdFx0PHRleHRCb3ggIElzTWFuZGF0b3J5PSd0cnVlJyAvPlxyXG5cdFx0PC9maWVsZD5cclxuXHJcblx0XHQ8ZmllbGQgTGFiZWw9J1lvdXIgcmV2aWV3Jz5cclxuXHRcdFx0PHRleHRBcmVhICBJc01hbmRhdG9yeT0ndHJ1ZScgLz5cclxuXHRcdDwvZmllbGQ+XHJcblxyXG5cdFx0PHVpLmJhc2ljLmJ1dHRvbj4gR8O2bmRlclxyXG5cdFx0PC91aS5iYXNpYy5idXR0b24+XHJcblxyXG5cdDwvdWkuZm9ybT5cclxuXHJcbjwvdWkuc2VnbWVudD5cclxuXHJcblwiXHJcbiAgICAgICAgICAgICAgICB9KTtfbzEuQWRkKG5ldyBFeGFtcGxlSW5mb1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIE5hbWUgPSBcImNvbW1lbnRzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgWG1sVGVtcGxhdGUgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBAXCJcclxuXHJcbjx1aV9jb21tZW50cz5cclxuXHQ8Y29tbWVudCBBdmF0YXJJbWFnZVVybD0naW1nL0F2YXRhckltYWdlU2FtcGxlLmpwZycgIFxyXG4gICAgICAgICAgICAgQXV0aG9yPSdhZGFuYSdcclxuICAgICAgICAgICAgIE1ldGFkYXRhVGltZUluZm89JzExIGFndXN0b3MgUGF6YXIgNTo0NCBBTSdcclxuICAgICAgICAgICAgIFRleHQ9J3V6dW5jYW5hIGJpciBjb21tZW50IGJyICBzZGZzZGZzZGZzZ2dnZ3V6dW5jYW5hIGJpciBjb21tZW50IGJyICBzZGZzZGZzZGZzZ2dnZ3V6dW5jYW5hIGJpciBjb21tZW50IGJyICBzZGZzZGZzZGZzZ2dnZ3V6dW5jYW5hIGJpciBjb21tZW50IGJyICBzZGZzZGZzZGZzZ2dnZ3V6dW5jYW5hIGJpciBjb21tZW50IGJyICBzZGZzZGZzZGZzZ2dnZ3V6dW5jYW5hIGJpciBjb21tZW50IGJyICBzZGZzZGZzZGZzZ2dnZ3V6dW5jYW5hIGJpciBjb21tZW50IGJyICBzZGZzZGZzZGZzZ2dnZydcclxuICAgICAgICAgICAgIC8+XHJcbiAgXHJcbiAgPGNvbW1lbnQgQXZhdGFySW1hZ2VVcmw9J2ltZy9BdmF0YXJJbWFnZVNhbXBsZS5qcGcnICBcclxuICAgICAgICAgICAgIEF1dGhvcj0nYWhtZXQnXHJcbiAgICAgICAgICAgICBNZXRhZGF0YVRpbWVJbmZvPScxMSBhZ3VzdG9zIFBhemFyIDU6NDQgQU0nXHJcbiAgICAgICAgICAgICBUZXh0PSd1enVuY2FuYSBiaXIgY29tbWVudCBiciAgc2Rmc2Rmc2Rmc2dnZ2d1enVuY2FuYSBiaXIgY29tbWVudCBiciAgc2Rmc2Rmc2Rmc2dnZ2d1enVuY2FuYSBiaXIgY29tbWVudCBiciAgc2Rmc2Rmc2Rmc2dnZ2d1enVuY2FuYSBiaXIgY29tbWVudCBiciAgc2Rmc2Rmc2Rmc2dnZ2d1enVuY2FuYSBiaXIgY29tbWVudCBiciAgc2Rmc2Rmc2Rmc2dnZ2d1enVuY2FuYSBiaXIgY29tbWVudCBiciAgc2Rmc2Rmc2Rmc2dnZ2d1enVuY2FuYSBiaXIgY29tbWVudCBiciAgc2Rmc2Rmc2Rmc2dnZ2cnXHJcbiAgICAgICAgICAgICAvPlxyXG4gICAgXHJcbiAgIDxjb21tZW50IEF2YXRhckltYWdlVXJsPSdpbWcvQXZhdGFySW1hZ2VTYW1wbGUuanBnJyAgXHJcbiAgICAgICAgICAgICBBdXRob3I9J3h5eidcclxuICAgICAgICAgICAgIE1ldGFkYXRhVGltZUluZm89JzExIGFndXN0b3MgUGF6YXIgNTo0NCBBTSdcclxuICAgICAgICAgICAgIFRleHQ9J3V6dW5jYW5hIGJpciBjb21tZW50IGJyICBzZGZzZGZzZGZzZ2dnZ3V6dW5jYW5hIGJpciBjb21tZW50IGJyICBzZGZzZGZzZGZzZ2dnZ3V6dW5jYW5hIGJpciBjb21tZW50IGJyICBzZGZzZGZzZGZzZ2dnZ3V6dW5jYW5hIGJpciBjb21tZW50IGJyICBzZGZzZGZzZGZzZ2dnZ3V6dW5jYW5hIGJpciBjb21tZW50IGJyICBzZGZzZGZzZGZzZ2dnZ3V6dW5jYW5hIGJpciBjb21tZW50IGJyICBzZGZzZGZzZGZzZ2dnZ3V6dW5jYW5hIGJpciBjb21tZW50IGJyICBzZGZzZGZzZGZzZ2dnZydcclxuICAgICAgICAgICAgIC8+XHJcbiAgXHJcbjwvdWlfY29tbWVudHM+XHJcblxyXG5cIlxyXG4gICAgICAgICAgICAgICAgfSk7X28xLkFkZChuZXcgRXhhbXBsZUluZm9cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBOYW1lID0gXCJUYWJzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgWG1sVGVtcGxhdGUgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBAXCJcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbjxkaXYgUGFkZGluZz0nMTEnPlxyXG5cdDx1aV90b3BfYXR0YWNoZWRfdGFidWxhcl9tZW51PlxyXG5cdFx0PFRhYiBIZWFkZXIgPSdIZWFkZXIxJyBBZGRDbGFzcz0nYWN0aXZlJz5cclxuICBcdFx0XHQ8ZGl2IGNsYXNzPSd1aSBzZWdtZW50Jz5cclxuICAgICAgICAgICAgICAgIDx1aS5oZWFkZXIuMz4gUHJvZHVjdCBkZXNjcmlwdGlvbjwvdWkuaGVhZGVyLjM+XHJcbiAgICAgICAgICBcdCAgICA8cD5QZWxsZW50ZXNxdWUgaGFiaXRhbnQgbW9yYmkgdHJpc3RpcXVlIHNlbmVjdHVzIGV0IG5ldHVzIGV0IG1hbGVzdWFkYSBmYW1lcyBhYyB0dXJwaXMgZWdlc3Rhcy4gVmVzdGlidWx1bSB0b3J0b3IgcXVhbSwgZmV1Z2lhdCB2aXRhZSwgdWx0cmljaWVzIGVnZXQsIHRlbXBvciBzaXQgYW1ldCwgYW50ZS4gRG9uZWMgZXUgbGliZXJvIHNpdCBhbWV0IHF1YW0gZWdlc3RhcyBzZW1wZXIuIEFlbmVhbiB1bHRyaWNpZXMgbWkgdml0YWUgZXN0LiBNYXVyaXMgcGxhY2VyYXQgZWxlaWZlbmQgbGVvLjwvcD5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgXHRcdDwvVGFiPiAgXHJcbiAgXHJcbiAgXHRcdDxUYWIgSGVhZGVyID0nSGVhZGVyMic+IFxyXG4gIFx0XHRcdFdyaXRlIENvbnRlbnQgaGVyZSAyXHJcbiAgXHRcdDwvVGFiPiBcclxuXHQ8L3VpX3RvcF9hdHRhY2hlZF90YWJ1bGFyX21lbnU+IFxyXG48L2Rpdj5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblwiXHJcbiAgICAgICAgICAgICAgICB9KTtfbzEuQWRkKG5ldyBFeGFtcGxlSW5mb1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIE5hbWUgPSBcIlZpZXd2ZXJqc1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIFhtbFRlbXBsYXRlID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgQFwiXHJcblxyXG5cclxuXHJcbjxkaXY+XHJcbiAgPEltYWdlR2FsZXJ5PlxyXG4gICAgICA8aW1nIHNyYz0naW1nL2Nhcm91c2VsXzEuanBnJyAgLz5cclxuICAgICAgPGltZyBzcmM9J2ltZy9jYXJvdXNlbF8xLmpwZycgIC8+XHJcbiAgICAgIDxpbWcgc3JjPSdpbWcvY2Fyb3VzZWxfMS5qcGcnICAvPlxyXG4gICAgICA8aW1nIHNyYz0naW1nL2Nhcm91c2VsXzEuanBnJyAgLz5cclxuICAgICAgPGltZyBzcmM9J2ltZy9jYXJvdXNlbF8xLmpwZycgIC8+XHJcbiAgICAgIDxpbWcgc3JjPSdpbWcvY2Fyb3VzZWxfMS5qcGcnICAvPlxyXG4gICAgICA8aW1nIHNyYz0naW1nL2Nhcm91c2VsXzEuanBnJyAgLz5cclxuICAgICAgPGltZyBzcmM9J2ltZy9jYXJvdXNlbF8xLmpwZycgIC8+XHJcbiAgICAgIDxpbWcgc3JjPSdpbWcvY2Fyb3VzZWxfMS5qcGcnICAvPlxyXG4gICAgICA8aW1nIHNyYz0naW1nL2Nhcm91c2VsXzEuanBnJyAgLz5cclxuICAgICAgPGltZyBzcmM9J2ltZy9jYXJvdXNlbF8xLmpwZycgIC8+XHJcbiAgICAgIDxpbWcgc3JjPSdpbWcvY2Fyb3VzZWxfMS5qcGcnICAvPlxyXG4gICAgICA8aW1nIHNyYz0naW1nL2Nhcm91c2VsXzEuanBnJyAgLz5cclxuICAgICAgPGltZyBzcmM9J2ltZy9jYXJvdXNlbF8xLmpwZycgIC8+XHJcbiAgICAgIDxpbWcgc3JjPSdpbWcvY2Fyb3VzZWxfMS5qcGcnICAvPlxyXG4gICAgICA8aW1nIHNyYz0naW1nL2Nhcm91c2VsXzEuanBnJyAgLz5cclxuICAgICAgPGltZyBzcmM9J2ltZy9jYXJvdXNlbF8xLmpwZycgIC8+XHJcbiAgPC9JbWFnZUdhbGVyeT5cclxuPC9kaXY+XHJcblxyXG5cclxuXHJcblxyXG5cclxuXCJcclxuICAgICAgICAgICAgICAgIH0pO19vMS5BZGQobmV3IEV4YW1wbGVJbmZvXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgTmFtZSA9IFwiQWxsXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgWG1sVGVtcGxhdGUgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBAXCJcclxuXHJcblxyXG5cclxuXHJcblxyXG48dWkucGFnZS5ncmlkPlxyXG4gICA8dWkuY29udGFpbmVyPlxyXG4gICAgICA8dWkudGV4dC5tZW51Lm5hdmJhciBGb250U2l6ZT0nMTgnPlxyXG4gICAgICAgICA8bGVmdC5tZW51PlxyXG4gICAgICAgICAgICA8aXRlbT5Qcm9qZWN0IE5hbWU8L2l0ZW0+XHJcbiAgICAgICAgIDwvbGVmdC5tZW51PlxyXG4gICAgICAgICA8cmlnaHQubWVudT5cclxuICAgICAgICAgICAgPGl0ZW0+SG9tZTwvaXRlbT5cclxuICAgICAgICAgICAgPGl0ZW0+QWJvdXQ8L2l0ZW0+XHJcbiAgICAgICAgICAgIDxpdGVtPkNvbnRhY3Q8L2l0ZW0+XHJcbiAgICAgICAgIDwvcmlnaHQubWVudT5cclxuICAgICAgPC91aS50ZXh0Lm1lbnUubmF2YmFyPlxyXG4gICAgICA8dWkuZGl2aWRlciBNYXJnaW5Cb3R0b209JzEwJyAvPlxyXG4gICAgICA8Q2Fyb3VzZWwgRGF0YVNvdXJjZT0naW1nL2Nhcm91c2VsXzEuanBnLGltZy9jYXJvdXNlbF8yLmpwZyxpbWcvY2Fyb3VzZWxfMy5qcGcnIC8+XHJcbiAgICAgIDx1aS5kaXZpZGVyIE1hcmdpbkJvdHRvbT0nMTAnIC8+XHJcblx0ICA8dWkuY2FyZHM+XHJcblx0ICBcclxuXHRcdCAgPGNhcmQ+XHJcblx0XHRcdCA8dWkuaW1hZ2UgU3JjPSdodHRwOi8vd3d3LnNhbXN1bmtvcmt1Y2lmdGxpZ2kuY29tL3VwbG9hZC8yMDE3MDMxNF9fMjA2OTIwODAyNi5qcGcnIC8+XHJcblx0XHRcdCA8Y29udGVudCBBbGlnbj0nQ2VudGVyJz5cclxuXHRcdFx0XHQ8SGVhZGVyIEFsaWduPSdDZW50ZXInPk1vdG9yIFNhZmFyaTwvSGVhZGVyPlxyXG5cdFx0XHRcdDxkZXNjcmlwdGlvbj5NYWNlcmEgc2l6aSBiZWtsaXlvci4uLjwvZGVzY3JpcHRpb24+XHJcblx0XHRcdFx0PHVpLmJhc2ljLmJ1dHRvbiBUZXh0PSfEsG5jZWxlJyBNYXJnaW5Ub3A9JzExJyBBZGRDbGFzcz0neWVsbG93JyAvPlxyXG5cdFx0XHQgPC9jb250ZW50PlxyXG5cdFx0ICA8L2NhcmQ+XHJcblx0XHQgIFxyXG5cdFx0ICA8Y2FyZD5cclxuXHRcdFx0IDx1aS5pbWFnZSBTcmM9J2h0dHA6Ly93d3cuc2Ftc3Vua29ya3VjaWZ0bGlnaS5jb20vdXBsb2FkLzIwMTcwMzE0X18yMDY5MjA4MDI2LmpwZycgLz5cclxuXHRcdFx0IDxjb250ZW50IEFsaWduPSdDZW50ZXInPlxyXG5cdFx0XHRcdDxIZWFkZXIgQWxpZ249J0NlbnRlcic+TW90b3IgU2FmYXJpPC9IZWFkZXI+XHJcblx0XHRcdFx0PGRlc2NyaXB0aW9uPk1hY2VyYSBzaXppIGJla2xpeW9yLi4uPC9kZXNjcmlwdGlvbj5cclxuXHRcdFx0XHQ8dWkuYmFzaWMuYnV0dG9uIFRleHQ9J8SwbmNlbGUnIE1hcmdpblRvcD0nMTEnIEFkZENsYXNzPSd5ZWxsb3cnIC8+XHJcblx0XHRcdCA8L2NvbnRlbnQ+XHJcblx0XHQgIDwvY2FyZD5cclxuXHRcdCAgXHJcblx0ICA8L3VpLmNhcmRzPlxyXG4gICA8L3VpLmNvbnRhaW5lcj5cclxuPC91aS5wYWdlLmdyaWQ+XHJcblxyXG5cclxuXHJcblwiXHJcbiAgICAgICAgICAgICAgICB9KTtfbzEuQWRkKG5ldyBFeGFtcGxlSW5mb1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIE5hbWUgPSBcIkRhdGFHcmlkXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgWG1sVGVtcGxhdGUgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBAXCJcclxuXHJcblxyXG48dWktY29udGFpbmVyPlxyXG4gICAgPERhdGFHcmlkIC8+XHJcbjwvdWktY29udGFpbmVyPlxyXG5cclxuXCJcclxuICAgICAgICAgICAgICAgIH0pO19vMS5BZGQobmV3IEV4YW1wbGVJbmZvXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgTmFtZSA9IFwiQ2FyZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFhtbFRlbXBsYXRlID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgQFwiXHJcblxyXG48dWkuY2FyZHM+XHJcblxyXG4gICAgPGNhcmQ+XHJcblx0ICAgIDx1aS5pbWFnZSBTcmM9J2h0dHA6Ly93d3cuc2Ftc3Vua29ya3VjaWZ0bGlnaS5jb20vdXBsb2FkLzIwMTcwMzE0X18yMDY5MjA4MDI2LmpwZycvPlxyXG5cdCAgICA8Y29udGVudCBBbGlnbj0nQ2VudGVyJz5cclxuICAgICAgICAgICAgPEhlYWRlciBBbGlnbj0nQ2VudGVyJyA+TW90b3IgU2FmYXJpPC9IZWFkZXI+XHJcbiAgICAgICAgICAgIDxkZXNjcmlwdGlvbj4gTWFjZXJhIHNpemkgYmVrbGl5b3IuLi48L2Rlc2NyaXB0aW9uPlxyXG4gICAgICAgICAgICA8dWkuYmFzaWMuYnV0dG9uIFRleHQ9J8SwbmNlbGUnIE1hcmdpblRvcD0nMTEnIEFkZENsYXNzPSd5ZWxsb3cnIC8+XHJcbiAgICAgICAgPC9jb250ZW50Plx0XHJcbiAgICA8L2NhcmQ+XHJcblxyXG48L3VpLmNhcmRzPlxyXG5cIlxyXG4gICAgICAgICAgICAgICAgfSk7X28xLkFkZChuZXcgRXhhbXBsZUluZm9cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBOYW1lID0gXCJHcmlkLmNvbHVtblwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFhtbFRlbXBsYXRlID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgQFwiXHJcblxyXG5cclxuPHVpLmdyaWQ+XHJcbiAgXHJcbiAgICA8Y29sdW1uIFdpZHRoPScyNycgQWxpZ249J0NlbnRlcic+XHJcbiAgICAgICAgPEljb24gVHlwZT0nU2V0dGluZycgQ29sb3I9JyNmZmJiMDAnIEZvbnRTaXplPScxNycgLz5cclxuICAgIDwvY29sdW1uPlxyXG4gIFxyXG4gIFx0PENvbHVtbiBXaWR0aD0nODAnPlxyXG4gICAgICAgIDxUZXh0QmxvY2sgVGV4dD0nU3RhcnQgRGF0ZTonIENvbG9yPScjODg4ODg4JyBGb250U2l6ZT0nMTMnIEZvbnRXZWlnaHQ9JzYwMCcgVGV4dFdyYXBwaW5nPSdOb1dyYXAnIC8+XHJcbiAgICA8L0NvbHVtbj5cclxuICBcdFxyXG4gIFx0PENvbHVtbiAgIEFsaWduPSdMZWZ0JyA+XHJcbiAgICAgICAgPFRleHRCbG9jayBUZXh0PSdOb3ZlbWJlciAxLCAyMDE3IDE1OjMwJyBDb2xvcj0nIzg4ODg4OCcgRm9udFNpemU9JzEyJyBGb250V2VpZ2h0PSc2MDAnIFRleHRXcmFwcGluZz0nTm9XcmFwJyAvPlxyXG4gICAgPC9Db2x1bW4+XHJcbjwvdWkuZ3JpZD5cclxuXHJcblwiXHJcbiAgICAgICAgICAgICAgICB9KTtfbzEuQWRkKG5ldyBFeGFtcGxlSW5mb1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIE5hbWUgPSBcIkZvcm1cIixcclxuICAgICAgICAgICAgICAgICAgICBYbWxUZW1wbGF0ZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEBcIlxyXG5cclxuXHJcbjx1aS5zZWdtZW50PlxyXG4gIDx1aS5wYWdlLmdyaWQgQWxpZ249J0NlbnRlcicgTWFyZ2luVG9wPSc1Jz5cclxuICAgICAgPHVpLmZvcm0gIFBhZGRpbmc9JzU1JyBCb3JkZXI9JzFweCBzb2xpZCAjZGRkJz5cclxuICAgICAgICA8dWkuaGVhZGVyLjM+SW5wdXQgZm9ybTwvdWkuaGVhZGVyLjM+XHJcbiAgICAgPEZpZWxkIFZhbHVlPSdBJyBMYWJlbD0neXknPlxyXG4gICAgICAgIDxUZXh0Qm94IFBsYWNlSG9sZGVyPSdXcml0ZSAxJyAvPlxyXG4gICAgIDwvRmllbGQ+XHJcbiAgICAgPHVpLnN0YWNrZWQ+XHJcbiAgICAgICAgPEZpZWxkIFZhbHVlPSdBJyBMYWJlbD0neXknID5cclxuICAgICAgICAgICA8VGV4dEJveCBQbGFjZUhvbGRlcj0nV3JpdGUgMScgSXNNYW5kYXRvcnk9J1RydWUnIC8+XHJcbiAgICAgICAgPC9GaWVsZD5cclxuICAgICA8L3VpLnN0YWNrZWQ+XHJcbiAgICAgPHVpLmVxdWFsLndpZHRoLmdyaWQ+XHJcbiAgICAgICAgPGNvbHVtbj5cclxuICAgICAgICAgICA8RmllbGQgVmFsdWU9J0EnIExhYmVsPSd5eSc+XHJcbiAgICAgICAgICAgICAgPFRleHRCb3ggUGxhY2VIb2xkZXI9J1dyaXRlIDEnIC8+XHJcbiAgICAgICAgICAgPC9GaWVsZD5cclxuICAgICAgICA8L2NvbHVtbj5cclxuICAgICAgICA8Y29sdW1uPlxyXG4gICAgICAgICAgIDxGaWVsZCBWYWx1ZT0nQScgTGFiZWw9J3l5Jz5cclxuICAgICAgICAgICAgICA8VGV4dEJveCBQbGFjZUhvbGRlcj0nV3JpdGUgMScgLz5cclxuICAgICAgICAgICA8L0ZpZWxkPlxyXG4gICAgICAgIDwvY29sdW1uPlxyXG4gICAgIDwvdWkuZXF1YWwud2lkdGguZ3JpZD5cclxuICAgICAgICBcclxuICAgICAgICA8dWkuZ3JpZD5cclxuICAgICAgICAgIDxjb2x1bW4gQWxpZ249J1JpZ2h0Jz5cclxuICAgICAgICBcdFx0PHVpLmJ1dHRvbiBUZXh0PSdObycgICAvPlxyXG4gICAgICAgICAgICBcdDx1aS5idXR0b24gVGV4dD0nWWVzJyAgQWRkQ2xhc3M9J3Bvc2l0aXZlJyAgLz5cclxuICAgICAgICAgICAgPC9jb2x1bW4+XHJcbiAgICAgICAgPC91aS5ncmlkPlxyXG4gIDwvdWkuZm9ybT5cclxuICA8L3VpLnBhZ2UuZ3JpZD5cclxuPC91aS5zZWdtZW50PlxyXG5cclxuXHJcblxyXG5cclxuXCJcclxuICAgICAgICAgICAgICAgIH0pO3JldHVybiBfbzE7fSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBMaXN0PEV4YW1wbGVJbmZvPiBFeGFtcGxlc1xyXG4gICAgICAgIExpc3Q8RXhhbXBsZUluZm8+IF9leGFtcGxlcztcclxuXHJcbiAgICAgICAgcHVibGljIExpc3Q8RXhhbXBsZUluZm8+IEV4YW1wbGVzXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gX2V4YW1wbGVzOyB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoX2V4YW1wbGVzICE9IHZhbHVlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIF9leGFtcGxlcyA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIE9uUHJvcGVydHlDaGFuZ2VkKFwiRXhhbXBsZXNcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIHN0cmluZyBDdXJyZW50VGVtcGxhdGVcclxuICAgICAgICBzdHJpbmcgX2N1cnJlbnRUZW1wbGF0ZTtcclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBDdXJyZW50VGVtcGxhdGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBfY3VycmVudFRlbXBsYXRlOyB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoX2N1cnJlbnRUZW1wbGF0ZSAhPSB2YWx1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBfY3VycmVudFRlbXBsYXRlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgT25Qcm9wZXJ0eUNoYW5nZWQoXCJDdXJyZW50VGVtcGxhdGVcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuXHJcbiAgICB9XHJcbn0iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5HbG9iYWxpemF0aW9uO1xyXG5cclxubmFtZXNwYWNlIFN5c3RlbS5XaW5kb3dzLkRhdGFcclxue1xyXG4gICAgcHVibGljIGludGVyZmFjZSBJVmFsdWVDb252ZXJ0ZXJcclxuICAgIHtcclxuICAgICAgICBvYmplY3QgQ29udmVydChvYmplY3QgdmFsdWUsIFR5cGUgdGFyZ2V0VHlwZSwgb2JqZWN0IHBhcmFtZXRlciwgQ3VsdHVyZUluZm8gY3VsdHVyZSk7XHJcblxyXG4gICAgICBcclxuICAgICAgICBvYmplY3QgQ29udmVydEJhY2sob2JqZWN0IHZhbHVlLCBUeXBlIHRhcmdldFR5cGUsIG9iamVjdCBwYXJhbWV0ZXIsIEN1bHR1cmVJbmZvIGN1bHR1cmUpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBuYW1lc3BhY2UgQ29udmVydGVyc1xyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzZWFsZWQgY2xhc3MgQm9vbGVhblRvVmlzaWJpbGl0eUNvbnZlcnRlciA6IElWYWx1ZUNvbnZlcnRlclxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgI3JlZ2lvbiBQdWJsaWMgTWV0aG9kc1xyXG4gICAgICAgICAgICBwdWJsaWMgb2JqZWN0IENvbnZlcnQob2JqZWN0IHZhbHVlLCBUeXBlIHRhcmdldFR5cGUsIG9iamVjdCBwYXJhbWV0ZXIsIEN1bHR1cmVJbmZvIGN1bHR1cmUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSBpcyBib29sKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoYm9vbCl2YWx1ZSA/IFZpc2liaWxpdHkuVmlzaWJsZSA6IFZpc2liaWxpdHkuQ29sbGFwc2VkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBWaXNpYmlsaXR5LkNvbGxhcHNlZDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcHVibGljIG9iamVjdCBDb252ZXJ0QmFjayhvYmplY3QgdmFsdWUsIFR5cGUgdGFyZ2V0VHlwZSwgb2JqZWN0IHBhcmFtZXRlciwgQ3VsdHVyZUluZm8gY3VsdHVyZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEodmFsdWUgaXMgVmlzaWJpbGl0eSkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChWaXNpYmlsaXR5KXZhbHVlID09IFZpc2liaWxpdHkuVmlzaWJsZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAjZW5kcmVnaW9uXHJcbiAgICAgICAgfVxyXG5cclxuXHJcblxyXG4gICAgICAgIFxyXG5cclxuXHJcblxyXG5cclxuICAgIH1cclxufSIsInVzaW5nIEJyaWRnZS5IdG1sNTtcclxudXNpbmcgQnJpZGdlLmpRdWVyeTI7XHJcblxyXG5uYW1lc3BhY2UgU3lzdGVtLldpbmRvd3MuRGF0YVxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgSFRNTEJpbmRpbmdJbmZvIDogQmluZGluZ0luZm9cclxuICAgIHtcclxuICAgICAgICAjcmVnaW9uIFB1YmxpYyBQcm9wZXJ0aWVzXHJcbiAgICAgICAgcHVibGljIG5ldyBqUXVlcnkgVGFyZ2V0XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gKGpRdWVyeSkgYmFzZS5UYXJnZXQ7IH1cclxuICAgICAgICAgICAgc2V0IHsgYmFzZS5UYXJnZXQgPSB2YWx1ZTsgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gUHVibGljIE1ldGhvZHNcclxuICAgICAgICBwdWJsaWMgbmV3IHN0YXRpYyBIVE1MQmluZGluZ0luZm8gVHJ5UGFyc2VFeHByZXNzaW9uKHN0cmluZyB2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBiaW5kaW5nSW5mbyA9IEJpbmRpbmdJbmZvLlRyeVBhcnNlRXhwcmVzc2lvbih2YWx1ZSk7XHJcbiAgICAgICAgICAgIGlmIChiaW5kaW5nSW5mbyA9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBIVE1MQmluZGluZ0luZm9cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgU291cmNlUGF0aCA9IGJpbmRpbmdJbmZvLlNvdXJjZVBhdGgsXHJcbiAgICAgICAgICAgICAgICBDb252ZXJ0ZXIgPSBiaW5kaW5nSW5mby5Db252ZXJ0ZXJcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgb2JqZWN0IEdldFRhcmdldFZhbHVlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBUYXJnZXQuVmFsKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBVcGRhdGVUYXJnZXQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHZhbHVlID0gU291cmNlUGF0aC5HZXRQcm9wZXJ0eVZhbHVlKCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgcGF0aCA9IFRhcmdldFBhdGguUGF0aC5Ub1VwcGVyQ2FzZSgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHBhdGggPT0gXCJJTk5FUkhUTUxcIilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVGFyZ2V0Lkh0bWwodmFsdWUgKyBcIlwiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHBhdGggPT0gXCJWQUxVRVwiKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBUYXJnZXQuVmFsKHZhbHVlICsgXCJcIikuQ2hhbmdlKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIFRhcmdldC5BdHRyKFRhcmdldFBhdGguUGF0aCwgdmFsdWUgKyBcIlwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIE1ldGhvZHNcclxuICAgICAgICBpbnRlcm5hbCBzdGF0aWMgYm9vbCBUYXJnZXRDYW5VcGRhdGVTb3VyY2UoalF1ZXJ5IGVsZW1lbnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoZWxlbWVudC5HZXQoMCkuVGFnTmFtZSA9PSBcIklOUFVUXCIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB0eXBlID0gZWxlbWVudC5BdHRyKFwidHlwZVwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoKHR5cGUhPW51bGw/dHlwZS5Ub1VwcGVyQ2FzZSgpOihzdHJpbmcpbnVsbCkgPT0gXCJISURERU5cIilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgQ29ubmVjdFRhcmdldFRvU291cmNlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gVGFyZ2V0O1xyXG5cclxuICAgICAgICAgICAgaWYgKGVsZW1lbnQuR2V0KDApLlRhZ05hbWUgPT0gXCJJTlBVVFwiKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdHlwZSA9IGVsZW1lbnQuQXR0cihcInR5cGVcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCh0eXBlIT1udWxsP3R5cGUuVG9VcHBlckNhc2UoKTooc3RyaW5nKW51bGwpID09IFwiSElEREVOXCIpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgVGFyZ2V0Lk9uKFwiY2hhbmdlXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pVXBkYXRlU291cmNlKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIFRhcmdldC5Gb2N1c091dCgoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPGdsb2JhbDo6QnJpZGdlLmpRdWVyeTIualF1ZXJ5Rm9jdXNFdmVudD4pKGV2ID0+IHsgVXBkYXRlU291cmNlKCk7IH0pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG4gICAgfVxyXG59IiwidXNpbmcgQnJpZGdlLkN1c3RvbVVJTWFya3VwLlVJO1xyXG5cclxubmFtZXNwYWNlIFN5c3RlbS5XaW5kb3dzLkNvbnRyb2xzXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBDb250cm9sIDogRnJhbWV3b3JrRWxlbWVudFxyXG4gICAge1xyXG4gICAgICAgICNyZWdpb24gRXZlbnRzXHJcbiAgICAgICAgcHJvdGVjdGVkIGludGVybmFsIGV2ZW50IEFjdGlvbiBBZnRlclRlbXBsYXRlQXBwbGllZDtcclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gUHVibGljIFByb3BlcnRpZXNcclxuICAgICAgICBwdWJsaWMgdmlydHVhbCBzdHJpbmcgRGVmYXVsdFRlbXBsYXRlQXNYbWxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBudWxsOyB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVGVtcGxhdGUgVGVtcGxhdGUgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBQcm9wZXJ0aWVzXHJcbiAgICAgICAgaW50ZXJuYWwgVGVtcGxhdGUgRGVmYXVsdFRlbXBsYXRlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IEdldFR5cGUoKS5GdWxsTmFtZTtcclxuXHJcbiAgICAgICAgICAgICAgICBUZW1wbGF0ZSB0ZW1wbGF0ZSA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKFRlbXBsYXRlLkNhY2hlLlRyeUdldFZhbHVlKGtleSwgb3V0IHRlbXBsYXRlKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcGxhdGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGRlZmF1bHRUZW1wbGF0ZUFzWG1sID0gRGVmYXVsdFRlbXBsYXRlQXNYbWw7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGVmYXVsdFRlbXBsYXRlQXNYbWwgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBUZW1wbGF0ZS5DYWNoZVtrZXldID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZSA9IFRlbXBsYXRlLkNyZWF0ZUZyb21YbWwoZGVmYXVsdFRlbXBsYXRlQXNYbWwpO1xyXG5cclxuICAgICAgICAgICAgICAgIFRlbXBsYXRlLkNhY2hlW2tleV0gPSB0ZW1wbGF0ZTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGVtcGxhdGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIE1ldGhvZHNcclxuICAgICAgICBpbnRlcm5hbCB2b2lkIEFwcGx5VGVtcGxhdGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHRlbXBsYXRlID0gVGVtcGxhdGUgPz8gRGVmYXVsdFRlbXBsYXRlO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRlbXBsYXRlID09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgQnVpbGRlci5CdWlsZENvbnRyb2xUZW1wbGF0ZSh0ZW1wbGF0ZSwgdGhpcyk7XHJcblxyXG4gICAgICAgICAgICBBZnRlclRlbXBsYXRlQXBwbGllZCE9bnVsbD9nbG9iYWw6OkJyaWRnZS5TY3JpcHQuRnJvbUxhbWJkYSgoKT0+QWZ0ZXJUZW1wbGF0ZUFwcGxpZWQuSW52b2tlKCkpOm51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgVXNlckNvbnRyb2wgOiBDb250ZW50Q29udHJvbFxyXG4gICAge1xyXG4gICAgICAgICNyZWdpb24gUHVibGljIFByb3BlcnRpZXNcclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgc3RyaW5nIERlZmF1bHRUZW1wbGF0ZUFzWG1sIHtnZXR7cmV0dXJuIFwiPGRpdiBIZWlnaHRQZXJjZW50ID0gJzEwMCcgXCIgK1xyXG4gICAgICAgICAgICBcIiAgICAgV2lkdGhQZXJjZW50ICA9ICcxMDAnID5cIiArXHJcbiAgICAgICAgICAgIFwiICAgIDxDb250ZW50UHJlc2VudGVyIEhlaWdodFBlcmNlbnQgPSAnMTAwJyBXaWR0aFBlcmNlbnQgID0gJzEwMCcgLz5cIiArXHJcbiAgICAgICAgICAgIFwiPC9kaXY+XCI7fX1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcbiAgICB9XHJcbn0iLCJ1c2luZyBTeXN0ZW0uQ29tcG9uZW50TW9kZWw7XHJcbnVzaW5nIFN5c3RlbS5EaWFnbm9zdGljcy5Db250cmFjdHM7XHJcbnVzaW5nIFN5c3RlbS5XaW5kb3dzLkNvbnRyb2xzO1xyXG51c2luZyBCcmlkZ2UuQ3VzdG9tVUlNYXJrdXAuQ29tbW9uO1xyXG51c2luZyBCcmlkZ2UuQ3VzdG9tVUlNYXJrdXAuTGlicmFyaWVzLlNlbWFudGljVUk7XHJcbnVzaW5nIEJyaWRnZS5DdXN0b21VSU1hcmt1cC5VSTtcclxudXNpbmcgQnJpZGdlLkh0bWw1O1xyXG51c2luZyBCcmlkZ2UualF1ZXJ5MjtcclxuXHJcbm5hbWVzcGFjZSBTeXN0ZW0uV2luZG93c1xyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgSHRtbEVsZW1lbnQgOiBGcmFtZXdvcmtFbGVtZW50XHJcbiAgICB7XHJcbiAgICAgICAgI3JlZ2lvbiBDb25zdHJ1Y3RvcnNcclxuICAgICAgICBwdWJsaWMgSHRtbEVsZW1lbnQoc3RyaW5nIHRhZyA9IG51bGwsIHN0cmluZyBjbGFzc05hbWUgPSBudWxsKSA6IGJhc2UodGFnLCBjbGFzc05hbWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBZnRlckxvZ2ljYWxDaGlsZEFkZCArPSBBZGRWaXN1YWxDaGlsZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBwYXJ0aWFsIGNsYXNzIEZyYW1ld29ya0VsZW1lbnQgOiBEZXBlbmRlbmN5T2JqZWN0XHJcbiAgICB7XHJcbiAgICAgICAgI3JlZ2lvbiBDb25zdHJ1Y3RvcnNcclxuICAgICAgICBwdWJsaWMgRnJhbWV3b3JrRWxlbWVudChzdHJpbmcgdGFnID0gbnVsbCwgc3RyaW5nIGNsYXNzTmFtZSA9IG51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAodGFnICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF9yb290ID0gRE9NLkNyZWF0ZUVsZW1lbnQodGFnLCBjbGFzc05hbWUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBQcm9wZXJ0eUNoYW5nZWQgKz0gKHMsIGUpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBwcm9wZXJ0eUNoYW5nZUV2ZW50QXJncyA9IGUgYXMgQmFnQ2hhbmdlZEV2ZW50QXJncztcclxuICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0eUNoYW5nZUV2ZW50QXJncyAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIERlcGVuZGVuY3lQcm9wZXJ0eS5UcnlJbnZva2VPblByb3BlcnR5Q2hhbmdlKHRoaXMsIHByb3BlcnR5Q2hhbmdlRXZlbnRBcmdzLlByb3BlcnR5TmFtZSwgcHJvcGVydHlDaGFuZ2VFdmVudEFyZ3MuTmV3VmFsdWUsIHByb3BlcnR5Q2hhbmdlRXZlbnRBcmdzLk9sZFZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgIFxyXG5cclxuICAgXHJcblxyXG4gICAgICAgICNyZWdpb24gUHVibGljIFByb3BlcnRpZXNcclxuICAgICAgICBwdWJsaWMgalF1ZXJ5IFJvb3Qge2dldHtyZXR1cm4gX3Jvb3Q7fX1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gUHVibGljIE1ldGhvZHNcclxuICAgICAgXHJcblxyXG4gICAgICAgXHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIHZvaWQgSW5pdERPTSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoX3Jvb3QgPT0gbnVsbCkgLy8gVE9ETzogcmVtb3ZlIG5leHQgdmVyc2lvblxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfcm9vdCA9IG5ldyBqUXVlcnkoRG9jdW1lbnQuQ3JlYXRlRWxlbWVudChcImRpdlwiKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIE9uKHN0cmluZyBldmVudE5hbWUsIEFjdGlvbiBoYW5kbGVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX3Jvb3QuT24oZXZlbnROYW1lLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKWhhbmRsZXIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIE1ldGhvZHNcclxuICAgICAgIFxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgc3RhdGljIFByb3BlcnR5TWV0YWRhdGEgQWRkQ3NzQ2xhc3NPblRydWVFbHNlUmVtb3ZlKHN0cmluZyBjc3NDbGFzcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvcGVydHlNZXRhZGF0YSgoZCwgZSkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lID0gKEZyYW1ld29ya0VsZW1lbnQpIGQ7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGUuTmV3VmFsdWUuVG9Cb29sZWFuTnVsbGFibGUoKSA9PSB0cnVlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lLl9yb290LkFkZENsYXNzKGNzc0NsYXNzKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgbWUuX3Jvb3QuUmVtb3ZlQ2xhc3MoY3NzQ2xhc3MpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBzdGF0aWMgUHJvcGVydHlNZXRhZGF0YSBDcmVhdGVIdG1sQXR0cmlidXRlVXBkYXRlcihzdHJpbmcgaHRtbEF0dHJpYnV0ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvcGVydHlNZXRhZGF0YSgoZCwgZSkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lID0gKEZyYW1ld29ya0VsZW1lbnQpIGQ7XHJcblxyXG4gICAgICAgICAgICAgICAgbWUuX3Jvb3QuQXR0cihodG1sQXR0cmlidXRlLCBnbG9iYWw6OkJyaWRnZS5TY3JpcHQuVG9UZW1wKFwia2V5MVwiLGUuTmV3VmFsdWUpIT1udWxsP2dsb2JhbDo6QnJpZGdlLlNjcmlwdC5Gcm9tVGVtcDxvYmplY3Q+KFwia2V5MVwiKS5Ub1N0cmluZygpOihzdHJpbmcpbnVsbCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHN0YXRpYyBQcm9wZXJ0eU1ldGFkYXRhIENyZWF0ZUpRdWVyeUNzc1VwZGF0ZXIoc3RyaW5nIGpxdWVyeUNzc0F0dHJpYnV0ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvcGVydHlNZXRhZGF0YSgoZCwgZSkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lID0gKEZyYW1ld29ya0VsZW1lbnQpIGQ7XHJcblxyXG4gICAgICAgICAgICAgICAgbWUuX3Jvb3QuQ3NzKGpxdWVyeUNzc0F0dHJpYnV0ZSwgZS5OZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHN0YXRpYyBQcm9wZXJ0eU1ldGFkYXRhIENyZWF0ZUpRdWVyeUNzc1VwZGF0ZXIoc3RyaW5nIGpxdWVyeUNzc0F0dHJpYnV0ZSwgRnVuYzxvYmplY3QsIG9iamVjdD4gdmFsdWVDb252ZXJ0ZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb3BlcnR5TWV0YWRhdGEoKGQsIGUpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBtZSA9IChGcmFtZXdvcmtFbGVtZW50KSBkO1xyXG5cclxuICAgICAgICAgICAgICAgIG1lLl9yb290LkNzcyhqcXVlcnlDc3NBdHRyaWJ1dGUsIHZhbHVlQ29udmVydGVyKGUuTmV3VmFsdWUpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgc3RhdGljIERlcGVuZGVuY3lQcm9wZXJ0eSBSZWdpc3RlckRlcGVuZGVuY3lQcm9wZXJ0eShzdHJpbmcgbmFtZSwgVHlwZSBwcm9wZXJ0eVR5cGUsIFR5cGUgb3duZXJUeXBlLCBQcm9wZXJ0eUNoYW5nZWRDYWxsYmFjayBwcm9wZXJ0eUNoYW5nZWRDYWxsYmFjaylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBEZXBlbmRlbmN5UHJvcGVydHkuUmVnaXN0ZXIobmFtZSwgcHJvcGVydHlUeXBlLCBvd25lclR5cGUsIG5ldyBQcm9wZXJ0eU1ldGFkYXRhKHByb3BlcnR5Q2hhbmdlZENhbGxiYWNrKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgIFxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBCb3JkZXJQcm9wZXJ0eVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgRGVwZW5kZW5jeVByb3BlcnR5IEJvcmRlclByb3BlcnR5ID0gRGVwZW5kZW5jeVByb3BlcnR5LlJlZ2lzdGVyKFwiQm9yZGVyXCIsIHR5cGVvZihzdHJpbmcpLCB0eXBlb2YoRnJhbWV3b3JrRWxlbWVudCksIENyZWF0ZUpRdWVyeUNzc1VwZGF0ZXIoXCJib3JkZXJcIikpO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIEJvcmRlclxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIChzdHJpbmcpIEdldFZhbHVlKEJvcmRlclByb3BlcnR5KTsgfVxyXG4gICAgICAgICAgICBzZXQgeyBTZXRWYWx1ZShCb3JkZXJQcm9wZXJ0eSwgdmFsdWUpOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBDbGFzc1Byb3BlcnR5XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyByZWFkb25seSBEZXBlbmRlbmN5UHJvcGVydHkgQ2xhc3NQcm9wZXJ0eSA9IERlcGVuZGVuY3lQcm9wZXJ0eS5SZWdpc3RlcihcIkNsYXNzXCIsIHR5cGVvZihzdHJpbmcpLCB0eXBlb2YoRnJhbWV3b3JrRWxlbWVudCksIENyZWF0ZUh0bWxBdHRyaWJ1dGVVcGRhdGVyKFwiY2xhc3NcIikpO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIENsYXNzXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gKHN0cmluZykgR2V0VmFsdWUoQ2xhc3NQcm9wZXJ0eSk7IH1cclxuICAgICAgICAgICAgc2V0IHsgU2V0VmFsdWUoQ2xhc3NQcm9wZXJ0eSwgdmFsdWUpOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBBZGRDbGFzc1Byb3BlcnR5XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyByZWFkb25seSBEZXBlbmRlbmN5UHJvcGVydHkgQWRkQ2xhc3NQcm9wZXJ0eSA9IERlcGVuZGVuY3lQcm9wZXJ0eS5SZWdpc3RlcihcIkFkZENsYXNzXCIsIHR5cGVvZihzdHJpbmcpLCB0eXBlb2YoRnJhbWV3b3JrRWxlbWVudCksIG5ldyBQcm9wZXJ0eU1ldGFkYXRhKE9uQWRkQ2xhc3NDaGFuZ2VkKSk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgQWRkQ2xhc3NcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiAoc3RyaW5nKSBHZXRWYWx1ZShBZGRDbGFzc1Byb3BlcnR5KTsgfVxyXG4gICAgICAgICAgICBzZXQgeyBTZXRWYWx1ZShBZGRDbGFzc1Byb3BlcnR5LCB2YWx1ZSk7IH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBzdGF0aWMgdm9pZCBPbkFkZENsYXNzQ2hhbmdlZChEZXBlbmRlbmN5T2JqZWN0IGQsIERlcGVuZGVuY3lQcm9wZXJ0eUNoYW5nZWRFdmVudEFyZ3MgZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBtZSA9IChGcmFtZXdvcmtFbGVtZW50KSBkO1xyXG5cclxuICAgICAgICAgICAgbWUuX3Jvb3QhPW51bGw/bWUuX3Jvb3QuQWRkQ2xhc3MoKHN0cmluZykgZS5OZXdWYWx1ZSk6KGpRdWVyeSludWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gTWFyZ2luXHJcbiAgICAgICAgI3JlZ2lvbiBNYXJnaW5Qcm9wZXJ0eVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgRGVwZW5kZW5jeVByb3BlcnR5IE1hcmdpblByb3BlcnR5ID0gRGVwZW5kZW5jeVByb3BlcnR5LlJlZ2lzdGVyKFwiTWFyZ2luXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZW9mKGRvdWJsZT8pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVvZihGcmFtZXdvcmtFbGVtZW50KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDcmVhdGVKUXVlcnlDc3NVcGRhdGVyKFwibWFyZ2luXCIpKTtcclxuXHJcbiAgICAgICAgcHVibGljIGRvdWJsZT8gTWFyZ2luXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gKGRvdWJsZT8pIEdldFZhbHVlKE1hcmdpblByb3BlcnR5KTsgfVxyXG4gICAgICAgICAgICBzZXQgeyBTZXRWYWx1ZShNYXJnaW5Qcm9wZXJ0eSwgdmFsdWUpOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBNYXJnaW5MZWZ0UHJvcGVydHlcclxuICAgICAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IERlcGVuZGVuY3lQcm9wZXJ0eSBNYXJnaW5MZWZ0UHJvcGVydHkgPSBEZXBlbmRlbmN5UHJvcGVydHkuUmVnaXN0ZXIoXCJNYXJnaW5MZWZ0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVvZihkb3VibGU/KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZW9mKEZyYW1ld29ya0VsZW1lbnQpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDcmVhdGVKUXVlcnlDc3NVcGRhdGVyKFwibWFyZ2luTGVmdFwiKSk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBkb3VibGU/IE1hcmdpbkxlZnRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiAoZG91YmxlPykgR2V0VmFsdWUoTWFyZ2luTGVmdFByb3BlcnR5KTsgfVxyXG4gICAgICAgICAgICBzZXQgeyBTZXRWYWx1ZShNYXJnaW5MZWZ0UHJvcGVydHksIHZhbHVlKTsgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gTWFyZ2luUmlnaHRQcm9wZXJ0eVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgRGVwZW5kZW5jeVByb3BlcnR5IE1hcmdpblJpZ2h0UHJvcGVydHkgPSBEZXBlbmRlbmN5UHJvcGVydHkuUmVnaXN0ZXIoXCJNYXJnaW5SaWdodFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZW9mKGRvdWJsZT8pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZW9mKEZyYW1ld29ya0VsZW1lbnQpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ3JlYXRlSlF1ZXJ5Q3NzVXBkYXRlcihcIm1hcmdpblJpZ2h0XCIpKTtcclxuXHJcbiAgICAgICAgcHVibGljIGRvdWJsZT8gTWFyZ2luUmlnaHRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiAoZG91YmxlPykgR2V0VmFsdWUoTWFyZ2luUmlnaHRQcm9wZXJ0eSk7IH1cclxuICAgICAgICAgICAgc2V0IHsgU2V0VmFsdWUoTWFyZ2luUmlnaHRQcm9wZXJ0eSwgdmFsdWUpOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBNYXJnaW5Cb3R0b21Qcm9wZXJ0eVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgRGVwZW5kZW5jeVByb3BlcnR5IE1hcmdpbkJvdHRvbVByb3BlcnR5ID0gRGVwZW5kZW5jeVByb3BlcnR5LlJlZ2lzdGVyKFwiTWFyZ2luQm90dG9tXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZW9mKGRvdWJsZT8pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVvZihGcmFtZXdvcmtFbGVtZW50KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDcmVhdGVKUXVlcnlDc3NVcGRhdGVyKFwibWFyZ2luQm90dG9tXCIpKTtcclxuXHJcbiAgICAgICAgcHVibGljIGRvdWJsZT8gTWFyZ2luQm90dG9tXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gKGRvdWJsZT8pIEdldFZhbHVlKE1hcmdpbkJvdHRvbVByb3BlcnR5KTsgfVxyXG4gICAgICAgICAgICBzZXQgeyBTZXRWYWx1ZShNYXJnaW5Cb3R0b21Qcm9wZXJ0eSwgdmFsdWUpOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBNYXJnaW5Ub3BQcm9wZXJ0eVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgRGVwZW5kZW5jeVByb3BlcnR5IE1hcmdpblRvcFByb3BlcnR5ID0gRGVwZW5kZW5jeVByb3BlcnR5LlJlZ2lzdGVyKFwiTWFyZ2luVG9wXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZW9mKGRvdWJsZT8pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVvZihGcmFtZXdvcmtFbGVtZW50KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDcmVhdGVKUXVlcnlDc3NVcGRhdGVyKFwibWFyZ2luVG9wXCIpKTtcclxuXHJcbiAgICAgICAgcHVibGljIGRvdWJsZT8gTWFyZ2luVG9wXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gKGRvdWJsZT8pIEdldFZhbHVlKE1hcmdpblRvcFByb3BlcnR5KTsgfVxyXG4gICAgICAgICAgICBzZXQgeyBTZXRWYWx1ZShNYXJnaW5Ub3BQcm9wZXJ0eSwgdmFsdWUpOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gUGFkZGluZ1xyXG4gICAgICAgICNyZWdpb24gUGFkZGluZ0xlZnRQcm9wZXJ0eVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgRGVwZW5kZW5jeVByb3BlcnR5IFBhZGRpbmdMZWZ0UHJvcGVydHkgPSBEZXBlbmRlbmN5UHJvcGVydHkuUmVnaXN0ZXIoXCJQYWRkaW5nTGVmdFwiLCB0eXBlb2YoZG91YmxlPyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlb2YoRnJhbWV3b3JrRWxlbWVudCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDcmVhdGVKUXVlcnlDc3NVcGRhdGVyKFwicGFkZGluZ0xlZnRcIikpO1xyXG5cclxuICAgICAgICBwdWJsaWMgZG91YmxlPyBQYWRkaW5nTGVmdFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIChkb3VibGU/KSBHZXRWYWx1ZShQYWRkaW5nTGVmdFByb3BlcnR5KTsgfVxyXG4gICAgICAgICAgICBzZXQgeyBTZXRWYWx1ZShQYWRkaW5nTGVmdFByb3BlcnR5LCB2YWx1ZSk7IH1cclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIFBhZGRpbmdSaWdodFByb3BlcnR5XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyByZWFkb25seSBEZXBlbmRlbmN5UHJvcGVydHkgUGFkZGluZ1JpZ2h0UHJvcGVydHkgPSBEZXBlbmRlbmN5UHJvcGVydHkuUmVnaXN0ZXIoXCJQYWRkaW5nUmlnaHRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlb2YoZG91YmxlPyksIHR5cGVvZihGcmFtZXdvcmtFbGVtZW50KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDcmVhdGVKUXVlcnlDc3NVcGRhdGVyKFwicGFkZGluZ1JpZ2h0XCIpKTtcclxuXHJcbiAgICAgICAgcHVibGljIGRvdWJsZT8gUGFkZGluZ1JpZ2h0XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gKGRvdWJsZT8pIEdldFZhbHVlKFBhZGRpbmdSaWdodFByb3BlcnR5KTsgfVxyXG4gICAgICAgICAgICBzZXQgeyBTZXRWYWx1ZShQYWRkaW5nUmlnaHRQcm9wZXJ0eSwgdmFsdWUpOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBQYWRkaW5nQm90dG9tUHJvcGVydHlcclxuICAgICAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IERlcGVuZGVuY3lQcm9wZXJ0eSBQYWRkaW5nQm90dG9tUHJvcGVydHkgPSBEZXBlbmRlbmN5UHJvcGVydHkuUmVnaXN0ZXIoXCJQYWRkaW5nQm90dG9tXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVvZihkb3VibGU/KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZW9mKEZyYW1ld29ya0VsZW1lbnQpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDcmVhdGVKUXVlcnlDc3NVcGRhdGVyKFwicGFkZGluZ0JvdHRvbVwiKSk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBkb3VibGU/IFBhZGRpbmdCb3R0b21cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiAoZG91YmxlPykgR2V0VmFsdWUoUGFkZGluZ0JvdHRvbVByb3BlcnR5KTsgfVxyXG4gICAgICAgICAgICBzZXQgeyBTZXRWYWx1ZShQYWRkaW5nQm90dG9tUHJvcGVydHksIHZhbHVlKTsgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gUGFkZGluZ1RvcFByb3BlcnR5XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyByZWFkb25seSBEZXBlbmRlbmN5UHJvcGVydHkgUGFkZGluZ1RvcFByb3BlcnR5ID0gRGVwZW5kZW5jeVByb3BlcnR5LlJlZ2lzdGVyKFwiUGFkZGluZ1RvcFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlb2YoZG91YmxlPyksIHR5cGVvZihGcmFtZXdvcmtFbGVtZW50KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ3JlYXRlSlF1ZXJ5Q3NzVXBkYXRlcihcInBhZGRpbmdUb3BcIikpO1xyXG5cclxuICAgICAgICBwdWJsaWMgZG91YmxlPyBQYWRkaW5nVG9wXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gKGRvdWJsZT8pIEdldFZhbHVlKFBhZGRpbmdUb3BQcm9wZXJ0eSk7IH1cclxuICAgICAgICAgICAgc2V0IHsgU2V0VmFsdWUoUGFkZGluZ1RvcFByb3BlcnR5LCB2YWx1ZSk7IH1cclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIFBhZGRpbmdCb3R0b21Qcm9wZXJ0eVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgRGVwZW5kZW5jeVByb3BlcnR5IFBhZGRpbmdQcm9wZXJ0eSA9IERlcGVuZGVuY3lQcm9wZXJ0eS5SZWdpc3RlcihcIlBhZGRpbmdcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZW9mKGRvdWJsZT8pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlb2YoRnJhbWV3b3JrRWxlbWVudCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENyZWF0ZUpRdWVyeUNzc1VwZGF0ZXIoXCJwYWRkaW5nXCIpKTtcclxuXHJcbiAgICAgICAgcHVibGljIGRvdWJsZT8gUGFkZGluZ1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIChkb3VibGU/KSBHZXRWYWx1ZShQYWRkaW5nUHJvcGVydHkpOyB9XHJcbiAgICAgICAgICAgIHNldCB7IFNldFZhbHVlKFBhZGRpbmdQcm9wZXJ0eSwgdmFsdWUpOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gVGV4dFdyYXBwaW5nUHJvcGVydHlcclxuICAgICAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IERlcGVuZGVuY3lQcm9wZXJ0eSBUZXh0V3JhcHBpbmdQcm9wZXJ0eSA9IERlcGVuZGVuY3lQcm9wZXJ0eS5SZWdpc3RlcihcIlRleHRXcmFwcGluZ1wiLCB0eXBlb2YoVGV4dFdyYXBwaW5nKSwgdHlwZW9mKEZyYW1ld29ya0VsZW1lbnQpLCBuZXcgUHJvcGVydHlNZXRhZGF0YShPblRleHRXcmFwcGluZ0NoYW5nZWQpKTtcclxuXHJcbiAgICAgICAgcHVibGljIFRleHRXcmFwcGluZyBUZXh0V3JhcHBpbmdcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiAoVGV4dFdyYXBwaW5nKSB0aGlzW1wiVGV4dFdyYXBwaW5nXCJdOyB9XHJcbiAgICAgICAgICAgIHNldCB7IHRoaXNbXCJUZXh0V3JhcHBpbmdcIl0gPSB2YWx1ZTsgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIHZvaWQgT25UZXh0V3JhcHBpbmdDaGFuZ2VkKERlcGVuZGVuY3lPYmplY3QgZCwgRGVwZW5kZW5jeVByb3BlcnR5Q2hhbmdlZEV2ZW50QXJncyBlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG1lID0gKEZyYW1ld29ya0VsZW1lbnQpIGQ7XHJcblxyXG4gICAgICAgICAgICB2YXIgdmFsdWUgPSAoVGV4dFdyYXBwaW5nKSBlLk5ld1ZhbHVlO1xyXG4gICAgICAgICAgICBpZiAodmFsdWUgPT0gVGV4dFdyYXBwaW5nLk5vV3JhcClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbWUuX3Jvb3QuQ3NzKFwid2hpdGUtc3BhY2VcIiwgXCJub3dyYXBcIik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHZhbHVlID09IFRleHRXcmFwcGluZy5XcmFwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBtZS5fcm9vdC5Dc3MoXCJ3aGl0ZS1zcGFjZVwiLCBcIm5vcm1hbFwiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uKHZhbHVlLlRvU3RyaW5nKCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gRm9udFdlaWdodFByb3BlcnR5XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyByZWFkb25seSBEZXBlbmRlbmN5UHJvcGVydHkgRm9udFdlaWdodFByb3BlcnR5ID0gRGVwZW5kZW5jeVByb3BlcnR5LlJlZ2lzdGVyKFwiRm9udFdlaWdodFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlb2YoZG91YmxlKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZW9mKEZyYW1ld29ya0VsZW1lbnQpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDcmVhdGVKUXVlcnlDc3NVcGRhdGVyKFwiZm9udFdlaWdodFwiKSk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBvYmplY3QgRm9udFdlaWdodFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIHRoaXNbXCJGb250V2VpZ2h0XCJdOyB9XHJcbiAgICAgICAgICAgIHNldCB7IHRoaXNbXCJGb250V2VpZ2h0XCJdID0gdmFsdWU7IH1cclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIEZvbnRTaXplUHJvcGVydHlcclxuICAgICAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IERlcGVuZGVuY3lQcm9wZXJ0eSBGb250U2l6ZVByb3BlcnR5ID0gRGVwZW5kZW5jeVByb3BlcnR5LlJlZ2lzdGVyKFwiRm9udFNpemVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVvZihkb3VibGUpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZW9mKEZyYW1ld29ya0VsZW1lbnQpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ3JlYXRlSlF1ZXJ5Q3NzVXBkYXRlcihcImZvbnRTaXplXCIpKTtcclxuXHJcbiAgICAgICAgcHVibGljIGRvdWJsZSBGb250U2l6ZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIChkb3VibGUpIEdldFZhbHVlKEZvbnRTaXplUHJvcGVydHkpOyB9XHJcbiAgICAgICAgICAgIHNldCB7IFNldFZhbHVlKEZvbnRTaXplUHJvcGVydHksIHZhbHVlKTsgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gV2lkdGhQcm9wZXJ0eVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgRGVwZW5kZW5jeVByb3BlcnR5IFdpZHRoUHJvcGVydHkgPSBEZXBlbmRlbmN5UHJvcGVydHkuUmVnaXN0ZXIoXCJXaWR0aFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZW9mKGRvdWJsZSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlb2YoRnJhbWV3b3JrRWxlbWVudCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDcmVhdGVKUXVlcnlDc3NVcGRhdGVyKFwid2lkdGhcIikpO1xyXG5cclxuICAgICAgICBwdWJsaWMgZG91YmxlIFdpZHRoXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gKGRvdWJsZSkgR2V0VmFsdWUoV2lkdGhQcm9wZXJ0eSk7IH1cclxuICAgICAgICAgICAgc2V0IHsgU2V0VmFsdWUoV2lkdGhQcm9wZXJ0eSwgdmFsdWUpOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBXaWR0aFByb3BlcnR5XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyByZWFkb25seSBEZXBlbmRlbmN5UHJvcGVydHkgV2lkdGhQZXJjZW50UHJvcGVydHkgPSBEZXBlbmRlbmN5UHJvcGVydHkuUmVnaXN0ZXIoXCJXaWR0aFBlcmNlbnRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlb2YoZG91YmxlKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlb2YoRnJhbWV3b3JrRWxlbWVudCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ3JlYXRlSlF1ZXJ5Q3NzVXBkYXRlcihcIndpZHRoXCIsIChnbG9iYWw6OlN5c3RlbS5GdW5jPG9iamVjdCwgb2JqZWN0PikodiA9PiB2ICsgXCIlXCIpKSk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBkb3VibGUgV2lkdGhQZXJjZW50XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gKGRvdWJsZSkgR2V0VmFsdWUoV2lkdGhQZXJjZW50UHJvcGVydHkpOyB9XHJcbiAgICAgICAgICAgIHNldCB7IFNldFZhbHVlKFdpZHRoUGVyY2VudFByb3BlcnR5LCB2YWx1ZSk7IH1cclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIENvbG9yUHJvcGVydHlcclxuICAgICAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IERlcGVuZGVuY3lQcm9wZXJ0eSBDb2xvclByb3BlcnR5ID0gRGVwZW5kZW5jeVByb3BlcnR5LlJlZ2lzdGVyKFwiQ29sb3JcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVvZihzdHJpbmcpLCB0eXBlb2YoRnJhbWV3b3JrRWxlbWVudCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDcmVhdGVKUXVlcnlDc3NVcGRhdGVyKFwiY29sb3JcIikpO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIENvbG9yXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gKHN0cmluZykgdGhpc1tcIkNvbG9yXCJdOyB9XHJcbiAgICAgICAgICAgIHNldCB7IHRoaXNbXCJDb2xvclwiXSA9IHZhbHVlOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBJbm5lckhUTUxQcm9wZXJ0eVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgRGVwZW5kZW5jeVByb3BlcnR5IElubmVySFRNTFByb3BlcnR5ID0gRGVwZW5kZW5jeVByb3BlcnR5LlJlZ2lzdGVyKFwiSW5uZXJIVE1MXCIsIHR5cGVvZihzdHJpbmcpLCB0eXBlb2YoRnJhbWV3b3JrRWxlbWVudCksIG5ldyBQcm9wZXJ0eU1ldGFkYXRhKE9uSW5uZXJIVE1MQ2hhbmdlZCkpO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIElubmVySFRNTFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIChzdHJpbmcpIEdldFZhbHVlKElubmVySFRNTFByb3BlcnR5KTsgfVxyXG4gICAgICAgICAgICBzZXQgeyBTZXRWYWx1ZShJbm5lckhUTUxQcm9wZXJ0eSwgdmFsdWUpOyB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgc3RhdGljIHZvaWQgT25Jbm5lckhUTUxDaGFuZ2VkKERlcGVuZGVuY3lPYmplY3QgZCwgRGVwZW5kZW5jeVByb3BlcnR5Q2hhbmdlZEV2ZW50QXJncyBlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG1lID0gKEZyYW1ld29ya0VsZW1lbnQpIGQ7XHJcblxyXG4gICAgICAgICAgICBtZS5fcm9vdCE9bnVsbD9tZS5fcm9vdC5IdG1sKChzdHJpbmcpIGUuTmV3VmFsdWUpOihqUXVlcnkpbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIFZpc2liaWxpdHlQcm9wZXJ0eVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgRGVwZW5kZW5jeVByb3BlcnR5IFZpc2liaWxpdHlQcm9wZXJ0eSA9IERlcGVuZGVuY3lQcm9wZXJ0eS5SZWdpc3RlcihcIlZpc2liaWxpdHlcIiwgdHlwZW9mKFZpc2liaWxpdHkpLCB0eXBlb2YoRnJhbWV3b3JrRWxlbWVudCksIG5ldyBQcm9wZXJ0eU1ldGFkYXRhKE9uVmlzaWJpbGl0eUNoYW5nZWQpKTtcclxuXHJcbiAgICAgICAgcHVibGljIFZpc2liaWxpdHkgVmlzaWJpbGl0eVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIChWaXNpYmlsaXR5KSBHZXRWYWx1ZShWaXNpYmlsaXR5UHJvcGVydHkpOyB9XHJcbiAgICAgICAgICAgIHNldCB7IFNldFZhbHVlKFZpc2liaWxpdHlQcm9wZXJ0eSwgdmFsdWUpOyB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgdm9pZCBPblZpc2liaWxpdHlDaGFuZ2VkKERlcGVuZGVuY3lPYmplY3QgZCwgRGVwZW5kZW5jeVByb3BlcnR5Q2hhbmdlZEV2ZW50QXJncyBlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG1lID0gKEZyYW1ld29ya0VsZW1lbnQpIGQ7XHJcblxyXG4gICAgICAgICAgICB2YXIgbmV3VmFsdWUgPSBlLk5ld1ZhbHVlO1xyXG5cclxuICAgICAgICAgICAgdmFyIHZhbHVlID0gKFZpc2liaWxpdHkpIG5ld1ZhbHVlO1xyXG5cclxuICAgICAgICAgICAgaWYgKHZhbHVlID09IFZpc2liaWxpdHkuVmlzaWJsZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbWUuX3Jvb3QuQ3NzKFwidmlzaWJpbGl0eVwiLCBcInZpc2libGVcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBtZS5fcm9vdC5Dc3MoXCJ2aXNpYmlsaXR5XCIsIFwiaGlkZGVuXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBIZWlnaHRQcm9wZXJ0eVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgRGVwZW5kZW5jeVByb3BlcnR5IEhlaWdodFByb3BlcnR5ID0gRGVwZW5kZW5jeVByb3BlcnR5LlJlZ2lzdGVyKFwiSGVpZ2h0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZW9mKGRvdWJsZSksIHR5cGVvZihGcmFtZXdvcmtFbGVtZW50KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDcmVhdGVKUXVlcnlDc3NVcGRhdGVyKFwiaGVpZ2h0XCIpKTtcclxuXHJcbiAgICAgICAgcHVibGljIGRvdWJsZSBIZWlnaHRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiAoZG91YmxlKSBHZXRWYWx1ZShIZWlnaHRQcm9wZXJ0eSk7IH1cclxuICAgICAgICAgICAgc2V0IHsgU2V0VmFsdWUoSGVpZ2h0UHJvcGVydHksIHZhbHVlKTsgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gV2lkdGhQcm9wZXJ0eVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgRGVwZW5kZW5jeVByb3BlcnR5IEhlaWdodFBlcmNlbnRQcm9wZXJ0eSA9IERlcGVuZGVuY3lQcm9wZXJ0eS5SZWdpc3RlcihcIkhlaWdodFBlcmNlbnRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZW9mKGRvdWJsZSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVvZihGcmFtZXdvcmtFbGVtZW50KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ3JlYXRlSlF1ZXJ5Q3NzVXBkYXRlcihcImhlaWdodFwiLCAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxvYmplY3QsIG9iamVjdD4pKHYgPT4gdiArIFwiJVwiKSkpO1xyXG5cclxuICAgICAgICBwdWJsaWMgZG91YmxlIEhlaWdodFBlcmNlbnRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiAoZG91YmxlKSBHZXRWYWx1ZShIZWlnaHRQZXJjZW50UHJvcGVydHkpOyB9XHJcbiAgICAgICAgICAgIHNldCB7IFNldFZhbHVlKEhlaWdodFBlcmNlbnRQcm9wZXJ0eSwgdmFsdWUpOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBCYWNrZ3JvdW5kUHJvcGVydHlcclxuICAgICAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IERlcGVuZGVuY3lQcm9wZXJ0eSBCYWNrZ3JvdW5kUHJvcGVydHkgPSBEZXBlbmRlbmN5UHJvcGVydHkuUmVnaXN0ZXIoXCJCYWNrZ3JvdW5kXCIsIHR5cGVvZihzdHJpbmcpLCB0eXBlb2YoRnJhbWV3b3JrRWxlbWVudCksIG5ldyBQcm9wZXJ0eU1ldGFkYXRhKE9uQmFja2dyb3VuZENoYW5nZWQpKTtcclxuXHJcbiAgICAgICAgc3RhdGljIHZvaWQgT25CYWNrZ3JvdW5kQ2hhbmdlZChEZXBlbmRlbmN5T2JqZWN0IGQsIERlcGVuZGVuY3lQcm9wZXJ0eUNoYW5nZWRFdmVudEFyZ3MgZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBmZSA9IChGcmFtZXdvcmtFbGVtZW50KSBkO1xyXG4gICAgICAgICAgICB2YXIgbmV3VmFsdWUgPSBlLk5ld1ZhbHVlO1xyXG5cclxuICAgICAgICAgICAgaWYgKG5ld1ZhbHVlLklzTnVsbCgpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmZS5fcm9vdC5Dc3MoXCJiYWNrZ3JvdW5kXCIsIFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChuZXdWYWx1ZSBpcyBzdHJpbmcpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZlLl9yb290LkNzcyhcImJhY2tncm91bmRcIiwgbmV3VmFsdWUgYXMgc3RyaW5nKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uKG5ld1ZhbHVlLlRvU3RyaW5nKCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gc3RyaW5nIElkXHJcbiAgICAgICAgc3RhdGljIGludCBJRDtcclxuICAgICAgICBzdHJpbmcgX2lkO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIElkXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKF9pZCA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIF9pZCA9IFwiV1MtXCIgKyBJRCsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9pZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gb2JqZWN0IERhdGFDb250ZXh0XHJcbiAgICAgICAgb2JqZWN0IF9kYXRhQ29udGV4dDtcclxuXHJcbiAgICAgICAgcHVibGljIG9iamVjdCBEYXRhQ29udGV4dFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIF9kYXRhQ29udGV4dDsgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKF9kYXRhQ29udGV4dCAhPSB2YWx1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YUNvbnRleHQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBPblByb3BlcnR5Q2hhbmdlZChcIkRhdGFDb250ZXh0XCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgQ29udGVudFByZXNlbnRlciA6IEh0bWxFbGVtZW50XHJcbiAgICB7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIENvbnRlbnRDb250cm9sIDogQ29udHJvbFxyXG4gICAge1xyXG4gICAgICAgICNyZWdpb24gRmllbGRzXHJcbiAgICAgICAgaW50ZXJuYWwgQ29udGVudFByZXNlbnRlciBfY29udGVudFByZXNlbnRlcjtcclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gQ29uc3RydWN0b3JzXHJcbiAgICAgICAgcHVibGljIENvbnRlbnRDb250cm9sKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgXHJcbiAgICAgICAgICAgIEFmdGVyTG9naWNhbENoaWxkQWRkICs9IENhbk9ubHlCZU9uZUNoaWxkO1xyXG4gICAgICAgICAgICBBZnRlckxvZ2ljYWxDaGlsZEFkZCArPSBBc3NpZ25GaXJzdExvZ2ljYWxDaGlsZFRvQ29udGVudDtcclxuICAgICAgICAgICAgQWZ0ZXJUZW1wbGF0ZUFwcGxpZWQgKz0gSW5pdGlhbGl6ZUNvbnRlbnRQcmVzZW50ZXI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIEluaXRpYWxpemVDb250ZW50UHJlc2VudGVyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9jb250ZW50UHJlc2VudGVyID0gIEZpbmQodGhpcyk7XHJcbiAgICAgICAgICAgIGlmIChfY29udGVudFByZXNlbnRlciA9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkV4Y2VwdGlvbihcIkNvbnRlbnRQcmVzZW50ZXIgbXVzdCBiZSBkZWZpbmVkIGluIHRlbXBsYXRlLlwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBDb250ZW50UHJlc2VudGVyIEZpbmQoRnJhbWV3b3JrRWxlbWVudCBlbGVtZW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGVsZW1lbnRBc0NvbnRlbnRQcmVzZW50ZXIgPSBlbGVtZW50IGFzIENvbnRlbnRQcmVzZW50ZXI7XHJcblxyXG4gICAgICAgICAgICBpZiAoZWxlbWVudEFzQ29udGVudFByZXNlbnRlciAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudEFzQ29udGVudFByZXNlbnRlcjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGxlbiA9IGVsZW1lbnQuVmlzdWFsQ2hpbGRlcmVuQ291bnQ7XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50QXNDb250ZW50UHJlc2VudGVyID0gRmluZChlbGVtZW50LkdldFZpc3VhbENoaWxkQXQoaSkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnRBc0NvbnRlbnRQcmVzZW50ZXIgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudEFzQ29udGVudFByZXNlbnRlcjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBNZXRob2RzXHJcbiAgICAgICAgc3RhdGljIHZvaWQgT25Db250ZW50Q2hhbmdlZChEZXBlbmRlbmN5T2JqZWN0IGQsIERlcGVuZGVuY3lQcm9wZXJ0eUNoYW5nZWRFdmVudEFyZ3MgZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgICgoQ29udGVudENvbnRyb2wpIGQpLk9uQ29udGVudENoYW5nZWQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgQXNzaWduRmlyc3RMb2dpY2FsQ2hpbGRUb0NvbnRlbnQoRnJhbWV3b3JrRWxlbWVudCBlbGVtZW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKF9pc0NvbnRlbnRDaGFuZ2luZylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBDb250ZW50ID0gZWxlbWVudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgQ2FuT25seUJlT25lQ2hpbGQoRnJhbWV3b3JrRWxlbWVudCBjaGlsZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChMb2dpY2FsQ2hpbGRlcmVuQ291bnQgPT0gMilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVHJhY2UuTG9nKFwiR2V0TG9naWNhbENoaWxkQXQoMClcIiwgR2V0TG9naWNhbENoaWxkQXQoMCkpO1xyXG4gICAgICAgICAgICAgICAgVHJhY2UuTG9nKFwiR2V0TG9naWNhbENoaWxkQXQoMSlcIiwgR2V0TG9naWNhbENoaWxkQXQoMSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXhjZXB0aW9uKFwiQ29udGVudCBjYW5ub3QgYmUgc2V0IG1vcmUgdGhhbiBvbmNlLlwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgXHJcblxyXG4gICAgICAgIGJvb2wgX2lzQ29udGVudENoYW5naW5nO1xyXG4gICAgICAgIHZvaWQgT25Db250ZW50Q2hhbmdlZCgpXHJcbiAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgaWYgKF9jb250ZW50UHJlc2VudGVyID09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXhjZXB0aW9uKFwiJ0NvbnRlbnRQcmVzZW50ZXInIGVsZW1lbnQgbm90IGZvdW5kLlwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgX2lzQ29udGVudENoYW5naW5nID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBjb250ZW50ID0gQ29udGVudDtcclxuXHJcbiAgICAgICAgICAgIGlmIChjb250ZW50ID09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF9pc0NvbnRlbnRDaGFuZ2luZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgX2NvbnRlbnRQcmVzZW50ZXIuSW5uZXJIVE1MID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgdmFyIGZyYW1ld29ya0VsZW1lbnQgPSBjb250ZW50IGFzIEZyYW1ld29ya0VsZW1lbnQ7XHJcbiAgICAgICAgICAgIGlmIChmcmFtZXdvcmtFbGVtZW50ICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChfY29udGVudFByZXNlbnRlci5Mb2dpY2FsQ2hpbGRlcmVuQ291bnQgPT0gMSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBfY29udGVudFByZXNlbnRlci5SZW1vdmVMb2dpY2FsQ2hpbGQoX2NvbnRlbnRQcmVzZW50ZXIuR2V0TG9naWNhbENoaWxkQXQoMCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChfY29udGVudFByZXNlbnRlci5WaXN1YWxDaGlsZGVyZW5Db3VudCA9PSAxKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIF9jb250ZW50UHJlc2VudGVyLlJlbW92ZVZpc3VhbENoaWxkKF9jb250ZW50UHJlc2VudGVyLkdldFZpc3VhbENoaWxkQXQoMCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIF9jb250ZW50UHJlc2VudGVyLkFkZExvZ2ljYWxDaGlsZChmcmFtZXdvcmtFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKExvZ2ljYWxDaGlsZGVyZW5Db3VudCA9PSAxKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFJlbW92ZUxvZ2ljYWxDaGlsZChHZXRMb2dpY2FsQ2hpbGRBdCgwKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIEFkZExvZ2ljYWxDaGlsZChmcmFtZXdvcmtFbGVtZW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICBfaXNDb250ZW50Q2hhbmdpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGNvbnRlbnRBc1N0cmluZyA9IGNvbnRlbnQuVG9TdHJpbmcoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciB0ZXh0QmxvY2sgPSBCdWlsZGVyLkNyZWF0ZTxUZXh0QmxvY2s+KCk7XHJcbiAgICAgICAgICAgIHRleHRCbG9jay5UZXh0ID0gY29udGVudEFzU3RyaW5nO1xyXG4gICAgICAgICAgICBfY29udGVudFByZXNlbnRlci5BZGRMb2dpY2FsQ2hpbGQodGV4dEJsb2NrKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChMb2dpY2FsQ2hpbGRlcmVuQ291bnQgPT0gMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgUmVtb3ZlTG9naWNhbENoaWxkKEdldExvZ2ljYWxDaGlsZEF0KDApKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgQWRkTG9naWNhbENoaWxkKHRleHRCbG9jayk7XHJcblxyXG4gICAgICAgICAgICBfaXNDb250ZW50Q2hhbmdpbmcgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIENvbnRlbnRQcm9wZXJ0eVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgRGVwZW5kZW5jeVByb3BlcnR5IENvbnRlbnRQcm9wZXJ0eSA9IFJlZ2lzdGVyRGVwZW5kZW5jeVByb3BlcnR5KFwiQ29udGVudFwiLCB0eXBlb2Yob2JqZWN0KSwgdHlwZW9mKENvbnRlbnRDb250cm9sKSwgKGdsb2JhbDo6U3lzdGVtLldpbmRvd3MuUHJvcGVydHlDaGFuZ2VkQ2FsbGJhY2spT25Db250ZW50Q2hhbmdlZCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBvYmplY3QgQ29udGVudFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIEdldFZhbHVlKENvbnRlbnRQcm9wZXJ0eSk7IH1cclxuICAgICAgICAgICAgc2V0IHsgU2V0VmFsdWUoQ29udGVudFByb3BlcnR5LCB2YWx1ZSk7IH1cclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG4gICAgfVxyXG5cclxuICAgIFxyXG59IiwidXNpbmcgU3lzdGVtLldpbmRvd3M7XHJcblxyXG5uYW1lc3BhY2UgQnJpZGdlLkN1c3RvbVVJTWFya3VwX0Rlc2lnbmVyU2FtcGxlc1xyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgRXhhbXBsZUluZm8gOiBGcmFtZXdvcmtFbGVtZW50XHJcbiAgICB7XHJcbiAgICAgICAgI3JlZ2lvbiBzdHJpbmcgTmFtZVxyXG4gICAgICAgIHN0cmluZyBfbmFtZTtcclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBOYW1lXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gX25hbWU7IH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChfbmFtZSAhPSB2YWx1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBfbmFtZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIE9uUHJvcGVydHlDaGFuZ2VkKFwiTmFtZVwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gc3RyaW5nIFhtbFRlbXBsYXRlXHJcbiAgICAgICAgc3RyaW5nIF94bWxUZW1wbGF0ZTtcclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBYbWxUZW1wbGF0ZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIF94bWxUZW1wbGF0ZTsgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKF94bWxUZW1wbGF0ZSAhPSB2YWx1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBfeG1sVGVtcGxhdGUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBPblByb3BlcnR5Q2hhbmdlZChcIlhtbFRlbXBsYXRlXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuICAgIH1cclxufSIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5XaW5kb3dzO1xyXG51c2luZyBTeXN0ZW0uV2luZG93cy5Db250cm9scztcclxudXNpbmcgU3lzdGVtLlhtbDtcclxudXNpbmcgQnJpZGdlLkN1c3RvbVVJTWFya3VwLkNvbW1vbjtcclxudXNpbmcgQnJpZGdlLkN1c3RvbVVJTWFya3VwLkxpYnJhcmllcy5TZW1hbnRpY1VJO1xyXG51c2luZyBCcmlkZ2UuQ3VzdG9tVUlNYXJrdXAuVUk7XHJcbnVzaW5nIENvbnNvbGUgPSBCcmlkZ2UuVXRpbHMuQ29uc29sZTtcclxuXHJcbm5hbWVzcGFjZSBCcmlkZ2UuQ3VzdG9tVUlNYXJrdXAuTGlicmFyaWVzLkNvZGVNaXJyb3Jcclxue1xyXG4gICAgY2xhc3MgVUlFZGl0b3IgOiBDb250cm9sXHJcbiAgICB7XHJcbiAgICAgXHJcblxyXG4gICAgICAgICNyZWdpb24gUHVibGljIFByb3BlcnRpZXNcclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgc3RyaW5nIERlZmF1bHRUZW1wbGF0ZUFzWG1sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgICAgICAgICAgICAgXCI8ZGl2ICBIZWlnaHRQZXJjZW50ID0gJzEwMCcgV2lkdGhQZXJjZW50ID0gJzEwMCc+XCIgK1xyXG4gICAgICAgICAgICAgICAgICAgIFwiICAgIDxTcGxpdFBhbmVsIE9yaWVudGF0aW9uPSdob3Jpem9udGFsJyBIZWlnaHRQZXJjZW50ID0gJzEwMCcgV2lkdGhQZXJjZW50ID0gJzEwMCc+XCIgK1xyXG4gICAgICAgICAgICAgICAgICAgIFwiICAgICAgICA8WG1sRWRpdG9yIFRleHQgPSd7XCIgKyBcIlNvdXJjZVRleHRcIisgQFwifScgSGVpZ2h0UGVyY2VudCA9ICcxMDAnIFdpZHRoUGVyY2VudCA9ICcxMDAnIFwiICtcclxuICAgICAgICAgICAgICAgICAgICBcIiAgICAgICAgICAgICAgICAgICBPblRleHRDaGFuZ2VkID0gJ3tcIiArIFwiT25UZXh0Q2hhbmdlZFwiKyBAXCJ9JyBcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgXCIgICAgICAgICAgICAgICAgICAgT25DdXJzb3JMaW5lTnVtYmVyQ2hhbmdlZCA9ICd7XCIgKyBcIk9uQ3Vyc29yTGluZU51bWJlckNoYW5nZWRcIisgQFwifScgLz5cIiArXHJcbiAgICAgICAgICAgICAgICAgICAgXCIgICAgICAgIDxkaXYgQm9yZGVyID0gJzFweCBzb2xpZCBHcmVlbicgSGVpZ2h0UGVyY2VudCA9ICcxMDAnIFdpZHRoUGVyY2VudCA9ICcxMDAnIC8+XCIgK1xyXG4gICAgICAgICAgICAgICAgICAgIFwiICAgIDwvU3BsaXRQYW5lbD5cIiArXHJcbiAgICAgICAgICAgICAgICAgICAgXCI8L2Rpdj5cIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gUHJvcGVydGllc1xyXG4gICAgICAgIEZyYW1ld29ya0VsZW1lbnQgQ29udGFpbmVyIHtnZXR7cmV0dXJuIEdldFZpc3VhbENoaWxkQXQoMCwwKS5HZXRMb2dpY2FsQ2hpbGRBdCgxKTt9fVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBQdWJsaWMgTWV0aG9kc1xyXG4gICAgICAgIHB1YmxpYyB2b2lkIE9uQ3Vyc29yTGluZU51bWJlckNoYW5nZWQoaW50IGxpbmVOdW1iZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBGb2N1c1RvTGluZShsaW5lTnVtYmVyKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgdm9pZCBGb2N1c1RvTGluZShpbnQgbGluZU51bWJlcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxpbmVOdW1iZXIgPSBsaW5lTnVtYmVyICsgMTtcclxuICAgICAgICAgICAgRnJhbWV3b3JrRWxlbWVudCBjb21wb25lbnQgPSBudWxsO1xyXG4gICAgICAgICAgICBfbGluZU51bWJlclRvQ29udHJvbE1hcCE9bnVsbD9fbGluZU51bWJlclRvQ29udHJvbE1hcC5UcnlHZXRWYWx1ZShsaW5lTnVtYmVyLCBvdXQgY29tcG9uZW50KTooYm9vbD8pbnVsbDtcclxuICAgICAgICAgICAgaWYgKGNvbXBvbmVudCA9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBxdWVyeSA9IGNvbXBvbmVudC5fcm9vdDtcclxuXHJcbiAgICAgICAgICAgIHF1ZXJ5LmhpZ2hsaWdodCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmVhZG9ubHkgRGljdGlvbmFyeTxpbnQsRnJhbWV3b3JrRWxlbWVudD4gX2xpbmVOdW1iZXJUb0NvbnRyb2xNYXAgPSBuZXcgRGljdGlvbmFyeTxpbnQsIEZyYW1ld29ya0VsZW1lbnQ+KCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIE9uVGV4dENoYW5nZWQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQ2xlYXJPdXRwdXQoKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChzdHJpbmcuSXNOdWxsT3JXaGl0ZVNwYWNlKFNvdXJjZVRleHQpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG5cclxuICAgICAgICAgICBcclxuXHJcbiAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICB7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBmZSA9IG5ldyBGcmFtZXdvcmtFbGVtZW50XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgRGF0YUNvbnRleHQgPSBTb3VyY2VEYXRhQ29udGV4dCxcclxuXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgQnVpbGRlci5Mb2FkQ29tcG9uZW50KGZlLCBYbWxIZWxwZXIuR2V0Um9vdE5vZGUoU291cmNlVGV4dCksdHJ1ZSwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxpbnQsIGdsb2JhbDo6U3lzdGVtLldpbmRvd3MuRnJhbWV3b3JrRWxlbWVudD4pKChsaW5lLCBlbGVtZW50KSA9PiB7IF9saW5lTnVtYmVyVG9Db250cm9sTWFwW2xpbmVdID0gZWxlbWVudDsgfSksIFNvdXJjZVRleHQpO1xyXG5cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGNvbXBvbmVudCA9IGZlLkdldExvZ2ljYWxDaGlsZEF0KDApO1xyXG5cclxuICAgICAgICAgICAgICAgIFNldE91dHB1dChjb21wb25lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChYbWxFeGNlcHRpb24gZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgQ29uc29sZS5DbGVhcigpO1xyXG4gICAgICAgICAgICAgICAgQ29uc29sZS5Mb2coZSk7XHJcbiAgICAgICAgICAgICAgICBTZXRFcnJvck1lc3NhZ2UoZS5Ub1N0cmluZygpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoRXhjZXB0aW9uIGUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIENvbnNvbGUuQ2xlYXIoKTtcclxuICAgICAgICAgICAgICAgIENvbnNvbGUuTG9nKGUpO1xyXG4gICAgICAgICAgICAgICAgU2V0RXJyb3JNZXNzYWdlKGUuVG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIE1ldGhvZHNcclxuICAgICAgICB2b2lkIENsZWFyT3V0cHV0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIENvbnRhaW5lci5DbGVhclZpc3VhbENoaWxkcygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBTZXRFcnJvck1lc3NhZ2Uoc3RyaW5nIG1lc3NhZ2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBDbGVhck91dHB1dCgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHRleHRCbG9jayA9IEJ1aWxkZXIuQ3JlYXRlPFRleHRCbG9jaz4oKTtcclxuXHJcbiAgICAgICAgICAgIHRleHRCbG9jay5UZXh0ID0gbWVzc2FnZTtcclxuXHJcbiAgICAgICAgICAgIENvbnRhaW5lci5BZGRMb2dpY2FsQ2hpbGQodGV4dEJsb2NrKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgU2V0T3V0cHV0KEZyYW1ld29ya0VsZW1lbnQgZWxlbWVudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIENsZWFyT3V0cHV0KCk7XHJcblxyXG4gICAgICAgICAgICBDb250YWluZXIuQWRkTG9naWNhbENoaWxkKGVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gc3RyaW5nIFNvdXJjZVRleHRcclxuICAgICAgICBzdHJpbmcgX3NvdXJjZVRleHQ7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgU291cmNlVGV4dFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIF9zb3VyY2VUZXh0OyB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoX3NvdXJjZVRleHQgIT0gdmFsdWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3NvdXJjZVRleHQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBPblByb3BlcnR5Q2hhbmdlZChcIlNvdXJjZVRleHRcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIG9iamVjdCBTb3VyY2VEYXRhQ29udGV4dFxyXG4gICAgICAgIG9iamVjdCBfc291cmNlRGF0YUNvbnRleHQ7XHJcblxyXG4gICAgICAgIHB1YmxpYyBvYmplY3QgU291cmNlRGF0YUNvbnRleHRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBfc291cmNlRGF0YUNvbnRleHQ7IH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChfc291cmNlRGF0YUNvbnRleHQgIT0gdmFsdWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3NvdXJjZURhdGFDb250ZXh0ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgT25Qcm9wZXJ0eUNoYW5nZWQoXCJTb3VyY2VEYXRhQ29udGV4dFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcbiAgICB9XHJcbn0iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db21wb25lbnRNb2RlbDtcclxudXNpbmcgU3lzdGVtLldpbmRvd3M7XHJcbnVzaW5nIFN5c3RlbS5XaW5kb3dzLkNvbnRyb2xzO1xyXG51c2luZyBCcmlkZ2UuQ3VzdG9tVUlNYXJrdXAuQ29tbW9uO1xyXG51c2luZyBCcmlkZ2UuSHRtbDU7XHJcbnVzaW5nIEJyaWRnZS5qUXVlcnkyO1xyXG5cclxubmFtZXNwYWNlIEJyaWRnZS5DdXN0b21VSU1hcmt1cC5MaWJyYXJpZXMuQ29kZU1pcnJvclxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgWG1sRWRpdG9yIDogQ29udHJvbFxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBYbWxFZGl0b3IoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5PblByb3BlcnR5Q2hhbmdlZChcIkZvbnRTaXplXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pRm9udFNpemVDaGFuZ2VkKTtcclxuXHJcblxyXG4gICAgICAgICAgICBXaW5kb3cuU2V0VGltZW91dCgoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiB7IFRyYWNlLkxvZyh0aGlzLCBEYXRhQ29udGV4dCk7IH0pLCAxMDAzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgI3JlZ2lvbiBGb250U2l6ZVByb3BlcnR5XHJcbiAgICAgICBcclxuICAgICAgICB2b2lkIEZvbnRTaXplQ2hhbmdlZCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZm9udFNpemUgPSBGb250U2l6ZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBtZSA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICBpZiAobWUuX2VkaXRvciAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAobWUuaXNGaXJpbmdfT25UZXh0Q2hhbmdlZClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgU2NyaXB0LldyaXRlPHN0cmluZz4oXCJtZS5fZWRpdG9yLmRpc3BsYXkud3JhcHBlci5zdHlsZS5mb250U2l6ZSA9IGZvbnRTaXplICsgJ3B4JztcIik7XHJcbiAgICAgICAgICAgICAgICBTY3JpcHQuV3JpdGU8c3RyaW5nPihcIm1lLl9lZGl0b3IucmVmcmVzaCgpO1wiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gRmllbGRzXHJcbiAgICAgICAgcHVibGljIG9iamVjdCBfZWRpdG9yO1xyXG5cclxuICAgICAgICBib29sIGlzRmlyaW5nX09uVGV4dENoYW5nZWQ7XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIFB1YmxpYyBFdmVudHNcclxuICAgICAgICBwdWJsaWMgZXZlbnQgQWN0aW9uIE9uVGV4dENoYW5nZWQ7XHJcbiAgICAgICAgcHVibGljIGV2ZW50IEFjdGlvbjxpbnQ+IE9uQ3Vyc29yTGluZU51bWJlckNoYW5nZWQ7XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgIFxyXG5cclxuICAgICAgICAjcmVnaW9uIFB1YmxpYyBNZXRob2RzXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHZvaWQgSW5pdERPTSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfcm9vdCA9IERPTS5kaXYoKTtcclxuICAgICAgICAgICAgUmVuZGVyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgalF1ZXJ5IF90ZXh0QXJlYTtcclxuICAgICAgICAjcmVnaW9uIE1ldGhvZHNcclxuICAgICAgICBwcm90ZWN0ZWQgdmlydHVhbCB2b2lkIFJlbmRlcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfcm9vdC5FbXB0eSgpO1xyXG5cclxuICAgICAgICAgICAgX3Jvb3QuQ3NzKFwiaGVpZ2h0XCIsIFwiMTAwJVwiKTtcclxuXHJcbiAgICAgICAgICAgIChfdGV4dEFyZWE9RE9NLnRleHRhcmVhKCkpLkFwcGVuZFRvKF9yb290KS5Dc3MoXCJoZWlnaHRcIiwgXCIxMDAlXCIpO1xyXG5cclxuICAgICAgICAgICAgV2luZG93LlNldFRpbWVvdXQoKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4geyBSZW5kZXIoX3RleHRBcmVhLkdldCgwKSk7IH0pLDApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBGaXJlX09uVGV4dENoYW5nZWQob2JqZWN0IGVkaXRvciwgb2JqZWN0IGNoYW5nZU9iailcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChpc0ZpcmluZ19PblRleHRDaGFuZ2VkKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47IFxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpc0ZpcmluZ19PblRleHRDaGFuZ2VkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChfZWRpdG9yICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBlZGl0b3JWYWx1ZSA9IFNjcmlwdC5Xcml0ZTxzdHJpbmc+KFwidGhpcy5fZWRpdG9yLmdldFZhbHVlKClcIik7XHJcbiAgICAgICAgICAgICAgICBUZXh0ID0gZWRpdG9yVmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIE9uVGV4dENoYW5nZWQhPW51bGw/Z2xvYmFsOjpCcmlkZ2UuU2NyaXB0LkZyb21MYW1iZGEoKCk9Pk9uVGV4dENoYW5nZWQuSW52b2tlKCkpOm51bGw7XHJcblxyXG4gICAgICAgICAgICBpc0ZpcmluZ19PblRleHRDaGFuZ2VkID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnQgX2N1cnNvckN1cnJlbnRMaW5lTnVtYmVyO1xyXG4gICAgICAgIHZvaWQgRmlyZV9vbkN1cnNvckFjdGl2aXR5KCBvYmplY3QgZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9jdXJzb3JDdXJyZW50TGluZU51bWJlciA9IFNjcmlwdC5Xcml0ZTxpbnQ+KFwiZS5kb2MuZ2V0Q3Vyc29yKCkubGluZVwiKTtcclxuXHJcbiAgICAgICAgICAgIE9uQ3Vyc29yTGluZU51bWJlckNoYW5nZWQhPW51bGw/Z2xvYmFsOjpCcmlkZ2UuU2NyaXB0LkZyb21MYW1iZGEoKCk9Pk9uQ3Vyc29yTGluZU51bWJlckNoYW5nZWQuSW52b2tlKF9jdXJzb3JDdXJyZW50TGluZU51bWJlcikpOm51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgb2JqZWN0IFNjaGVtYUluZm8geyBnZXQ7IHNldDsgfVxyXG5cclxuICAgICAgICB2b2lkIFJlbmRlcihFbGVtZW50IHRleHRBcmVhRWxlbWVudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBmb250U2l6ZSA9IHRoaXNbXCJGb250U2l6ZVwiXSA9PSBudWxsID8gMTU6Rm9udFNpemU7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB2YXIgc2NoZW1hSW5mbyA9IFNjaGVtYUluZm87XHJcblxyXG4gICAgICAgICAgICBTY3JpcHQuV3JpdGUoXHJcbiAgICAgICAgICAgICAgICBAXCJcclxuXHJcblxyXG5mdW5jdGlvbiBjb21wbGV0ZUFmdGVyKGNtLCBwcmVkKSBcclxue1xyXG5cdHZhciBjdXIgPSBjbS5nZXRDdXJzb3IoKTtcclxuXHRpZiAoIXByZWQgfHwgcHJlZCgpKSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgXHJcblx0e1xyXG5cdFx0aWYgKCFjbS5zdGF0ZS5jb21wbGV0aW9uQWN0aXZlKVxyXG5cdFx0Y20uc2hvd0hpbnQoe2NvbXBsZXRlU2luZ2xlOiBmYWxzZX0pO1xyXG5cdH0sIDEwMCk7XHJcblx0XHJcblx0cmV0dXJuIENvZGVNaXJyb3IuUGFzcztcclxufVxyXG5cclxuZnVuY3Rpb24gY29tcGxldGVJZkFmdGVyTHQoY20pIFxyXG57XHJcblx0cmV0dXJuIGNvbXBsZXRlQWZ0ZXIoY20sIGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGN1ciA9IGNtLmdldEN1cnNvcigpO1xyXG5cdFx0cmV0dXJuIGNtLmdldFJhbmdlKENvZGVNaXJyb3IuUG9zKGN1ci5saW5lLCBjdXIuY2ggLSAxKSwgY3VyKSA9PSAnPCc7XHJcblx0fSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNvbXBsZXRlSWZJblRhZyhjbSkgXHJcbntcclxuXHRyZXR1cm4gY29tcGxldGVBZnRlcihjbSwgZnVuY3Rpb24oKSBcclxuICAgIHtcclxuXHQgIHZhciB0b2sgPSBjbS5nZXRUb2tlbkF0KGNtLmdldEN1cnNvcigpKTtcclxuXHJcblx0ICBpZiAodG9rLnR5cGUgPT0gJ3N0cmluZycgJiYgKCEvWycnXS8udGVzdCh0b2suc3RyaW5nLmNoYXJBdCh0b2suc3RyaW5nLmxlbmd0aCAtIDEpKSB8fCB0b2suc3RyaW5nLmxlbmd0aCA9PSAxKSlcclxuICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuXHQgIHZhciBpbm5lciA9IENvZGVNaXJyb3IuaW5uZXJNb2RlKGNtLmdldE1vZGUoKSwgdG9rLnN0YXRlKS5zdGF0ZTtcclxuXHQgIHJldHVybiBpbm5lci50YWdOYW1lO1xyXG5cdH0pO1xyXG59XHJcblxyXG50aGlzLl9lZGl0b3IgPSBDb2RlTWlycm9yLmZyb21UZXh0QXJlYSh0ZXh0QXJlYUVsZW1lbnQsIFxyXG57XHJcblx0bW9kZTogJ3htbCcsXHJcblx0bGluZU51bWJlcnM6IHRydWUsXHJcblx0ZXh0cmFLZXlzOiB7XHJcblx0ICAnPCc6IGNvbXBsZXRlQWZ0ZXIsXHJcblx0ICAnXFwnJzogY29tcGxldGVJZkFmdGVyTHQsXHJcblx0ICAnICc6IGNvbXBsZXRlSWZJblRhZyxcclxuXHQgICc9JzogY29tcGxldGVJZkluVGFnLFxyXG5cdCAgJ0N0cmwtU3BhY2UnOiAnYXV0b2NvbXBsZXRlJ1xyXG5cdH0sXHJcblx0aGludE9wdGlvbnM6IHtzY2hlbWFJbmZvOiBzY2hlbWFJbmZvfSxcclxuICAgIGF1dG9DbG9zZVRhZ3M6dHJ1ZSxcclxuICAgIG1hdGNoVGFnczoge2JvdGhUYWdzOiBmYWxzZX0sXHJcbiAgICBmb2xkR3V0dGVyOiB0cnVlLFxyXG4gICAgZ3V0dGVyczogWydDb2RlTWlycm9yLWxpbmVudW1iZXJzJywgJ0NvZGVNaXJyb3ItZm9sZGd1dHRlciddXHJcbn0pO1xyXG5cclxudmFyIG1lID0gdGhpcztcclxudmFyIG9uQ2hhbmdlID0gZnVuY3Rpb24oZWRpdG9yLGNoYW5nZU9iailcclxueyBcclxuICAgIG1lLkZpcmVfT25UZXh0Q2hhbmdlZC5hcHBseShtZSxbZWRpdG9yLGNoYW5nZU9ial0pO1xyXG59XHJcblxyXG50aGlzLl9lZGl0b3Iub24oJ2NoYW5nZScsIG9uQ2hhbmdlICk7XHJcblxyXG52YXIgb25DdXJzb3JBY3Rpdml0eT0gZnVuY3Rpb24oZSlcclxueyBcclxuICAgIG1lLkZpcmVfb25DdXJzb3JBY3Rpdml0eS5hcHBseShtZSxbZV0pO1xyXG59XHJcblxyXG50aGlzLl9lZGl0b3Iub24oJ2N1cnNvckFjdGl2aXR5Jywgb25DdXJzb3JBY3Rpdml0eSApO1xyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5tZS5fZWRpdG9yLmRpc3BsYXkud3JhcHBlci5zdHlsZS5mb250U2l6ZSA9IGZvbnRTaXplICsgJ3B4JztcclxubWUuX2VkaXRvci5kaXNwbGF5LndyYXBwZXIuc3R5bGUuaGVpZ2h0ID0gJzk1JSc7XHJcblxyXG5cclxuXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gVGV4dFByb3BlcnR5XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyByZWFkb25seSBEZXBlbmRlbmN5UHJvcGVydHkgVGV4dFByb3BlcnR5ID0gRGVwZW5kZW5jeVByb3BlcnR5LlJlZ2lzdGVyKFwiVGV4dFwiLCB0eXBlb2Yoc3RyaW5nKSwgdHlwZW9mKFhtbEVkaXRvciksIG5ldyBQcm9wZXJ0eU1ldGFkYXRhKFRleHRDaGFuZ2VkKSk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgVGV4dFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIChzdHJpbmcpR2V0VmFsdWUoVGV4dFByb3BlcnR5KTsgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgU2V0VmFsdWUoVGV4dFByb3BlcnR5LCB2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyB2b2lkIFRleHRDaGFuZ2VkKERlcGVuZGVuY3lPYmplY3QgZCwgRGVwZW5kZW5jeVByb3BlcnR5Q2hhbmdlZEV2ZW50QXJncyBlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG5ld1ZhbHVlID0gKHN0cmluZykgZS5OZXdWYWx1ZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBtZSA9IChYbWxFZGl0b3IpIGQ7XHJcblxyXG4gICAgICAgICAgICBpZiAobWUuX2VkaXRvciAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAobWUuaXNGaXJpbmdfT25UZXh0Q2hhbmdlZClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgU2NyaXB0LldyaXRlPHN0cmluZz4oXCJtZS5fZWRpdG9yLnNldFZhbHVlKG5ld1ZhbHVlKTtcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG4gICAgfVxyXG59IiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uQ29tcG9uZW50TW9kZWw7XHJcbnVzaW5nIFN5c3RlbS5XaW5kb3dzO1xyXG51c2luZyBTeXN0ZW0uV2luZG93cy5Db250cm9scztcclxudXNpbmcgUmV0eXBlZDtcclxuXHJcbm5hbWVzcGFjZSBCcmlkZ2UuQ3VzdG9tVUlNYXJrdXAuTGlicmFyaWVzLlNlbWFudGljVUlcclxue1xyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBEYXRlUGlja2VyIDogQ29udHJvbFxyXG4gICAge1xyXG4gICAgICAgICNyZWdpb24gRGF0ZVRpbWU/IFZhbHVlXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyByZWFkb25seSBEZXBlbmRlbmN5UHJvcGVydHkgVmFsdWVQcm9wZXJ0eSA9IERlcGVuZGVuY3lQcm9wZXJ0eS5SZWdpc3RlcihcclxuICAgICAgICAgICBcIlZhbHVlXCIsIHR5cGVvZihEYXRlVGltZT8pLCB0eXBlb2YoRGF0ZVBpY2tlciksIG5ldyBQcm9wZXJ0eU1ldGFkYXRhKGRlZmF1bHQoRGF0ZVRpbWU/KSwgT25WYWx1ZUNoYW5nZWQpKTtcclxuXHJcbiAgICAgICAgcHVibGljIERhdGVUaW1lPyBWYWx1ZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIChEYXRlVGltZT8pR2V0VmFsdWUoVmFsdWVQcm9wZXJ0eSk7IH1cclxuICAgICAgICAgICAgc2V0IHsgU2V0VmFsdWUoVmFsdWVQcm9wZXJ0eSwgdmFsdWUpOyB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgdm9pZCBPblZhbHVlQ2hhbmdlZChEZXBlbmRlbmN5T2JqZWN0IGQsIERlcGVuZGVuY3lQcm9wZXJ0eUNoYW5nZWRFdmVudEFyZ3MgZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBkYXRlUGlja2VyID0gKERhdGVQaWNrZXIpZDtcclxuXHJcbiAgICAgICAgICAgIHZhciByb290ID0gZGF0ZVBpY2tlci5fcm9vdDtcclxuICAgICAgICAgICAgdmFyIHZhbHVlID0gZS5OZXdWYWx1ZSBhcyBEYXRlVGltZT87XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZUFzU3RyaW5nID0gXCJcIjtcclxuICAgICAgICAgICAgaWYgKHZhbHVlLkhhc1ZhbHVlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZUFzU3RyaW5nID0gdmFsdWUuVG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgU2NyaXB0LldyaXRlKFwicm9vdC5jYWxlbmRhcignc2V0IGRhdGUnLHZhbHVlQXNTdHJpbmcpO1wiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuXHJcbiAgICAgICAgcHVibGljIERhdGVQaWNrZXIoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgb2JqZWN0IF93cmFwcGVyO1xyXG5cclxuICAgICAgICAgICAgQmVmb3JlQ29ubmVjdFRvTG9naWNhbFBhcmVudCArPSBwYXJlbnQgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJvb3QgPSBfcm9vdDtcclxuICAgICAgICAgICAgICAgIFNjcmlwdC5Xcml0ZShcInJvb3QuY2FsZW5kYXIoe3R5cGU6ICdkYXRlJ30pO1wiKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgICNyZWdpb24gc3RyaW5nIERlZmF1bHRUZXh0XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyByZWFkb25seSBEZXBlbmRlbmN5UHJvcGVydHkgRGVmYXVsdFRleHRQcm9wZXJ0eSA9IERlcGVuZGVuY3lQcm9wZXJ0eS5SZWdpc3RlcihcclxuICAgICAgICAgICAgXCJEZWZhdWx0VGV4dFwiLCB0eXBlb2Yoc3RyaW5nKSwgdHlwZW9mKERhdGVQaWNrZXIpLCBuZXcgUHJvcGVydHlNZXRhZGF0YShkZWZhdWx0KHN0cmluZykpKTtcclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBEZWZhdWx0VGV4dFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIChzdHJpbmcpR2V0VmFsdWUoRGVmYXVsdFRleHRQcm9wZXJ0eSk7IH1cclxuICAgICAgICAgICAgc2V0IHsgU2V0VmFsdWUoRGVmYXVsdFRleHRQcm9wZXJ0eSwgdmFsdWUpOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHN0cmluZyBEZWZhdWx0VGVtcGxhdGVBc1htbCB7Z2V0e3JldHVybiBcIjxkaXYgY2xhc3M9J3VpIGNhbGVuZGFyJz5cIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIiAgICA8ZGl2IGNsYXNzPSd1aSBpbnB1dCBsZWZ0IGljb24nPlwiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiICAgICAgICA8aSBjbGFzcz0nY2FsZW5kYXIgaWNvbicvPlwiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiICAgICAgICA8aW5wdXQgdHlwZT0ndGV4dCcgcGxhY2Vob2xkZXI9J3tEZWZhdWx0VGV4dH0nLz5cIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIiAgICA8L2Rpdj5cIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjwvZGl2PlwiO319XHJcblxyXG4gICAgfVxyXG4gICAgcHVibGljIGNsYXNzIENvbWJvIDogQ29udHJvbFxyXG4gICAge1xyXG4gICAgICAgICNyZWdpb24gRmllbGRzXHJcbiNwcmFnbWEgd2FybmluZyBkaXNhYmxlIDY0OVxyXG4gICAgICAgIEZyYW1ld29ya0VsZW1lbnQgX21lbnUsIF9oaWRkZW47XHJcbiAgICAgICAgb2JqZWN0IF93cmFwcGVyO1xyXG4jcHJhZ21hIHdhcm5pbmcgcmVzdG9yZSA2NDlcclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gQ29uc3RydWN0b3JzXHJcbiAgICAgICAgcHVibGljIENvbWJvKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEJlZm9yZUNvbm5lY3RUb0xvZ2ljYWxQYXJlbnQgKz0gcGFyZW50ID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF93cmFwcGVyID0gX3Jvb3QuQXM8c2VtYW50aWNfdWkuSlF1ZXJ5PigpLmRyb3Bkb3duKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgUHJvcGVydHlDaGFuZ2VkICs9IChlLCBhcmdzKSA9PlxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChPcHRpb25zIGlzIHN0cmluZylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFNldE9wdGlvbnNGcm9tKChPcHRpb25zICsgXCJcIikuU3BsaXQoJywnKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoYXJncy5Qcm9wZXJ0eU5hbWUgPT0gXCJTZWxlY3RlZFZhbHVlXCIpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfaGlkZGVuLl9yb290LlZhbChhcmdzLk5ld1ZhbHVlICsgXCJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIFByb3BlcnR5Q2hhbmdlZCArPSAocywgZSkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGUuUHJvcGVydHlOYW1lID09IFwiSXRlbXNTb3VyY2VcInx8XHJcbiAgICAgICAgICAgICAgICAgICAgZS5Qcm9wZXJ0eU5hbWUgPT0gXCJEaXNwbGF5TWVtYmVyUGF0aFwifHxcclxuICAgICAgICAgICAgICAgICAgICBlLlByb3BlcnR5TmFtZSA9PSBcIlNlbGVjdGVkVmFsdWVQYXRoXCIpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgVHJ5VG9CaW5kKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIFB1YmxpYyBQcm9wZXJ0aWVzXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHN0cmluZyBEZWZhdWx0VGVtcGxhdGVBc1htbCB7Z2V0e3JldHVybiBcIjxkaXYgY2xhc3MgPSAndWkgc2VsZWN0aW9uIGRyb3Bkb3duJz5cIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIiAgICA8aW5wdXQgdHlwZSA9ICdoaWRkZW4nIHZhbHVlPSd7U2VsZWN0ZWRWYWx1ZX0nICB4Lk5hbWUgPSAnX2hpZGRlbicgLz5cIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIiAgICA8aSBjbGFzcyA9ICdkcm9wZG93biBpY29uJyAvPlwiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiICAgIDxkaXYgY2xhc3MgPSAnZGVmYXVsdCB0ZXh0JyA+e0RlZmF1bHRUZXh0fTwvZGl2PlwiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiICAgIDxkaXYgY2xhc3MgPSAnbWVudScgeC5OYW1lPSdfbWVudScgLz5cIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjwvZGl2PlwiO319XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIFB1YmxpYyBNZXRob2RzXHJcbiAgICAgICAgcHVibGljIHZvaWQgU2V0T3B0aW9uc0Zyb20oSUVudW1lcmFibGU8c3RyaW5nPiBvcHRpb25zKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX21lbnUuQ2xlYXJWaXN1YWxDaGlsZHMoKTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBvcHRpb24gaW4gb3B0aW9ucylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIG9wdGlvbkVsZW1lbnQgPSBuZXcgSHRtbEVsZW1lbnQoXCJkaXZcIiwgXCJpdGVtXCIpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgSW5uZXJIVE1MID0gb3B0aW9uXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5TeXN0ZW0uV2luZG93cy5GcmFtZXdvcmtFbGVtZW50RXh0ZW5zaW9ucy5BdHRyPGdsb2JhbDo6U3lzdGVtLldpbmRvd3MuSHRtbEVsZW1lbnQ+KFxyXG4gICAgICAgICAgICAgICAgb3B0aW9uRWxlbWVudCxcImRhdGEtdmFsdWVcIiwgb3B0aW9uKTtcclxuXHJcbiAgICAgICAgICAgICAgICBfbWVudS5BZGRMb2dpY2FsQ2hpbGQob3B0aW9uRWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIE1ldGhvZHNcclxuICAgICAgICB2b2lkIFRyeVRvQmluZCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoSXRlbXNTb3VyY2UgPT0gbnVsbCB8fFxyXG4gICAgICAgICAgICAgICAgRGlzcGxheU1lbWJlclBhdGggPT0gbnVsbCB8fFxyXG4gICAgICAgICAgICAgICAgU2VsZWN0ZWRWYWx1ZVBhdGggPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZW51bWVyYWJsZUl0ZW1Tb3VyY2UgPSBJdGVtc1NvdXJjZSBhcyBJRW51bWVyYWJsZTtcclxuICAgICAgICAgICAgaWYgKGVudW1lcmFibGVJdGVtU291cmNlID09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgX21lbnUuQ2xlYXJWaXN1YWxDaGlsZHMoKTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciByZWNvcmQgaW4gZW51bWVyYWJsZUl0ZW1Tb3VyY2UpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBvcHRpb25FbGVtZW50ID0gbmV3IEh0bWxFbGVtZW50KFwiZGl2XCIsIFwiaXRlbVwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgdGV4dCA9IFJlZmxlY3Rpb25IZWxwZXIuR2V0UHJvcGVydHlWYWx1ZShyZWNvcmQsIERpc3BsYXlNZW1iZXJQYXRoKSArIFwiXCI7XHJcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBSZWZsZWN0aW9uSGVscGVyLkdldFByb3BlcnR5VmFsdWUocmVjb3JkLCBTZWxlY3RlZFZhbHVlUGF0aCkgKyBcIlwiO1xyXG5cclxuICAgICAgICAgICAgICAgIG9wdGlvbkVsZW1lbnQuSW5uZXJIVE1MID0gdGV4dDtcclxuU3lzdGVtLldpbmRvd3MuRnJhbWV3b3JrRWxlbWVudEV4dGVuc2lvbnMuQXR0cjxnbG9iYWw6OlN5c3RlbS5XaW5kb3dzLkh0bWxFbGVtZW50PiggICAgICAgICAgICAgICAgb3B0aW9uRWxlbWVudCxcImRhdGEtdmFsdWVcIiwgdmFsdWUpO1xyXG5cclxuICAgICAgICAgICAgICAgIF9tZW51LkFkZExvZ2ljYWxDaGlsZChvcHRpb25FbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIHN0cmluZyBEZWZhdWx0VGV4dFxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgRGVwZW5kZW5jeVByb3BlcnR5IERlZmF1bHRUZXh0UHJvcGVydHkgPSBEZXBlbmRlbmN5UHJvcGVydHkuUmVnaXN0ZXIoXHJcbiAgICAgICAgICAgIFwiRGVmYXVsdFRleHRcIiwgdHlwZW9mKHN0cmluZyksIHR5cGVvZihDb21ibyksIG5ldyBQcm9wZXJ0eU1ldGFkYXRhKGRlZmF1bHQoc3RyaW5nKSkpO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIERlZmF1bHRUZXh0XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gKHN0cmluZykgR2V0VmFsdWUoRGVmYXVsdFRleHRQcm9wZXJ0eSk7IH1cclxuICAgICAgICAgICAgc2V0IHsgU2V0VmFsdWUoRGVmYXVsdFRleHRQcm9wZXJ0eSwgdmFsdWUpOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgLy8galF1ZXJ5IF9pY29uRWxlbWVudCwgX2RlZmF1bHRUZXh0RWxlbWVudCwgX21lbnVFbGVtZW50LCBfaGlkZGVuO1xyXG5cclxuICAgICAgICAjcmVnaW9uIG9iamVjdCBPcHRpb25zXHJcbiAgICAgICAgb2JqZWN0IF9vcHRpb25zO1xyXG5cclxuICAgICAgICBwdWJsaWMgb2JqZWN0IE9wdGlvbnNcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBfb3B0aW9uczsgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKF9vcHRpb25zICE9IHZhbHVlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIF9vcHRpb25zID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgT25Qcm9wZXJ0eUNoYW5nZWQoXCJPcHRpb25zXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBjb21ib1xyXG4gICAgICAgICNyZWdpb24gb2JqZWN0IEl0ZW1zU291cmNlXHJcbiAgICAgICAgb2JqZWN0IF9pdGVtc1NvdXJjZTtcclxuXHJcbiAgICAgICAgcHVibGljIG9iamVjdCBJdGVtc1NvdXJjZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIF9pdGVtc1NvdXJjZTsgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKF9pdGVtc1NvdXJjZSAhPSB2YWx1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBfaXRlbXNTb3VyY2UgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBPblByb3BlcnR5Q2hhbmdlZChcIkl0ZW1zU291cmNlXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBzdHJpbmcgRGlzcGxheU1lbWJlclBhdGhcclxuICAgICAgICBzdHJpbmcgX2Rpc3BsYXlNZW1iZXJQYXRoO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIERpc3BsYXlNZW1iZXJQYXRoXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gX2Rpc3BsYXlNZW1iZXJQYXRoOyB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoX2Rpc3BsYXlNZW1iZXJQYXRoICE9IHZhbHVlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kaXNwbGF5TWVtYmVyUGF0aCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIE9uUHJvcGVydHlDaGFuZ2VkKFwiRGlzcGxheU1lbWJlclBhdGhcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIHN0cmluZyBTZWxlY3RlZFZhbHVlUGF0aFxyXG4gICAgICAgIHN0cmluZyBfc2VsZWN0ZWRWYWx1ZVBhdGg7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgU2VsZWN0ZWRWYWx1ZVBhdGhcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBfc2VsZWN0ZWRWYWx1ZVBhdGg7IH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChfc2VsZWN0ZWRWYWx1ZVBhdGggIT0gdmFsdWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3NlbGVjdGVkVmFsdWVQYXRoID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgT25Qcm9wZXJ0eUNoYW5nZWQoXCJTZWxlY3RlZFZhbHVlUGF0aFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gb2JqZWN0IFNlbGVjdGVkVmFsdWVcclxuICAgICAgICBvYmplY3QgX3NlbGVjdGVkVmFsdWU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBvYmplY3QgU2VsZWN0ZWRWYWx1ZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIF9zZWxlY3RlZFZhbHVlOyB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoX3NlbGVjdGVkVmFsdWUgIT0gdmFsdWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3NlbGVjdGVkVmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBPblByb3BlcnR5Q2hhbmdlZChcIlNlbGVjdGVkVmFsdWVcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG4gICAgICAgICNlbmRyZWdpb25cclxuICAgIH1cclxufSIsInVzaW5nIFN5c3RlbS5XaW5kb3dzO1xyXG51c2luZyBTeXN0ZW0uV2luZG93cy5Db250cm9scztcclxuXHJcbm5hbWVzcGFjZSBCcmlkZ2UuQ3VzdG9tVUlNYXJrdXAuTGlicmFyaWVzLlNlbWFudGljVUlcclxue1xyXG4gICAgY2xhc3MgY29tbWVudCA6IENvbnRyb2xcclxuICAgIHtcclxuICAgICAgICAjcmVnaW9uIFB1YmxpYyBQcm9wZXJ0aWVzXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHN0cmluZyBEZWZhdWx0VGVtcGxhdGVBc1htbCB7Z2V0e3JldHVybiBcIjxkaXYgY2xhc3M9J2NvbW1lbnQnPlwiICtcclxuICAgICAgICAgICAgXCIgIDxhIGNsYXNzPSdhdmF0YXInPlwiICtcclxuICAgICAgICAgICAgXCIgICAgPGltZyBzcmM9J3tcIiArIFwiQXZhdGFySW1hZ2VVcmxcIisgXCJ9JyAvPlwiICtcclxuICAgICAgICAgICAgXCIgIDwvYT5cIiArXHJcbiAgICAgICAgICAgIFwiICA8ZGl2IGNsYXNzPSdjb250ZW50Jz5cIiArXHJcbiAgICAgICAgICAgIFwiICAgIDxhIGNsYXNzPSdhdXRob3InPntcIiArIFwiQXV0aG9yXCIrIFwifTwvYT5cIiArXHJcbiAgICAgICAgICAgIFwiICAgIDxkaXYgY2xhc3M9J21ldGFkYXRhJz5cIiArXHJcbiAgICAgICAgICAgIFwiICAgICAgPHNwYW4+e1wiICsgXCJNZXRhZGF0YVRpbWVJbmZvXCIrIFwifTwvc3Bhbj5cIiArXHJcbiAgICAgICAgICAgIFwiICAgIDwvZGl2PlwiICtcclxuICAgICAgICAgICAgXCIgICAgPGRpdiBjbGFzcz0ndGV4dCc+e1wiICsgXCJUZXh0XCIrIFwifTwvZGl2PlwiICtcclxuICAgICAgICAgICAgXCIgIDwvZGl2PlwiICtcclxuICAgICAgICAgICAgXCI8L2Rpdj5cIjt9fVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBBdmF0YXJJbWFnZVVybFByb3BlcnR5XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyByZWFkb25seSBEZXBlbmRlbmN5UHJvcGVydHkgQXZhdGFySW1hZ2VVcmxQcm9wZXJ0eSA9IERlcGVuZGVuY3lQcm9wZXJ0eS5SZWdpc3RlcihcIkF2YXRhckltYWdlVXJsXCIsIHR5cGVvZihzdHJpbmcpLCB0eXBlb2YoY29tbWVudCkpO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIEF2YXRhckltYWdlVXJsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gKHN0cmluZykgR2V0VmFsdWUoQXZhdGFySW1hZ2VVcmxQcm9wZXJ0eSk7IH1cclxuICAgICAgICAgICAgc2V0IHsgU2V0VmFsdWUoQXZhdGFySW1hZ2VVcmxQcm9wZXJ0eSwgdmFsdWUpOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBBdXRob3JQcm9wZXJ0eVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgRGVwZW5kZW5jeVByb3BlcnR5IEF1dGhvclByb3BlcnR5ID0gRGVwZW5kZW5jeVByb3BlcnR5LlJlZ2lzdGVyKFwiQXV0aG9yXCIsIHR5cGVvZihzdHJpbmcpLCB0eXBlb2YoY29tbWVudCkpO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIEF1dGhvclxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIChzdHJpbmcpIEdldFZhbHVlKEF1dGhvclByb3BlcnR5KTsgfVxyXG4gICAgICAgICAgICBzZXQgeyBTZXRWYWx1ZShBdXRob3JQcm9wZXJ0eSwgdmFsdWUpOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBNZXRhZGF0YVRpbWVJbmZvUHJvcGVydHlcclxuICAgICAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IERlcGVuZGVuY3lQcm9wZXJ0eSBNZXRhZGF0YVRpbWVJbmZvUHJvcGVydHkgPSBEZXBlbmRlbmN5UHJvcGVydHkuUmVnaXN0ZXIoXCJNZXRhZGF0YVRpbWVJbmZvXCIsIHR5cGVvZihzdHJpbmcpLCB0eXBlb2YoY29tbWVudCkpO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIE1ldGFkYXRhVGltZUluZm9cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiAoc3RyaW5nKSBHZXRWYWx1ZShNZXRhZGF0YVRpbWVJbmZvUHJvcGVydHkpOyB9XHJcbiAgICAgICAgICAgIHNldCB7IFNldFZhbHVlKE1ldGFkYXRhVGltZUluZm9Qcm9wZXJ0eSwgdmFsdWUpOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBUZXh0UHJvcGVydHlcclxuICAgICAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IERlcGVuZGVuY3lQcm9wZXJ0eSBUZXh0UHJvcGVydHkgPSBEZXBlbmRlbmN5UHJvcGVydHkuUmVnaXN0ZXIoXCJUZXh0XCIsIHR5cGVvZihzdHJpbmcpLCB0eXBlb2YoY29tbWVudCkpO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFRleHRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiAoc3RyaW5nKSBHZXRWYWx1ZShUZXh0UHJvcGVydHkpOyB9XHJcbiAgICAgICAgICAgIHNldCB7IFNldFZhbHVlKFRleHRQcm9wZXJ0eSwgdmFsdWUpOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuICAgIH1cclxufSIsInVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucztcclxudXNpbmcgU3lzdGVtLkNvbXBvbmVudE1vZGVsO1xyXG51c2luZyBTeXN0ZW0uV2luZG93cy5Db250cm9scy5QcmltaXRpdmVzO1xyXG51c2luZyBCcmlkZ2UuQ3VzdG9tVUlNYXJrdXAuQ29tbW9uO1xyXG51c2luZyBCcmlkZ2UuQ3VzdG9tVUlNYXJrdXAuTGlicmFyaWVzLlNlbWFudGljVUk7XHJcbnVzaW5nIEJyaWRnZS5DdXN0b21VSU1hcmt1cC5VSTtcclxuXHJcbm5hbWVzcGFjZSBTeXN0ZW0uV2luZG93cy5Db250cm9scy5QcmltaXRpdmVzXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBTZWxlY3RvciA6IEl0ZW1zQ29udHJvbFxyXG4gICAge1xyXG5cclxuICAgICAgICBwdWJsaWMgU2VsZWN0b3IoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYmFzZS5JdGVtQ2xpY2tlZCArPSBPbkl0ZW1DbGlja2VkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBPbkl0ZW1DbGlja2VkKG9iamVjdCBpdGVtRGF0YUNvbnRleHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoU2VsZWN0ZWRWYWx1ZVBhdGggPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgU2VsZWN0ZWRJdGVtID0gaXRlbURhdGFDb250ZXh0O1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBTZWxlY3RlZEl0ZW0gPSBSZWZsZWN0aW9uSGVscGVyLkdldFByb3BlcnR5VmFsdWUoaXRlbURhdGFDb250ZXh0LCBTZWxlY3RlZFZhbHVlUGF0aCk7XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICAjcmVnaW9uIG9iamVjdCBTZWxlY3RlZEl0ZW1cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IERlcGVuZGVuY3lQcm9wZXJ0eSBTZWxlY3RlZEl0ZW1Qcm9wZXJ0eSA9IERlcGVuZGVuY3lQcm9wZXJ0eS5SZWdpc3RlcihcclxuICAgICAgICAgICAgXCJTZWxlY3RlZEl0ZW1cIiwgdHlwZW9mKG9iamVjdCksIHR5cGVvZihTZWxlY3RvciksIG5ldyBQcm9wZXJ0eU1ldGFkYXRhKGRlZmF1bHQob2JqZWN0KSkpO1xyXG5cclxuICAgICAgICBwdWJsaWMgb2JqZWN0IFNlbGVjdGVkSXRlbVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIEdldFZhbHVlKFNlbGVjdGVkSXRlbVByb3BlcnR5KTsgfVxyXG4gICAgICAgICAgICBzZXQgeyBTZXRWYWx1ZShTZWxlY3RlZEl0ZW1Qcm9wZXJ0eSwgdmFsdWUpOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcblxyXG4gICAgICAgICNyZWdpb24gIG9iamVjdCBTZWxlY3RlZFZhbHVlXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyByZWFkb25seSBEZXBlbmRlbmN5UHJvcGVydHkgU2VsZWN0ZWRWYWx1ZVByb3BlcnR5ID0gRGVwZW5kZW5jeVByb3BlcnR5LlJlZ2lzdGVyKFxyXG4gICAgICAgICAgXCJTZWxlY3RlZFZhbHVlXCIsIHR5cGVvZihvYmplY3QpLCB0eXBlb2YoU2VsZWN0b3IpLCBuZXcgUHJvcGVydHlNZXRhZGF0YShkZWZhdWx0KG9iamVjdCkpKTtcclxuXHJcbiAgICAgICAgcHVibGljIG9iamVjdCBTZWxlY3RlZFZhbHVlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gR2V0VmFsdWUoU2VsZWN0ZWRWYWx1ZVByb3BlcnR5KTsgfVxyXG4gICAgICAgICAgICBzZXQgeyBTZXRWYWx1ZShTZWxlY3RlZFZhbHVlUHJvcGVydHksIHZhbHVlKTsgfVxyXG4gICAgICAgIH0gXHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBzdHJpbmcgU2VsZWN0ZWRWYWx1ZVBhdGhcclxuICAgICAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IERlcGVuZGVuY3lQcm9wZXJ0eSBTZWxlY3RlZFZhbHVlUGF0aFByb3BlcnR5ID0gRGVwZW5kZW5jeVByb3BlcnR5LlJlZ2lzdGVyKFxyXG4gICAgICAgICBcIlNlbGVjdGVkVmFsdWVQYXRoXCIsIHR5cGVvZihzdHJpbmcpLCB0eXBlb2YoU2VsZWN0b3IpLCBuZXcgUHJvcGVydHlNZXRhZGF0YShkZWZhdWx0KHN0cmluZykpKTtcclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBTZWxlY3RlZFZhbHVlUGF0aFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIChzdHJpbmcpR2V0VmFsdWUoU2VsZWN0ZWRWYWx1ZVBhdGhQcm9wZXJ0eSk7IH1cclxuICAgICAgICAgICAgc2V0IHsgU2V0VmFsdWUoU2VsZWN0ZWRWYWx1ZVBhdGhQcm9wZXJ0eSwgdmFsdWUpOyB9XHJcbiAgICAgICAgfSBcclxuICAgICAgICAjZW5kcmVnaW9uXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIE11bHRpU2VsZWN0b3IgOiBTZWxlY3RvclxyXG4gICAge1xyXG5cclxuICAgIH1cclxufVxyXG5cclxubmFtZXNwYWNlIFN5c3RlbS5XaW5kb3dzLkNvbnRyb2xzXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBJdGVtc0NvbnRyb2wgOiBDb250cm9sXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHN0cmluZyBEZWZhdWx0VGVtcGxhdGVBc1htbCB7Z2V0e3JldHVybiBcIjxkaXYgLz5cIjt9fVxyXG5cclxuICAgICAgICAjcmVnaW9uIENvbnN0cnVjdG9yc1xyXG4gICAgICAgIHB1YmxpYyBJdGVtc0NvbnRyb2woKSBcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFmdGVyTG9naWNhbENoaWxkQWRkICs9IEFkZFZpc3VhbENoaWxkO1xyXG5cclxuICAgICAgICAgICAgQmVmb3JlQ29ubmVjdFRvTG9naWNhbFBhcmVudCArPSBPbkJlZm9yZUNvbm5lY3RUb0xvZ2ljYWxQYXJlbnQ7XHJcblxyXG4gICAgICAgICAgICB0aGlzLk9uUHJvcGVydHlDaGFuZ2VkKFwiSXRlbXNTb3VyY2VcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbilSZVJlbmRlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBNZXRob2RzXHJcbiAgICAgICAgdm9pZCBPbkJlZm9yZUNvbm5lY3RUb0xvZ2ljYWxQYXJlbnQoRnJhbWV3b3JrRWxlbWVudCBhcmcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBSZVJlbmRlcigpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHB1YmxpYyBldmVudCBBY3Rpb248b2JqZWN0PiBJdGVtQ2xpY2tlZDtcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHZvaWQgUmFpc2VFdmVudF9JdGVtQ2xpY2tlZChvYmplY3QgaXRlbURhdGFDb250ZXh0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgSXRlbUNsaWNrZWQhPW51bGw/Z2xvYmFsOjpCcmlkZ2UuU2NyaXB0LkZyb21MYW1iZGEoKCk9Pkl0ZW1DbGlja2VkLkludm9rZShpdGVtRGF0YUNvbnRleHQpKTpudWxsO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG5cclxuXHJcbiAgICAgICAgdm9pZCBSZVJlbmRlcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBcclxuXHJcbiAgICAgICAgICAgIGlmIChJdGVtc1NvdXJjZSA9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiNpZiBJc1RyYWNlRW5hYmxlZFxyXG4gICAgICAgICAgICAgICAgVHJhY2UuT3BlcmF0aW9uV2FzQ2FuY2VsZWQoXCJSZVJlbmRlclwiLCBcIkl0ZW1zU291cmNlXCIrIFwiaXMgbnVsbC5cIik7XHJcblxyXG4jZW5kaWZcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGxpc3QgPSBJdGVtc1NvdXJjZSBhcyBJTGlzdDtcclxuICAgICAgICAgICAgaWYgKGxpc3QgPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uKFwiTXVzdGJlTGlzdDpcIiArIFwiSXRlbXNTb3VyY2VcIisgXCJASXRlbXNTb3VyY2UuVHlwZTpcIisgSXRlbXNTb3VyY2UuR2V0VHlwZSgpLkZ1bGxOYW1lKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgIENsZWFyVmlzdWFsQ2hpbGRzKCk7XHJcbiAgICAgICAgICAgIENsZWFyTG9naWNhbENoaWxkcygpO1xyXG5cclxuXHJcbiAgICAgICAgICAgIHZhciBpdGVtVGVtcGxhdGUgPSBJdGVtVGVtcGxhdGU7XHJcblxyXG4gICAgICAgICAgICB2YXIgbGVuID0gbGlzdC5Db3VudDtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGl0ZW1EYXRhID0gbGlzdFtpXTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgRnJhbWV3b3JrRWxlbWVudCBpdGVtID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGlmIChpdGVtVGVtcGxhdGUgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZmUgPSBuZXcgRnJhbWV3b3JrRWxlbWVudFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgRGF0YUNvbnRleHQgPSBpdGVtRGF0YVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIEJ1aWxkZXIuTG9hZENvbXBvbmVudChmZSwgSXRlbVRlbXBsYXRlLlJvb3QpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0gPSBmZS5HZXRMb2dpY2FsQ2hpbGRBdCgwKTtcclxuXHJcblxyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGV4dEJsb2NrID0gQnVpbGRlci5DcmVhdGU8VGV4dEJsb2NrPigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHRCbG9jay5Jbm5lckhUTUwgPSBpdGVtRGF0YSE9bnVsbD9pdGVtRGF0YS5Ub1N0cmluZygpOihzdHJpbmcpbnVsbDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbSA9IHRleHRCbG9jaztcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgICAgIGl0ZW0uT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PlxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIEl0ZW1DbGlja2VkIT1udWxsP2dsb2JhbDo6QnJpZGdlLlNjcmlwdC5Gcm9tTGFtYmRhKCgpPT5JdGVtQ2xpY2tlZC5JbnZva2UoaXRlbURhdGEpKTpudWxsO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIEFkZExvZ2ljYWxDaGlsZChpdGVtKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gb2JqZWN0IEl0ZW1zU291cmNlXHJcbiAgICAgICAgb2JqZWN0IF9pdGVtc1NvdXJjZTtcclxuXHJcbiAgICAgICAgcHVibGljIG9iamVjdCBJdGVtc1NvdXJjZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIF9pdGVtc1NvdXJjZTsgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKF9pdGVtc1NvdXJjZSAhPSB2YWx1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBfaXRlbXNTb3VyY2UgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBPblByb3BlcnR5Q2hhbmdlZChcIkl0ZW1zU291cmNlXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVGVtcGxhdGUgSXRlbVRlbXBsYXRlIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIExpc3RCb3ggOiBTZWxlY3RvclxyXG4gICAge1xyXG4gICAgfVxyXG59IiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uQ29tcG9uZW50TW9kZWw7XHJcbnVzaW5nIFN5c3RlbS5EaWFnbm9zdGljcy5Db2RlQW5hbHlzaXM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uV2luZG93cztcclxudXNpbmcgU3lzdGVtLldpbmRvd3MuQ29udHJvbHM7XHJcbnVzaW5nIFN5c3RlbS5XaW5kb3dzLkNvbnRyb2xzLlByaW1pdGl2ZXM7XHJcbnVzaW5nIEJyaWRnZS5DdXN0b21VSU1hcmt1cC5Db21tb247XHJcblxyXG5uYW1lc3BhY2UgQnJpZGdlLkN1c3RvbVVJTWFya3VwLkxpYnJhcmllcy5TZW1hbnRpY1VJXHJcbntcclxuICAgIHB1YmxpYyBlbnVtIERhdGFHcmlkQ2VsbEVkaXRvclR5cGVcclxuICAgIHtcclxuICAgICAgICBUZXh0XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIERhdGFHcmlkQ29sdW1uIDogQ29udHJvbFxyXG4gICAge1xyXG4gICAgICAgICNyZWdpb24gUHVibGljIFByb3BlcnRpZXNcclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgc3RyaW5nIERlZmF1bHRUZW1wbGF0ZUFzWG1sIHtnZXR7cmV0dXJuIFwiPHRoPntMYWJlbH08L3RoPlwiO319XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIERhdGFHcmlkQ2VsbEVkaXRvclR5cGUgRWRpdG9yVHlwZVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgRGVwZW5kZW5jeVByb3BlcnR5IEVkaXRvclR5cGVQcm9wZXJ0eSA9IERlcGVuZGVuY3lQcm9wZXJ0eS5SZWdpc3RlcihcclxuICAgICAgICAgICAgXCJFZGl0b3JUeXBlXCIsIHR5cGVvZihEYXRhR3JpZENlbGxFZGl0b3JUeXBlKSwgdHlwZW9mKERhdGFHcmlkQ29sdW1uKSwgbmV3IFByb3BlcnR5TWV0YWRhdGEoZGVmYXVsdChEYXRhR3JpZENlbGxFZGl0b3JUeXBlKSkpO1xyXG5cclxuICAgICAgICBwdWJsaWMgRGF0YUdyaWRDZWxsRWRpdG9yVHlwZSBFZGl0b3JUeXBlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gKERhdGFHcmlkQ2VsbEVkaXRvclR5cGUpIEdldFZhbHVlKEVkaXRvclR5cGVQcm9wZXJ0eSk7IH1cclxuICAgICAgICAgICAgc2V0IHsgU2V0VmFsdWUoRWRpdG9yVHlwZVByb3BlcnR5LCB2YWx1ZSk7IH1cclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIHN0cmluZyBMYWJlbFxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgRGVwZW5kZW5jeVByb3BlcnR5IExhYmVsUHJvcGVydHkgPSBEZXBlbmRlbmN5UHJvcGVydHkuUmVnaXN0ZXIoXHJcbiAgICAgICAgICAgIFwiTGFiZWxcIiwgdHlwZW9mKHN0cmluZyksIHR5cGVvZihEYXRhR3JpZENvbHVtbiksIG5ldyBQcm9wZXJ0eU1ldGFkYXRhKGRlZmF1bHQoc3RyaW5nKSkpO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIExhYmVsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gKHN0cmluZykgR2V0VmFsdWUoTGFiZWxQcm9wZXJ0eSk7IH1cclxuICAgICAgICAgICAgc2V0IHsgU2V0VmFsdWUoTGFiZWxQcm9wZXJ0eSwgdmFsdWUpOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBzdHJpbmcgTmFtZVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgRGVwZW5kZW5jeVByb3BlcnR5IE5hbWVQcm9wZXJ0eSA9IERlcGVuZGVuY3lQcm9wZXJ0eS5SZWdpc3RlcihcclxuICAgICAgICAgICAgXCJOYW1lXCIsIHR5cGVvZihzdHJpbmcpLCB0eXBlb2YoRGF0YUdyaWRDb2x1bW4pLCBuZXcgUHJvcGVydHlNZXRhZGF0YShkZWZhdWx0KHN0cmluZykpKTtcclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBOYW1lXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gKHN0cmluZykgR2V0VmFsdWUoTmFtZVByb3BlcnR5KTsgfVxyXG4gICAgICAgICAgICBzZXQgeyBTZXRWYWx1ZShOYW1lUHJvcGVydHksIHZhbHVlKTsgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcbiAgICB9XHJcblxyXG4gICAgY2xhc3MgRGF0YUdyaWQgOiBNdWx0aVNlbGVjdG9yXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHN0cmluZyBEZWZhdWx0VGVtcGxhdGVBc1htbCB7Z2V0e3JldHVybiBcIjxkaXYgIC8+XCI7fX1cclxuICAgICAgICAjcmVnaW9uIEZpZWxkc1xyXG4gICAgICAgIEZyYW1ld29ya0VsZW1lbnQgX3NlbGVjdGVkUm93O1xyXG5cclxuICAgICAgICBIdG1sRWxlbWVudCBfdGhlYWQsIF90aGVhZF9maXJzdF90ciwgX3Rib2R5O1xyXG5cclxuI3ByYWdtYSB3YXJuaW5nIGRpc2FibGUgMTY5XHJcbiAgICAgICAgb2JqZWN0IF93cmFwcGVyO1xyXG4jcHJhZ21hIHdhcm5pbmcgcmVzdG9yZSAxNjlcclxuXHJcbiAgICAgICAgc3RyaW5nIFNlbGVjdGVkUm93QmFja2dyb3VuZCA9IFwiIzI3YWU2MFwiO1xyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBDb25zdHJ1Y3RvcnNcclxuICAgICAgICBwdWJsaWMgRGF0YUdyaWQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQmVmb3JlQ29ubmVjdFRvTG9naWNhbFBhcmVudCArPSBPbkJlZm9yZUNvbm5lY3RUb0xvZ2ljYWxQYXJlbnQ7XHJcblxyXG4gICAgICAgICAgICB0aGlzLk9uUHJvcGVydHlDaGFuZ2VkKFwiQ29sdW1uTmFtZXNcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbilQYXJzZUNvbHVtbk5hbWVzKTtcclxuXHJcbiAgICAgICAgICAgIEFmdGVyQ29ubmVjdFRvTG9naWNhbFBhcmVudCArPSAoKSA9PiB7IHRoaXMuT25Qcm9wZXJ0eUNoYW5nZWQoXCJJdGVtc1NvdXJjZVwiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKVJlUmVuZGVyKTsgfTtcclxuICAgICAgICAgICAgXHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gUHVibGljIFByb3BlcnRpZXNcclxuICAgICAgICBwdWJsaWMgSUxpc3Q8RGF0YUdyaWRDb2x1bW4+IENvbHVtbnMgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIE1ldGhvZHNcclxuICAgICAgICBbU3VwcHJlc3NNZXNzYWdlKFwiUmVTaGFycGVyXCIsIFwiVW51c2VkUGFyYW1ldGVyLkxvY2FsXCIpXVxyXG4gICAgICAgIHN0YXRpYyB2b2lkIFdyYXAob2JqZWN0IG1lLCBvYmplY3Qgcm9vdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFNjcmlwdC5Xcml0ZShAXCJcclxuXHJcbnNldFRpbWVvdXQoZnVuY3Rpb24oKVxyXG57XHJcbiAgICB2YXIgb3B0aW9ucyA9IFxyXG4gICAge1xyXG4gICAgICAgIGRlc3Ryb3k6dHJ1ZSxcclxuICAgICAgICBsYW5ndWFnZTpkYXRhVGFibGVzX2xhbmd1YWdlICAgXHJcbiAgICB9O1xyXG5cclxuICAgIG1lLl93cmFwcGVyID0gcm9vdC5EYXRhVGFibGUob3B0aW9ucyk7IFxyXG5cclxufSwwKSBcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIE1hcmtTZWxlY3RlZFJvdyhGcmFtZXdvcmtFbGVtZW50IGVsZW1lbnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfc2VsZWN0ZWRSb3chPW51bGw/X3NlbGVjdGVkUm93Ll9yb290LkNzcyhcImJhY2tncm91bmRcIiwgXCJcIik6KGpRdWVyeTIualF1ZXJ5KW51bGw7XHJcblxyXG4gICAgICAgICAgICBlbGVtZW50LlJvb3QuQ3NzKFwiYmFja2dyb3VuZFwiLCBTZWxlY3RlZFJvd0JhY2tncm91bmQpO1xyXG5cclxuICAgICAgICAgICAgX3NlbGVjdGVkUm93ID0gZWxlbWVudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgT25CZWZvcmVDb25uZWN0VG9Mb2dpY2FsUGFyZW50KEZyYW1ld29ya0VsZW1lbnQgYXJnKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgUmVSZW5kZXIoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgUGFyc2VDb2x1bW5OYW1lcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBDb2x1bW5zLkNsZWFyKCk7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdmFsdWUxIGluIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8c3RyaW5nPihDb2x1bW5OYW1lcy5TcGxpdCgnLCcpLChnbG9iYWw6OlN5c3RlbS5GdW5jPHN0cmluZywgYm9vbD4pKHggPT4gIXN0cmluZy5Jc051bGxPcldoaXRlU3BhY2UoeCkpKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFyciA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8c3RyaW5nPih2YWx1ZTEuU3BsaXQoJzonKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxzdHJpbmcsIGJvb2w+KSh4ID0+ICFzdHJpbmcuSXNOdWxsT3JXaGl0ZVNwYWNlKHgpKSkuVG9BcnJheSgpO1xyXG4gICAgICAgICAgICAgICAgQ29sdW1ucy5BZGQobmV3IERhdGFHcmlkQ29sdW1uXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgTmFtZSA9IChhcnJbMF0gKyBcIlwiKS5UcmltKCksXHJcbiAgICAgICAgICAgICAgICAgICAgTGFiZWwgPSAoYXJyWzFdICsgXCJcIikuVHJpbSgpXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBSZVJlbmRlcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgaWYgKEl0ZW1zU291cmNlID09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuI2lmIElzVHJhY2VFbmFibGVkXHJcbiAgICAgICAgICAgICAgICBUcmFjZS5PcGVyYXRpb25XYXNDYW5jZWxlZChcIlJlUmVuZGVyXCIsIFwiSXRlbXNTb3VyY2VcIisgXCJpcyBudWxsLlwiKTtcclxuXHJcbiNlbmRpZlxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGxpc3QgPSBJdGVtc1NvdXJjZSBhcyBJTGlzdDtcclxuICAgICAgICAgICAgaWYgKGxpc3QgPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uKFwiTXVzdGJlTGlzdDpcIiArIFwiSXRlbXNTb3VyY2VcIisgXCJASXRlbXNTb3VyY2UuVHlwZTpcIiArIChnbG9iYWw6OkJyaWRnZS5TY3JpcHQuVG9UZW1wKFwia2V5MVwiLEl0ZW1zU291cmNlKSE9bnVsbD9nbG9iYWw6OkJyaWRnZS5TY3JpcHQuRnJvbVRlbXA8b2JqZWN0PihcImtleTFcIikuR2V0VHlwZSgpLkZ1bGxOYW1lOihzdHJpbmcpbnVsbCkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBDbGVhclZpc3VhbENoaWxkcygpO1xyXG4gICAgICAgICAgICBDbGVhckxvZ2ljYWxDaGlsZHMoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciB0YWJsZSA9IG5ldyBIdG1sRWxlbWVudChcInRhYmxlXCIsXCJ1aSBjZWxsZWQgdGFibGVcIik7XHJcblxyXG4gICAgICAgICAgICBBZGRMb2dpY2FsQ2hpbGQodGFibGUpO1xyXG5cclxuICAgICAgICAgICAgdGFibGUuQWRkVmlzdWFsQ2hpbGQoX3RoZWFkID0gbmV3IEh0bWxFbGVtZW50KFwidGhlYWRcIikpO1xyXG5cclxuICAgICAgICAgICAgX3RoZWFkLkFkZFZpc3VhbENoaWxkKF90aGVhZF9maXJzdF90ciA9IG5ldyBIdG1sRWxlbWVudChcInRyXCIpKTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBjb2x1bW5JbmZvIGluIENvbHVtbnMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF90aGVhZF9maXJzdF90ci5BZGRWaXN1YWxDaGlsZChjb2x1bW5JbmZvKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGFibGUuQWRkVmlzdWFsQ2hpbGQoX3Rib2R5ID0gbmV3IEh0bWxFbGVtZW50KFwidGJvZHlcIikpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGxlbiA9IGxpc3QuQ291bnQ7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBpdGVtRGF0YSA9IGxpc3RbaV07XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHRyID0gbmV3IEh0bWxFbGVtZW50KFwidHJcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGNvbHVtbkluZm8gaW4gQ29sdW1ucylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGQgPSBuZXcgSHRtbEVsZW1lbnQoXCJ0ZFwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNlbGxWYWx1ZSA9IFJlZmxlY3Rpb25IZWxwZXIuR2V0UHJvcGVydHlWYWx1ZShpdGVtRGF0YSwgY29sdW1uSW5mby5OYW1lKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbHVtbkluZm8uRWRpdG9yVHlwZSA9PSBEYXRhR3JpZENlbGxFZGl0b3JUeXBlLlRleHQpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgdGQuSW5uZXJIVE1MID0gY2VsbFZhbHVlIT1udWxsP2NlbGxWYWx1ZS5Ub1N0cmluZygpOihzdHJpbmcpbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEltcGxlbWVudGVkRXhjZXB0aW9uKGNvbHVtbkluZm8uRWRpdG9yVHlwZS5Ub1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vdmFyIGJpbmRpbmdJbmZvID0gbmV3IEJpbmRpbmdJbmZvXHJcbiAgICAgICAgICAgICAgICAgICAgLy97XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgU291cmNlID0gaXRlbURhdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgU291cmNlUGF0aCA9IGNvbHVtbkluZm8uTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICBCaW5kaW5nTW9kZSA9IEJpbmRpbmdNb2RlLk9uZVdheSxcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICBUYXJnZXQgPSB0ZCxcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICBUYXJnZXRQYXRoID0gbmFtZW9mKHRkLklubmVySFRNTClcclxuICAgICAgICAgICAgICAgICAgICAvL307XHJcbiAgICAgICAgICAgICAgICAgICAgLy9iaW5kaW5nSW5mby5Db25uZWN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRyLkFkZExvZ2ljYWxDaGlsZCh0ZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgX3Rib2R5LkFkZExvZ2ljYWxDaGlsZCh0cik7XHJcblxyXG4gICAgICAgICAgICAgICAgdHIuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiB7IE1hcmtTZWxlY3RlZFJvdyh0cik7IH0pKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0ci5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IHsgUmFpc2VFdmVudF9JdGVtQ2xpY2tlZChpdGVtRGF0YSk7IH0pKTtcclxuXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgIHZhciBtZSA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICBXcmFwKG1lLCB0YWJsZS5fcm9vdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBzdHJpbmcgQ29sdW1uTmFtZXNcclxuICAgICAgICBzdHJpbmcgX2NvbHVtbk5hbWVzO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIENvbHVtbk5hbWVzXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gX2NvbHVtbk5hbWVzOyB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoX2NvbHVtbk5hbWVzICE9IHZhbHVlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIF9jb2x1bW5OYW1lcyA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIE9uUHJvcGVydHlDaGFuZ2VkKFwiQ29sdW1uTmFtZXNcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgIFxyXG4gICAgXG5wcml2YXRlIElMaXN0PERhdGFHcmlkQ29sdW1uPiBfX1Byb3BlcnR5X19Jbml0aWFsaXplcl9fQ29sdW1ucz1uZXcgTGlzdDxEYXRhR3JpZENvbHVtbj4oKTt9XHJcbn0iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5XaW5kb3dzO1xyXG5cclxubmFtZXNwYWNlIEJyaWRnZS5DdXN0b21VSU1hcmt1cC5MaWJyYXJpZXMuU2VtYW50aWNVSVxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgRWxlbWVudEJhc2UgOiBIdG1sRWxlbWVudFxyXG4gICAge1xyXG4gICAgICAgICNyZWdpb24gU2l6ZVByb3BlcnR5XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyByZWFkb25seSBEZXBlbmRlbmN5UHJvcGVydHkgU2l6ZVByb3BlcnR5ID0gRGVwZW5kZW5jeVByb3BlcnR5LlJlZ2lzdGVyKFwiU2l6ZVwiLCB0eXBlb2YoU2l6ZSksIHR5cGVvZihFbGVtZW50QmFzZSksIG5ldyBQcm9wZXJ0eU1ldGFkYXRhKE9uU2l6ZUNoYW5nZWQpKTtcclxuXHJcbiAgICAgICAgcHVibGljIFNpemUgU2l6ZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIChTaXplKXRoaXNbXCJTaXplXCJdOyB9XHJcbiAgICAgICAgICAgIHNldCB7IHRoaXNbXCJTaXplXCJdID0gdmFsdWU7IH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyB2b2lkIE9uU2l6ZUNoYW5nZWQoRGVwZW5kZW5jeU9iamVjdCBkLCBEZXBlbmRlbmN5UHJvcGVydHlDaGFuZ2VkRXZlbnRBcmdzIGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbWUgPSAoRWxlbWVudEJhc2UpZDtcclxuXHJcbiAgICAgICAgICAgIHZhciBuZXdWYWx1ZSA9IChTaXplKWUuTmV3VmFsdWU7XHJcblxyXG4gICAgICAgICAgICBtZS5fcm9vdC5BZGRDbGFzcyhuZXdWYWx1ZS5Ub1N0cmluZygpLlRvTG93ZXIoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBNZXRob2RzXHJcbiAgICAgICAgcHJvdGVjdGVkIHZvaWQgQWRkQ3NzQ2xhc3NPblRydWVFbHNlUmVtb3ZlKG9iamVjdCB2YWx1ZSwgc3RyaW5nIGNzc0NsYXNzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHZhbHVlLlRvQm9vbGVhbk51bGxhYmxlKCkgPT0gdHJ1ZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX3Jvb3QuQWRkQ2xhc3MoY3NzQ2xhc3MpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBfcm9vdC5SZW1vdmVDbGFzcyhjc3NDbGFzcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBJc0NlbnRlckFsaWduZWRQcm9wZXJ0eVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgRGVwZW5kZW5jeVByb3BlcnR5IElzQ2VudGVyQWxpZ25lZFByb3BlcnR5ID0gRGVwZW5kZW5jeVByb3BlcnR5LlJlZ2lzdGVyKFwiSXNDZW50ZXJBbGlnbmVkXCIsIHR5cGVvZihib29sKSwgdHlwZW9mKEVsZW1lbnRCYXNlKSwgbmV3IFByb3BlcnR5TWV0YWRhdGEoSXNDZW50ZXJBbGlnbmVkQ2hhbmdlZCkpO1xyXG5cclxuICAgICAgICBzdGF0aWMgdm9pZCBJc0NlbnRlckFsaWduZWRDaGFuZ2VkKERlcGVuZGVuY3lPYmplY3QgZCwgRGVwZW5kZW5jeVByb3BlcnR5Q2hhbmdlZEV2ZW50QXJncyBlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgKChFbGVtZW50QmFzZSkgZCkuQWRkQ3NzQ2xhc3NPblRydWVFbHNlUmVtb3ZlKGUuTmV3VmFsdWUsIFwiY2VudGVyIGFsaWduZWRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBJc1JpZ2h0QWxpZ25lZFByb3BlcnR5XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyByZWFkb25seSBEZXBlbmRlbmN5UHJvcGVydHkgSXNSaWdodEFsaWduZWRQcm9wZXJ0eSA9IERlcGVuZGVuY3lQcm9wZXJ0eS5SZWdpc3RlcihcIklzUmlnaHRBbGlnbmVkXCIsIHR5cGVvZihib29sKSwgdHlwZW9mKEVsZW1lbnRCYXNlKSwgbmV3IFByb3BlcnR5TWV0YWRhdGEoSXNSaWdodEFsaWduZWRDaGFuZ2VkKSk7XHJcblxyXG4gICAgICAgIHN0YXRpYyB2b2lkIElzUmlnaHRBbGlnbmVkQ2hhbmdlZChEZXBlbmRlbmN5T2JqZWN0IGQsIERlcGVuZGVuY3lQcm9wZXJ0eUNoYW5nZWRFdmVudEFyZ3MgZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgICgoRWxlbWVudEJhc2UpIGQpLkFkZENzc0NsYXNzT25UcnVlRWxzZVJlbW92ZShlLk5ld1ZhbHVlLCBcInJpZ2h0IGFsaWduZWRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBBbGlnblByb3BlcnR5XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyByZWFkb25seSBEZXBlbmRlbmN5UHJvcGVydHkgQWxpZ25Qcm9wZXJ0eSA9IERlcGVuZGVuY3lQcm9wZXJ0eS5SZWdpc3RlcihcIkFsaWduXCIsIHR5cGVvZihBbGlnbiksIHR5cGVvZihFbGVtZW50QmFzZSksIG5ldyBQcm9wZXJ0eU1ldGFkYXRhKE9uQWxpZ25DaGFuZ2VkKSk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBBbGlnbiBBbGlnblxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIChBbGlnbil0aGlzW1wiQWxpZ25cIl07IH1cclxuICAgICAgICAgICAgc2V0IHsgdGhpc1tcIkFsaWduXCJdID0gdmFsdWU7IH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyB2b2lkIE9uQWxpZ25DaGFuZ2VkKERlcGVuZGVuY3lPYmplY3QgZCwgRGVwZW5kZW5jeVByb3BlcnR5Q2hhbmdlZEV2ZW50QXJncyBlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG1lID0gKEVsZW1lbnRCYXNlKWQ7XHJcblxyXG4gICAgICAgICAgICB2YXIgdmFsdWUgPSAoQWxpZ24pZS5OZXdWYWx1ZTtcclxuICAgICAgICAgICAgdmFyIGNsYXNzTmFtZSA9IHZhbHVlLlRvU3RyaW5nKCkuVG9Mb3dlcigpICsgXCIgYWxpZ25lZFwiO1xyXG5cclxuICAgICAgICAgICAgbWUuQWRkQ3NzQ2xhc3NPblRydWVFbHNlUmVtb3ZlKGUuTmV3VmFsdWUsIGNsYXNzTmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcblxyXG4gICAgICAgIHByb3RlY3RlZCB2aXJ0dWFsIHN0cmluZyBIdG1sVGFnIHtnZXR7cmV0dXJuIFwiZGl2XCI7fX1cclxuICAgICAgICBwcm90ZWN0ZWQgdmlydHVhbCBzdHJpbmcgSHRtbENsYXNzTmFtZSB7Z2V0e3JldHVybiBHZXRUeXBlKCkuTmFtZTt9fVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBJbml0RE9NKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBfcm9vdCA9IERPTS5DcmVhdGVFbGVtZW50KEh0bWxUYWcsIEh0bWxDbGFzc05hbWUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICB9XHJcblxyXG5cclxuXHJcbiAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICAgXHJcblxyXG5cclxuXHJcbn0iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5XaW5kb3dzO1xyXG51c2luZyBTeXN0ZW0uV2luZG93cy5Db250cm9scztcclxudXNpbmcgQnJpZGdlLkN1c3RvbVVJTWFya3VwLkNvbW1vbjtcclxudXNpbmcgQnJpZGdlLmpRdWVyeTI7XHJcblxyXG5uYW1lc3BhY2UgQnJpZGdlLkN1c3RvbVVJTWFya3VwLkxpYnJhcmllcy5TZW1hbnRpY1VJXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBJbnB1dFRleHQgOiBDb250cm9sXHJcbiAgICB7XHJcbiAgICAgICAgI3JlZ2lvbiBGaWVsZHNcclxuICAgICAgICAvLyBSZVNoYXJwZXIgZGlzYWJsZSBvbmNlIFVuYXNzaWduZWRGaWVsZC5HbG9iYWxcclxuICAgICAgICBwcm90ZWN0ZWQgRnJhbWV3b3JrRWxlbWVudCBfaW5wdXRFbGVtZW50O1xyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBDb25zdHJ1Y3RvcnNcclxuICAgICAgICBwdWJsaWMgSW5wdXRUZXh0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEJlZm9yZUNvbm5lY3RUb0xvZ2ljYWxQYXJlbnQgKz0gcGFyZW50ID0+IHsgQXR0YWNoRXZlbnRzKCk7IH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBQdWJsaWMgRXZlbnRzXHJcbiAgICAgICAgcHVibGljIGV2ZW50IEFjdGlvbjxqUXVlcnlLZXlib2FyZEV2ZW50PiBLZXlQcmVzcztcclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gUHVibGljIFByb3BlcnRpZXNcclxuICAgICAgICBwdWJsaWMgYm9vbCBBbGxvd09ubHlEZWNpbWFsSW5wdXRzIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBBbGxvd09ubHlOdW1lcmljSW5wdXRzIHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHN0cmluZyBEZWZhdWx0VGVtcGxhdGVBc1htbFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgICAgICAgICAgICAgIFwiPGRpdiBjbGFzcz0ndWkgaW5wdXQnPlwiICtcclxuICAgICAgICAgICAgICAgICAgICBcIiAgIDxpbnB1dCB0eXBlPSd0ZXh0JyAgeDpOYW1lID0gJ19pbnB1dEVsZW1lbnQnIC8+XCIgK1xyXG4gICAgICAgICAgICAgICAgICAgIFwiPC9kaXY+XCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIFByb3BlcnRpZXNcclxuICAgICAgICBzdHJpbmcgX3ZhbHVlIHtnZXR7cmV0dXJuIF9pbnB1dEVsZW1lbnQuX3Jvb3QuVmFsKCk7fX1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gTWV0aG9kc1xyXG4gICAgICAgIHZvaWQgQXR0YWNoRXZlbnRzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9pbnB1dEVsZW1lbnQuX3Jvb3QuRm9jdXNPdXQoKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxnbG9iYWw6OkJyaWRnZS5qUXVlcnkyLmpRdWVyeUZvY3VzRXZlbnQ+KU9uRm9jdXNPdXQpO1xyXG4gICAgICAgICAgICBfaW5wdXRFbGVtZW50Ll9yb290LktleVByZXNzKChnbG9iYWw6OlN5c3RlbS5BY3Rpb248Z2xvYmFsOjpCcmlkZ2UualF1ZXJ5Mi5qUXVlcnlLZXlib2FyZEV2ZW50PilPbktleVByZXNzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgRGlzYWJsZU5vbkRlY2ltYWxJbnB1dHMoalF1ZXJ5S2V5Ym9hcmRFdmVudCBlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGlzRG90ID0gZS5XaGljaCA9PSA0NjtcclxuXHJcbiAgICAgICAgICAgIGlmIChpc0RvdClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFscmVhZHlDb250YWluc0RvdCA9IChfdmFsdWUgKyBcIlwiKS5JbmRleE9mKCcuJykgPj0gMDtcclxuICAgICAgICAgICAgICAgIGlmIChhbHJlYWR5Q29udGFpbnNEb3QpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5QcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgRGlzYWJsZU5vbk51bWVyaWNWYWx1ZXMoZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIERpc2FibGVOb25OdW1lcmljVmFsdWVzKGpRdWVyeUtleWJvYXJkRXZlbnQgZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChlLldoaWNoICE9IDggJiYgZS5XaGljaCAhPSAwICYmIChlLldoaWNoIDwgNDggfHwgZS5XaGljaCA+IDU3KSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZS5QcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIE9uRm9jdXNPdXQoalF1ZXJ5Rm9jdXNFdmVudCBlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHZhbCA9IFN5c3RlbS5XaW5kb3dzLkZyYW1ld29ya0VsZW1lbnRFeHRlbnNpb25zLlZhbDxnbG9iYWw6OlN5c3RlbS5XaW5kb3dzLkZyYW1ld29ya0VsZW1lbnQ+KF9pbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgICAgICBpZiAoIHN0cmluZy5Jc051bGxPckVtcHR5KHZhbCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHZhbC5UcmltKCk9PVwiLlwiKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoQWxsb3dPbmx5RGVjaW1hbElucHV0cylcclxuICAgICAgICAgICAgICAgIHtcclxuU3lzdGVtLldpbmRvd3MuRnJhbWV3b3JrRWxlbWVudEV4dGVuc2lvbnMuVmFsPGdsb2JhbDo6U3lzdGVtLldpbmRvd3MuRnJhbWV3b3JrRWxlbWVudD4oICAgICAgICAgICAgICAgICAgICBfaW5wdXRFbGVtZW50LFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBUZXh0ID0gdmFsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBPbktleVByZXNzKGpRdWVyeUtleWJvYXJkRXZlbnQgZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEtleVByZXNzIT1udWxsP2dsb2JhbDo6QnJpZGdlLlNjcmlwdC5Gcm9tTGFtYmRhKCgpPT5LZXlQcmVzcy5JbnZva2UoZSkpOm51bGw7XHJcblxyXG4gICAgICAgICAgICBpZiAoQWxsb3dPbmx5RGVjaW1hbElucHV0cylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgRGlzYWJsZU5vbkRlY2ltYWxJbnB1dHMoZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChBbGxvd09ubHlOdW1lcmljSW5wdXRzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBEaXNhYmxlTm9uTnVtZXJpY1ZhbHVlcyhlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gVGV4dFByb3BlcnR5XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyByZWFkb25seSBEZXBlbmRlbmN5UHJvcGVydHkgVGV4dFByb3BlcnR5ID0gRGVwZW5kZW5jeVByb3BlcnR5LlJlZ2lzdGVyKFwiVGV4dFwiLCB0eXBlb2Yoc3RyaW5nKSwgdHlwZW9mKElucHV0VGV4dCksIG5ldyBQcm9wZXJ0eU1ldGFkYXRhKE9uVGV4dENoYW5nZWQpKTtcclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBUZXh0XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gKHN0cmluZykgR2V0VmFsdWUoVGV4dFByb3BlcnR5KTsgfVxyXG4gICAgICAgICAgICBzZXQgeyBTZXRWYWx1ZShUZXh0UHJvcGVydHksIHZhbHVlKTsgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIHZvaWQgT25UZXh0Q2hhbmdlZChEZXBlbmRlbmN5T2JqZWN0IGQsIERlcGVuZGVuY3lQcm9wZXJ0eUNoYW5nZWRFdmVudEFyZ3MgZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBtZSA9IChJbnB1dFRleHQpIGQ7XHJcblxyXG4gICAgICAgICAgICBtZS5faW5wdXRFbGVtZW50Ll9yb290LlZhbCgoc3RyaW5nKSBlLk5ld1ZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIFBsYWNlSG9sZGVyUHJvcGVydHlcclxuICAgICAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IERlcGVuZGVuY3lQcm9wZXJ0eSBQbGFjZUhvbGRlclByb3BlcnR5ID0gRGVwZW5kZW5jeVByb3BlcnR5LlJlZ2lzdGVyKFwiUGxhY2VIb2xkZXJcIiwgdHlwZW9mKHN0cmluZyksIHR5cGVvZihJbnB1dFRleHQpLCBuZXcgUHJvcGVydHlNZXRhZGF0YShPblBsYWNlSG9sZGVyQ2hhbmdlZCkpO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFBsYWNlSG9sZGVyXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gKHN0cmluZykgR2V0VmFsdWUoUGxhY2VIb2xkZXJQcm9wZXJ0eSk7IH1cclxuICAgICAgICAgICAgc2V0IHsgU2V0VmFsdWUoUGxhY2VIb2xkZXJQcm9wZXJ0eSwgdmFsdWUpOyB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgdm9pZCBPblBsYWNlSG9sZGVyQ2hhbmdlZChEZXBlbmRlbmN5T2JqZWN0IGQsIERlcGVuZGVuY3lQcm9wZXJ0eUNoYW5nZWRFdmVudEFyZ3MgZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBtZSA9IChJbnB1dFRleHQpIGQ7XHJcblN5c3RlbS5XaW5kb3dzLkZyYW1ld29ya0VsZW1lbnRFeHRlbnNpb25zLkF0dHI8Z2xvYmFsOjpTeXN0ZW0uV2luZG93cy5GcmFtZXdvcmtFbGVtZW50PihcclxuICAgICAgICAgICAgbWUuX2lucHV0RWxlbWVudCxcInBsYWNlaG9sZGVyXCIsIChzdHJpbmcpIGUuTmV3VmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gX2Nvcm5lckxhYmVsRGl2XHJcbiAgICAgICAgalF1ZXJ5IF9jb3JuZXJMYWJlbERpdjtcclxuXHJcbiAgICAgICAgdm9pZCBJbml0aWFsaXplQ29ybmVyTGFiZWxEaXYoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKF9jb3JuZXJMYWJlbERpdiA9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfY29ybmVyTGFiZWxEaXYgPSBET00uZGl2KFwidWkgY29ybmVyIGxhYmVsXCIpLkFwcGVuZFRvKF9yb290KTtcclxuICAgICAgICAgICAgICAgIERPTS5pKFwiYXN0ZXJpc2sgaWNvblwiKS5BcHBlbmRUbyhfY29ybmVyTGFiZWxEaXYpO1xyXG4gICAgICAgICAgICAgICAgX3Jvb3QuQWRkQ2xhc3MoXCJsYWJlbGVkXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIFJlbW92ZUNvcm5lckxhYmVsRGl2KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChfY29ybmVyTGFiZWxEaXYgPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBfY29ybmVyTGFiZWxEaXYuUmVtb3ZlRnJvbVBhcmVudCgpO1xyXG4gICAgICAgICAgICBfY29ybmVyTGFiZWxEaXYgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgX3Jvb3QuUmVtb3ZlQ2xhc3MoXCJsYWJlbGVkXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gSXNNYW5kYXRvcnlQcm9wZXJ0eVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgRGVwZW5kZW5jeVByb3BlcnR5IElzTWFuZGF0b3J5UHJvcGVydHkgPSBEZXBlbmRlbmN5UHJvcGVydHkuUmVnaXN0ZXIoXCJJc01hbmRhdG9yeVwiLCB0eXBlb2YoYm9vbCksIHR5cGVvZihJbnB1dFRleHQpLCBuZXcgUHJvcGVydHlNZXRhZGF0YShPbklzTWFuZGF0b3J5Q2hhbmdlZCkpO1xyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc01hbmRhdG9yeVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIEdldFZhbHVlKElzTWFuZGF0b3J5UHJvcGVydHkpLlRvQm9vbGVhbigpOyB9XHJcbiAgICAgICAgICAgIHNldCB7IFNldFZhbHVlKElzTWFuZGF0b3J5UHJvcGVydHksIHZhbHVlKTsgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIHZvaWQgT25Jc01hbmRhdG9yeUNoYW5nZWQoRGVwZW5kZW5jeU9iamVjdCBkLCBEZXBlbmRlbmN5UHJvcGVydHlDaGFuZ2VkRXZlbnRBcmdzIGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbWUgPSAoSW5wdXRUZXh0KSBkO1xyXG5cclxuICAgICAgICAgICAgaWYgKChib29sKSBlLk5ld1ZhbHVlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBtZS5Jbml0aWFsaXplQ29ybmVyTGFiZWxEaXYoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG1lLlJlbW92ZUNvcm5lckxhYmVsRGl2KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG4gICAgfVxyXG59IiwidXNpbmcgU3lzdGVtLldpbmRvd3M7XHJcbnVzaW5nIFN5c3RlbS5XaW5kb3dzLkNvbnRyb2xzO1xyXG5cclxubmFtZXNwYWNlIEJyaWRnZS5DdXN0b21VSU1hcmt1cC5MaWJyYXJpZXMuU2VtYW50aWNVSVxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgVGV4dEJsb2NrIDogQ29udHJvbFxyXG4gICAge1xyXG4gICAgICAgICNyZWdpb24gUHVibGljIFByb3BlcnRpZXNcclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgc3RyaW5nIERlZmF1bHRUZW1wbGF0ZUFzWG1sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gXCI8ZGl2IElubmVySFRNTCA9ICd7XCIgKyBcIlRleHRcIisgXCJ9JyBjc3MuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snIC8+XCI7IH1cclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIFRleHRQcm9wZXJ0eVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgRGVwZW5kZW5jeVByb3BlcnR5IFRleHRQcm9wZXJ0eSA9IERlcGVuZGVuY3lQcm9wZXJ0eS5SZWdpc3RlcihcIlRleHRcIiwgdHlwZW9mKHN0cmluZyksIHR5cGVvZihUZXh0QmxvY2spLCBuZXcgUHJvcGVydHlNZXRhZGF0YShkZWZhdWx0KHN0cmluZykpKTtcclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBUZXh0XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gKHN0cmluZykgR2V0VmFsdWUoVGV4dFByb3BlcnR5KTsgfVxyXG4gICAgICAgICAgICBzZXQgeyBTZXRWYWx1ZShUZXh0UHJvcGVydHksIHZhbHVlKTsgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcbiAgICB9XHJcbn0iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5XaW5kb3dzO1xyXG51c2luZyBTeXN0ZW0uV2luZG93cy5Db250cm9scztcclxudXNpbmcgUmV0eXBlZDtcclxuXHJcbm5hbWVzcGFjZSBCcmlkZ2UuQ3VzdG9tVUlNYXJrdXAuTGlicmFyaWVzLlNlbWFudGljVUlcclxue1xyXG4gICAgY2xhc3MgdWlfcmF0aW5nIDogQ29udHJvbFxyXG4gICAge1xyXG4gICAgICAgICNyZWdpb24gU3RhdGljIEZpZWxkc1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgRGVwZW5kZW5jeVByb3BlcnR5IEljb25Jc1N0YXJQcm9wZXJ0eSA9XHJcbiAgICAgICAgICAgIERlcGVuZGVuY3lQcm9wZXJ0eS5SZWdpc3RlcihcIkljb25Jc1N0YXJcIiwgdHlwZW9mKGJvb2wpLCB0eXBlb2YodWlfcmF0aW5nKSwgbmV3IFByb3BlcnR5TWV0YWRhdGEodHJ1ZSkpO1xyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBDb25zdHJ1Y3RvcnNcclxuICAgICAgICBwdWJsaWMgdWlfcmF0aW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEJlZm9yZUNvbm5lY3RUb0xvZ2ljYWxQYXJlbnQgKz0gcGFyZW50ID0+IHsgX3Jvb3QuQXM8c2VtYW50aWNfdWkuSlF1ZXJ5PigpLnJhdGluZygpOyB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gUHVibGljIFByb3BlcnRpZXNcclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgc3RyaW5nIERlZmF1bHRUZW1wbGF0ZUFzWG1sIHtnZXR7cmV0dXJuIFwiPGRpdiBjbGFzcz0ndWkgc3RhciByYXRpbmcnICBkYXRhLW1heC1yYXRpbmcgPSAne01heFJhdGV9JyBkYXRhLXJhdGluZyA9J3tSYXRlfScgIC8+XCI7fX1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2w/IEljb25Jc1N0YXJcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiAoYm9vbD8pIEdldFZhbHVlKEljb25Jc1N0YXJQcm9wZXJ0eSk7IH1cclxuICAgICAgICAgICAgc2V0IHsgU2V0VmFsdWUoSWNvbklzU3RhclByb3BlcnR5LCB2YWx1ZSk7IH1cclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIE1heFJhdGVcclxuICAgICAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IERlcGVuZGVuY3lQcm9wZXJ0eSBNYXhSYXRlUHJvcGVydHkgPVxyXG4gICAgICAgICAgICBEZXBlbmRlbmN5UHJvcGVydHkuUmVnaXN0ZXIoXCJNYXhSYXRlXCIsIHR5cGVvZihpbnQ/KSwgdHlwZW9mKHVpX3JhdGluZyksIENyZWF0ZUh0bWxBdHRyaWJ1dGVVcGRhdGVyKFwiZGF0YS1tYXgtcmF0aW5nXCIpKTtcclxuXHJcbiAgICAgICAgcHVibGljIGludD8gTWF4UmF0ZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIChpbnQ/KSBHZXRWYWx1ZShNYXhSYXRlUHJvcGVydHkpOyB9XHJcbiAgICAgICAgICAgIHNldCB7IFNldFZhbHVlKE1heFJhdGVQcm9wZXJ0eSwgdmFsdWUpOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBSYXRlXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyByZWFkb25seSBEZXBlbmRlbmN5UHJvcGVydHkgUmF0ZVByb3BlcnR5ID1cclxuICAgICAgICAgICAgRGVwZW5kZW5jeVByb3BlcnR5LlJlZ2lzdGVyKFwiUmF0ZVwiLCB0eXBlb2YoaW50PyksIHR5cGVvZih1aV9yYXRpbmcpLCBDcmVhdGVIdG1sQXR0cmlidXRlVXBkYXRlcihcImRhdGEtcmF0aW5nXCIpKTtcclxuXHJcbiAgICAgICAgcHVibGljIGludD8gUmF0ZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIChpbnQ/KSBHZXRWYWx1ZShSYXRlUHJvcGVydHkpOyB9XHJcbiAgICAgICAgICAgIHNldCB7IFNldFZhbHVlKFJhdGVQcm9wZXJ0eSwgdmFsdWUpOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuICAgIH1cclxufSIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uV2luZG93cztcclxudXNpbmcgU3lzdGVtLldpbmRvd3MuQ29udHJvbHM7XHJcbnVzaW5nIFJldHlwZWQ7XHJcblxyXG5uYW1lc3BhY2UgQnJpZGdlLkN1c3RvbVVJTWFya3VwLkxpYnJhcmllcy5TZW1hbnRpY1VJXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyB1aV90b3BfYXR0YWNoZWRfdGFidWxhcl9tZW51IDogQ29udHJvbFxyXG4gICAge1xyXG4gICAgICAgICNyZWdpb24gRmllbGRzXHJcbiNwcmFnbWEgd2FybmluZyBkaXNhYmxlIDY0OVxyXG4gICAgICAgIEZyYW1ld29ya0VsZW1lbnQgX2hlYWRlckNvbnRhaW5lcjtcclxuI3ByYWdtYSB3YXJuaW5nIHJlc3RvcmUgNjQ5XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIENvbnN0cnVjdG9yc1xyXG4gICAgICAgIHB1YmxpYyB1aV90b3BfYXR0YWNoZWRfdGFidWxhcl9tZW51KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFmdGVyTG9naWNhbENoaWxkQWRkICs9IE9uQWZ0ZXJBZGRDaGlsZDtcclxuICAgICAgICAgICAgQmVmb3JlQ29ubmVjdFRvTG9naWNhbFBhcmVudCArPSBPbkJlZm9yZUNvbm5lY3RUb1BhcmVudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIFB1YmxpYyBQcm9wZXJ0aWVzXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHN0cmluZyBEZWZhdWx0VGVtcGxhdGVBc1htbCB7Z2V0e3JldHVybiBcIjxkaXY+XCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCIgICAgPGRpdiB4Ok5hbWUgPSdfaGVhZGVyQ29udGFpbmVyJyAgY2xhc3MgPSAndWkgdG9wIGF0dGFjaGVkIHRhYnVsYXIgbWVudScgLz5cIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjwvZGl2PlwiO319XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIFByb3BlcnRpZXNcclxuICAgICAgICBJRW51bWVyYWJsZTxUYWJJdGVtPiBUYWJzIHtnZXR7cmV0dXJuIGZyb20gdGFiIGluIExvZ2ljYWxDaGlsZGVyZW4gc2VsZWN0IHRhYiBhcyBUYWJJdGVtO319XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIFB1YmxpYyBNZXRob2RzXHJcbiAgICAgICAgcHVibGljIHZvaWQgQWRkVGFiKFRhYkl0ZW0gdGFiSXRlbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9oZWFkZXJDb250YWluZXIuQWRkVmlzdWFsQ2hpbGQodGFiSXRlbS5faGVhZGVyRWxlbWVudCk7XHJcblxyXG4gICAgICAgICAgICBBZGRWaXN1YWxDaGlsZCh0YWJJdGVtLl9ib2R5RWxlbWVudCk7XHJcblxyXG4gICAgICAgICAgICB0YWJJdGVtLl9oZWFkZXJFbGVtZW50Ll9yb290LkNsaWNrKChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IHsgQWN0aXZhdGVUYWIodGFiSXRlbSk7IH0pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIE1ldGhvZHNcclxuICAgICAgICB2b2lkIEFjdGl2YXRlVGFiKFRhYkl0ZW0gdGFiSXRlbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB0YWIgaW4gVGFicylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGFiLklzQWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRhYkl0ZW0uSXNBY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBPbkFmdGVyQWRkQ2hpbGQoRnJhbWV3b3JrRWxlbWVudCBlbGVtZW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHRhYkl0ZW0gPSBlbGVtZW50IGFzIFRhYkl0ZW07XHJcbiAgICAgICAgICAgIGlmICh0YWJJdGVtID09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudEV4Y2VwdGlvbigpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBBZGRUYWIodGFiSXRlbSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIE9uQmVmb3JlQ29ubmVjdFRvUGFyZW50KEZyYW1ld29ya0VsZW1lbnQgcGFyZW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX3Jvb3QuQXM8c2VtYW50aWNfdWkuSlF1ZXJ5PigpLnRhYigpO1xyXG4gICAgICAgICAgICBpZiAoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Bbnk8Z2xvYmFsOjpCcmlkZ2UuQ3VzdG9tVUlNYXJrdXAuTGlicmFyaWVzLlNlbWFudGljVUkuVGFiSXRlbT4oVGFicykpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIEFjdGl2YXRlVGFiKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3RPckRlZmF1bHQ8Z2xvYmFsOjpCcmlkZ2UuQ3VzdG9tVUlNYXJrdXAuTGlicmFyaWVzLlNlbWFudGljVUkuVGFiSXRlbT4oVGFicykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuICAgIH1cclxufSIsInVzaW5nIFN5c3RlbS5XaW5kb3dzO1xyXG51c2luZyBTeXN0ZW0uV2luZG93cy5Db250cm9scztcclxudXNpbmcgQnJpZGdlLkN1c3RvbVVJTWFya3VwLkNvbW1vbjtcclxuXHJcbm5hbWVzcGFjZSBCcmlkZ2UuQ3VzdG9tVUlNYXJrdXAuTGlicmFyaWVzLnNwbGl0X2pzXHJcbntcclxuICAgIGNsYXNzIFNwbGl0UGFuZWwgOiBDb250cm9sXHJcbiAgICB7XHJcbiAgICAgICAgI3JlZ2lvbiBGaWVsZHNcclxuICAgICAgICBkeW5hbWljIF93cmFwcGVyO1xyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBDb25zdHJ1Y3RvcnNcclxuICAgICAgICBwdWJsaWMgU3BsaXRQYW5lbCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBZnRlckxvZ2ljYWxDaGlsZEFkZCArPSBBZnRlckFkZENoaWxkRWxlbWVudDtcclxuICAgICAgICAgICAgQmVmb3JlQ29ubmVjdFRvTG9naWNhbFBhcmVudCArPSBSZUluaXRpYWxpemVXcmFwcGVyO1xyXG4gICAgICAgICAgICBCZWZvcmVDb25uZWN0VG9WaXN1YWxQYXJlbnQgKz0gUmVJbml0aWFsaXplV3JhcHBlcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIFB1YmxpYyBQcm9wZXJ0aWVzXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHN0cmluZyBEZWZhdWx0VGVtcGxhdGVBc1htbCB7Z2V0e3JldHVybiBcIjxkaXY+XCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCIgICA8ZGl2IGNsYXNzPSd7Q2xhc3N9JyAvPlwiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiICAgPGRpdiBjbGFzcz0ne0NsYXNzfScgLz5cIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjwvZGl2PlwiO319XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICBGcmFtZXdvcmtFbGVtZW50IExlZnQge2dldHtyZXR1cm4gR2V0VmlzdWFsQ2hpbGRBdCgwLCAwKTt9fVxyXG4gICAgICAgIEZyYW1ld29ya0VsZW1lbnQgUmlnaHQge2dldHtyZXR1cm4gR2V0VmlzdWFsQ2hpbGRBdCgwLCAxKTt9fVxyXG4gICAgICAgICNyZWdpb24gTWV0aG9kc1xyXG4gICAgICAgIHZvaWQgQWZ0ZXJBZGRDaGlsZEVsZW1lbnQoRnJhbWV3b3JrRWxlbWVudCBlbGVtZW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKExvZ2ljYWxDaGlsZGVyZW5Db3VudCA9PSAxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBMZWZ0LkFkZFZpc3VhbENoaWxkKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgUmlnaHQuQWRkVmlzdWFsQ2hpbGQoZWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgUmVJbml0aWFsaXplV3JhcHBlcihGcmFtZXdvcmtFbGVtZW50IHBhcmVudCA9IG51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfd3JhcHBlciE9bnVsbD9fd3JhcHBlci5kZXN0cm95KCk6KGR5bmFtaWMpbnVsbDtcclxuXHJcbiAgICAgICAgICAgIF93cmFwcGVyID0gU3BsaXQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgU2V0T3JpZW50YXRpb24oT3JpZW50YXRpb24gb3JpZW50YXRpb24pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gb3JpZW50YXRpb24gPT0gT3JpZW50YXRpb24uSG9yaXpvbnRhbCA/IFwiaG9yaXpvbnRhbFwiIDogXCJ2ZXJ0aWNhbFwiO1xyXG5cclxuICAgICAgICAgICAgQ2xhc3MgPSBcInNwbGl0IHNwbGl0LVwiICsgZGlyZWN0aW9uO1xyXG5cclxuICAgICAgICAgICAgX3Jvb3QuQ2hpbGRyZW4oKS5Gb3JlYWNoKChnbG9iYWw6OlN5c3RlbS5BY3Rpb248Z2xvYmFsOjpCcmlkZ2UualF1ZXJ5Mi5qUXVlcnk+KShjID0+IGMuU2V0Q2xhc3MoQ2xhc3MpKSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoTG9naWNhbFBhcmVudCAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBSZUluaXRpYWxpemVXcmFwcGVyKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG9iamVjdCBTcGxpdCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAvLyBSZVNoYXJwZXIgZGlzYWJsZSBvbmNlIFVudXNlZFZhcmlhYmxlXHJcbiAgICAgICAgICAgIHZhciBsZWZ0ID0gTGVmdC5fcm9vdC5HZXQoMCk7XHJcbiAgICAgICAgICAgIC8vIFJlU2hhcnBlciBkaXNhYmxlIG9uY2UgVW51c2VkVmFyaWFibGVcclxuICAgICAgICAgICAgdmFyIHJpZ2h0ID0gUmlnaHQuX3Jvb3QuR2V0KDApO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFNjcmlwdC5Xcml0ZTxvYmplY3Q+KEBcIlNwbGl0KFsgbGVmdCwgcmlnaHRdLCB7IHNpemVzOls1MCw1MF0sICBkaXJlY3Rpb246dGhpcy5fZGlyZWN0aW9uIH0pO1wiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIE9yaWVudGF0aW9uUHJvcGVydHlcclxuICAgICAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IERlcGVuZGVuY3lQcm9wZXJ0eSBPcmllbnRhdGlvblByb3BlcnR5ID0gRGVwZW5kZW5jeVByb3BlcnR5LlJlZ2lzdGVyKFwiT3JpZW50YXRpb25cIiwgdHlwZW9mKE9yaWVudGF0aW9uKSwgdHlwZW9mKFNwbGl0UGFuZWwpLCBuZXcgUHJvcGVydHlNZXRhZGF0YShPbk9yaWVudGF0aW9uQ2hhbmdlZCkpO1xyXG5cclxuICAgICAgICBwdWJsaWMgT3JpZW50YXRpb24gT3JpZW50YXRpb25cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiAoT3JpZW50YXRpb24pIEdldFZhbHVlKE9yaWVudGF0aW9uUHJvcGVydHkpOyB9XHJcbiAgICAgICAgICAgIHNldCB7IFNldFZhbHVlKE9yaWVudGF0aW9uUHJvcGVydHksIHZhbHVlKTsgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIHZvaWQgT25PcmllbnRhdGlvbkNoYW5nZWQoRGVwZW5kZW5jeU9iamVjdCBkLCBEZXBlbmRlbmN5UHJvcGVydHlDaGFuZ2VkRXZlbnRBcmdzIGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbWUgPSAoU3BsaXRQYW5lbCkgZDtcclxuICAgICAgICAgICAgbWUuU2V0T3JpZW50YXRpb24oKE9yaWVudGF0aW9uKSBlLk5ld1ZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG4gICAgfVxyXG59IiwidXNpbmcgU3lzdGVtLldpbmRvd3M7XHJcbnVzaW5nIFN5c3RlbS5XaW5kb3dzLkNvbnRyb2xzO1xyXG51c2luZyBCcmlkZ2UuQ3VzdG9tVUlNYXJrdXAuVUk7XHJcblxyXG5uYW1lc3BhY2UgQnJpZGdlLkN1c3RvbVVJTWFya3VwLkxpYnJhcmllcy5Td2lwZXJcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFNsaWRlciA6IENvbnRyb2xcclxuICAgIHtcclxuICAgICAgICAjcmVnaW9uIENvbnN0cnVjdG9yc1xyXG4gICAgICAgIHB1YmxpYyBTbGlkZXIoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQmVmb3JlQ29ubmVjdFRvTG9naWNhbFBhcmVudCArPSBJbml0V3JhcHBlcjtcclxuICAgICAgICAgICAgQWZ0ZXJMb2dpY2FsQ2hpbGRBZGQgKz0gQ3JlYXRlU2xpZGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBQdWJsaWMgUHJvcGVydGllc1xyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBzdHJpbmcgRGVmYXVsdFRlbXBsYXRlQXNYbWwge2dldHtyZXR1cm4gXCI8ZGl2IGNsYXNzPSdzd2lwZXItY29udGFpbmVyJz5cIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIiAgICA8ZGl2IGNsYXNzPSdzd2lwZXItd3JhcHBlcicgLz5cIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjwvZGl2PlwiO319XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIE1ldGhvZHNcclxuICAgICAgICB2b2lkIENyZWF0ZVNsaWRlKEZyYW1ld29ya0VsZW1lbnQgZWxlbWVudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBpdGVtID0gQnVpbGRlci5DcmVhdGU8U3dpcGVySXRlbUNvbnRyb2w+KCk7XHJcbiAgICAgICAgICAgIGl0ZW0uQ29udGVudCA9IGVsZW1lbnQ7XHJcblxyXG4gICAgICAgICAgICBHZXRWaXN1YWxDaGlsZEF0KDApLkFkZFZpc3VhbENoaWxkKGl0ZW0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBJbml0V3JhcHBlcihGcmFtZXdvcmtFbGVtZW50IHBhcmVudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIC8vIFJlU2hhcnBlciBkaXNhYmxlIG9uY2UgVW51c2VkVmFyaWFibGVcclxuICAgICAgICAgICAgdmFyIGRlbGF5ID0gRGVsYXk7XHJcbiAgICAgICAgICAgIC8vIFJlU2hhcnBlciBkaXNhYmxlIG9uY2UgVW51c2VkVmFyaWFibGVcclxuICAgICAgICAgICAgdmFyIG1lID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgIFNjcmlwdC5Xcml0ZShAXCJcclxuXHJcbnNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuXHJcbiAgICBuZXcgU3dpcGVyKG1lLl9yb290LCB7XHJcbiAgICAgIHNwYWNlQmV0d2VlbjogMzAsXHJcbiAgICAgIGNlbnRlcmVkU2xpZGVzOiB0cnVlLFxyXG4gICAgICBhdXRvcGxheToge1xyXG4gICAgICAgIGRlbGF5OiBkZWxheSxcclxuICAgICAgICBkaXNhYmxlT25JbnRlcmFjdGlvbjogZmFsc2UsXHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuXHJcbn0sMCk7XHJcblxyXG5cclxuXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgIGludGVybmFsIGNsYXNzIFN3aXBlckl0ZW1Db250cm9sIDogQ29udGVudENvbnRyb2xcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgICNyZWdpb24gUHVibGljIFByb3BlcnRpZXNcclxuICAgICAgICAgICAgcHVibGljIG92ZXJyaWRlIHN0cmluZyBEZWZhdWx0VGVtcGxhdGVBc1htbCB7Z2V0e3JldHVybiBcIjxkaXYgY2xhc3M9J3N3aXBlci1zbGlkZSc+XCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiICAgIDxDb250ZW50UHJlc2VudGVyIC8+XCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiPC9kaXY+XCI7fX1cclxuICAgICAgICAgICAgI2VuZHJlZ2lvblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBpbnQgRGVsYXlcclxuICAgICAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IERlcGVuZGVuY3lQcm9wZXJ0eSBEZWxheVByb3BlcnR5ID0gRGVwZW5kZW5jeVByb3BlcnR5LlJlZ2lzdGVyKFwiRGVsYXlcIiwgdHlwZW9mKHN0cmluZyksIHR5cGVvZihTbGlkZXIpLCBuZXcgUHJvcGVydHlNZXRhZGF0YSgyMDAwKSk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgRGVsYXlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiAoaW50KSBHZXRWYWx1ZShEZWxheVByb3BlcnR5KTsgfVxyXG4gICAgICAgICAgICBzZXQgeyBTZXRWYWx1ZShEZWxheVByb3BlcnR5LCB2YWx1ZSk7IH1cclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG4gICAgfVxyXG59IiwidXNpbmcgU3lzdGVtLldpbmRvd3M7XHJcbnVzaW5nIFN5c3RlbS5XaW5kb3dzLkNvbnRyb2xzO1xyXG51c2luZyBCcmlkZ2UuQ3VzdG9tVUlNYXJrdXAuQ29tbW9uO1xyXG5cclxubmFtZXNwYWNlIEJyaWRnZS5DdXN0b21VSU1hcmt1cC5MaWJyYXJpZXMudmlld2VyanNcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFZpZXdlciA6IENvbnRyb2xcclxuICAgIHtcclxuICAgICAgICAjcmVnaW9uIEZpZWxkc1xyXG4gICAgICAgIC8vIFJlU2hhcnBlciBkaXNhYmxlIG9uY2UgVW5hc3NpZ25lZEZpZWxkLkdsb2JhbFxyXG4gICAgICAgIHB1YmxpYyBkeW5hbWljIF93cmFwcGVyO1xyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBDb25zdHJ1Y3RvcnNcclxuICAgICAgICBwdWJsaWMgVmlld2VyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEJlZm9yZUNvbm5lY3RUb0xvZ2ljYWxQYXJlbnQgKz0gSW5pdFdyYXBwZXI7XHJcbiAgICAgICAgICAgIEFmdGVyTG9naWNhbENoaWxkQWRkICs9IENyZWF0ZUltYWdlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gUHVibGljIE1ldGhvZHNcclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBJbml0RE9NKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9yb290ID0gRE9NLnVsKFwicGljdHVyZXNcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBNZXRob2RzXHJcbiAgICAgICAgdm9pZCBDcmVhdGVJbWFnZShGcmFtZXdvcmtFbGVtZW50IGVsZW1lbnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbGkgPSBuZXcgSHRtbEVsZW1lbnQoXCJsaVwiKTtcclxuICAgICAgICAgICAgbGkuQWRkVmlzdWFsQ2hpbGQoZWxlbWVudCk7XHJcbiAgICAgICAgICAgIEFkZFZpc3VhbENoaWxkKGxpKTtcclxuXHJcbiAgICAgICAgICAgIC8vIERPTS5saSgpLkFwcGVuZFRvKF9yb290KS5BcHBlbmQoZWxlbWVudC5fcm9vdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIEluaXRXcmFwcGVyKEZyYW1ld29ya0VsZW1lbnQgcGFyZW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgLy8gUmVTaGFycGVyIGRpc2FibGUgb25jZSBVbnVzZWRWYXJpYWJsZVxyXG4gICAgICAgICAgICB2YXIgcm9vdCA9IF9yb290LkdldCgwKTtcclxuICAgICAgICAgICAgLy8gUmVTaGFycGVyIGRpc2FibGUgb25jZSBVbnVzZWRWYXJpYWJsZVxyXG4gICAgICAgICAgICB2YXIgbWUgPSB0aGlzO1xyXG4gICAgICAgICAgICB2YXIgaWQgPSBiYXNlLklkO1xyXG5cclxuXHJcbiAgICAgICAgICAgIHZhciBjc3MgPSBAXCJcclxuLnBpY3R1cmVzIHtcclxuICAgICAgbWFyZ2luOiAwO1xyXG4gICAgICBwYWRkaW5nOiAwO1xyXG4gICAgICBsaXN0LXN0eWxlOiBub25lO1xyXG4gICAgICBtYXgtd2lkdGg6IDMwcmVtO1xyXG4gICAgICBkaXNwbGF5OnRhYmxlLWNlbGw7XHJcbiAgICB9XHJcblxyXG4gICAgLnBpY3R1cmVzID4gbGkge1xyXG4gICAgICBmbG9hdDogbGVmdDtcclxuICAgICAgd2lkdGg6IDMzLjMlO1xyXG4gICAgICBoZWlnaHQ6IDMzLjMlO1xyXG4gICAgICBtYXJnaW46IDAgLTFweCAtMXB4IDA7XHJcbiAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHRyYW5zcGFyZW50O1xyXG4gICAgICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gICAgfVxyXG5cclxuICAgIC5waWN0dXJlcyA+IGxpID4gaW1nIHtcclxuICAgICAgd2lkdGg6IDEwMCU7XHJcbiAgICAgIGN1cnNvcjogLXdlYmtpdC16b29tLWluO1xyXG4gICAgICBjdXJzb3I6IHpvb20taW47XHJcbiAgICB9XHJcblwiO1xyXG5cclxuICAgICAgICAgICAgU2NyaXB0LldyaXRlKEBcIlxyXG5cclxuc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG5cclxuICAgIHZhciBvcHRpb25zID0ge307XHJcbiAgICBtZS5fd3JhcHBlciA9IG5ldyBWaWV3ZXIocm9vdCwgb3B0aW9ucyk7XHJcblxyXG5cclxuXHJcblxyXG5cclxuJCggJzxzdHlsZT4gJytjc3MrJzwvc3R5bGU+JyApLmFwcGVuZFRvKCAnaGVhZCcgKTtcclxuXHJcbn0sMCk7XHJcblxyXG5cclxuXHJcblwiKTtcclxuXHJcbiAgICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG4gICAgfVxyXG59IiwidXNpbmcgU3lzdGVtLkNvbXBvbmVudE1vZGVsO1xyXG51c2luZyBTeXN0ZW0uV2luZG93cztcclxuXHJcbm5hbWVzcGFjZSBCcmlkZ2UuQ3VzdG9tVUlNYXJrdXAuTGlicmFyaWVzLlNlbWFudGljVUlcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEZpZWxkIDogQ29udGVudENvbnRyb2xcclxuICAgIHtcclxuICAgICAgICAjcmVnaW9uIENvbnN0cnVjdG9yc1xyXG4gICAgICAgIHB1YmxpYyBGaWVsZCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLk9uUHJvcGVydHlDaGFuZ2VkKFwiRXJyb3JNZXNzYWdlXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChFcnJvck1lc3NhZ2UgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBDbGFzcyA9IFwiZmllbGRcIjtcclxuICAgICAgICAgICAgICAgICAgICBFcnJvck1lc3NhZ2VWaXNpYmlsaXR5ID0gVmlzaWJpbGl0eS5Db2xsYXBzZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIENsYXNzID0gXCJmaWVsZCBlcnJvclwiO1xyXG4gICAgICAgICAgICAgICAgRXJyb3JNZXNzYWdlVmlzaWJpbGl0eSA9IFZpc2liaWxpdHkuVmlzaWJsZTtcclxuICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5PblByb3BlcnR5Q2hhbmdlZChcIkxhYmVsXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChMYWJlbCA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIExhYmVsVmlzaWJpbGl0eSA9IFZpc2liaWxpdHkuQ29sbGFwc2VkO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBMYWJlbFZpc2liaWxpdHkgPSBWaXNpYmlsaXR5LlZpc2libGU7XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIFB1YmxpYyBQcm9wZXJ0aWVzXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHN0cmluZyBEZWZhdWx0VGVtcGxhdGVBc1htbFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgICAgICAgICAgICAgIFwiPGRpdiBjbGFzcyA9ICdmaWVsZCcgb24uY2xpY2sgPSAnQ2xlYXJFcnJvck1lc3NhZ2UnID5cIiArXHJcbiAgICAgICAgICAgICAgICAgICAgXCIgICA8bGFiZWwgVmlzaWJpbGl0eSA9ICd7TGFiZWxWaXNpYmlsaXR5fSc+e0xhYmVsfTwvbGFiZWw+XCIgK1xyXG4gICAgICAgICAgICAgICAgICAgIFwiICAgPENvbnRlbnRQcmVzZW50ZXIgLz5cIiArXHJcbiAgICAgICAgICAgICAgICAgICAgXCIgICA8ZGl2IGNsYXNzID0gJ3VpIHJlZCBwb2ludGluZyBsYWJlbCB0cmFuc2l0aW9uJyBWaXNpYmlsaXR5ID0gJ3tFcnJvck1lc3NhZ2VWaXNpYmlsaXR5fSc+IHtFcnJvck1lc3NhZ2V9IDwvZGl2PlwiICtcclxuICAgICAgICAgICAgICAgICAgICBcIjwvZGl2PlwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgXHJcblxyXG4gICAgICAgICNyZWdpb24gVmlzaWJpbGl0eSBMYWJlbFZpc2JpbGl0eVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgRGVwZW5kZW5jeVByb3BlcnR5IExhYmVsVmlzaWJpbGl0eVByb3BlcnR5ID0gRGVwZW5kZW5jeVByb3BlcnR5LlJlZ2lzdGVyKFwiTGFiZWxWaXNpYmlsaXR5XCIsIHR5cGVvZihWaXNpYmlsaXR5KSwgdHlwZW9mKEZpZWxkKSwgbmV3IFByb3BlcnR5TWV0YWRhdGEoVmlzaWJpbGl0eS5Db2xsYXBzZWQpKTtcclxuXHJcbiAgICAgICAgcHVibGljIFZpc2liaWxpdHkgTGFiZWxWaXNpYmlsaXR5XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gKFZpc2liaWxpdHkpIEdldFZhbHVlKExhYmVsVmlzaWJpbGl0eVByb3BlcnR5KTsgfVxyXG4gICAgICAgICAgICBzZXQgeyBTZXRWYWx1ZShMYWJlbFZpc2liaWxpdHlQcm9wZXJ0eSwgdmFsdWUpOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBWaXNpYmlsaXR5IEVycm9yTWVzc2FnZVZpc2JpbGl0eVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgRGVwZW5kZW5jeVByb3BlcnR5IEVycm9yTWVzc2FnZVZpc2liaWxpdHlQcm9wZXJ0eSA9IERlcGVuZGVuY3lQcm9wZXJ0eS5SZWdpc3RlcihcIkVycm9yTWVzc2FnZVZpc2liaWxpdHlcIiwgdHlwZW9mKFZpc2liaWxpdHkpLCB0eXBlb2YoRmllbGQpLCBuZXcgUHJvcGVydHlNZXRhZGF0YShWaXNpYmlsaXR5LkNvbGxhcHNlZCkpO1xyXG5cclxuICAgICAgICBwdWJsaWMgVmlzaWJpbGl0eSBFcnJvck1lc3NhZ2VWaXNpYmlsaXR5XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gKFZpc2liaWxpdHkpIEdldFZhbHVlKEVycm9yTWVzc2FnZVZpc2liaWxpdHlQcm9wZXJ0eSk7IH1cclxuICAgICAgICAgICAgc2V0IHsgU2V0VmFsdWUoRXJyb3JNZXNzYWdlVmlzaWJpbGl0eVByb3BlcnR5LCB2YWx1ZSk7IH1cclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIEVycm9yTWVzc2FnZVByb3BlcnR5XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyByZWFkb25seSBEZXBlbmRlbmN5UHJvcGVydHkgRXJyb3JNZXNzYWdlUHJvcGVydHkgPSBEZXBlbmRlbmN5UHJvcGVydHkuUmVnaXN0ZXIoXCJFcnJvck1lc3NhZ2VcIiwgdHlwZW9mKHN0cmluZyksIHR5cGVvZihGaWVsZCkpO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIEVycm9yTWVzc2FnZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIChzdHJpbmcpIEdldFZhbHVlKEVycm9yTWVzc2FnZVByb3BlcnR5KTsgfVxyXG4gICAgICAgICAgICBzZXQgeyBTZXRWYWx1ZShFcnJvck1lc3NhZ2VQcm9wZXJ0eSwgdmFsdWUpOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBMYWJlbFByb3BlcnR5XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyByZWFkb25seSBEZXBlbmRlbmN5UHJvcGVydHkgTGFiZWxQcm9wZXJ0eSA9IERlcGVuZGVuY3lQcm9wZXJ0eS5SZWdpc3RlcihcIkxhYmVsXCIsIHR5cGVvZihzdHJpbmcpLCB0eXBlb2YoRmllbGQpKTtcclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBMYWJlbFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIChzdHJpbmcpIEdldFZhbHVlKExhYmVsUHJvcGVydHkpOyB9XHJcbiAgICAgICAgICAgIHNldCB7IFNldFZhbHVlKExhYmVsUHJvcGVydHksIHZhbHVlKTsgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgdm9pZCBDbGVhckVycm9yTWVzc2FnZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoRXJyb3JNZXNzYWdlICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIEVycm9yTWVzc2FnZSA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5XaW5kb3dzO1xyXG51c2luZyBTeXN0ZW0uV2luZG93cy5NYXJrdXA7XHJcbnVzaW5nIEJyaWRnZS5qUXVlcnkyO1xyXG51c2luZyBSZXR5cGVkO1xyXG5cclxubmFtZXNwYWNlIEJyaWRnZS5DdXN0b21VSU1hcmt1cC5MaWJyYXJpZXMuU2VtYW50aWNVSVxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgTW9kYWwgOiBFbGVtZW50QmFzZSwgSUFkZENoaWxkXHJcbiAgICB7XHJcbiAgICAgICAgI3JlZ2lvbiBGaWVsZHNcclxuICAgICAgICBqUXVlcnkgY29udGVudDtcclxuXHJcbiAgICAgICAgalF1ZXJ5IGhlYWRlcjtcclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gUHVibGljIE1ldGhvZHNcclxuICAgICAgICBwdWJsaWMgbmV3IHZvaWQgQWRkKEZyYW1ld29ya0VsZW1lbnQgZWxlbWVudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnRlbnQuQXBwZW5kKGVsZW1lbnQuUm9vdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBJbml0RE9NKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9yb290ID0gRE9NLmRpdihcInVpIG1vZGFsXCIpO1xyXG5cclxuICAgICAgICAgICAgaGVhZGVyID0gRE9NLmRpdihcImhlYWRlclwiKS5BcHBlbmRUbyhfcm9vdCk7XHJcblxyXG4gICAgICAgICAgICBjb250ZW50ID0gRE9NLmRpdihcImNvbnRlbnRcIikuQXBwZW5kVG8oX3Jvb3QpO1xyXG5cclxuICAgICAgICAgICAgX3Jvb3QuQXM8c2VtYW50aWNfdWkuSlF1ZXJ5PigpLm1vZGFsKHNlbWFudGljX3VpLkxpdGVyYWxzLnNob3cpO1xyXG5cclxuICAgICAgICAgICAgLy8gQmluZFByb3BlcnR5VG9Jbm5lckhUTUwobmFtZW9mKFRpdGxlKSwgaGVhZGVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIHN0cmluZyBUaXRsZVxyXG4gICAgICAgIHN0cmluZyBfdGl0bGU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgVGl0bGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBfdGl0bGU7IH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChfdGl0bGUgIT0gdmFsdWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RpdGxlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgT25Qcm9wZXJ0eUNoYW5nZWQoXCJUaXRsZVwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcbiAgICB9XHJcbn0iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5XaW5kb3dzO1xyXG5cclxubmFtZXNwYWNlIEJyaWRnZS5DdXN0b21VSU1hcmt1cC5MaWJyYXJpZXMuU2VtYW50aWNVSVxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgVGFiSXRlbSA6IENvbnRlbnRDb250cm9sXHJcbiAgICB7XHJcbiNwcmFnbWEgd2FybmluZyBkaXNhYmxlIDY0OVxyXG4gICAgICAgIGludGVybmFsIEZyYW1ld29ya0VsZW1lbnQgX2hlYWRlckVsZW1lbnQ7XHJcblxyXG4gICAgICAgIGludGVybmFsIEZyYW1ld29ya0VsZW1lbnQgX2JvZHlFbGVtZW50O1xyXG4jcHJhZ21hIHdhcm5pbmcgcmVzdG9yZSA2NDlcclxuXHJcbiAgICAgICAgI3JlZ2lvbiBQdWJsaWMgUHJvcGVydGllc1xyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBzdHJpbmcgRGVmYXVsdFRlbXBsYXRlQXNYbWwge2dldHtyZXR1cm4gXCI8ZGl2PlwiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiICAgIDxhIHg6TmFtZSA9ICdfaGVhZGVyRWxlbWVudCcgY2xhc3MgPSAnaXRlbScgZGF0YS10YWI9J3tJZH0nID57SGVhZGVyfTwvYT5cIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIiAgICA8ZGl2IHg6TmFtZSA9ICdfQm9keUVsZW1lbnQnIGNsYXNzID0gJ3VpIGJvdHRvbSBhdHRhY2hlZCB0YWIgc2VnbWVudCcgZGF0YS10YWIgPSAne0lkfScgPlwiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiICAgICAgICA8Q29udGVudFByZXNlbnRlciAvPlwiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiICAgIDwvZGl2PlwiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiPC9kaXY+XCI7fX1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgXHJcblxyXG4gICAgICAgICNyZWdpb24gSGVhZGVyUHJvcGVydHlcclxuICAgICAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IERlcGVuZGVuY3lQcm9wZXJ0eSBIZWFkZXJQcm9wZXJ0eSA9IERlcGVuZGVuY3lQcm9wZXJ0eS5SZWdpc3RlcihcIkhlYWRlclwiLCB0eXBlb2Yoc3RyaW5nKSwgdHlwZW9mKFRhYkl0ZW0pKTtcclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBIZWFkZXJcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiAoc3RyaW5nKSBHZXRWYWx1ZShIZWFkZXJQcm9wZXJ0eSk7IH1cclxuICAgICAgICAgICAgc2V0IHsgU2V0VmFsdWUoSGVhZGVyUHJvcGVydHksIHZhbHVlKTsgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gYm9vbCBJc0FjdGl2ZVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgRGVwZW5kZW5jeVByb3BlcnR5IElzQWN0aXZlUHJvcGVydHkgPSBEZXBlbmRlbmN5UHJvcGVydHkuUmVnaXN0ZXIoXHJcbiAgICAgICAgICAgIFwiSXNBY3RpdmVcIiwgdHlwZW9mKGJvb2wpLCB0eXBlb2YoVGFiSXRlbSksIG5ldyBQcm9wZXJ0eU1ldGFkYXRhKGRlZmF1bHQoYm9vbCksIE9uSXNBY3RpdmVDaGFuZ2VkKSk7XHJcblxyXG4gICAgICAgIHN0YXRpYyB2b2lkIE9uSXNBY3RpdmVDaGFuZ2VkKERlcGVuZGVuY3lPYmplY3QgZCwgRGVwZW5kZW5jeVByb3BlcnR5Q2hhbmdlZEV2ZW50QXJncyBlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHRhYkl0ZW0gPSAoVGFiSXRlbSkgZDtcclxuXHJcbiAgICAgICAgICAgIGlmIChlLk5ld1ZhbHVlLlRvQm9vbGVhbigpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0YWJJdGVtLl9oZWFkZXJFbGVtZW50LkNsYXNzID0gXCJpdGVtIGFjdGl2ZVwiO1xyXG4gICAgICAgICAgICAgICAgdGFiSXRlbS5fYm9keUVsZW1lbnQuQ2xhc3MgPSBcInVpIGJvdHRvbSBhdHRhY2hlZCB0YWIgc2VnbWVudCBhY3RpdmVcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRhYkl0ZW0uX2hlYWRlckVsZW1lbnQuQ2xhc3MgPSBcIml0ZW1cIjtcclxuICAgICAgICAgICAgICAgIHRhYkl0ZW0uX2JvZHlFbGVtZW50LkNsYXNzID0gXCJ1aSBib3R0b20gYXR0YWNoZWQgdGFiIHNlZ21lbnRcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNBY3RpdmVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiAoYm9vbCkgR2V0VmFsdWUoSXNBY3RpdmVQcm9wZXJ0eSk7IH1cclxuICAgICAgICAgICAgc2V0IHsgU2V0VmFsdWUoSXNBY3RpdmVQcm9wZXJ0eSwgdmFsdWUpOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuICAgIH1cclxufSIsInVzaW5nIFN5c3RlbS5XaW5kb3dzO1xyXG5cclxubmFtZXNwYWNlIEJyaWRnZS5DdXN0b21VSU1hcmt1cC5MaWJyYXJpZXMuU2VtYW50aWNVSVxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgVGV4dEFyZWEgOiBJbnB1dFRleHRcclxuICAgIHtcclxuICAgICAgICAjcmVnaW9uIFB1YmxpYyBQcm9wZXJ0aWVzXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHN0cmluZyBEZWZhdWx0VGVtcGxhdGVBc1htbFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgICAgICAgICAgICAgIFwiPGRpdiBjbGFzcz0ndWkgaW5wdXQnPlwiICtcclxuICAgICAgICAgICAgICAgICAgICBcIiAgIDx0ZXh0YXJlYSAvPlwiICtcclxuICAgICAgICAgICAgICAgICAgICBcIjwvZGl2PlwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBSb3dzUHJvcGVydHlcclxuICAgICAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IERlcGVuZGVuY3lQcm9wZXJ0eSBSb3dzUHJvcGVydHkgPSBEZXBlbmRlbmN5UHJvcGVydHkuUmVnaXN0ZXIoXCJSb3dzXCIsIHR5cGVvZihpbnQ/KSwgdHlwZW9mKFRleHRBcmVhKSwgbmV3IFByb3BlcnR5TWV0YWRhdGEoT25Sb3dzQ2hhbmdlZCkpO1xyXG5cclxuICAgICAgICBwdWJsaWMgaW50PyBSb3dzXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gKGludD8pIEdldFZhbHVlKFJvd3NQcm9wZXJ0eSk7IH1cclxuICAgICAgICAgICAgc2V0IHsgU2V0VmFsdWUoUm93c1Byb3BlcnR5LCB2YWx1ZSk7IH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyB2b2lkIE9uUm93c0NoYW5nZWQoRGVwZW5kZW5jeU9iamVjdCBkLCBEZXBlbmRlbmN5UHJvcGVydHlDaGFuZ2VkRXZlbnRBcmdzIGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbWUgPSAoVGV4dEFyZWEpIGQ7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGUuTmV3VmFsdWUgYXMgaW50PztcclxuICAgICAgICAgICAgaWYgKHZhbHVlLkhhc1ZhbHVlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBtZS5faW5wdXRFbGVtZW50Ll9yb290LkF0dHIoXCJyb3dzXCIsIHZhbHVlLlZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcbiAgICB9XHJcbn0iLCJuYW1lc3BhY2UgQnJpZGdlLkN1c3RvbVVJTWFya3VwLlVJXHJcbntcclxuICAgIGNsYXNzIFhtbEVkaXRvciA6IExpYnJhcmllcy5Db2RlTWlycm9yLlhtbEVkaXRvclxyXG4gICAge1xyXG4gICAgICAgICNyZWdpb24gUHVibGljIFByb3BlcnRpZXNcclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgb2JqZWN0IFNjaGVtYUluZm9cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgeG1sSW50ZWxsaXNlbnNlSW5mb3MgPSAgVHlwZUZpbmRlci5UYWdzO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIExpYnJhcmllcy5Db2RlTWlycm9yLlNjaGVtYUluZm8uQ3JlYXRlRnJvbSh4bWxJbnRlbGxpc2Vuc2VJbmZvcykuVG9Kc29uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG4gICAgfVxyXG59IiwidXNpbmcgU3lzdGVtLldpbmRvd3M7XHJcblxyXG5uYW1lc3BhY2UgQnJpZGdlLkN1c3RvbVVJTWFya3VwLkxpYnJhcmllcy5TZW1hbnRpY1VJXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBGaWVsZFN0cmluZyA6IEZpZWxkXHJcbiAgICB7XHJcbiAgICAgICAgI3JlZ2lvbiBQdWJsaWMgUHJvcGVydGllc1xyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBzdHJpbmcgRGVmYXVsdFRlbXBsYXRlQXNYbWxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm5cclxuICAgICAgICAgICAgICAgICAgICBcIjxkaXYgY2xhc3M9J2ZpZWxkJyBvbi5jbGljayA9ICdDbGVhckVycm9yTWVzc2FnZScgPlwiICtcclxuICAgICAgICAgICAgICAgICAgICBcIiAgIDxsYWJlbCBWaXNpYmlsaXR5ID0gJ3tMYWJlbFZpc2liaWxpdHl9Jz57TGFiZWx9PC9sYWJlbD5cIiArXHJcbiAgICAgICAgICAgICAgICAgICAgXCIgICA8Q29udGVudFByZXNlbnRlcj5cIiArXHJcbiAgICAgICAgICAgICAgICAgICAgXCIgICAgICAgPHRleHRCb3ggVGV4dCA9ICd7VmFsdWV9Jy8+XCIgK1xyXG4gICAgICAgICAgICAgICAgICAgIFwiICAgPC9Db250ZW50UHJlc2VudGVyPlwiICtcclxuICAgICAgICAgICAgICAgICAgICBcIiAgIDxkaXYgY2xhc3MgPSAndWkgcmVkIHBvaW50aW5nIGxhYmVsIHRyYW5zaXRpb24nIFZpc2liaWxpdHkgPSAne0Vycm9yTWVzc2FnZVZpc2liaWxpdHl9Jz4ge0Vycm9yTWVzc2FnZX0gPC9kaXY+XCIgK1xyXG4gICAgICAgICAgICAgICAgICAgIFwiPC9kaXY+XCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIHN0cmluZyBWYWx1ZVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgRGVwZW5kZW5jeVByb3BlcnR5IFZhbHVlUHJvcGVydHkgPSBEZXBlbmRlbmN5UHJvcGVydHkuUmVnaXN0ZXIoXHJcbiAgICAgICAgICAgIFwiVmFsdWVcIiwgdHlwZW9mKHN0cmluZyksIHR5cGVvZihGaWVsZFN0cmluZyksIG5ldyBQcm9wZXJ0eU1ldGFkYXRhKGRlZmF1bHQoc3RyaW5nKSkpO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFZhbHVlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gKHN0cmluZykgR2V0VmFsdWUoVmFsdWVQcm9wZXJ0eSk7IH1cclxuICAgICAgICAgICAgc2V0IHsgU2V0VmFsdWUoVmFsdWVQcm9wZXJ0eSwgdmFsdWUpOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcblxyXG4gICAgICAgXHJcbiAgICB9XHJcblxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBGaWVsZEludDMyIDogRmllbGRcclxuICAgIHtcclxuICAgICAgICAjcmVnaW9uIFB1YmxpYyBQcm9wZXJ0aWVzXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHN0cmluZyBEZWZhdWx0VGVtcGxhdGVBc1htbFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgICAgICAgICAgICAgIFwiPGRpdiBjbGFzcz0nZmllbGQnIG9uLmNsaWNrID0gJ0NsZWFyRXJyb3JNZXNzYWdlJyA+XCIgK1xyXG4gICAgICAgICAgICAgICAgICAgIFwiICAgPGxhYmVsIFZpc2liaWxpdHkgPSAne0xhYmVsVmlzaWJpbGl0eX0nPntMYWJlbH08L2xhYmVsPlwiICtcclxuICAgICAgICAgICAgICAgICAgICBcIiAgIDxDb250ZW50UHJlc2VudGVyPlwiICtcclxuICAgICAgICAgICAgICAgICAgICBcIiAgICAgICA8dGV4dEJveCBUZXh0ID0gJ3tWYWx1ZX0nIEFsbG93T25seU51bWVyaWNJbnB1dHMgPSAnVHJ1ZScgLz5cIiArXHJcbiAgICAgICAgICAgICAgICAgICAgXCIgICA8L0NvbnRlbnRQcmVzZW50ZXI+XCIgK1xyXG4gICAgICAgICAgICAgICAgICAgIFwiICAgPGRpdiBjbGFzcyA9ICd1aSByZWQgcG9pbnRpbmcgbGFiZWwgdHJhbnNpdGlvbicgVmlzaWJpbGl0eSA9ICd7RXJyb3JNZXNzYWdlVmlzaWJpbGl0eX0nPiB7RXJyb3JNZXNzYWdlfSA8L2Rpdj5cIiArXHJcbiAgICAgICAgICAgICAgICAgICAgXCI8L2Rpdj5cIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gc3RyaW5nIFZhbHVlXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyByZWFkb25seSBEZXBlbmRlbmN5UHJvcGVydHkgVmFsdWVQcm9wZXJ0eSA9IERlcGVuZGVuY3lQcm9wZXJ0eS5SZWdpc3RlcihcclxuICAgICAgICAgICAgXCJWYWx1ZVwiLCB0eXBlb2YoaW50PyksIHR5cGVvZihGaWVsZEludDMyKSwgbmV3IFByb3BlcnR5TWV0YWRhdGEoZGVmYXVsdChpbnQ/KSkpO1xyXG5cclxuICAgICAgICBwdWJsaWMgaW50PyBWYWx1ZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIChpbnQ/KUdldFZhbHVlKFZhbHVlUHJvcGVydHkpOyB9XHJcbiAgICAgICAgICAgIHNldCB7IFNldFZhbHVlKFZhbHVlUHJvcGVydHksIHZhbHVlKTsgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcbiAgICB9XHJcblxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBGaWVsZERlY2ltYWwgOiBGaWVsZFxyXG4gICAge1xyXG4gICAgICAgICNyZWdpb24gUHVibGljIFByb3BlcnRpZXNcclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgc3RyaW5nIERlZmF1bHRUZW1wbGF0ZUFzWG1sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgICAgICAgICAgICAgXCI8ZGl2IGNsYXNzPSdmaWVsZCcgb24uY2xpY2sgPSAnQ2xlYXJFcnJvck1lc3NhZ2UnID5cIiArXHJcbiAgICAgICAgICAgICAgICAgICAgXCIgICA8bGFiZWwgVmlzaWJpbGl0eSA9ICd7TGFiZWxWaXNpYmlsaXR5fSc+e0xhYmVsfTwvbGFiZWw+XCIgK1xyXG4gICAgICAgICAgICAgICAgICAgIFwiICAgPENvbnRlbnRQcmVzZW50ZXI+XCIgK1xyXG4gICAgICAgICAgICAgICAgICAgIFwiICAgICAgIDx0ZXh0Qm94IFRleHQgPSAne1ZhbHVlfScgQWxsb3dPbmx5RGVjaW1hbElucHV0cyA9ICdUcnVlJyAvPlwiICtcclxuICAgICAgICAgICAgICAgICAgICBcIiAgIDwvQ29udGVudFByZXNlbnRlcj5cIiArXHJcbiAgICAgICAgICAgICAgICAgICAgXCIgICA8ZGl2IGNsYXNzID0gJ3VpIHJlZCBwb2ludGluZyBsYWJlbCB0cmFuc2l0aW9uJyBWaXNpYmlsaXR5ID0gJ3tFcnJvck1lc3NhZ2VWaXNpYmlsaXR5fSc+IHtFcnJvck1lc3NhZ2V9IDwvZGl2PlwiICtcclxuICAgICAgICAgICAgICAgICAgICBcIjwvZGl2PlwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBkZWNpbWFsPyBWYWx1ZVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgRGVwZW5kZW5jeVByb3BlcnR5IFZhbHVlUHJvcGVydHkgPSBEZXBlbmRlbmN5UHJvcGVydHkuUmVnaXN0ZXIoXHJcbiAgICAgICAgICAgIFwiVmFsdWVcIiwgdHlwZW9mKGRlY2ltYWw/KSwgdHlwZW9mKEZpZWxkRGVjaW1hbCksIG5ldyBQcm9wZXJ0eU1ldGFkYXRhKGRlZmF1bHQoZGVjaW1hbD8pKSk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBkZWNpbWFsPyBWYWx1ZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIChkZWNpbWFsPylHZXRWYWx1ZShWYWx1ZVByb3BlcnR5KTsgfVxyXG4gICAgICAgICAgICBzZXQgeyBTZXRWYWx1ZShWYWx1ZVByb3BlcnR5LCB2YWx1ZSk7IH1cclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG4gICAgfVxyXG5cclxufSJdCn0K
